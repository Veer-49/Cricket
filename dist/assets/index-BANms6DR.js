var pT=Object.defineProperty;var mT=(t,e,n)=>e in t?pT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fh=(t,e,n)=>mT(t,typeof e!="symbol"?e+"":e,n);function gT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function vT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var z_={exports:{}},pf={},$_={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cc=Symbol.for("react.element"),yT=Symbol.for("react.portal"),xT=Symbol.for("react.fragment"),wT=Symbol.for("react.strict_mode"),_T=Symbol.for("react.profiler"),CT=Symbol.for("react.provider"),ET=Symbol.for("react.context"),ST=Symbol.for("react.forward_ref"),bT=Symbol.for("react.suspense"),AT=Symbol.for("react.memo"),NT=Symbol.for("react.lazy"),zv=Symbol.iterator;function TT(t){return t===null||typeof t!="object"?null:(t=zv&&t[zv]||t["@@iterator"],typeof t=="function"?t:null)}var G_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K_=Object.assign,X_={};function Ca(t,e,n){this.props=t,this.context=e,this.refs=X_,this.updater=n||G_}Ca.prototype.isReactComponent={};Ca.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ca.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Y_(){}Y_.prototype=Ca.prototype;function z1(t,e,n){this.props=t,this.context=e,this.refs=X_,this.updater=n||G_}var $1=z1.prototype=new Y_;$1.constructor=z1;K_($1,Ca.prototype);$1.isPureReactComponent=!0;var $v=Array.isArray,q_=Object.prototype.hasOwnProperty,G1={current:null},Q_={key:!0,ref:!0,__self:!0,__source:!0};function Z_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)q_.call(e,r)&&!Q_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Cc,type:t,key:s,ref:o,props:i,_owner:G1.current}}function IT(t,e){return{$$typeof:Cc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function K1(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cc}function kT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gv=/\/+/g;function hh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kT(""+t.key):e.toString(36)}function ku(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Cc:case yT:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+hh(o,0):r,$v(i)?(n="",t!=null&&(n=t.replace(Gv,"$&/")+"/"),ku(i,e,n,"",function(c){return c})):i!=null&&(K1(i)&&(i=IT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Gv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",$v(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+hh(s,a);o+=ku(s,e,n,l,i)}else if(l=TT(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+hh(s,a++),o+=ku(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yc(t,e,n){if(t==null)return t;var r=[],i=0;return ku(t,r,"","",function(s){return e.call(n,s,i++)}),r}function PT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gn={current:null},Pu={transition:null},RT={ReactCurrentDispatcher:gn,ReactCurrentBatchConfig:Pu,ReactCurrentOwner:G1};function J_(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Yc,forEach:function(t,e,n){Yc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yc(t,function(){e++}),e},toArray:function(t){return Yc(t,function(e){return e})||[]},only:function(t){if(!K1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Ca;ye.Fragment=xT;ye.Profiler=_T;ye.PureComponent=z1;ye.StrictMode=wT;ye.Suspense=bT;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RT;ye.act=J_;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=K_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=G1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)q_.call(e,l)&&!Q_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Cc,type:t.type,key:i,ref:s,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:ET,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:CT,_context:t},t.Consumer=t};ye.createElement=Z_;ye.createFactory=function(t){var e=Z_.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:ST,render:t}};ye.isValidElement=K1;ye.lazy=function(t){return{$$typeof:NT,_payload:{_status:-1,_result:t},_init:PT}};ye.memo=function(t,e){return{$$typeof:AT,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=Pu.transition;Pu.transition={};try{t()}finally{Pu.transition=e}};ye.unstable_act=J_;ye.useCallback=function(t,e){return gn.current.useCallback(t,e)};ye.useContext=function(t){return gn.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return gn.current.useDeferredValue(t)};ye.useEffect=function(t,e){return gn.current.useEffect(t,e)};ye.useId=function(){return gn.current.useId()};ye.useImperativeHandle=function(t,e,n){return gn.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return gn.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return gn.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return gn.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return gn.current.useReducer(t,e,n)};ye.useRef=function(t){return gn.current.useRef(t)};ye.useState=function(t){return gn.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return gn.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return gn.current.useTransition()};ye.version="18.3.1";$_.exports=ye;var b=$_.exports;const un=vT(b),OT=gT({__proto__:null,default:un},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DT=b,MT=Symbol.for("react.element"),jT=Symbol.for("react.fragment"),LT=Object.prototype.hasOwnProperty,FT=DT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BT={key:!0,ref:!0,__self:!0,__source:!0};function eC(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)LT.call(e,r)&&!BT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:MT,type:t,key:s,ref:o,props:i,_owner:FT.current}}pf.Fragment=jT;pf.jsx=eC;pf.jsxs=eC;z_.exports=pf;var u=z_.exports,j0={},tC={exports:{}},Un={},nC={exports:{}},rC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,Z){var re=V.length;V.push(Z);e:for(;0<re;){var we=re-1>>>1,_e=V[we];if(0<i(_e,Z))V[we]=Z,V[re]=_e,re=we;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var Z=V[0],re=V.pop();if(re!==Z){V[0]=re;e:for(var we=0,_e=V.length,xe=_e>>>1;we<xe;){var Xe=2*(we+1)-1,Ye=V[Xe],mt=Xe+1,Nt=V[mt];if(0>i(Ye,re))mt<_e&&0>i(Nt,Ye)?(V[we]=Nt,V[mt]=re,we=mt):(V[we]=Ye,V[Xe]=re,we=Xe);else if(mt<_e&&0>i(Nt,re))V[we]=Nt,V[mt]=re,we=mt;else break e}}return Z}function i(V,Z){var re=V.sortIndex-Z.sortIndex;return re!==0?re:V.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,h=3,p=!1,m=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(V){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=V)r(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(c)}}function _(V){if(v=!1,x(V),!m)if(n(l)!==null)m=!0,de(C);else{var Z=n(c);Z!==null&&se(_,Z.startTime-V)}}function C(V,Z){m=!1,v&&(v=!1,y(T),T=-1),p=!0;var re=h;try{for(x(Z),f=n(l);f!==null&&(!(f.expirationTime>Z)||V&&!q());){var we=f.callback;if(typeof we=="function"){f.callback=null,h=f.priorityLevel;var _e=we(f.expirationTime<=Z);Z=t.unstable_now(),typeof _e=="function"?f.callback=_e:f===n(l)&&r(l),x(Z)}else r(l);f=n(l)}if(f!==null)var xe=!0;else{var Xe=n(c);Xe!==null&&se(_,Xe.startTime-Z),xe=!1}return xe}finally{f=null,h=re,p=!1}}var E=!1,A=null,T=-1,k=5,O=-1;function q(){return!(t.unstable_now()-O<k)}function G(){if(A!==null){var V=t.unstable_now();O=V;var Z=!0;try{Z=A(!0,V)}finally{Z?D():(E=!1,A=null)}}else E=!1}var D;if(typeof g=="function")D=function(){g(G)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,ne=L.port2;L.port1.onmessage=G,D=function(){ne.postMessage(null)}}else D=function(){w(G,0)};function de(V){A=V,E||(E=!0,D())}function se(V,Z){T=w(function(){V(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,de(C))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var Z=3;break;default:Z=h}var re=h;h=Z;try{return V()}finally{h=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,Z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var re=h;h=V;try{return Z()}finally{h=re}},t.unstable_scheduleCallback=function(V,Z,re){var we=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?we+re:we):re=we,V){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=re+_e,V={id:d++,callback:Z,priorityLevel:V,startTime:re,expirationTime:_e,sortIndex:-1},re>we?(V.sortIndex=re,e(c,V),n(l)===null&&V===n(c)&&(v?(y(T),T=-1):v=!0,se(_,re-we))):(V.sortIndex=_e,e(l,V),m||p||(m=!0,de(C))),V},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(V){var Z=h;return function(){var re=h;h=Z;try{return V.apply(this,arguments)}finally{h=re}}}})(rC);nC.exports=rC;var UT=nC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT=b,Fn=UT;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iC=new Set,Ll={};function lo(t,e){Jo(t,e),Jo(t+"Capture",e)}function Jo(t,e){for(Ll[t]=e,t=0;t<e.length;t++)iC.add(e[t])}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L0=Object.prototype.hasOwnProperty,HT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kv={},Xv={};function WT(t){return L0.call(Xv,t)?!0:L0.call(Kv,t)?!1:HT.test(t)?Xv[t]=!0:(Kv[t]=!0,!1)}function zT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $T(t,e,n,r){if(e===null||typeof e>"u"||zT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kt[t]=new vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kt[e]=new vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kt[t]=new vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kt[t]=new vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kt[t]=new vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kt[t]=new vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kt[t]=new vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kt[t]=new vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kt[t]=new vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var X1=/[\-:]([a-z])/g;function Y1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(X1,Y1);Kt[e]=new vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(X1,Y1);Kt[e]=new vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(X1,Y1);Kt[e]=new vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kt[t]=new vn(t,1,!1,t.toLowerCase(),null,!1,!1)});Kt.xlinkHref=new vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kt[t]=new vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function q1(t,e,n,r){var i=Kt.hasOwnProperty(e)?Kt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($T(e,n,i,r)&&(n=null),r||i===null?WT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vi=VT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qc=Symbol.for("react.element"),_o=Symbol.for("react.portal"),Co=Symbol.for("react.fragment"),Q1=Symbol.for("react.strict_mode"),F0=Symbol.for("react.profiler"),sC=Symbol.for("react.provider"),oC=Symbol.for("react.context"),Z1=Symbol.for("react.forward_ref"),B0=Symbol.for("react.suspense"),U0=Symbol.for("react.suspense_list"),J1=Symbol.for("react.memo"),Ni=Symbol.for("react.lazy"),aC=Symbol.for("react.offscreen"),Yv=Symbol.iterator;function Fa(t){return t===null||typeof t!="object"?null:(t=Yv&&t[Yv]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,ph;function nl(t){if(ph===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ph=e&&e[1]||""}return`
`+ph+t}var mh=!1;function gh(t,e){if(!t||mh)return"";mh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{mh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nl(t):""}function GT(t){switch(t.tag){case 5:return nl(t.type);case 16:return nl("Lazy");case 13:return nl("Suspense");case 19:return nl("SuspenseList");case 0:case 2:case 15:return t=gh(t.type,!1),t;case 11:return t=gh(t.type.render,!1),t;case 1:return t=gh(t.type,!0),t;default:return""}}function V0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Co:return"Fragment";case _o:return"Portal";case F0:return"Profiler";case Q1:return"StrictMode";case B0:return"Suspense";case U0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case oC:return(t.displayName||"Context")+".Consumer";case sC:return(t._context.displayName||"Context")+".Provider";case Z1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J1:return e=t.displayName||null,e!==null?e:V0(t.type)||"Memo";case Ni:e=t._payload,t=t._init;try{return V0(t(e))}catch{}}return null}function KT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V0(e);case 8:return e===Q1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ns(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function lC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XT(t){var e=lC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qc(t){t._valueTracker||(t._valueTracker=XT(t))}function cC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=lC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ed(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function H0(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ns(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function uC(t,e){e=e.checked,e!=null&&q1(t,"checked",e,!1)}function W0(t,e){uC(t,e);var n=ns(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?z0(t,e.type,n):e.hasOwnProperty("defaultValue")&&z0(t,e.type,ns(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function z0(t,e,n){(e!=="number"||ed(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rl=Array.isArray;function Wo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ns(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(rl(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ns(n)}}function dC(t,e){var n=ns(e.value),r=ns(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zc,hC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zc=Zc||document.createElement("div"),Zc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YT=["Webkit","ms","Moz","O"];Object.keys(pl).forEach(function(t){YT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pl[e]=pl[t]})});function pC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pl.hasOwnProperty(t)&&pl[t]?(""+e).trim():e+"px"}function mC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=pC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var qT=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function K0(t,e){if(e){if(qT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function X0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y0=null;function em(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var q0=null,zo=null,$o=null;function ey(t){if(t=bc(t)){if(typeof q0!="function")throw Error(H(280));var e=t.stateNode;e&&(e=xf(e),q0(t.stateNode,t.type,e))}}function gC(t){zo?$o?$o.push(t):$o=[t]:zo=t}function vC(){if(zo){var t=zo,e=$o;if($o=zo=null,ey(t),e)for(t=0;t<e.length;t++)ey(e[t])}}function yC(t,e){return t(e)}function xC(){}var vh=!1;function wC(t,e,n){if(vh)return t(e,n);vh=!0;try{return yC(t,e,n)}finally{vh=!1,(zo!==null||$o!==null)&&(xC(),vC())}}function Bl(t,e){var n=t.stateNode;if(n===null)return null;var r=xf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Q0=!1;if(oi)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){Q0=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{Q0=!1}function QT(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ml=!1,td=null,nd=!1,Z0=null,ZT={onError:function(t){ml=!0,td=t}};function JT(t,e,n,r,i,s,o,a,l){ml=!1,td=null,QT.apply(ZT,arguments)}function eI(t,e,n,r,i,s,o,a,l){if(JT.apply(this,arguments),ml){if(ml){var c=td;ml=!1,td=null}else throw Error(H(198));nd||(nd=!0,Z0=c)}}function co(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _C(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ty(t){if(co(t)!==t)throw Error(H(188))}function tI(t){var e=t.alternate;if(!e){if(e=co(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ty(i),t;if(s===r)return ty(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function CC(t){return t=tI(t),t!==null?EC(t):null}function EC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=EC(t);if(e!==null)return e;t=t.sibling}return null}var SC=Fn.unstable_scheduleCallback,ny=Fn.unstable_cancelCallback,nI=Fn.unstable_shouldYield,rI=Fn.unstable_requestPaint,dt=Fn.unstable_now,iI=Fn.unstable_getCurrentPriorityLevel,tm=Fn.unstable_ImmediatePriority,bC=Fn.unstable_UserBlockingPriority,rd=Fn.unstable_NormalPriority,sI=Fn.unstable_LowPriority,AC=Fn.unstable_IdlePriority,mf=null,Ir=null;function oI(t){if(Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(mf,t,void 0,(t.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:cI,aI=Math.log,lI=Math.LN2;function cI(t){return t>>>=0,t===0?32:31-(aI(t)/lI|0)|0}var Jc=64,eu=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function id(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=il(a):(s&=o,s!==0&&(r=il(s)))}else o=n&~i,o!==0?r=il(o):s!==0&&(r=il(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vr(e),i=1<<n,r|=t[n],e&=~i;return r}function uI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-vr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=uI(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function J0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function NC(){var t=Jc;return Jc<<=1,!(Jc&4194240)&&(Jc=64),t}function yh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ec(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vr(e),t[e]=n}function fI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function nm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Me=0;function TC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var IC,rm,kC,PC,RC,ep=!1,tu=[],Wi=null,zi=null,$i=null,Ul=new Map,Vl=new Map,ki=[],hI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ry(t,e){switch(t){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Ul.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vl.delete(e.pointerId)}}function Ua(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=bc(e),e!==null&&rm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function pI(t,e,n,r,i){switch(e){case"focusin":return Wi=Ua(Wi,t,e,n,r,i),!0;case"dragenter":return zi=Ua(zi,t,e,n,r,i),!0;case"mouseover":return $i=Ua($i,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ul.set(s,Ua(Ul.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Vl.set(s,Ua(Vl.get(s)||null,t,e,n,r,i)),!0}return!1}function OC(t){var e=Os(t.target);if(e!==null){var n=co(e);if(n!==null){if(e=n.tag,e===13){if(e=_C(n),e!==null){t.blockedOn=e,RC(t.priority,function(){kC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ru(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Y0=r,n.target.dispatchEvent(r),Y0=null}else return e=bc(n),e!==null&&rm(e),t.blockedOn=n,!1;e.shift()}return!0}function iy(t,e,n){Ru(t)&&n.delete(e)}function mI(){ep=!1,Wi!==null&&Ru(Wi)&&(Wi=null),zi!==null&&Ru(zi)&&(zi=null),$i!==null&&Ru($i)&&($i=null),Ul.forEach(iy),Vl.forEach(iy)}function Va(t,e){t.blockedOn===e&&(t.blockedOn=null,ep||(ep=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,mI)))}function Hl(t){function e(i){return Va(i,t)}if(0<tu.length){Va(tu[0],t);for(var n=1;n<tu.length;n++){var r=tu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wi!==null&&Va(Wi,t),zi!==null&&Va(zi,t),$i!==null&&Va($i,t),Ul.forEach(e),Vl.forEach(e),n=0;n<ki.length;n++)r=ki[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ki.length&&(n=ki[0],n.blockedOn===null);)OC(n),n.blockedOn===null&&ki.shift()}var Go=vi.ReactCurrentBatchConfig,sd=!0;function gI(t,e,n,r){var i=Me,s=Go.transition;Go.transition=null;try{Me=1,im(t,e,n,r)}finally{Me=i,Go.transition=s}}function vI(t,e,n,r){var i=Me,s=Go.transition;Go.transition=null;try{Me=4,im(t,e,n,r)}finally{Me=i,Go.transition=s}}function im(t,e,n,r){if(sd){var i=tp(t,e,n,r);if(i===null)Th(t,e,r,od,n),ry(t,r);else if(pI(i,t,e,n,r))r.stopPropagation();else if(ry(t,r),e&4&&-1<hI.indexOf(t)){for(;i!==null;){var s=bc(i);if(s!==null&&IC(s),s=tp(t,e,n,r),s===null&&Th(t,e,r,od,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Th(t,e,r,null,n)}}var od=null;function tp(t,e,n,r){if(od=null,t=em(r),t=Os(t),t!==null)if(e=co(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_C(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return od=t,null}function DC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iI()){case tm:return 1;case bC:return 4;case rd:case sI:return 16;case AC:return 536870912;default:return 16}default:return 16}}var Fi=null,sm=null,Ou=null;function MC(){if(Ou)return Ou;var t,e=sm,n=e.length,r,i="value"in Fi?Fi.value:Fi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ou=i.slice(t,1<r?1-r:void 0)}function Du(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nu(){return!0}function sy(){return!1}function Vn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nu:sy,this.isPropagationStopped=sy,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),e}var Ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},om=Vn(Ea),Sc=it({},Ea,{view:0,detail:0}),yI=Vn(Sc),xh,wh,Ha,gf=it({},Sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:am,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ha&&(Ha&&t.type==="mousemove"?(xh=t.screenX-Ha.screenX,wh=t.screenY-Ha.screenY):wh=xh=0,Ha=t),xh)},movementY:function(t){return"movementY"in t?t.movementY:wh}}),oy=Vn(gf),xI=it({},gf,{dataTransfer:0}),wI=Vn(xI),_I=it({},Sc,{relatedTarget:0}),_h=Vn(_I),CI=it({},Ea,{animationName:0,elapsedTime:0,pseudoElement:0}),EI=Vn(CI),SI=it({},Ea,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bI=Vn(SI),AI=it({},Ea,{data:0}),ay=Vn(AI),NI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},II={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=II[t])?!!e[t]:!1}function am(){return kI}var PI=it({},Sc,{key:function(t){if(t.key){var e=NI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Du(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:am,charCode:function(t){return t.type==="keypress"?Du(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Du(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RI=Vn(PI),OI=it({},gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ly=Vn(OI),DI=it({},Sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:am}),MI=Vn(DI),jI=it({},Ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),LI=Vn(jI),FI=it({},gf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BI=Vn(FI),UI=[9,13,27,32],lm=oi&&"CompositionEvent"in window,gl=null;oi&&"documentMode"in document&&(gl=document.documentMode);var VI=oi&&"TextEvent"in window&&!gl,jC=oi&&(!lm||gl&&8<gl&&11>=gl),cy=" ",uy=!1;function LC(t,e){switch(t){case"keyup":return UI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Eo=!1;function HI(t,e){switch(t){case"compositionend":return FC(e);case"keypress":return e.which!==32?null:(uy=!0,cy);case"textInput":return t=e.data,t===cy&&uy?null:t;default:return null}}function WI(t,e){if(Eo)return t==="compositionend"||!lm&&LC(t,e)?(t=MC(),Ou=sm=Fi=null,Eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jC&&e.locale!=="ko"?null:e.data;default:return null}}var zI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zI[t.type]:e==="textarea"}function BC(t,e,n,r){gC(r),e=ad(e,"onChange"),0<e.length&&(n=new om("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vl=null,Wl=null;function $I(t){qC(t,0)}function vf(t){var e=Ao(t);if(cC(e))return t}function GI(t,e){if(t==="change")return e}var UC=!1;if(oi){var Ch;if(oi){var Eh="oninput"in document;if(!Eh){var fy=document.createElement("div");fy.setAttribute("oninput","return;"),Eh=typeof fy.oninput=="function"}Ch=Eh}else Ch=!1;UC=Ch&&(!document.documentMode||9<document.documentMode)}function hy(){vl&&(vl.detachEvent("onpropertychange",VC),Wl=vl=null)}function VC(t){if(t.propertyName==="value"&&vf(Wl)){var e=[];BC(e,Wl,t,em(t)),wC($I,e)}}function KI(t,e,n){t==="focusin"?(hy(),vl=e,Wl=n,vl.attachEvent("onpropertychange",VC)):t==="focusout"&&hy()}function XI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vf(Wl)}function YI(t,e){if(t==="click")return vf(e)}function qI(t,e){if(t==="input"||t==="change")return vf(e)}function QI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wr=typeof Object.is=="function"?Object.is:QI;function zl(t,e){if(wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!L0.call(e,i)||!wr(t[i],e[i]))return!1}return!0}function py(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function my(t,e){var n=py(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=py(n)}}function HC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?HC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function WC(){for(var t=window,e=ed();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ed(t.document)}return e}function cm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZI(t){var e=WC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&HC(n.ownerDocument.documentElement,n)){if(r!==null&&cm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=my(n,s);var o=my(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JI=oi&&"documentMode"in document&&11>=document.documentMode,So=null,np=null,yl=null,rp=!1;function gy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rp||So==null||So!==ed(r)||(r=So,"selectionStart"in r&&cm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yl&&zl(yl,r)||(yl=r,r=ad(np,"onSelect"),0<r.length&&(e=new om("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=So)))}function ru(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bo={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},Sh={},zC={};oi&&(zC=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function yf(t){if(Sh[t])return Sh[t];if(!bo[t])return t;var e=bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zC)return Sh[t]=e[n];return t}var $C=yf("animationend"),GC=yf("animationiteration"),KC=yf("animationstart"),XC=yf("transitionend"),YC=new Map,vy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(t,e){YC.set(t,e),lo(e,[t])}for(var bh=0;bh<vy.length;bh++){var Ah=vy[bh],e4=Ah.toLowerCase(),t4=Ah[0].toUpperCase()+Ah.slice(1);fs(e4,"on"+t4)}fs($C,"onAnimationEnd");fs(GC,"onAnimationIteration");fs(KC,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(XC,"onTransitionEnd");Jo("onMouseEnter",["mouseout","mouseover"]);Jo("onMouseLeave",["mouseout","mouseover"]);Jo("onPointerEnter",["pointerout","pointerover"]);Jo("onPointerLeave",["pointerout","pointerover"]);lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n4=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function yy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,eI(r,e,void 0,t),t.currentTarget=null}function qC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;yy(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;yy(i,a,c),s=l}}}if(nd)throw t=Z0,nd=!1,Z0=null,t}function We(t,e){var n=e[lp];n===void 0&&(n=e[lp]=new Set);var r=t+"__bubble";n.has(r)||(QC(e,t,2,!1),n.add(r))}function Nh(t,e,n){var r=0;e&&(r|=4),QC(n,t,r,e)}var iu="_reactListening"+Math.random().toString(36).slice(2);function $l(t){if(!t[iu]){t[iu]=!0,iC.forEach(function(n){n!=="selectionchange"&&(n4.has(n)||Nh(n,!1,t),Nh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[iu]||(e[iu]=!0,Nh("selectionchange",!1,e))}}function QC(t,e,n,r){switch(DC(e)){case 1:var i=gI;break;case 4:i=vI;break;default:i=im}n=i.bind(null,e,n,t),i=void 0,!Q0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Th(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Os(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}wC(function(){var c=s,d=em(n),f=[];e:{var h=YC.get(t);if(h!==void 0){var p=om,m=t;switch(t){case"keypress":if(Du(n)===0)break e;case"keydown":case"keyup":p=RI;break;case"focusin":m="focus",p=_h;break;case"focusout":m="blur",p=_h;break;case"beforeblur":case"afterblur":p=_h;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=wI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=MI;break;case $C:case GC:case KC:p=EI;break;case XC:p=LI;break;case"scroll":p=yI;break;case"wheel":p=BI;break;case"copy":case"cut":case"paste":p=bI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ly}var v=(e&4)!==0,w=!v&&t==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var g=c,x;g!==null;){x=g;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,y!==null&&(_=Bl(g,y),_!=null&&v.push(Gl(g,_,x)))),w)break;g=g.return}0<v.length&&(h=new p(h,m,null,n,d),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==Y0&&(m=n.relatedTarget||n.fromElement)&&(Os(m)||m[ai]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Os(m):null,m!==null&&(w=co(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(v=oy,_="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=ly,_="onPointerLeave",y="onPointerEnter",g="pointer"),w=p==null?h:Ao(p),x=m==null?h:Ao(m),h=new v(_,g+"leave",p,n,d),h.target=w,h.relatedTarget=x,_=null,Os(d)===c&&(v=new v(y,g+"enter",m,n,d),v.target=x,v.relatedTarget=w,_=v),w=_,p&&m)t:{for(v=p,y=m,g=0,x=v;x;x=go(x))g++;for(x=0,_=y;_;_=go(_))x++;for(;0<g-x;)v=go(v),g--;for(;0<x-g;)y=go(y),x--;for(;g--;){if(v===y||y!==null&&v===y.alternate)break t;v=go(v),y=go(y)}v=null}else v=null;p!==null&&xy(f,h,p,v,!1),m!==null&&w!==null&&xy(f,w,m,v,!0)}}e:{if(h=c?Ao(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var C=GI;else if(dy(h))if(UC)C=qI;else{C=XI;var E=KI}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=YI);if(C&&(C=C(t,c))){BC(f,C,n,d);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&z0(h,"number",h.value)}switch(E=c?Ao(c):window,t){case"focusin":(dy(E)||E.contentEditable==="true")&&(So=E,np=c,yl=null);break;case"focusout":yl=np=So=null;break;case"mousedown":rp=!0;break;case"contextmenu":case"mouseup":case"dragend":rp=!1,gy(f,n,d);break;case"selectionchange":if(JI)break;case"keydown":case"keyup":gy(f,n,d)}var A;if(lm)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Eo?LC(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(jC&&n.locale!=="ko"&&(Eo||T!=="onCompositionStart"?T==="onCompositionEnd"&&Eo&&(A=MC()):(Fi=d,sm="value"in Fi?Fi.value:Fi.textContent,Eo=!0)),E=ad(c,T),0<E.length&&(T=new ay(T,t,null,n,d),f.push({event:T,listeners:E}),A?T.data=A:(A=FC(n),A!==null&&(T.data=A)))),(A=VI?HI(t,n):WI(t,n))&&(c=ad(c,"onBeforeInput"),0<c.length&&(d=new ay("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=A))}qC(f,e)})}function Gl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ad(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Bl(t,n),s!=null&&r.unshift(Gl(t,s,i)),s=Bl(t,e),s!=null&&r.push(Gl(t,s,i))),t=t.return}return r}function go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Bl(n,s),l!=null&&o.unshift(Gl(n,l,a))):i||(l=Bl(n,s),l!=null&&o.push(Gl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var r4=/\r\n?/g,i4=/\u0000|\uFFFD/g;function wy(t){return(typeof t=="string"?t:""+t).replace(r4,`
`).replace(i4,"")}function su(t,e,n){if(e=wy(e),wy(t)!==e&&n)throw Error(H(425))}function ld(){}var ip=null,sp=null;function op(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ap=typeof setTimeout=="function"?setTimeout:void 0,s4=typeof clearTimeout=="function"?clearTimeout:void 0,_y=typeof Promise=="function"?Promise:void 0,o4=typeof queueMicrotask=="function"?queueMicrotask:typeof _y<"u"?function(t){return _y.resolve(null).then(t).catch(a4)}:ap;function a4(t){setTimeout(function(){throw t})}function Ih(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Hl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Hl(e)}function Gi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),Ar="__reactFiber$"+Sa,Kl="__reactProps$"+Sa,ai="__reactContainer$"+Sa,lp="__reactEvents$"+Sa,l4="__reactListeners$"+Sa,c4="__reactHandles$"+Sa;function Os(t){var e=t[Ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ai]||n[Ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cy(t);t!==null;){if(n=t[Ar])return n;t=Cy(t)}return e}t=n,n=t.parentNode}return null}function bc(t){return t=t[Ar]||t[ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ao(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function xf(t){return t[Kl]||null}var cp=[],No=-1;function hs(t){return{current:t}}function Ge(t){0>No||(t.current=cp[No],cp[No]=null,No--)}function Ve(t,e){No++,cp[No]=t.current,t.current=e}var rs={},nn=hs(rs),Tn=hs(!1),Ys=rs;function ea(t,e){var n=t.type.contextTypes;if(!n)return rs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function In(t){return t=t.childContextTypes,t!=null}function cd(){Ge(Tn),Ge(nn)}function Ey(t,e,n){if(nn.current!==rs)throw Error(H(168));Ve(nn,e),Ve(Tn,n)}function ZC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,KT(t)||"Unknown",i));return it({},n,r)}function ud(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rs,Ys=nn.current,Ve(nn,t),Ve(Tn,Tn.current),!0}function Sy(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=ZC(t,e,Ys),r.__reactInternalMemoizedMergedChildContext=t,Ge(Tn),Ge(nn),Ve(nn,t)):Ge(Tn),Ve(Tn,n)}var Kr=null,wf=!1,kh=!1;function JC(t){Kr===null?Kr=[t]:Kr.push(t)}function u4(t){wf=!0,JC(t)}function ps(){if(!kh&&Kr!==null){kh=!0;var t=0,e=Me;try{var n=Kr;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kr=null,wf=!1}catch(i){throw Kr!==null&&(Kr=Kr.slice(t+1)),SC(tm,ps),i}finally{Me=e,kh=!1}}return null}var To=[],Io=0,dd=null,fd=0,Gn=[],Kn=0,qs=null,Xr=1,Yr="";function bs(t,e){To[Io++]=fd,To[Io++]=dd,dd=t,fd=e}function eE(t,e,n){Gn[Kn++]=Xr,Gn[Kn++]=Yr,Gn[Kn++]=qs,qs=t;var r=Xr;t=Yr;var i=32-vr(r)-1;r&=~(1<<i),n+=1;var s=32-vr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xr=1<<32-vr(e)+i|n<<i|r,Yr=s+t}else Xr=1<<s|n<<i|r,Yr=t}function um(t){t.return!==null&&(bs(t,1),eE(t,1,0))}function dm(t){for(;t===dd;)dd=To[--Io],To[Io]=null,fd=To[--Io],To[Io]=null;for(;t===qs;)qs=Gn[--Kn],Gn[Kn]=null,Yr=Gn[--Kn],Gn[Kn]=null,Xr=Gn[--Kn],Gn[Kn]=null}var jn=null,Mn=null,Ze=!1,ur=null;function tE(t,e){var n=Xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function by(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jn=t,Mn=Gi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jn=t,Mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qs!==null?{id:Xr,overflow:Yr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jn=t,Mn=null,!0):!1;default:return!1}}function up(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dp(t){if(Ze){var e=Mn;if(e){var n=e;if(!by(t,e)){if(up(t))throw Error(H(418));e=Gi(n.nextSibling);var r=jn;e&&by(t,e)?tE(r,n):(t.flags=t.flags&-4097|2,Ze=!1,jn=t)}}else{if(up(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ze=!1,jn=t}}}function Ay(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jn=t}function ou(t){if(t!==jn)return!1;if(!Ze)return Ay(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!op(t.type,t.memoizedProps)),e&&(e=Mn)){if(up(t))throw nE(),Error(H(418));for(;e;)tE(t,e),e=Gi(e.nextSibling)}if(Ay(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mn=Gi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mn=null}}else Mn=jn?Gi(t.stateNode.nextSibling):null;return!0}function nE(){for(var t=Mn;t;)t=Gi(t.nextSibling)}function ta(){Mn=jn=null,Ze=!1}function fm(t){ur===null?ur=[t]:ur.push(t)}var d4=vi.ReactCurrentBatchConfig;function Wa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function au(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ny(t){var e=t._init;return e(t._payload)}function rE(t){function e(y,g){if(t){var x=y.deletions;x===null?(y.deletions=[g],y.flags|=16):x.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=qi(y,g),y.index=0,y.sibling=null,y}function s(y,g,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<g?(y.flags|=2,g):x):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,g,x,_){return g===null||g.tag!==6?(g=Lh(x,y.mode,_),g.return=y,g):(g=i(g,x),g.return=y,g)}function l(y,g,x,_){var C=x.type;return C===Co?d(y,g,x.props.children,_,x.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ni&&Ny(C)===g.type)?(_=i(g,x.props),_.ref=Wa(y,g,x),_.return=y,_):(_=Vu(x.type,x.key,x.props,null,y.mode,_),_.ref=Wa(y,g,x),_.return=y,_)}function c(y,g,x,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=Fh(x,y.mode,_),g.return=y,g):(g=i(g,x.children||[]),g.return=y,g)}function d(y,g,x,_,C){return g===null||g.tag!==7?(g=Ws(x,y.mode,_,C),g.return=y,g):(g=i(g,x),g.return=y,g)}function f(y,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Lh(""+g,y.mode,x),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case qc:return x=Vu(g.type,g.key,g.props,null,y.mode,x),x.ref=Wa(y,null,g),x.return=y,x;case _o:return g=Fh(g,y.mode,x),g.return=y,g;case Ni:var _=g._init;return f(y,_(g._payload),x)}if(rl(g)||Fa(g))return g=Ws(g,y.mode,x,null),g.return=y,g;au(y,g)}return null}function h(y,g,x,_){var C=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:a(y,g,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case qc:return x.key===C?l(y,g,x,_):null;case _o:return x.key===C?c(y,g,x,_):null;case Ni:return C=x._init,h(y,g,C(x._payload),_)}if(rl(x)||Fa(x))return C!==null?null:d(y,g,x,_,null);au(y,x)}return null}function p(y,g,x,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(x)||null,a(g,y,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case qc:return y=y.get(_.key===null?x:_.key)||null,l(g,y,_,C);case _o:return y=y.get(_.key===null?x:_.key)||null,c(g,y,_,C);case Ni:var E=_._init;return p(y,g,x,E(_._payload),C)}if(rl(_)||Fa(_))return y=y.get(x)||null,d(g,y,_,C,null);au(g,_)}return null}function m(y,g,x,_){for(var C=null,E=null,A=g,T=g=0,k=null;A!==null&&T<x.length;T++){A.index>T?(k=A,A=null):k=A.sibling;var O=h(y,A,x[T],_);if(O===null){A===null&&(A=k);break}t&&A&&O.alternate===null&&e(y,A),g=s(O,g,T),E===null?C=O:E.sibling=O,E=O,A=k}if(T===x.length)return n(y,A),Ze&&bs(y,T),C;if(A===null){for(;T<x.length;T++)A=f(y,x[T],_),A!==null&&(g=s(A,g,T),E===null?C=A:E.sibling=A,E=A);return Ze&&bs(y,T),C}for(A=r(y,A);T<x.length;T++)k=p(A,y,T,x[T],_),k!==null&&(t&&k.alternate!==null&&A.delete(k.key===null?T:k.key),g=s(k,g,T),E===null?C=k:E.sibling=k,E=k);return t&&A.forEach(function(q){return e(y,q)}),Ze&&bs(y,T),C}function v(y,g,x,_){var C=Fa(x);if(typeof C!="function")throw Error(H(150));if(x=C.call(x),x==null)throw Error(H(151));for(var E=C=null,A=g,T=g=0,k=null,O=x.next();A!==null&&!O.done;T++,O=x.next()){A.index>T?(k=A,A=null):k=A.sibling;var q=h(y,A,O.value,_);if(q===null){A===null&&(A=k);break}t&&A&&q.alternate===null&&e(y,A),g=s(q,g,T),E===null?C=q:E.sibling=q,E=q,A=k}if(O.done)return n(y,A),Ze&&bs(y,T),C;if(A===null){for(;!O.done;T++,O=x.next())O=f(y,O.value,_),O!==null&&(g=s(O,g,T),E===null?C=O:E.sibling=O,E=O);return Ze&&bs(y,T),C}for(A=r(y,A);!O.done;T++,O=x.next())O=p(A,y,T,O.value,_),O!==null&&(t&&O.alternate!==null&&A.delete(O.key===null?T:O.key),g=s(O,g,T),E===null?C=O:E.sibling=O,E=O);return t&&A.forEach(function(G){return e(y,G)}),Ze&&bs(y,T),C}function w(y,g,x,_){if(typeof x=="object"&&x!==null&&x.type===Co&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case qc:e:{for(var C=x.key,E=g;E!==null;){if(E.key===C){if(C=x.type,C===Co){if(E.tag===7){n(y,E.sibling),g=i(E,x.props.children),g.return=y,y=g;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ni&&Ny(C)===E.type){n(y,E.sibling),g=i(E,x.props),g.ref=Wa(y,E,x),g.return=y,y=g;break e}n(y,E);break}else e(y,E);E=E.sibling}x.type===Co?(g=Ws(x.props.children,y.mode,_,x.key),g.return=y,y=g):(_=Vu(x.type,x.key,x.props,null,y.mode,_),_.ref=Wa(y,g,x),_.return=y,y=_)}return o(y);case _o:e:{for(E=x.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(y,g.sibling),g=i(g,x.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=Fh(x,y.mode,_),g.return=y,y=g}return o(y);case Ni:return E=x._init,w(y,g,E(x._payload),_)}if(rl(x))return m(y,g,x,_);if(Fa(x))return v(y,g,x,_);au(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,x),g.return=y,y=g):(n(y,g),g=Lh(x,y.mode,_),g.return=y,y=g),o(y)):n(y,g)}return w}var na=rE(!0),iE=rE(!1),hd=hs(null),pd=null,ko=null,hm=null;function pm(){hm=ko=pd=null}function mm(t){var e=hd.current;Ge(hd),t._currentValue=e}function fp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ko(t,e){pd=t,hm=ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(An=!0),t.firstContext=null)}function er(t){var e=t._currentValue;if(hm!==t)if(t={context:t,memoizedValue:e,next:null},ko===null){if(pd===null)throw Error(H(308));ko=t,pd.dependencies={lanes:0,firstContext:t}}else ko=ko.next=t;return e}var Ds=null;function gm(t){Ds===null?Ds=[t]:Ds.push(t)}function sE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,gm(e)):(n.next=i.next,i.next=n),e.interleaved=n,li(t,r)}function li(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ti=!1;function vm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ei(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ki(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,li(t,n)}return i=r.interleaved,i===null?(e.next=e,gm(r)):(e.next=i.next,i.next=e),r.interleaved=e,li(t,n)}function Mu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nm(t,n)}}function Ty(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function md(t,e,n,r){var i=t.updateQueue;Ti=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,d=c=l=null,a=s;do{var h=a.lane,p=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(h=e,p=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){f=m.call(p,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,h=typeof m=="function"?m.call(p,f,h):m,h==null)break e;f=it({},f,h);break e;case 2:Ti=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=f):d=d.next=p,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Zs|=o,t.lanes=o,t.memoizedState=f}}function Iy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var Ac={},kr=hs(Ac),Xl=hs(Ac),Yl=hs(Ac);function Ms(t){if(t===Ac)throw Error(H(174));return t}function ym(t,e){switch(Ve(Yl,e),Ve(Xl,t),Ve(kr,Ac),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:G0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=G0(e,t)}Ge(kr),Ve(kr,e)}function ra(){Ge(kr),Ge(Xl),Ge(Yl)}function aE(t){Ms(Yl.current);var e=Ms(kr.current),n=G0(e,t.type);e!==n&&(Ve(Xl,t),Ve(kr,n))}function xm(t){Xl.current===t&&(Ge(kr),Ge(Xl))}var et=hs(0);function gd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ph=[];function wm(){for(var t=0;t<Ph.length;t++)Ph[t]._workInProgressVersionPrimary=null;Ph.length=0}var ju=vi.ReactCurrentDispatcher,Rh=vi.ReactCurrentBatchConfig,Qs=0,rt=null,yt=null,Rt=null,vd=!1,xl=!1,ql=0,f4=0;function Yt(){throw Error(H(321))}function _m(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wr(t[n],e[n]))return!1;return!0}function Cm(t,e,n,r,i,s){if(Qs=s,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ju.current=t===null||t.memoizedState===null?g4:v4,t=n(r,i),xl){s=0;do{if(xl=!1,ql=0,25<=s)throw Error(H(301));s+=1,Rt=yt=null,e.updateQueue=null,ju.current=y4,t=n(r,i)}while(xl)}if(ju.current=yd,e=yt!==null&&yt.next!==null,Qs=0,Rt=yt=rt=null,vd=!1,e)throw Error(H(300));return t}function Em(){var t=ql!==0;return ql=0,t}function Sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?rt.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function tr(){if(yt===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var e=Rt===null?rt.memoizedState:Rt.next;if(e!==null)Rt=e,yt=t;else{if(t===null)throw Error(H(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Rt===null?rt.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Ql(t,e){return typeof e=="function"?e(t):e}function Oh(t){var e=tr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=yt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Qs&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,rt.lanes|=d,Zs|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,wr(r,e.memoizedState)||(An=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,rt.lanes|=s,Zs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dh(t){var e=tr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);wr(s,e.memoizedState)||(An=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function lE(){}function cE(t,e){var n=rt,r=tr(),i=e(),s=!wr(r.memoizedState,i);if(s&&(r.memoizedState=i,An=!0),r=r.queue,Sm(fE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Zl(9,dE.bind(null,n,r,i,e),void 0,null),jt===null)throw Error(H(349));Qs&30||uE(n,e,i)}return i}function uE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dE(t,e,n,r){e.value=n,e.getSnapshot=r,hE(e)&&pE(t)}function fE(t,e,n){return n(function(){hE(e)&&pE(t)})}function hE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wr(t,n)}catch{return!0}}function pE(t){var e=li(t,1);e!==null&&yr(e,t,1,-1)}function ky(t){var e=Sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ql,lastRenderedState:t},e.queue=t,t=t.dispatch=m4.bind(null,rt,t),[e.memoizedState,t]}function Zl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function mE(){return tr().memoizedState}function Lu(t,e,n,r){var i=Sr();rt.flags|=t,i.memoizedState=Zl(1|e,n,void 0,r===void 0?null:r)}function _f(t,e,n,r){var i=tr();r=r===void 0?null:r;var s=void 0;if(yt!==null){var o=yt.memoizedState;if(s=o.destroy,r!==null&&_m(r,o.deps)){i.memoizedState=Zl(e,n,s,r);return}}rt.flags|=t,i.memoizedState=Zl(1|e,n,s,r)}function Py(t,e){return Lu(8390656,8,t,e)}function Sm(t,e){return _f(2048,8,t,e)}function gE(t,e){return _f(4,2,t,e)}function vE(t,e){return _f(4,4,t,e)}function yE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xE(t,e,n){return n=n!=null?n.concat([t]):null,_f(4,4,yE.bind(null,e,t),n)}function bm(){}function wE(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_m(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function _E(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_m(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function CE(t,e,n){return Qs&21?(wr(n,e)||(n=NC(),rt.lanes|=n,Zs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,An=!0),t.memoizedState=n)}function h4(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=Rh.transition;Rh.transition={};try{t(!1),e()}finally{Me=n,Rh.transition=r}}function EE(){return tr().memoizedState}function p4(t,e,n){var r=Yi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},SE(t))bE(e,n);else if(n=sE(t,e,n,r),n!==null){var i=hn();yr(n,t,r,i),AE(n,e,r)}}function m4(t,e,n){var r=Yi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(SE(t))bE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,wr(a,o)){var l=e.interleaved;l===null?(i.next=i,gm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=sE(t,e,i,r),n!==null&&(i=hn(),yr(n,t,r,i),AE(n,e,r))}}function SE(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function bE(t,e){xl=vd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function AE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nm(t,n)}}var yd={readContext:er,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},g4={readContext:er,useCallback:function(t,e){return Sr().memoizedState=[t,e===void 0?null:e],t},useContext:er,useEffect:Py,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Lu(4194308,4,yE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lu(4,2,t,e)},useMemo:function(t,e){var n=Sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=p4.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=Sr();return t={current:t},e.memoizedState=t},useState:ky,useDebugValue:bm,useDeferredValue:function(t){return Sr().memoizedState=t},useTransition:function(){var t=ky(!1),e=t[0];return t=h4.bind(null,t[1]),Sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rt,i=Sr();if(Ze){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),jt===null)throw Error(H(349));Qs&30||uE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Py(fE.bind(null,r,s,t),[t]),r.flags|=2048,Zl(9,dE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Sr(),e=jt.identifierPrefix;if(Ze){var n=Yr,r=Xr;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ql++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=f4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},v4={readContext:er,useCallback:wE,useContext:er,useEffect:Sm,useImperativeHandle:xE,useInsertionEffect:gE,useLayoutEffect:vE,useMemo:_E,useReducer:Oh,useRef:mE,useState:function(){return Oh(Ql)},useDebugValue:bm,useDeferredValue:function(t){var e=tr();return CE(e,yt.memoizedState,t)},useTransition:function(){var t=Oh(Ql)[0],e=tr().memoizedState;return[t,e]},useMutableSource:lE,useSyncExternalStore:cE,useId:EE,unstable_isNewReconciler:!1},y4={readContext:er,useCallback:wE,useContext:er,useEffect:Sm,useImperativeHandle:xE,useInsertionEffect:gE,useLayoutEffect:vE,useMemo:_E,useReducer:Dh,useRef:mE,useState:function(){return Dh(Ql)},useDebugValue:bm,useDeferredValue:function(t){var e=tr();return yt===null?e.memoizedState=t:CE(e,yt.memoizedState,t)},useTransition:function(){var t=Dh(Ql)[0],e=tr().memoizedState;return[t,e]},useMutableSource:lE,useSyncExternalStore:cE,useId:EE,unstable_isNewReconciler:!1};function lr(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cf={isMounted:function(t){return(t=t._reactInternals)?co(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hn(),i=Yi(t),s=ei(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ki(t,s,i),e!==null&&(yr(e,t,i,r),Mu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hn(),i=Yi(t),s=ei(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ki(t,s,i),e!==null&&(yr(e,t,i,r),Mu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),r=Yi(t),i=ei(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ki(t,i,r),e!==null&&(yr(e,t,r,n),Mu(e,t,r))}};function Ry(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!zl(n,r)||!zl(i,s):!0}function NE(t,e,n){var r=!1,i=rs,s=e.contextType;return typeof s=="object"&&s!==null?s=er(s):(i=In(e)?Ys:nn.current,r=e.contextTypes,s=(r=r!=null)?ea(t,i):rs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Oy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cf.enqueueReplaceState(e,e.state,null)}function pp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},vm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=er(s):(s=In(e)?Ys:nn.current,i.context=ea(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Cf.enqueueReplaceState(i,i.state,null),md(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ia(t,e){try{var n="",r=e;do n+=GT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Mh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var x4=typeof WeakMap=="function"?WeakMap:Map;function TE(t,e,n){n=ei(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wd||(wd=!0,bp=r),mp(t,e)},n}function IE(t,e,n){n=ei(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){mp(t,e),typeof r!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Dy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new x4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=O4.bind(null,t,e,n),e.then(t,t))}function My(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ei(-1,1),e.tag=2,Ki(n,e,1))),n.lanes|=1),t)}var w4=vi.ReactCurrentOwner,An=!1;function dn(t,e,n,r){e.child=t===null?iE(e,null,n,r):na(e,t.child,n,r)}function Ly(t,e,n,r,i){n=n.render;var s=e.ref;return Ko(e,i),r=Cm(t,e,n,r,s,i),n=Em(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ci(t,e,i)):(Ze&&n&&um(e),e.flags|=1,dn(t,e,r,i),e.child)}function Fy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Om(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,kE(t,e,s,r,i)):(t=Vu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:zl,n(o,r)&&t.ref===e.ref)return ci(t,e,i)}return e.flags|=1,t=qi(s,r),t.ref=e.ref,t.return=e,e.child=t}function kE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(zl(s,r)&&t.ref===e.ref)if(An=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(An=!0);else return e.lanes=t.lanes,ci(t,e,i)}return gp(t,e,n,r,i)}function PE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Ro,On),On|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(Ro,On),On|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ve(Ro,On),On|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ve(Ro,On),On|=r;return dn(t,e,i,n),e.child}function RE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gp(t,e,n,r,i){var s=In(n)?Ys:nn.current;return s=ea(e,s),Ko(e,i),n=Cm(t,e,n,r,s,i),r=Em(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ci(t,e,i)):(Ze&&r&&um(e),e.flags|=1,dn(t,e,n,i),e.child)}function By(t,e,n,r,i){if(In(n)){var s=!0;ud(e)}else s=!1;if(Ko(e,i),e.stateNode===null)Fu(t,e),NE(e,n,r),pp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=er(c):(c=In(n)?Ys:nn.current,c=ea(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Oy(e,o,r,c),Ti=!1;var h=e.memoizedState;o.state=h,md(e,r,o,i),l=e.memoizedState,a!==r||h!==l||Tn.current||Ti?(typeof d=="function"&&(hp(e,n,d,r),l=e.memoizedState),(a=Ti||Ry(e,n,a,r,h,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,oE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:lr(e.type,a),o.props=c,f=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=er(l):(l=In(n)?Ys:nn.current,l=ea(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&Oy(e,o,r,l),Ti=!1,h=e.memoizedState,o.state=h,md(e,r,o,i);var m=e.memoizedState;a!==f||h!==m||Tn.current||Ti?(typeof p=="function"&&(hp(e,n,p,r),m=e.memoizedState),(c=Ti||Ry(e,n,c,r,h,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return vp(t,e,n,r,s,i)}function vp(t,e,n,r,i,s){RE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Sy(e,n,!1),ci(t,e,s);r=e.stateNode,w4.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=na(e,t.child,null,s),e.child=na(e,null,a,s)):dn(t,e,a,s),e.memoizedState=r.state,i&&Sy(e,n,!0),e.child}function OE(t){var e=t.stateNode;e.pendingContext?Ey(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ey(t,e.context,!1),ym(t,e.containerInfo)}function Uy(t,e,n,r,i){return ta(),fm(i),e.flags|=256,dn(t,e,n,r),e.child}var yp={dehydrated:null,treeContext:null,retryLane:0};function xp(t){return{baseLanes:t,cachePool:null,transitions:null}}function DE(t,e,n){var r=e.pendingProps,i=et.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ve(et,i&1),t===null)return dp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=bf(o,r,0,null),t=Ws(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xp(n),e.memoizedState=yp,t):Am(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return _4(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=qi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=qi(a,s):(s=Ws(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?xp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=yp,r}return s=t.child,t=s.sibling,r=qi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Am(t,e){return e=bf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lu(t,e,n,r){return r!==null&&fm(r),na(e,t.child,null,n),t=Am(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _4(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Mh(Error(H(422))),lu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=bf({mode:"visible",children:r.children},i,0,null),s=Ws(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&na(e,t.child,null,o),e.child.memoizedState=xp(o),e.memoizedState=yp,s);if(!(e.mode&1))return lu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(H(419)),r=Mh(s,r,void 0),lu(t,e,o,r)}if(a=(o&t.childLanes)!==0,An||a){if(r=jt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,li(t,i),yr(r,t,i,-1))}return Rm(),r=Mh(Error(H(421))),lu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=D4.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Mn=Gi(i.nextSibling),jn=e,Ze=!0,ur=null,t!==null&&(Gn[Kn++]=Xr,Gn[Kn++]=Yr,Gn[Kn++]=qs,Xr=t.id,Yr=t.overflow,qs=e),e=Am(e,r.children),e.flags|=4096,e)}function Vy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fp(t.return,e,n)}function jh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ME(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dn(t,e,r.children,n),r=et.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vy(t,n,e);else if(t.tag===19)Vy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(et,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&gd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),jh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&gd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}jh(e,!0,n,null,s);break;case"together":jh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ci(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=qi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function C4(t,e,n){switch(e.tag){case 3:OE(e),ta();break;case 5:aE(e);break;case 1:In(e.type)&&ud(e);break;case 4:ym(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ve(hd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?DE(t,e,n):(Ve(et,et.current&1),t=ci(t,e,n),t!==null?t.sibling:null);Ve(et,et.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ME(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ve(et,et.current),r)break;return null;case 22:case 23:return e.lanes=0,PE(t,e,n)}return ci(t,e,n)}var jE,wp,LE,FE;jE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wp=function(){};LE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ms(kr.current);var s=null;switch(n){case"input":i=H0(t,i),r=H0(t,r),s=[];break;case"select":i=it({},i,{value:void 0}),r=it({},r,{value:void 0}),s=[];break;case"textarea":i=$0(t,i),r=$0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ld)}K0(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ll.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ll.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&We("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};FE=function(t,e,n,r){n!==r&&(e.flags|=4)};function za(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function E4(t,e,n){var r=e.pendingProps;switch(dm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(e),null;case 1:return In(e.type)&&cd(),qt(e),null;case 3:return r=e.stateNode,ra(),Ge(Tn),Ge(nn),wm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ou(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ur!==null&&(Tp(ur),ur=null))),wp(t,e),qt(e),null;case 5:xm(e);var i=Ms(Yl.current);if(n=e.type,t!==null&&e.stateNode!=null)LE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return qt(e),null}if(t=Ms(kr.current),ou(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ar]=e,r[Kl]=s,t=(e.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(i=0;i<sl.length;i++)We(sl[i],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":qv(r,s),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},We("invalid",r);break;case"textarea":Zv(r,s),We("invalid",r)}K0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&su(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&su(r.textContent,a,t),i=["children",""+a]):Ll.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&We("scroll",r)}switch(n){case"input":Qc(r),Qv(r,s,!0);break;case"textarea":Qc(r),Jv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ld)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ar]=e,t[Kl]=r,jE(t,e,!1,!1),e.stateNode=t;e:{switch(o=X0(n,r),n){case"dialog":We("cancel",t),We("close",t),i=r;break;case"iframe":case"object":case"embed":We("load",t),i=r;break;case"video":case"audio":for(i=0;i<sl.length;i++)We(sl[i],t);i=r;break;case"source":We("error",t),i=r;break;case"img":case"image":case"link":We("error",t),We("load",t),i=r;break;case"details":We("toggle",t),i=r;break;case"input":qv(t,r),i=H0(t,r),We("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=it({},r,{value:void 0}),We("invalid",t);break;case"textarea":Zv(t,r),i=$0(t,r),We("invalid",t);break;default:i=r}K0(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?mC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&hC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fl(t,l):typeof l=="number"&&Fl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ll.hasOwnProperty(s)?l!=null&&s==="onScroll"&&We("scroll",t):l!=null&&q1(t,s,l,o))}switch(n){case"input":Qc(t),Qv(t,r,!1);break;case"textarea":Qc(t),Jv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ns(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Wo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Wo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ld)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qt(e),null;case 6:if(t&&e.stateNode!=null)FE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Ms(Yl.current),Ms(kr.current),ou(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ar]=e,(s=r.nodeValue!==n)&&(t=jn,t!==null))switch(t.tag){case 3:su(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&su(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ar]=e,e.stateNode=r}return qt(e),null;case 13:if(Ge(et),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&Mn!==null&&e.mode&1&&!(e.flags&128))nE(),ta(),e.flags|=98560,s=!1;else if(s=ou(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[Ar]=e}else ta(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qt(e),s=!1}else ur!==null&&(Tp(ur),ur=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?bt===0&&(bt=3):Rm())),e.updateQueue!==null&&(e.flags|=4),qt(e),null);case 4:return ra(),wp(t,e),t===null&&$l(e.stateNode.containerInfo),qt(e),null;case 10:return mm(e.type._context),qt(e),null;case 17:return In(e.type)&&cd(),qt(e),null;case 19:if(Ge(et),s=e.memoizedState,s===null)return qt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)za(s,!1);else{if(bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gd(t),o!==null){for(e.flags|=128,za(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(et,et.current&1|2),e.child}t=t.sibling}s.tail!==null&&dt()>sa&&(e.flags|=128,r=!0,za(s,!1),e.lanes=4194304)}else{if(!r)if(t=gd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),za(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ze)return qt(e),null}else 2*dt()-s.renderingStartTime>sa&&n!==1073741824&&(e.flags|=128,r=!0,za(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=dt(),e.sibling=null,n=et.current,Ve(et,r?n&1|2:n&1),e):(qt(e),null);case 22:case 23:return Pm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?On&1073741824&&(qt(e),e.subtreeFlags&6&&(e.flags|=8192)):qt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function S4(t,e){switch(dm(e),e.tag){case 1:return In(e.type)&&cd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ra(),Ge(Tn),Ge(nn),wm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xm(e),null;case 13:if(Ge(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));ta()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(et),null;case 4:return ra(),null;case 10:return mm(e.type._context),null;case 22:case 23:return Pm(),null;case 24:return null;default:return null}}var cu=!1,Jt=!1,b4=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Po(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ot(t,e,r)}else n.current=null}function _p(t,e,n){try{n()}catch(r){ot(t,e,r)}}var Hy=!1;function A4(t,e){if(ip=sd,t=WC(),cm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++d===r&&(l=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sp={focusedElem:t,selectionRange:n},sd=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,w=m.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:lr(e.type,v),w);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(_){ot(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return m=Hy,Hy=!1,m}function wl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&_p(e,n,s)}i=i.next}while(i!==r)}}function Ef(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Cp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function BE(t){var e=t.alternate;e!==null&&(t.alternate=null,BE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ar],delete e[Kl],delete e[lp],delete e[l4],delete e[c4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function UE(t){return t.tag===5||t.tag===3||t.tag===4}function Wy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||UE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ep(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ld));else if(r!==4&&(t=t.child,t!==null))for(Ep(t,e,n),t=t.sibling;t!==null;)Ep(t,e,n),t=t.sibling}function Sp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sp(t,e,n),t=t.sibling;t!==null;)Sp(t,e,n),t=t.sibling}var Ht=null,cr=!1;function Ci(t,e,n){for(n=n.child;n!==null;)VE(t,e,n),n=n.sibling}function VE(t,e,n){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(mf,n)}catch{}switch(n.tag){case 5:Jt||Po(n,e);case 6:var r=Ht,i=cr;Ht=null,Ci(t,e,n),Ht=r,cr=i,Ht!==null&&(cr?(t=Ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ht.removeChild(n.stateNode));break;case 18:Ht!==null&&(cr?(t=Ht,n=n.stateNode,t.nodeType===8?Ih(t.parentNode,n):t.nodeType===1&&Ih(t,n),Hl(t)):Ih(Ht,n.stateNode));break;case 4:r=Ht,i=cr,Ht=n.stateNode.containerInfo,cr=!0,Ci(t,e,n),Ht=r,cr=i;break;case 0:case 11:case 14:case 15:if(!Jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&_p(n,e,o),i=i.next}while(i!==r)}Ci(t,e,n);break;case 1:if(!Jt&&(Po(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ot(n,e,a)}Ci(t,e,n);break;case 21:Ci(t,e,n);break;case 22:n.mode&1?(Jt=(r=Jt)||n.memoizedState!==null,Ci(t,e,n),Jt=r):Ci(t,e,n);break;default:Ci(t,e,n)}}function zy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new b4),e.forEach(function(r){var i=M4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ir(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ht=a.stateNode,cr=!1;break e;case 3:Ht=a.stateNode.containerInfo,cr=!0;break e;case 4:Ht=a.stateNode.containerInfo,cr=!0;break e}a=a.return}if(Ht===null)throw Error(H(160));VE(s,o,i),Ht=null,cr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ot(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)HE(e,t),e=e.sibling}function HE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ir(e,t),Cr(t),r&4){try{wl(3,t,t.return),Ef(3,t)}catch(v){ot(t,t.return,v)}try{wl(5,t,t.return)}catch(v){ot(t,t.return,v)}}break;case 1:ir(e,t),Cr(t),r&512&&n!==null&&Po(n,n.return);break;case 5:if(ir(e,t),Cr(t),r&512&&n!==null&&Po(n,n.return),t.flags&32){var i=t.stateNode;try{Fl(i,"")}catch(v){ot(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&uC(i,s),X0(a,o);var c=X0(a,s);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?mC(i,f):d==="dangerouslySetInnerHTML"?hC(i,f):d==="children"?Fl(i,f):q1(i,d,f,c)}switch(a){case"input":W0(i,s);break;case"textarea":dC(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Wo(i,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?Wo(i,!!s.multiple,s.defaultValue,!0):Wo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Kl]=s}catch(v){ot(t,t.return,v)}}break;case 6:if(ir(e,t),Cr(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){ot(t,t.return,v)}}break;case 3:if(ir(e,t),Cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hl(e.containerInfo)}catch(v){ot(t,t.return,v)}break;case 4:ir(e,t),Cr(t);break;case 13:ir(e,t),Cr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Im=dt())),r&4&&zy(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Jt=(c=Jt)||d,ir(e,t),Jt=c):ir(e,t),Cr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Q=t,d=t.child;d!==null;){for(f=Q=d;Q!==null;){switch(h=Q,p=h.child,h.tag){case 0:case 11:case 14:case 15:wl(4,h,h.return);break;case 1:Po(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){ot(r,n,v)}}break;case 5:Po(h,h.return);break;case 22:if(h.memoizedState!==null){Gy(f);continue}}p!==null?(p.return=h,Q=p):Gy(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=pC("display",o))}catch(v){ot(t,t.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){ot(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ir(e,t),Cr(t),r&4&&zy(t);break;case 21:break;default:ir(e,t),Cr(t)}}function Cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(UE(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fl(i,""),r.flags&=-33);var s=Wy(t);Sp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Wy(t);Ep(t,a,o);break;default:throw Error(H(161))}}catch(l){ot(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function N4(t,e,n){Q=t,WE(t)}function WE(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||cu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Jt;a=cu;var c=Jt;if(cu=o,(Jt=l)&&!c)for(Q=i;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?Ky(i):l!==null?(l.return=o,Q=l):Ky(i);for(;s!==null;)Q=s,WE(s),s=s.sibling;Q=i,cu=a,Jt=c}$y(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):$y(t)}}function $y(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jt||Ef(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:lr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Iy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Iy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Hl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Jt||e.flags&512&&Cp(e)}catch(h){ot(e,e.return,h)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Gy(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Ky(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ef(4,e)}catch(l){ot(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ot(e,i,l)}}var s=e.return;try{Cp(e)}catch(l){ot(e,s,l)}break;case 5:var o=e.return;try{Cp(e)}catch(l){ot(e,o,l)}}}catch(l){ot(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var T4=Math.ceil,xd=vi.ReactCurrentDispatcher,Nm=vi.ReactCurrentOwner,Qn=vi.ReactCurrentBatchConfig,Ae=0,jt=null,ht=null,Gt=0,On=0,Ro=hs(0),bt=0,Jl=null,Zs=0,Sf=0,Tm=0,_l=null,Cn=null,Im=0,sa=1/0,$r=null,wd=!1,bp=null,Xi=null,uu=!1,Bi=null,_d=0,Cl=0,Ap=null,Bu=-1,Uu=0;function hn(){return Ae&6?dt():Bu!==-1?Bu:Bu=dt()}function Yi(t){return t.mode&1?Ae&2&&Gt!==0?Gt&-Gt:d4.transition!==null?(Uu===0&&(Uu=NC()),Uu):(t=Me,t!==0||(t=window.event,t=t===void 0?16:DC(t.type)),t):1}function yr(t,e,n,r){if(50<Cl)throw Cl=0,Ap=null,Error(H(185));Ec(t,n,r),(!(Ae&2)||t!==jt)&&(t===jt&&(!(Ae&2)&&(Sf|=n),bt===4&&Pi(t,Gt)),kn(t,r),n===1&&Ae===0&&!(e.mode&1)&&(sa=dt()+500,wf&&ps()))}function kn(t,e){var n=t.callbackNode;dI(t,e);var r=id(t,t===jt?Gt:0);if(r===0)n!==null&&ny(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ny(n),e===1)t.tag===0?u4(Xy.bind(null,t)):JC(Xy.bind(null,t)),o4(function(){!(Ae&6)&&ps()}),n=null;else{switch(TC(r)){case 1:n=tm;break;case 4:n=bC;break;case 16:n=rd;break;case 536870912:n=AC;break;default:n=rd}n=QE(n,zE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zE(t,e){if(Bu=-1,Uu=0,Ae&6)throw Error(H(327));var n=t.callbackNode;if(Xo()&&t.callbackNode!==n)return null;var r=id(t,t===jt?Gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cd(t,r);else{e=r;var i=Ae;Ae|=2;var s=GE();(jt!==t||Gt!==e)&&($r=null,sa=dt()+500,Hs(t,e));do try{P4();break}catch(a){$E(t,a)}while(!0);pm(),xd.current=s,Ae=i,ht!==null?e=0:(jt=null,Gt=0,e=bt)}if(e!==0){if(e===2&&(i=J0(t),i!==0&&(r=i,e=Np(t,i))),e===1)throw n=Jl,Hs(t,0),Pi(t,r),kn(t,dt()),n;if(e===6)Pi(t,r);else{if(i=t.current.alternate,!(r&30)&&!I4(i)&&(e=Cd(t,r),e===2&&(s=J0(t),s!==0&&(r=s,e=Np(t,s))),e===1))throw n=Jl,Hs(t,0),Pi(t,r),kn(t,dt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:As(t,Cn,$r);break;case 3:if(Pi(t,r),(r&130023424)===r&&(e=Im+500-dt(),10<e)){if(id(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){hn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ap(As.bind(null,t,Cn,$r),e);break}As(t,Cn,$r);break;case 4:if(Pi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-vr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*T4(r/1960))-r,10<r){t.timeoutHandle=ap(As.bind(null,t,Cn,$r),r);break}As(t,Cn,$r);break;case 5:As(t,Cn,$r);break;default:throw Error(H(329))}}}return kn(t,dt()),t.callbackNode===n?zE.bind(null,t):null}function Np(t,e){var n=_l;return t.current.memoizedState.isDehydrated&&(Hs(t,e).flags|=256),t=Cd(t,e),t!==2&&(e=Cn,Cn=n,e!==null&&Tp(e)),t}function Tp(t){Cn===null?Cn=t:Cn.push.apply(Cn,t)}function I4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!wr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pi(t,e){for(e&=~Tm,e&=~Sf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vr(e),r=1<<n;t[n]=-1,e&=~r}}function Xy(t){if(Ae&6)throw Error(H(327));Xo();var e=id(t,0);if(!(e&1))return kn(t,dt()),null;var n=Cd(t,e);if(t.tag!==0&&n===2){var r=J0(t);r!==0&&(e=r,n=Np(t,r))}if(n===1)throw n=Jl,Hs(t,0),Pi(t,e),kn(t,dt()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,As(t,Cn,$r),kn(t,dt()),null}function km(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(sa=dt()+500,wf&&ps())}}function Js(t){Bi!==null&&Bi.tag===0&&!(Ae&6)&&Xo();var e=Ae;Ae|=1;var n=Qn.transition,r=Me;try{if(Qn.transition=null,Me=1,t)return t()}finally{Me=r,Qn.transition=n,Ae=e,!(Ae&6)&&ps()}}function Pm(){On=Ro.current,Ge(Ro)}function Hs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,s4(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(dm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cd();break;case 3:ra(),Ge(Tn),Ge(nn),wm();break;case 5:xm(r);break;case 4:ra();break;case 13:Ge(et);break;case 19:Ge(et);break;case 10:mm(r.type._context);break;case 22:case 23:Pm()}n=n.return}if(jt=t,ht=t=qi(t.current,null),Gt=On=e,bt=0,Jl=null,Tm=Sf=Zs=0,Cn=_l=null,Ds!==null){for(e=0;e<Ds.length;e++)if(n=Ds[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ds=null}return t}function $E(t,e){do{var n=ht;try{if(pm(),ju.current=yd,vd){for(var r=rt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vd=!1}if(Qs=0,Rt=yt=rt=null,xl=!1,ql=0,Nm.current=null,n===null||n.return===null){bt=1,Jl=e,ht=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Gt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=My(o);if(p!==null){p.flags&=-257,jy(p,o,a,s,e),p.mode&1&&Dy(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){Dy(s,c,e),Rm();break e}l=Error(H(426))}}else if(Ze&&a.mode&1){var w=My(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),jy(w,o,a,s,e),fm(ia(l,a));break e}}s=l=ia(l,a),bt!==4&&(bt=2),_l===null?_l=[s]:_l.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=TE(s,l,e);Ty(s,y);break e;case 1:a=l;var g=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Xi===null||!Xi.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=IE(s,a,e);Ty(s,_);break e}}s=s.return}while(s!==null)}XE(n)}catch(C){e=C,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function GE(){var t=xd.current;return xd.current=yd,t===null?yd:t}function Rm(){(bt===0||bt===3||bt===2)&&(bt=4),jt===null||!(Zs&268435455)&&!(Sf&268435455)||Pi(jt,Gt)}function Cd(t,e){var n=Ae;Ae|=2;var r=GE();(jt!==t||Gt!==e)&&($r=null,Hs(t,e));do try{k4();break}catch(i){$E(t,i)}while(!0);if(pm(),Ae=n,xd.current=r,ht!==null)throw Error(H(261));return jt=null,Gt=0,bt}function k4(){for(;ht!==null;)KE(ht)}function P4(){for(;ht!==null&&!nI();)KE(ht)}function KE(t){var e=qE(t.alternate,t,On);t.memoizedProps=t.pendingProps,e===null?XE(t):ht=e,Nm.current=null}function XE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=S4(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,ht=null;return}}else if(n=E4(n,e,On),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);bt===0&&(bt=5)}function As(t,e,n){var r=Me,i=Qn.transition;try{Qn.transition=null,Me=1,R4(t,e,n,r)}finally{Qn.transition=i,Me=r}return null}function R4(t,e,n,r){do Xo();while(Bi!==null);if(Ae&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(fI(t,s),t===jt&&(ht=jt=null,Gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uu||(uu=!0,QE(rd,function(){return Xo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qn.transition,Qn.transition=null;var o=Me;Me=1;var a=Ae;Ae|=4,Nm.current=null,A4(t,n),HE(n,t),ZI(sp),sd=!!ip,sp=ip=null,t.current=n,N4(n),rI(),Ae=a,Me=o,Qn.transition=s}else t.current=n;if(uu&&(uu=!1,Bi=t,_d=i),s=t.pendingLanes,s===0&&(Xi=null),oI(n.stateNode),kn(t,dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wd)throw wd=!1,t=bp,bp=null,t;return _d&1&&t.tag!==0&&Xo(),s=t.pendingLanes,s&1?t===Ap?Cl++:(Cl=0,Ap=t):Cl=0,ps(),null}function Xo(){if(Bi!==null){var t=TC(_d),e=Qn.transition,n=Me;try{if(Qn.transition=null,Me=16>t?16:t,Bi===null)var r=!1;else{if(t=Bi,Bi=null,_d=0,Ae&6)throw Error(H(331));var i=Ae;for(Ae|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Q=c;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:wl(8,d,s)}var f=d.child;if(f!==null)f.return=d,Q=f;else for(;Q!==null;){d=Q;var h=d.sibling,p=d.return;if(BE(d),d===c){Q=null;break}if(h!==null){h.return=p,Q=h;break}Q=p}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wl(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Q=y;break e}Q=s.return}}var g=t.current;for(Q=g;Q!==null;){o=Q;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Q=x;else e:for(o=g;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ef(9,a)}}catch(C){ot(a,a.return,C)}if(a===o){Q=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Q=_;break e}Q=a.return}}if(Ae=i,ps(),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(mf,t)}catch{}r=!0}return r}finally{Me=n,Qn.transition=e}}return!1}function Yy(t,e,n){e=ia(n,e),e=TE(t,e,1),t=Ki(t,e,1),e=hn(),t!==null&&(Ec(t,1,e),kn(t,e))}function ot(t,e,n){if(t.tag===3)Yy(t,t,n);else for(;e!==null;){if(e.tag===3){Yy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xi===null||!Xi.has(r))){t=ia(n,t),t=IE(e,t,1),e=Ki(e,t,1),t=hn(),e!==null&&(Ec(e,1,t),kn(e,t));break}}e=e.return}}function O4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(Gt&n)===n&&(bt===4||bt===3&&(Gt&130023424)===Gt&&500>dt()-Im?Hs(t,0):Tm|=n),kn(t,e)}function YE(t,e){e===0&&(t.mode&1?(e=eu,eu<<=1,!(eu&130023424)&&(eu=4194304)):e=1);var n=hn();t=li(t,e),t!==null&&(Ec(t,e,n),kn(t,n))}function D4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),YE(t,n)}function M4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),YE(t,n)}var qE;qE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tn.current)An=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return An=!1,C4(t,e,n);An=!!(t.flags&131072)}else An=!1,Ze&&e.flags&1048576&&eE(e,fd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fu(t,e),t=e.pendingProps;var i=ea(e,nn.current);Ko(e,n),i=Cm(null,e,r,t,i,n);var s=Em();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,In(r)?(s=!0,ud(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,vm(e),i.updater=Cf,e.stateNode=i,i._reactInternals=e,pp(e,r,t,n),e=vp(null,e,r,!0,s,n)):(e.tag=0,Ze&&s&&um(e),dn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=L4(r),t=lr(r,t),i){case 0:e=gp(null,e,r,t,n);break e;case 1:e=By(null,e,r,t,n);break e;case 11:e=Ly(null,e,r,t,n);break e;case 14:e=Fy(null,e,r,lr(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),gp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),By(t,e,r,i,n);case 3:e:{if(OE(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,oE(t,e),md(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ia(Error(H(423)),e),e=Uy(t,e,r,n,i);break e}else if(r!==i){i=ia(Error(H(424)),e),e=Uy(t,e,r,n,i);break e}else for(Mn=Gi(e.stateNode.containerInfo.firstChild),jn=e,Ze=!0,ur=null,n=iE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ta(),r===i){e=ci(t,e,n);break e}dn(t,e,r,n)}e=e.child}return e;case 5:return aE(e),t===null&&dp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,op(r,i)?o=null:s!==null&&op(r,s)&&(e.flags|=32),RE(t,e),dn(t,e,o,n),e.child;case 6:return t===null&&dp(e),null;case 13:return DE(t,e,n);case 4:return ym(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=na(e,null,r,n):dn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),Ly(t,e,r,i,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ve(hd,r._currentValue),r._currentValue=o,s!==null)if(wr(s.value,o)){if(s.children===i.children&&!Tn.current){e=ci(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ei(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),fp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}dn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ko(e,n),i=er(i),r=r(i),e.flags|=1,dn(t,e,r,n),e.child;case 14:return r=e.type,i=lr(r,e.pendingProps),i=lr(r.type,i),Fy(t,e,r,i,n);case 15:return kE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),Fu(t,e),e.tag=1,In(r)?(t=!0,ud(e)):t=!1,Ko(e,n),NE(e,r,i),pp(e,r,i,n),vp(null,e,r,!0,t,n);case 19:return ME(t,e,n);case 22:return PE(t,e,n)}throw Error(H(156,e.tag))};function QE(t,e){return SC(t,e)}function j4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(t,e,n,r){return new j4(t,e,n,r)}function Om(t){return t=t.prototype,!(!t||!t.isReactComponent)}function L4(t){if(typeof t=="function")return Om(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Z1)return 11;if(t===J1)return 14}return 2}function qi(t,e){var n=t.alternate;return n===null?(n=Xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Om(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Co:return Ws(n.children,i,s,e);case Q1:o=8,i|=8;break;case F0:return t=Xn(12,n,e,i|2),t.elementType=F0,t.lanes=s,t;case B0:return t=Xn(13,n,e,i),t.elementType=B0,t.lanes=s,t;case U0:return t=Xn(19,n,e,i),t.elementType=U0,t.lanes=s,t;case aC:return bf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sC:o=10;break e;case oC:o=9;break e;case Z1:o=11;break e;case J1:o=14;break e;case Ni:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Xn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ws(t,e,n,r){return t=Xn(7,t,r,e),t.lanes=n,t}function bf(t,e,n,r){return t=Xn(22,t,r,e),t.elementType=aC,t.lanes=n,t.stateNode={isHidden:!1},t}function Lh(t,e,n){return t=Xn(6,t,null,e),t.lanes=n,t}function Fh(t,e,n){return e=Xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function F4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yh(0),this.expirationTimes=yh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Dm(t,e,n,r,i,s,o,a,l){return t=new F4(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vm(s),t}function B4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_o,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ZE(t){if(!t)return rs;t=t._reactInternals;e:{if(co(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(In(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(In(n))return ZC(t,n,e)}return e}function JE(t,e,n,r,i,s,o,a,l){return t=Dm(n,r,!0,t,i,s,o,a,l),t.context=ZE(null),n=t.current,r=hn(),i=Yi(n),s=ei(r,i),s.callback=e??null,Ki(n,s,i),t.current.lanes=i,Ec(t,i,r),kn(t,r),t}function Af(t,e,n,r){var i=e.current,s=hn(),o=Yi(i);return n=ZE(n),e.context===null?e.context=n:e.pendingContext=n,e=ei(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ki(i,e,o),t!==null&&(yr(t,i,o,s),Mu(t,i,o)),o}function Ed(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mm(t,e){qy(t,e),(t=t.alternate)&&qy(t,e)}function U4(){return null}var eS=typeof reportError=="function"?reportError:function(t){console.error(t)};function jm(t){this._internalRoot=t}Nf.prototype.render=jm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Af(t,e,null,null)};Nf.prototype.unmount=jm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Js(function(){Af(null,t,null,null)}),e[ai]=null}};function Nf(t){this._internalRoot=t}Nf.prototype.unstable_scheduleHydration=function(t){if(t){var e=PC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ki.length&&e!==0&&e<ki[n].priority;n++);ki.splice(n,0,t),n===0&&OC(t)}};function Lm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qy(){}function V4(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ed(o);s.call(c)}}var o=JE(e,r,t,0,null,!1,!1,"",Qy);return t._reactRootContainer=o,t[ai]=o.current,$l(t.nodeType===8?t.parentNode:t),Js(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ed(l);a.call(c)}}var l=Dm(t,0,!1,null,null,!1,!1,"",Qy);return t._reactRootContainer=l,t[ai]=l.current,$l(t.nodeType===8?t.parentNode:t),Js(function(){Af(e,l,n,r)}),l}function If(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ed(o);a.call(l)}}Af(e,o,t,i)}else o=V4(n,e,t,i,r);return Ed(o)}IC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(nm(e,n|1),kn(e,dt()),!(Ae&6)&&(sa=dt()+500,ps()))}break;case 13:Js(function(){var r=li(t,1);if(r!==null){var i=hn();yr(r,t,1,i)}}),Mm(t,1)}};rm=function(t){if(t.tag===13){var e=li(t,134217728);if(e!==null){var n=hn();yr(e,t,134217728,n)}Mm(t,134217728)}};kC=function(t){if(t.tag===13){var e=Yi(t),n=li(t,e);if(n!==null){var r=hn();yr(n,t,e,r)}Mm(t,e)}};PC=function(){return Me};RC=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};q0=function(t,e,n){switch(e){case"input":if(W0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xf(r);if(!i)throw Error(H(90));cC(r),W0(r,i)}}}break;case"textarea":dC(t,n);break;case"select":e=n.value,e!=null&&Wo(t,!!n.multiple,e,!1)}};yC=km;xC=Js;var H4={usingClientEntryPoint:!1,Events:[bc,Ao,xf,gC,vC,km]},$a={findFiberByHostInstance:Os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W4={bundleType:$a.bundleType,version:$a.version,rendererPackageName:$a.rendererPackageName,rendererConfig:$a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=CC(t),t===null?null:t.stateNode},findFiberByHostInstance:$a.findFiberByHostInstance||U4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{mf=du.inject(W4),Ir=du}catch{}}Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H4;Un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lm(e))throw Error(H(200));return B4(t,e,null,n)};Un.createRoot=function(t,e){if(!Lm(t))throw Error(H(299));var n=!1,r="",i=eS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Dm(t,1,!1,null,null,n,!1,r,i),t[ai]=e.current,$l(t.nodeType===8?t.parentNode:t),new jm(e)};Un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=CC(e),t=t===null?null:t.stateNode,t};Un.flushSync=function(t){return Js(t)};Un.hydrate=function(t,e,n){if(!Tf(e))throw Error(H(200));return If(null,t,e,!0,n)};Un.hydrateRoot=function(t,e,n){if(!Lm(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=eS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JE(e,null,t,1,n??null,i,!1,s,o),t[ai]=e.current,$l(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Nf(e)};Un.render=function(t,e,n){if(!Tf(e))throw Error(H(200));return If(null,t,e,!1,n)};Un.unmountComponentAtNode=function(t){if(!Tf(t))throw Error(H(40));return t._reactRootContainer?(Js(function(){If(null,null,t,!1,function(){t._reactRootContainer=null,t[ai]=null})}),!0):!1};Un.unstable_batchedUpdates=km;Un.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tf(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return If(t,e,n,!1,r)};Un.version="18.3.1-next-f1338f8080-20240426";function tS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tS)}catch(t){console.error(t)}}tS(),tC.exports=Un;var z4=tC.exports,Zy=z4;j0.createRoot=Zy.createRoot,j0.hydrateRoot=Zy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sd(){return Sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sd.apply(this,arguments)}var js;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(js||(js={}));const Jy="popstate";function $4(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Ip("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:rS(i)}return K4(e,n,null,t)}function nS(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function G4(){return Math.random().toString(36).substr(2,8)}function ex(t,e){return{usr:t.state,key:t.key,idx:e}}function Ip(t,e,n,r){return n===void 0&&(n=null),Sd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?iS(e):e,{state:n,key:e&&e.key||r||G4()})}function rS(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function iS(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function K4(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=js.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Sd({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=js.Pop;let w=d(),y=w==null?null:w-c;c=w,l&&l({action:a,location:v.location,delta:y})}function h(w,y){a=js.Push;let g=Ip(v.location,w,y);c=d()+1;let x=ex(g,c),_=v.createHref(g);try{o.pushState(x,"",_)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(_)}s&&l&&l({action:a,location:v.location,delta:1})}function p(w,y){a=js.Replace;let g=Ip(v.location,w,y);c=d();let x=ex(g,c),_=v.createHref(g);o.replaceState(x,"",_),s&&l&&l({action:a,location:v.location,delta:0})}function m(w){let y=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof w=="string"?w:rS(w);return g=g.replace(/ $/,"%20"),nS(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let v={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Jy,f),l=w,()=>{i.removeEventListener(Jy,f),l=null}},createHref(w){return e(i,w)},createURL:m,encodeLocation(w){let y=m(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(w){return o.go(w)}};return v}var tx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(tx||(tx={}));function X4(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const sS=["post","put","patch","delete"];new Set(sS);const Y4=["get",...sS];new Set(Y4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kp(){return kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kp.apply(this,arguments)}const q4=b.createContext(null),oS=b.createContext(null);function Q4(){return b.useContext(oS)!=null}function Z4(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function J4(t){let{basename:e="/",children:n=null,location:r,navigationType:i=js.Pop,navigator:s,static:o=!1,future:a}=t;Q4()&&nS(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:s,static:o,future:kp({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=iS(r));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:m="default"}=r,v=b.useMemo(()=>{let w=X4(d,l);return w==null?null:{location:{pathname:w,search:f,hash:h,state:p,key:m},navigationType:i}},[l,d,f,h,p,m,i]);return v==null?null:b.createElement(q4.Provider,{value:c},b.createElement(oS.Provider,{children:n,value:v}))}new Promise(()=>{});/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const e8="6";try{window.__reactRouterVersion=e8}catch{}const t8="startTransition",nx=OT[t8];function n8(t){let{basename:e,children:n,future:r,window:i}=t,s=b.useRef();s.current==null&&(s.current=$4({window:i,v5Compat:!0}));let o=s.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(f=>{c&&nx?nx(()=>l(f)):l(f)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>Z4(r),[r]),b.createElement(J4,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var rx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(rx||(rx={}));var ix;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ix||(ix={}));const Fm=b.createContext({});function Bm(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const kf=b.createContext(null),Um=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class r8 extends b.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function i8({children:t,isPresent:e}){const n=b.useId(),r=b.useRef(null),i=b.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=b.useContext(Um);return b.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return s&&(d.nonce=s),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),u.jsx(r8,{isPresent:e,childRef:r,sizeRef:i,children:b.cloneElement(t,{ref:r})})}const s8=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=Bm(o8),l=b.useId(),c=b.useCallback(f=>{a.set(f,!0);for(const h of a.values())if(!h)return;r&&r()},[a,r]),d=b.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),c]:[n,c]);return b.useMemo(()=>{a.forEach((f,h)=>a.set(h,!1))},[n]),b.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=u.jsx(i8,{isPresent:n,children:t})),u.jsx(kf.Provider,{value:d,children:t})};function o8(){return new Map}function aS(t=!0){const e=b.useContext(kf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=b.useId();b.useEffect(()=>{t&&i(s)},[t]);const o=b.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const fu=t=>t.key||"";function sx(t){const e=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&e.push(n)}),e}const Vm=typeof window<"u",lS=Vm?b.useLayoutEffect:b.useEffect,Sn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=aS(o),c=b.useMemo(()=>sx(t),[t]),d=o&&!a?[]:c.map(fu),f=b.useRef(!0),h=b.useRef(c),p=Bm(()=>new Map),[m,v]=b.useState(c),[w,y]=b.useState(c);lS(()=>{f.current=!1,h.current=c;for(let _=0;_<w.length;_++){const C=fu(w[_]);d.includes(C)?p.delete(C):p.get(C)!==!0&&p.set(C,!1)}},[w,d.length,d.join("-")]);const g=[];if(c!==m){let _=[...c];for(let C=0;C<w.length;C++){const E=w[C],A=fu(E);d.includes(A)||(_.splice(C,0,E),g.push(E))}s==="wait"&&g.length&&(_=g),y(sx(_)),v(c);return}const{forceRender:x}=b.useContext(Fm);return u.jsx(u.Fragment,{children:w.map(_=>{const C=fu(_),E=o&&!a?!1:c===w||d.includes(C),A=()=>{if(p.has(C))p.set(C,!0);else return;let T=!0;p.forEach(k=>{k||(T=!1)}),T&&(x==null||x(),y(h.current),o&&(l==null||l()),r&&r())};return u.jsx(s8,{isPresent:E,initial:!f.current||n?void 0:!1,custom:E?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:E?void 0:A,children:_},C)})})},Ln=t=>t;let cS=Ln;function Hm(t){let e;return()=>(e===void 0&&(e=t()),e)}const oa=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},ti=t=>t*1e3,ni=t=>t/1e3,a8={useManualTiming:!1};function l8(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,d=!1,f=!1)=>{const p=f&&r?e:n;return d&&s.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const hu=["read","resolveKeyframes","update","preRender","render","postRender"],c8=40;function uS(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=hu.reduce((y,g)=>(y[g]=l8(s),y),{}),{read:a,resolveKeyframes:l,update:c,preRender:d,render:f,postRender:h}=o,p=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,c8),1),i.timestamp=y,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),d.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(p))},m=()=>{n=!0,r=!0,i.isProcessing||t(p)};return{schedule:hu.reduce((y,g)=>{const x=o[g];return y[g]=(_,C=!1,E=!1)=>(n||m(),x.schedule(_,C,E)),y},{}),cancel:y=>{for(let g=0;g<hu.length;g++)o[hu[g]].cancel(y)},state:i,steps:o}}const{schedule:Ke,cancel:is,state:Wt,steps:Bh}=uS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ln,!0),dS=b.createContext({strict:!1}),ox={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},aa={};for(const t in ox)aa[t]={isEnabled:e=>ox[t].some(n=>!!e[n])};function u8(t){for(const e in t)aa[e]={...aa[e],...t[e]}}const d8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||d8.has(t)}let fS=t=>!bd(t);function f8(t){t&&(fS=e=>e.startsWith("on")?!bd(e):t(e))}try{f8(require("@emotion/is-prop-valid").default)}catch{}function h8(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(fS(i)||n===!0&&bd(i)||!e&&!bd(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function p8(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Pf=b.createContext({});function ec(t){return typeof t=="string"||Array.isArray(t)}function Rf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Wm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],zm=["initial",...Wm];function Of(t){return Rf(t.animate)||zm.some(e=>ec(t[e]))}function hS(t){return!!(Of(t)||t.variants)}function m8(t,e){if(Of(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ec(n)?n:void 0,animate:ec(r)?r:void 0}}return t.inherit!==!1?e:{}}function g8(t){const{initial:e,animate:n}=m8(t,b.useContext(Pf));return b.useMemo(()=>({initial:e,animate:n}),[ax(e),ax(n)])}function ax(t){return Array.isArray(t)?t.join(" "):t}const v8=Symbol.for("motionComponentSymbol");function Oo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function y8(t,e,n){return b.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Oo(n)&&(n.current=r))},[e])}const $m=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),x8="framerAppearId",pS="data-"+$m(x8),{schedule:Gm}=uS(queueMicrotask,!1),mS=b.createContext({});function w8(t,e,n,r,i){var s,o;const{visualElement:a}=b.useContext(Pf),l=b.useContext(dS),c=b.useContext(kf),d=b.useContext(Um).reducedMotion,f=b.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const h=f.current,p=b.useContext(mS);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&_8(f.current,n,i,p);const m=b.useRef(!1);b.useInsertionEffect(()=>{h&&m.current&&h.update(n,c)});const v=n[pS],w=b.useRef(!!v&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,v))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,v)));return lS(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),Gm.render(h.render),w.current&&h.animationState&&h.animationState.animateChanges())}),b.useEffect(()=>{h&&(!w.current&&h.animationState&&h.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,v)}),w.current=!1))}),h}function _8(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:gS(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Oo(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function gS(t){if(t)return t.options.allowProjection!==!1?t.projection:gS(t.parent)}function C8({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&u8(t);function a(c,d){let f;const h={...b.useContext(Um),...c,layoutId:E8(c)},{isStatic:p}=h,m=g8(c),v=r(c,p);if(!p&&Vm){S8();const w=b8(h);f=w.MeasureLayout,m.visualElement=w8(i,v,h,e,w.ProjectionNode)}return u.jsxs(Pf.Provider,{value:m,children:[f&&m.visualElement?u.jsx(f,{visualElement:m.visualElement,...h}):null,n(i,c,y8(v,m.visualElement,d),v,p,m.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=b.forwardRef(a);return l[v8]=i,l}function E8({layoutId:t}){const e=b.useContext(Fm).id;return e&&t!==void 0?e+"-"+t:t}function S8(t,e){b.useContext(dS).strict}function b8(t){const{drag:e,layout:n}=aa;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const A8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Km(t){return typeof t!="string"||t.includes("-")?!1:!!(A8.indexOf(t)>-1||/[A-Z]/u.test(t))}function lx(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Xm(t,e,n,r){if(typeof e=="function"){const[i,s]=lx(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=lx(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const Pp=t=>Array.isArray(t),N8=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),T8=t=>Pp(t)?t[t.length-1]||0:t,en=t=>!!(t&&t.getVelocity);function Hu(t){const e=en(t)?t.get():t;return N8(e)?e.toValue():e}function I8({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:k8(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const vS=t=>(e,n)=>{const r=b.useContext(Pf),i=b.useContext(kf),s=()=>I8(t,e,r,i);return n?s():Bm(s)};function k8(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=Hu(s[h]);let{initial:o,animate:a}=t;const l=Of(t),c=hS(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const f=d?a:o;if(f&&typeof f!="boolean"&&!Rf(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const m=Xm(t,h[p]);if(m){const{transitionEnd:v,transition:w,...y}=m;for(const g in y){let x=y[g];if(Array.isArray(x)){const _=d?x.length-1:0;x=x[_]}x!==null&&(i[g]=x)}for(const g in v)i[g]=v[g]}}}return i}const ba=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],uo=new Set(ba),yS=t=>e=>typeof e=="string"&&e.startsWith(t),xS=yS("--"),P8=yS("var(--"),Ym=t=>P8(t)?R8.test(t.split("/*")[0].trim()):!1,R8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,wS=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ui=(t,e,n)=>n>e?e:n<t?t:n,Aa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},tc={...Aa,transform:t=>ui(0,1,t)},pu={...Aa,default:1},Nc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ai=Nc("deg"),Pr=Nc("%"),ae=Nc("px"),O8=Nc("vh"),D8=Nc("vw"),cx={...Pr,parse:t=>Pr.parse(t)/100,transform:t=>Pr.transform(t*100)},M8={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,radius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,top:ae,right:ae,bottom:ae,left:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,backgroundPositionX:ae,backgroundPositionY:ae},j8={rotate:Ai,rotateX:Ai,rotateY:Ai,rotateZ:Ai,scale:pu,scaleX:pu,scaleY:pu,scaleZ:pu,skew:Ai,skewX:Ai,skewY:Ai,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:tc,originX:cx,originY:cx,originZ:ae},ux={...Aa,transform:Math.round},qm={...M8,...j8,zIndex:ux,size:ae,fillOpacity:tc,strokeOpacity:tc,numOctaves:ux},L8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},F8=ba.length;function B8(t,e,n){let r="",i=!0;for(let s=0;s<F8;s++){const o=ba[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=wS(a,qm[o]);if(!l){i=!1;const d=L8[o]||o;r+=`${d}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Qm(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(uo.has(l)){o=!0;continue}else if(xS(l)){i[l]=c;continue}else{const d=wS(c,qm[l]);l.startsWith("origin")?(a=!0,s[l]=d):r[l]=d}}if(e.transform||(o||n?r.transform=B8(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${c} ${d}`}}const U8={offset:"stroke-dashoffset",array:"stroke-dasharray"},V8={offset:"strokeDashoffset",array:"strokeDasharray"};function H8(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?U8:V8;t[s.offset]=ae.transform(-r);const o=ae.transform(e),a=ae.transform(n);t[s.array]=`${o} ${a}`}function dx(t,e,n){return typeof t=="string"?t:ae.transform(e+n*t)}function W8(t,e,n){const r=dx(e,t.x,t.width),i=dx(n,t.y,t.height);return`${r} ${i}`}function Zm(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,f){if(Qm(t,c,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p,dimensions:m}=t;h.transform&&(m&&(p.transform=h.transform),delete h.transform),m&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=W8(m,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&H8(h,o,a,l,!1)}const Jm=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),_S=()=>({...Jm(),attrs:{}}),eg=t=>typeof t=="string"&&t.toLowerCase()==="svg";function CS(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const ES=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function SS(t,e,n,r){CS(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(ES.has(i)?i:$m(i),e.attrs[i])}const Ad={};function z8(t){Object.assign(Ad,t)}function bS(t,{layout:e,layoutId:n}){return uo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ad[t]||t==="opacity")}function tg(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(en(i[o])||e.style&&en(e.style[o])||bS(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function AS(t,e,n){const r=tg(t,e,n);for(const i in t)if(en(t[i])||en(e[i])){const s=ba.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function $8(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const fx=["x","y","width","height","cx","cy","r"],G8={useVisualState:vS({scrapeMotionValuesFromProps:AS,createRenderState:_S,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(uo.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<fx.length;a++){const l=fx[a];t[l]!==e[l]&&(o=!0)}o&&Ke.read(()=>{$8(n,r),Ke.render(()=>{Zm(r,i,eg(n.tagName),t.transformTemplate),SS(n,r)})})}})},K8={useVisualState:vS({scrapeMotionValuesFromProps:tg,createRenderState:Jm})};function NS(t,e,n){for(const r in e)!en(e[r])&&!bS(r,n)&&(t[r]=e[r])}function X8({transformTemplate:t},e){return b.useMemo(()=>{const n=Jm();return Qm(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Y8(t,e){const n=t.style||{},r={};return NS(r,n,t),Object.assign(r,X8(t,e)),r}function q8(t,e){const n={},r=Y8(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function Q8(t,e,n,r){const i=b.useMemo(()=>{const s=_S();return Zm(s,e,eg(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};NS(s,t.style,t),i.style={...s,...i.style}}return i}function Z8(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(Km(n)?Q8:q8)(r,s,o,n),c=h8(r,typeof n=="string",t),d=n!==b.Fragment?{...c,...l,ref:i}:{},{children:f}=r,h=b.useMemo(()=>en(f)?f.get():f,[f]);return b.createElement(n,{...d,children:h})}}function J8(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Km(r)?G8:K8,preloadedFeatures:t,useRender:Z8(i),createVisualElement:e,Component:r};return C8(o)}}function TS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Df(t,e,n){const r=t.getProps();return Xm(r,e,n!==void 0?n:r.custom,t)}const e6=Hm(()=>window.ScrollTimeline!==void 0);class t6{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(e6()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class n6 extends t6{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function ng(t,e){return t?t[e]||t.default||t:void 0}const Rp=2e4;function IS(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Rp;)e+=n,r=t.next(e);return e>=Rp?1/0:e}function rg(t){return typeof t=="function"}function hx(t,e){t.timeline=e,t.onfinish=null}const ig=t=>Array.isArray(t)&&typeof t[0]=="number",r6={linearEasing:void 0};function i6(t,e){const n=Hm(t);return()=>{var r;return(r=r6[e])!==null&&r!==void 0?r:n()}}const Nd=i6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),kS=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(oa(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function PS(t){return!!(typeof t=="function"&&Nd()||!t||typeof t=="string"&&(t in Op||Nd())||ig(t)||Array.isArray(t)&&t.every(PS))}const ol=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Op={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ol([0,.65,.55,1]),circOut:ol([.55,0,1,.45]),backIn:ol([.31,.01,.66,-.59]),backOut:ol([.33,1.53,.69,.99])};function RS(t,e){if(t)return typeof t=="function"&&Nd()?kS(t,e):ig(t)?ol(t):Array.isArray(t)?t.map(n=>RS(n,e)||Op.easeOut):Op[t]}const ar={x:!1,y:!1};function OS(){return ar.x||ar.y}function s6(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function DS(t,e){const n=s6(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function px(t){return e=>{e.pointerType==="touch"||OS()||t(e)}}function o6(t,e,n={}){const[r,i,s]=DS(t,n),o=px(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const d=px(f=>{c(f),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const MS=(t,e)=>e?t===e?!0:MS(t,e.parentElement):!1,sg=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,a6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function l6(t){return a6.has(t.tagName)||t.tabIndex!==-1}const al=new WeakSet;function mx(t){return e=>{e.key==="Enter"&&t(e)}}function Uh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const c6=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=mx(()=>{if(al.has(n))return;Uh(n,"down");const i=mx(()=>{Uh(n,"up")}),s=()=>Uh(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function gx(t){return sg(t)&&!OS()}function u6(t,e,n={}){const[r,i,s]=DS(t,n),o=a=>{const l=a.currentTarget;if(!gx(a)||al.has(l))return;al.add(l);const c=e(a),d=(p,m)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),!(!gx(p)||!al.has(l))&&(al.delete(l),typeof c=="function"&&c(p,{success:m}))},f=p=>{d(p,n.useGlobalTarget||MS(l,p.target))},h=p=>{d(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return r.forEach(a=>{!l6(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>c6(c,i),i)}),s}function d6(t){return t==="x"||t==="y"?ar[t]?null:(ar[t]=!0,()=>{ar[t]=!1}):ar.x||ar.y?null:(ar.x=ar.y=!0,()=>{ar.x=ar.y=!1})}const jS=new Set(["width","height","top","left","right","bottom",...ba]);let Wu;function f6(){Wu=void 0}const Rr={now:()=>(Wu===void 0&&Rr.set(Wt.isProcessing||a8.useManualTiming?Wt.timestamp:performance.now()),Wu),set:t=>{Wu=t,queueMicrotask(f6)}};function og(t,e){t.indexOf(e)===-1&&t.push(e)}function ag(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class lg{constructor(){this.subscriptions=[]}add(e){return og(this.subscriptions,e),()=>ag(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function LS(t,e){return e?t*(1e3/e):0}const vx=30,h6=t=>!isNaN(parseFloat(t));class p6{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Rr.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Rr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=h6(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new lg);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ke.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Rr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>vx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,vx);return LS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nc(t,e){return new p6(t,e)}function m6(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,nc(n))}function g6(t,e){const n=Df(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=T8(s[o]);m6(t,o,a)}}function v6(t){return!!(en(t)&&t.add)}function Dp(t,e){const n=t.getValue("willChange");if(v6(n))return n.add(e)}function FS(t){return t.props[pS]}const BS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,y6=1e-7,x6=12;function w6(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=BS(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>y6&&++a<x6);return o}function Tc(t,e,n,r){if(t===e&&n===r)return Ln;const i=s=>w6(s,0,1,t,n);return s=>s===0||s===1?s:BS(i(s),e,r)}const US=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,VS=t=>e=>1-t(1-e),HS=Tc(.33,1.53,.69,.99),cg=VS(HS),WS=US(cg),zS=t=>(t*=2)<1?.5*cg(t):.5*(2-Math.pow(2,-10*(t-1))),ug=t=>1-Math.sin(Math.acos(t)),$S=VS(ug),GS=US(ug),KS=t=>/^0[^.\s]+$/u.test(t);function _6(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||KS(t):!0}const El=t=>Math.round(t*1e5)/1e5,dg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function C6(t){return t==null}const E6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fg=(t,e)=>n=>!!(typeof n=="string"&&E6.test(n)&&n.startsWith(t)||e&&!C6(n)&&Object.prototype.hasOwnProperty.call(n,e)),XS=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(dg);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},S6=t=>ui(0,255,t),Vh={...Aa,transform:t=>Math.round(S6(t))},Ls={test:fg("rgb","red"),parse:XS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Vh.transform(t)+", "+Vh.transform(e)+", "+Vh.transform(n)+", "+El(tc.transform(r))+")"};function b6(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Mp={test:fg("#"),parse:b6,transform:Ls.transform},Do={test:fg("hsl","hue"),parse:XS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Pr.transform(El(e))+", "+Pr.transform(El(n))+", "+El(tc.transform(r))+")"},Zt={test:t=>Ls.test(t)||Mp.test(t)||Do.test(t),parse:t=>Ls.test(t)?Ls.parse(t):Do.test(t)?Do.parse(t):Mp.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ls.transform(t):Do.transform(t)},A6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function N6(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(dg))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(A6))===null||n===void 0?void 0:n.length)||0)>0}const YS="number",qS="color",T6="var",I6="var(",yx="${}",k6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(k6,l=>(Zt.test(l)?(r.color.push(s),i.push(qS),n.push(Zt.parse(l))):l.startsWith(I6)?(r.var.push(s),i.push(T6),n.push(l)):(r.number.push(s),i.push(YS),n.push(parseFloat(l))),++s,yx)).split(yx);return{values:n,split:a,indexes:r,types:i}}function QS(t){return rc(t).values}function ZS(t){const{split:e,types:n}=rc(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===YS?s+=El(i[o]):a===qS?s+=Zt.transform(i[o]):s+=i[o]}return s}}const P6=t=>typeof t=="number"?0:t;function R6(t){const e=QS(t);return ZS(t)(e.map(P6))}const ss={test:N6,parse:QS,createTransformer:ZS,getAnimatableNone:R6},O6=new Set(["brightness","contrast","saturate","opacity"]);function D6(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(dg)||[];if(!r)return t;const i=n.replace(r,"");let s=O6.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const M6=/\b([a-z-]*)\(.*?\)/gu,jp={...ss,getAnimatableNone:t=>{const e=t.match(M6);return e?e.map(D6).join(" "):t}},j6={...qm,color:Zt,backgroundColor:Zt,outlineColor:Zt,fill:Zt,stroke:Zt,borderColor:Zt,borderTopColor:Zt,borderRightColor:Zt,borderBottomColor:Zt,borderLeftColor:Zt,filter:jp,WebkitFilter:jp},hg=t=>j6[t];function JS(t,e){let n=hg(t);return n!==jp&&(n=ss),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const L6=new Set(["auto","none","0"]);function F6(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!L6.has(s)&&rc(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=JS(n,i)}const xx=t=>t===Aa||t===ae,wx=(t,e)=>parseFloat(t.split(", ")[e]),_x=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return wx(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?wx(s[1],t):0}},B6=new Set(["x","y","z"]),U6=ba.filter(t=>!B6.has(t));function V6(t){const e=[];return U6.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const la={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:_x(4,13),y:_x(5,14)};la.translateX=la.x;la.translateY=la.y;const zs=new Set;let Lp=!1,Fp=!1;function eb(){if(Fp){const t=Array.from(zs).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=V6(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Fp=!1,Lp=!1,zs.forEach(t=>t.complete()),zs.clear()}function tb(){zs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Fp=!0)})}function H6(){tb(),eb()}class pg{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(zs.add(this),Lp||(Lp=!0,Ke.read(tb),Ke.resolveKeyframes(eb))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),zs.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,zs.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const nb=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),W6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function z6(t){const e=W6.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function rb(t,e,n=1){const[r,i]=z6(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return nb(o)?parseFloat(o):o}return Ym(i)?rb(i,e,n+1):i}const ib=t=>e=>e.test(t),$6={test:t=>t==="auto",parse:t=>t},sb=[Aa,ae,Pr,Ai,D8,O8,$6],Cx=t=>sb.find(ib(t));class ob extends pg{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Ym(c))){const d=rb(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!jS.has(r)||e.length!==2)return;const[i,s]=e,o=Cx(i),a=Cx(s);if(o!==a)if(xx(o)&&xx(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)_6(e[i])&&r.push(i);r.length&&F6(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=la[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=la[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Ex=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ss.test(t)||t==="0")&&!t.startsWith("url("));function G6(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function K6(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Ex(i,e),a=Ex(s,e);return!o||!a?!1:G6(t)||(n==="spring"||rg(n))&&r}const X6=t=>t!==null;function Mf(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(X6),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Y6=40;class ab{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Rr.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Y6?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&H6(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Rr.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!K6(e,r,i,s))if(o)this.options.duration=0;else{l&&l(Mf(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const tt=(t,e,n)=>t+(e-t)*n;function Hh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function q6({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Hh(l,a,t+1/3),s=Hh(l,a,t),o=Hh(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Td(t,e){return n=>n>0?e:t}const Wh=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Q6=[Mp,Ls,Do],Z6=t=>Q6.find(e=>e.test(t));function Sx(t){const e=Z6(t);if(!e)return!1;let n=e.parse(t);return e===Do&&(n=q6(n)),n}const bx=(t,e)=>{const n=Sx(t),r=Sx(e);if(!n||!r)return Td(t,e);const i={...n};return s=>(i.red=Wh(n.red,r.red,s),i.green=Wh(n.green,r.green,s),i.blue=Wh(n.blue,r.blue,s),i.alpha=tt(n.alpha,r.alpha,s),Ls.transform(i))},J6=(t,e)=>n=>e(t(n)),Ic=(...t)=>t.reduce(J6),Bp=new Set(["none","hidden"]);function ek(t,e){return Bp.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function tk(t,e){return n=>tt(t,e,n)}function mg(t){return typeof t=="number"?tk:typeof t=="string"?Ym(t)?Td:Zt.test(t)?bx:ik:Array.isArray(t)?lb:typeof t=="object"?Zt.test(t)?bx:nk:Td}function lb(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>mg(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function nk(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=mg(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function rk(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const ik=(t,e)=>{const n=ss.createTransformer(e),r=rc(t),i=rc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Bp.has(t)&&!i.values.length||Bp.has(e)&&!r.values.length?ek(t,e):Ic(lb(rk(r,i),i.values),n):Td(t,e)};function cb(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?tt(t,e,n):mg(t)(t,e)}const sk=5;function ub(t,e,n){const r=Math.max(e-sk,0);return LS(n-t(r),e-r)}const st={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zh=.001;function ok({duration:t=st.duration,bounce:e=st.bounce,velocity:n=st.velocity,mass:r=st.mass}){let i,s,o=1-e;o=ui(st.minDamping,st.maxDamping,o),t=ui(st.minDuration,st.maxDuration,ni(t)),o<1?(i=c=>{const d=c*o,f=d*t,h=d-n,p=Up(c,o),m=Math.exp(-f);return zh-h/p*m},s=c=>{const f=c*o*t,h=f*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,m=Math.exp(-f),v=Up(Math.pow(c,2),o);return(-i(c)+zh>0?-1:1)*((h-p)*m)/v}):(i=c=>{const d=Math.exp(-c*t),f=(c-n)*t+1;return-zh+d*f},s=c=>{const d=Math.exp(-c*t),f=(n-c)*(t*t);return d*f});const a=5/t,l=lk(i,s,a);if(t=ti(t),isNaN(l))return{stiffness:st.stiffness,damping:st.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const ak=12;function lk(t,e,n){let r=n;for(let i=1;i<ak;i++)r=r-t(r)/e(r);return r}function Up(t,e){return t*Math.sqrt(1-e*e)}const ck=["duration","bounce"],uk=["stiffness","damping","mass"];function Ax(t,e){return e.some(n=>t[n]!==void 0)}function dk(t){let e={velocity:st.velocity,stiffness:st.stiffness,damping:st.damping,mass:st.mass,isResolvedFromDuration:!1,...t};if(!Ax(t,uk)&&Ax(t,ck))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*ui(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:st.mass,stiffness:i,damping:s}}else{const n=ok(t);e={...e,...n,mass:st.mass},e.isResolvedFromDuration=!0}return e}function db(t=st.visualDuration,e=st.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:f,velocity:h,isResolvedFromDuration:p}=dk({...n,velocity:-ni(n.velocity||0)}),m=h||0,v=c/(2*Math.sqrt(l*d)),w=o-s,y=ni(Math.sqrt(l/d)),g=Math.abs(w)<5;r||(r=g?st.restSpeed.granular:st.restSpeed.default),i||(i=g?st.restDelta.granular:st.restDelta.default);let x;if(v<1){const C=Up(y,v);x=E=>{const A=Math.exp(-v*y*E);return o-A*((m+v*y*w)/C*Math.sin(C*E)+w*Math.cos(C*E))}}else if(v===1)x=C=>o-Math.exp(-y*C)*(w+(m+y*w)*C);else{const C=y*Math.sqrt(v*v-1);x=E=>{const A=Math.exp(-v*y*E),T=Math.min(C*E,300);return o-A*((m+v*y*w)*Math.sinh(T)+C*w*Math.cosh(T))/C}}const _={calculatedDuration:p&&f||null,next:C=>{const E=x(C);if(p)a.done=C>=f;else{let A=0;v<1&&(A=C===0?ti(m):ub(x,C,E));const T=Math.abs(A)<=r,k=Math.abs(o-E)<=i;a.done=T&&k}return a.value=a.done?o:E,a},toString:()=>{const C=Math.min(IS(_),Rp),E=kS(A=>_.next(C*A).value,C,30);return C+"ms "+E}};return _}function Nx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const f=t[0],h={done:!1,value:f},p=T=>a!==void 0&&T<a||l!==void 0&&T>l,m=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let v=n*e;const w=f+v,y=o===void 0?w:o(w);y!==w&&(v=y-f);const g=T=>-v*Math.exp(-T/r),x=T=>y+g(T),_=T=>{const k=g(T),O=x(T);h.done=Math.abs(k)<=c,h.value=h.done?y:O};let C,E;const A=T=>{p(h.value)&&(C=T,E=db({keyframes:[h.value,m(h.value)],velocity:ub(x,T,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:d}))};return A(0),{calculatedDuration:null,next:T=>{let k=!1;return!E&&C===void 0&&(k=!0,_(T),A(T)),C!==void 0&&T>=C?E.next(T-C):(!k&&_(T),h)}}}const fk=Tc(.42,0,1,1),hk=Tc(0,0,.58,1),fb=Tc(.42,0,.58,1),pk=t=>Array.isArray(t)&&typeof t[0]!="number",mk={linear:Ln,easeIn:fk,easeInOut:fb,easeOut:hk,circIn:ug,circInOut:GS,circOut:$S,backIn:cg,backInOut:WS,backOut:HS,anticipate:zS},Tx=t=>{if(ig(t)){cS(t.length===4);const[e,n,r,i]=t;return Tc(e,n,r,i)}else if(typeof t=="string")return mk[t];return t};function gk(t,e,n){const r=[],i=n||cb,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ln:e;a=Ic(l,a)}r.push(a)}return r}function vk(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(cS(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=gk(e,r,i),l=a.length,c=d=>{if(o&&d<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const h=oa(t[f],t[f+1],d);return a[f](h)};return n?d=>c(ui(t[0],t[s-1],d)):c}function yk(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=oa(0,e,r);t.push(tt(n,1,i))}}function xk(t){const e=[0];return yk(e,t.length-1),e}function wk(t,e){return t.map(n=>n*e)}function _k(t,e){return t.map(()=>e||fb).splice(0,t.length-1)}function Id({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=pk(r)?r.map(Tx):Tx(r),s={done:!1,value:e[0]},o=wk(n&&n.length===e.length?n:xk(e),t),a=vk(o,e,{ease:Array.isArray(i)?i:_k(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Ck=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ke.update(e,!0),stop:()=>is(e),now:()=>Wt.isProcessing?Wt.timestamp:Rr.now()}},Ek={decay:Nx,inertia:Nx,tween:Id,keyframes:Id,spring:db},Sk=t=>t/100;class gg extends ab{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||pg,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=rg(n)?n:Ek[n]||Id;let l,c;a!==Id&&typeof e[0]!="number"&&(l=Ic(Sk,cb(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=IS(d));const{calculatedDuration:f}=d,h=f+i,p=h*(r+1)-i;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:p,repeatType:m,repeatDelay:v,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-h*(this.speed>=0?1:-1),g=this.speed>=0?y<0:y>d;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let x=this.currentTime,_=s;if(p){const T=Math.min(this.currentTime,d)/f;let k=Math.floor(T),O=T%1;!O&&T>=1&&(O=1),O===1&&k--,k=Math.min(k,p+1),!!(k%2)&&(m==="reverse"?(O=1-O,v&&(O-=v/f)):m==="mirror"&&(_=o)),x=ui(0,1,O)*f}const C=g?{done:!1,value:l[0]}:_.next(x);a&&(C.value=a(C.value));let{done:E}=C;!g&&c!==null&&(E=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return A&&i!==void 0&&(C.value=Mf(l,this.options,i)),w&&w(C.value),A&&this.finish(),C}get duration(){const{resolved:e}=this;return e?ni(e.calculatedDuration):0}get time(){return ni(this.currentTime)}set time(e){e=ti(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ni(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Ck,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const bk=new Set(["opacity","clipPath","filter","transform"]);function Ak(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const d=RS(a,i);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Nk=Hm(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),kd=10,Tk=2e4;function Ik(t){return rg(t.type)||t.type==="spring"||!PS(t.ease)}function kk(t,e){const n=new gg({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<Tk;)r=n.sample(s),i.push(r.value),s+=kd;return{times:void 0,keyframes:i,duration:s-kd,ease:"linear"}}const hb={anticipate:zS,backInOut:WS,circInOut:GS};function Pk(t){return t in hb}class Ix extends ab{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new ob(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Nd()&&Pk(s)&&(s=hb[s]),Ik(this.options)){const{onComplete:f,onUpdate:h,motionValue:p,element:m,...v}=this.options,w=kk(e,v);e=w.keyframes,e.length===1&&(e[1]=e[0]),r=w.duration,i=w.times,s=w.ease,o="keyframes"}const d=Ak(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(hx(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;a.set(Mf(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ni(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ni(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=ti(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ln;const{animation:r}=n;hx(r,e)}return Ln}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:f,element:h,...p}=this.options,m=new gg({...p,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),v=ti(this.time);c.setWithVelocity(m.sample(v-kd).value,m.sample(v).value,kd)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Nk()&&r&&bk.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const Rk={type:"spring",stiffness:500,damping:25,restSpeed:10},Ok=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Dk={type:"keyframes",duration:.8},Mk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},jk=(t,{keyframes:e})=>e.length>2?Dk:uo.has(t)?t.startsWith("scale")?Ok(e[1]):Rk:Mk;function Lk({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const vg=(t,e,n,r={},i,s)=>o=>{const a=ng(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-ti(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};Lk(a)||(d={...d,...jk(t,d)}),d.duration&&(d.duration=ti(d.duration)),d.repeatDelay&&(d.repeatDelay=ti(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const h=Mf(d.keyframes,a);if(h!==void 0)return Ke.update(()=>{d.onUpdate(h),d.onComplete()}),new n6([])}return!s&&Ix.supports(d)?new Ix(d):new gg(d)};function Fk({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function pb(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const h=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),p=l[f];if(p===void 0||d&&Fk(d,f))continue;const m={delay:n,...ng(o||{},f)};let v=!1;if(window.MotionHandoffAnimation){const y=FS(t);if(y){const g=window.MotionHandoffAnimation(y,f,Ke);g!==null&&(m.startTime=g,v=!0)}}Dp(t,f),h.start(vg(f,h,p,t.shouldReduceMotion&&jS.has(f)?{type:!1}:m,t,v));const w=h.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{Ke.update(()=>{a&&g6(t,a)})}),c}function Vp(t,e,n={}){var r;const i=Df(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(pb(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:h}=s;return Bk(t,e,d+c,f,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(n.delay)])}function Bk(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Uk).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(Vp(c,e,{...s,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Uk(t,e){return t.sortNodePosition(e)}function Vk(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Vp(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Vp(t,e,n);else{const i=typeof e=="function"?Df(t,e,n.custom):e;r=Promise.all(pb(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Hk=zm.length;function mb(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?mb(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Hk;n++){const r=zm[n],i=t.props[r];(ec(i)||i===!1)&&(e[r]=i)}return e}const Wk=[...Wm].reverse(),zk=Wm.length;function $k(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Vk(t,n,r)))}function Gk(t){let e=$k(t),n=kx(),r=!0;const i=l=>(c,d)=>{var f;const h=Df(t,d,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:m,...v}=h;c={...c,...v,...m}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,d=mb(t.parent)||{},f=[],h=new Set;let p={},m=1/0;for(let w=0;w<zk;w++){const y=Wk[w],g=n[y],x=c[y]!==void 0?c[y]:d[y],_=ec(x),C=y===l?g.isActive:null;C===!1&&(m=w);let E=x===d[y]&&x!==c[y]&&_;if(E&&r&&t.manuallyAnimateOnMount&&(E=!1),g.protectedKeys={...p},!g.isActive&&C===null||!x&&!g.prevProp||Rf(x)||typeof x=="boolean")continue;const A=Kk(g.prevProp,x);let T=A||y===l&&g.isActive&&!E&&_||w>m&&_,k=!1;const O=Array.isArray(x)?x:[x];let q=O.reduce(i(y),{});C===!1&&(q={});const{prevResolvedValues:G={}}=g,D={...G,...q},L=se=>{T=!0,h.has(se)&&(k=!0,h.delete(se)),g.needsAnimating[se]=!0;const V=t.getValue(se);V&&(V.liveStyle=!1)};for(const se in D){const V=q[se],Z=G[se];if(p.hasOwnProperty(se))continue;let re=!1;Pp(V)&&Pp(Z)?re=!TS(V,Z):re=V!==Z,re?V!=null?L(se):h.add(se):V!==void 0&&h.has(se)?L(se):g.protectedKeys[se]=!0}g.prevProp=x,g.prevResolvedValues=q,g.isActive&&(p={...p,...q}),r&&t.blockInitialAnimation&&(T=!1),T&&(!(E&&A)||k)&&f.push(...O.map(se=>({animation:se,options:{type:y}})))}if(h.size){const w={};h.forEach(y=>{const g=t.getBaseTarget(y),x=t.getValue(y);x&&(x.liveStyle=!0),w[y]=g??null}),f.push({animation:w})}let v=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(f):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const f=o(l);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=kx(),r=!0}}}function Kk(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!TS(e,t):!1}function Cs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kx(){return{animate:Cs(!0),whileInView:Cs(),whileHover:Cs(),whileTap:Cs(),whileDrag:Cs(),whileFocus:Cs(),exit:Cs()}}class ms{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Xk extends ms{constructor(e){super(e),e.animationState||(e.animationState=Gk(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Rf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Yk=0;class qk extends ms{constructor(){super(...arguments),this.id=Yk++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Qk={animation:{Feature:Xk},exit:{Feature:qk}};function ic(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function kc(t){return{point:{x:t.pageX,y:t.pageY}}}const Zk=t=>e=>sg(e)&&t(e,kc(e));function Sl(t,e,n,r){return ic(t,e,Zk(n),r)}const Px=(t,e)=>Math.abs(t-e);function Jk(t,e){const n=Px(t.x,e.x),r=Px(t.y,e.y);return Math.sqrt(n**2+r**2)}class gb{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Gh(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=Jk(f.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:m}=f,{timestamp:v}=Wt;this.history.push({...m,timestamp:v});const{onStart:w,onMove:y}=this.handlers;h||(w&&w(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=$h(h,this.transformPagePoint),Ke.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Gh(f.type==="pointercancel"?this.lastMoveEventInfo:$h(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,w),m&&m(f,w)},!sg(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=kc(e),a=$h(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Wt;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,Gh(a,this.history)),this.removeListeners=Ic(Sl(this.contextWindow,"pointermove",this.handlePointerMove),Sl(this.contextWindow,"pointerup",this.handlePointerUp),Sl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),is(this.updatePoint)}}function $h(t,e){return e?{point:e(t.point)}:t}function Rx(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Gh({point:t},e){return{point:t,delta:Rx(t,vb(e)),offset:Rx(t,eP(e)),velocity:tP(e,.1)}}function eP(t){return t[0]}function vb(t){return t[t.length-1]}function tP(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=vb(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ti(e)));)n--;if(!r)return{x:0,y:0};const s=ni(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const yb=1e-4,nP=1-yb,rP=1+yb,xb=.01,iP=0-xb,sP=0+xb;function Bn(t){return t.max-t.min}function oP(t,e,n){return Math.abs(t-e)<=n}function Ox(t,e,n,r=.5){t.origin=r,t.originPoint=tt(e.min,e.max,t.origin),t.scale=Bn(n)/Bn(e),t.translate=tt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=nP&&t.scale<=rP||isNaN(t.scale))&&(t.scale=1),(t.translate>=iP&&t.translate<=sP||isNaN(t.translate))&&(t.translate=0)}function bl(t,e,n,r){Ox(t.x,e.x,n.x,r?r.originX:void 0),Ox(t.y,e.y,n.y,r?r.originY:void 0)}function Dx(t,e,n){t.min=n.min+e.min,t.max=t.min+Bn(e)}function aP(t,e,n){Dx(t.x,e.x,n.x),Dx(t.y,e.y,n.y)}function Mx(t,e,n){t.min=e.min-n.min,t.max=t.min+Bn(e)}function Al(t,e,n){Mx(t.x,e.x,n.x),Mx(t.y,e.y,n.y)}function lP(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?tt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?tt(n,t,r.max):Math.min(t,n)),t}function jx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function cP(t,{top:e,left:n,bottom:r,right:i}){return{x:jx(t.x,n,i),y:jx(t.y,e,r)}}function Lx(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function uP(t,e){return{x:Lx(t.x,e.x),y:Lx(t.y,e.y)}}function dP(t,e){let n=.5;const r=Bn(t),i=Bn(e);return i>r?n=oa(e.min,e.max-r,t.min):r>i&&(n=oa(t.min,t.max-i,e.min)),ui(0,1,n)}function fP(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Hp=.35;function hP(t=Hp){return t===!1?t=0:t===!0&&(t=Hp),{x:Fx(t,"left","right"),y:Fx(t,"top","bottom")}}function Fx(t,e,n){return{min:Bx(t,e),max:Bx(t,n)}}function Bx(t,e){return typeof t=="number"?t:t[e]||0}const Ux=()=>({translate:0,scale:1,origin:0,originPoint:0}),Mo=()=>({x:Ux(),y:Ux()}),Vx=()=>({min:0,max:0}),ct=()=>({x:Vx(),y:Vx()});function zn(t){return[t("x"),t("y")]}function wb({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function pP({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function mP(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Kh(t){return t===void 0||t===1}function Wp({scale:t,scaleX:e,scaleY:n}){return!Kh(t)||!Kh(e)||!Kh(n)}function Ns(t){return Wp(t)||_b(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _b(t){return Hx(t.x)||Hx(t.y)}function Hx(t){return t&&t!=="0%"}function Pd(t,e,n){const r=t-n,i=e*r;return n+i}function Wx(t,e,n,r,i){return i!==void 0&&(t=Pd(t,i,r)),Pd(t,n,r)+e}function zp(t,e=0,n=1,r,i){t.min=Wx(t.min,e,n,r,i),t.max=Wx(t.max,e,n,r,i)}function Cb(t,{x:e,y:n}){zp(t.x,e.translate,e.scale,e.originPoint),zp(t.y,n.translate,n.scale,n.originPoint)}const zx=.999999999999,$x=1.0000000000001;function gP(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Lo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Cb(t,o)),r&&Ns(s.latestValues)&&Lo(t,s.latestValues))}e.x<$x&&e.x>zx&&(e.x=1),e.y<$x&&e.y>zx&&(e.y=1)}function jo(t,e){t.min=t.min+e,t.max=t.max+e}function Gx(t,e,n,r,i=.5){const s=tt(t.min,t.max,i);zp(t,e,n,s,r)}function Lo(t,e){Gx(t.x,e.x,e.scaleX,e.scale,e.originX),Gx(t.y,e.y,e.scaleY,e.scale,e.originY)}function Eb(t,e){return wb(mP(t.getBoundingClientRect(),e))}function vP(t,e,n){const r=Eb(t,n),{scroll:i}=e;return i&&(jo(r.x,i.offset.x),jo(r.y,i.offset.y)),r}const Sb=({current:t})=>t?t.ownerDocument.defaultView:null,yP=new WeakMap;class xP{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ct(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(kc(d).point)},s=(d,f)=>{const{drag:h,dragPropagation:p,onDragStart:m}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d6(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zn(w=>{let y=this.getAxisMotionValue(w).get()||0;if(Pr.test(y)){const{projection:g}=this.visualElement;if(g&&g.layout){const x=g.layout.layoutBox[w];x&&(y=Bn(x)*(parseFloat(y)/100))}}this.originPoint[w]=y}),m&&Ke.postRender(()=>m(d,f)),Dp(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:m,onDrag:v}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:w}=f;if(p&&this.currentDirection===null){this.currentDirection=wP(w),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),v&&v(d,f)},a=(d,f)=>this.stop(d,f),l=()=>zn(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new gb(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Sb(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ke.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!mu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=lP(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Oo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=cP(i.layoutBox,n):this.constraints=!1,this.elastic=hP(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&zn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=fP(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Oo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=vP(r,i.root,this.visualElement.getTransformPagePoint());let o=uP(i.layout.layoutBox,s);if(n){const a=n(pP(o));this.hasMutatedConstraints=!!a,a&&(o=wb(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=zn(d=>{if(!mu(d,n,this.currentDirection))return;let f=l&&l[d]||{};o&&(f={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,m={type:"inertia",velocity:r?e[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,m)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Dp(this.visualElement,e),r.start(vg(e,r,0,n,this.visualElement,!1))}stopAnimation(){zn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zn(n=>{const{drag:r}=this.getProps();if(!mu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-tt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Oo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};zn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=dP({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zn(o=>{if(!mu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(tt(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;yP.set(this.visualElement,this);const e=this.visualElement.current,n=Sl(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Oo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ke.read(r);const o=ic(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(zn(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Hp,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function mu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function wP(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class _P extends ms{constructor(e){super(e),this.removeGroupControls=Ln,this.removeListeners=Ln,this.controls=new xP(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ln}unmount(){this.removeGroupControls(),this.removeListeners()}}const Kx=t=>(e,n)=>{t&&Ke.postRender(()=>t(e,n))};class CP extends ms{constructor(){super(...arguments),this.removePointerDownListener=Ln}onPointerDown(e){this.session=new gb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Sb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Kx(e),onStart:Kx(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ke.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Sl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const zu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Xx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ga={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ae.test(t))t=parseFloat(t);else return t;const n=Xx(t,e.target.x),r=Xx(t,e.target.y);return`${n}% ${r}%`}},EP={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ss.parse(t);if(i.length>5)return r;const s=ss.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=tt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class SP extends b.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;z8(bP),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),zu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ke.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Gm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bb(t){const[e,n]=aS(),r=b.useContext(Fm);return u.jsx(SP,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(mS),isPresent:e,safeToRemove:n})}const bP={borderRadius:{...Ga,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ga,borderTopRightRadius:Ga,borderBottomLeftRadius:Ga,borderBottomRightRadius:Ga,boxShadow:EP};function AP(t,e,n){const r=en(t)?t:nc(t);return r.start(vg("",r,e,n)),r.animation}function NP(t){return t instanceof SVGElement&&t.tagName!=="svg"}const TP=(t,e)=>t.depth-e.depth;class IP{constructor(){this.children=[],this.isDirty=!1}add(e){og(this.children,e),this.isDirty=!0}remove(e){ag(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(TP),this.isDirty=!1,this.children.forEach(e)}}function kP(t,e){const n=Rr.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(is(r),t(s-e))};return Ke.read(r,!0),()=>is(r)}const Ab=["TopLeft","TopRight","BottomLeft","BottomRight"],PP=Ab.length,Yx=t=>typeof t=="string"?parseFloat(t):t,qx=t=>typeof t=="number"||ae.test(t);function RP(t,e,n,r,i,s){i?(t.opacity=tt(0,n.opacity!==void 0?n.opacity:1,OP(r)),t.opacityExit=tt(e.opacity!==void 0?e.opacity:1,0,DP(r))):s&&(t.opacity=tt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<PP;o++){const a=`border${Ab[o]}Radius`;let l=Qx(e,a),c=Qx(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||qx(l)===qx(c)?(t[a]=Math.max(tt(Yx(l),Yx(c),r),0),(Pr.test(c)||Pr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=tt(e.rotate||0,n.rotate||0,r))}function Qx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const OP=Nb(0,.5,$S),DP=Nb(.5,.95,Ln);function Nb(t,e,n){return r=>r<t?0:r>e?1:n(oa(t,e,r))}function Zx(t,e){t.min=e.min,t.max=e.max}function Wn(t,e){Zx(t.x,e.x),Zx(t.y,e.y)}function Jx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function e2(t,e,n,r,i){return t-=e,t=Pd(t,1/n,r),i!==void 0&&(t=Pd(t,1/i,r)),t}function MP(t,e=0,n=1,r=.5,i,s=t,o=t){if(Pr.test(e)&&(e=parseFloat(e),e=tt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=tt(s.min,s.max,r);t===s&&(a-=e),t.min=e2(t.min,e,n,a,i),t.max=e2(t.max,e,n,a,i)}function t2(t,e,[n,r,i],s,o){MP(t,e[n],e[r],e[i],e.scale,s,o)}const jP=["x","scaleX","originX"],LP=["y","scaleY","originY"];function n2(t,e,n,r){t2(t.x,e,jP,n?n.x:void 0,r?r.x:void 0),t2(t.y,e,LP,n?n.y:void 0,r?r.y:void 0)}function r2(t){return t.translate===0&&t.scale===1}function Tb(t){return r2(t.x)&&r2(t.y)}function i2(t,e){return t.min===e.min&&t.max===e.max}function FP(t,e){return i2(t.x,e.x)&&i2(t.y,e.y)}function s2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Ib(t,e){return s2(t.x,e.x)&&s2(t.y,e.y)}function o2(t){return Bn(t.x)/Bn(t.y)}function a2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class BP{constructor(){this.members=[]}add(e){og(this.members,e),e.scheduleRender()}remove(e){if(ag(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function UP(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:f,rotateY:h,skewX:p,skewY:m}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),m&&(r+=`skewY(${m}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Ts={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ll=typeof window<"u"&&window.MotionDebug!==void 0,Xh=["","X","Y","Z"],VP={visibility:"hidden"},l2=1e3;let HP=0;function Yh(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function kb(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=FS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ke,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&kb(r)}function Pb({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=HP++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ll&&(Ts.totalNodes=Ts.resolvedTargetDeltas=Ts.recalculatedProjection=0),this.nodes.forEach($P),this.nodes.forEach(qP),this.nodes.forEach(QP),this.nodes.forEach(GP),ll&&window.MotionDebug.record(Ts)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new IP)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new lg),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=NP(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=kP(h,250),zu.hasAnimatedSinceResize&&(zu.hasAnimatedSinceResize=!1,this.nodes.forEach(u2))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||nR,{onLayoutAnimationStart:w,onLayoutAnimationComplete:y}=d.getProps(),g=!this.targetLayout||!Ib(this.targetLayout,m)||p,x=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||h&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,x);const _={...ng(v,"layout"),onPlay:w,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else h||u2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,is(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ZP),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(c2);return}this.isUpdating||this.nodes.forEach(XP),this.isUpdating=!1,this.nodes.forEach(YP),this.nodes.forEach(WP),this.nodes.forEach(zP),this.clearAllSnapshots();const a=Rr.now();Wt.delta=ui(0,1e3/60,a-Wt.timestamp),Wt.timestamp=a,Wt.isProcessing=!0,Bh.update.process(Wt),Bh.preRender.process(Wt),Bh.render.process(Wt),Wt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Gm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KP),this.sharedNodes.forEach(JP)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ke.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ke.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ct(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Tb(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||Ns(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),rR(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ct();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(iR))){const{scroll:d}=this.root;d&&(jo(l.x,d.offset.x),jo(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=ct();if(Wn(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:f,options:h}=d;d!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Wn(l,o),jo(l.x,f.offset.x),jo(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=ct();Wn(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Lo(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ns(d.latestValues)&&Lo(l,d.latestValues)}return Ns(this.latestValues)&&Lo(l,this.latestValues),l}removeTransform(o){const a=ct();Wn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ns(c.latestValues))continue;Wp(c.latestValues)&&c.updateSnapshot();const d=ct(),f=c.measurePageBox();Wn(d,f),n2(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Ns(this.latestValues)&&n2(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Wt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),Al(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ct(),this.targetWithTransforms=ct()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wn(this.target,this.layout.layoutBox),Cb(this.target,this.targetDelta)):Wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),Al(this.relativeTargetOrigin,this.target,p.target),Wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ll&&Ts.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Wp(this.parent.latestValues)||_b(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Wt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Wn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;gP(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ct());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Jx(this.prevProjectionDelta.x,this.projectionDelta.x),Jx(this.prevProjectionDelta.y,this.projectionDelta.y)),bl(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!a2(this.projectionDelta.x,this.prevProjectionDelta.x)||!a2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),ll&&Ts.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Mo(),this.projectionDelta=Mo(),this.projectionDeltaWithTransform=Mo()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},f=Mo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=ct(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,v=p!==m,w=this.getStack(),y=!w||w.members.length<=1,g=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(tR));this.animationProgress=0;let x;this.mixTargetDelta=_=>{const C=_/1e3;d2(f.x,o.x,C),d2(f.y,o.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Al(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eR(this.relativeTarget,this.relativeTargetOrigin,h,C),x&&FP(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=ct()),Wn(x,this.relativeTarget)),v&&(this.animationValues=d,RP(d,c,this.latestValues,C,g,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(is(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ke.update(()=>{zu.hasAnimatedSinceResize=!0,this.currentAnimation=AP(0,l2,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(l2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Rb(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ct();const f=Bn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const h=Bn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}Wn(a,l),Lo(a,d),bl(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new BP),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Yh("z",o,c,this.animationValues);for(let d=0;d<Xh.length;d++)Yh(`rotate${Xh[d]}`,o,c,this.animationValues),Yh(`skew${Xh[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return VP;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Hu(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Hu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ns(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=UP(this.projectionDeltaWithTransform,this.treeScale,h),d&&(c.transform=d(h,c.transform));const{x:p,y:m}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in Ad){if(h[v]===void 0)continue;const{correct:w,applyTo:y}=Ad[v],g=c.transform==="none"?h[v]:w(h[v],f);if(y){const x=y.length;for(let _=0;_<x;_++)c[y[_]]=g}else c[v]=g}return this.options.layoutId&&(c.pointerEvents=f===this?Hu(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(c2),this.root.sharedNodes.clear()}}}function WP(t){t.updateLayout()}function zP(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?zn(f=>{const h=o?n.measuredBox[f]:n.layoutBox[f],p=Bn(h);h.min=r[f].min,h.max=h.min+p}):Rb(s,n.layoutBox,r)&&zn(f=>{const h=o?n.measuredBox[f]:n.layoutBox[f],p=Bn(r[f]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const a=Mo();bl(a,r,n.layoutBox);const l=Mo();o?bl(l,t.applyTransform(i,!0),n.measuredBox):bl(l,r,n.layoutBox);const c=!Tb(a);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const m=ct();Al(m,n.layoutBox,h.layoutBox);const v=ct();Al(v,r,p.layoutBox),Ib(m,v)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=m,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function $P(t){ll&&Ts.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function GP(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function KP(t){t.clearSnapshot()}function c2(t){t.clearMeasurements()}function XP(t){t.isLayoutDirty=!1}function YP(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function u2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function qP(t){t.resolveTargetDelta()}function QP(t){t.calcProjection()}function ZP(t){t.resetSkewAndRotation()}function JP(t){t.removeLeadSnapshot()}function d2(t,e,n){t.translate=tt(e.translate,0,n),t.scale=tt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function f2(t,e,n,r){t.min=tt(e.min,n.min,r),t.max=tt(e.max,n.max,r)}function eR(t,e,n,r){f2(t.x,e.x,n.x,r),f2(t.y,e.y,n.y,r)}function tR(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const nR={duration:.45,ease:[.4,0,.1,1]},h2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),p2=h2("applewebkit/")&&!h2("chrome/")?Math.round:Ln;function m2(t){t.min=p2(t.min),t.max=p2(t.max)}function rR(t){m2(t.x),m2(t.y)}function Rb(t,e,n){return t==="position"||t==="preserve-aspect"&&!oP(o2(e),o2(n),.2)}function iR(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const sR=Pb({attachResizeListener:(t,e)=>ic(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),qh={current:void 0},Ob=Pb({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!qh.current){const t=new sR({});t.mount(window),t.setOptions({layoutScroll:!0}),qh.current=t}return qh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),oR={pan:{Feature:CP},drag:{Feature:_P,ProjectionNode:Ob,MeasureLayout:bb}};function g2(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ke.postRender(()=>s(e,kc(e)))}class aR extends ms{mount(){const{current:e}=this.node;e&&(this.unmount=o6(e,n=>(g2(this.node,n,"Start"),r=>g2(this.node,r,"End"))))}unmount(){}}class lR extends ms{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ic(ic(this.node.current,"focus",()=>this.onFocus()),ic(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function v2(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ke.postRender(()=>s(e,kc(e)))}class cR extends ms{mount(){const{current:e}=this.node;e&&(this.unmount=u6(e,n=>(v2(this.node,n,"Start"),(r,{success:i})=>v2(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const $p=new WeakMap,Qh=new WeakMap,uR=t=>{const e=$p.get(t.target);e&&e(t)},dR=t=>{t.forEach(uR)};function fR({root:t,...e}){const n=t||document;Qh.has(n)||Qh.set(n,{});const r=Qh.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(dR,{root:t,...e})),r[i]}function hR(t,e,n){const r=fR(e);return $p.set(t,n),r.observe(t),()=>{$p.delete(t),r.unobserve(t)}}const pR={some:0,all:1};class mR extends ms{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:pR[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=c?d:f;h&&h(l)};return hR(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(gR(e,n))&&this.startObserver()}unmount(){}}function gR({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const vR={inView:{Feature:mR},tap:{Feature:cR},focus:{Feature:lR},hover:{Feature:aR}},yR={layout:{ProjectionNode:Ob,MeasureLayout:bb}},Gp={current:null},Db={current:!1};function xR(){if(Db.current=!0,!!Vm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gp.current=t.matches;t.addListener(e),e()}else Gp.current=!1}const wR=[...sb,Zt,ss],_R=t=>wR.find(ib(t)),y2=new WeakMap;function CR(t,e,n){for(const r in e){const i=e[r],s=n[r];if(en(i))t.addValue(r,i);else if(en(s))t.addValue(r,nc(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,nc(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const x2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ER{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Rr.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ke.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Of(n),this.isVariantNode=hS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const m=h[p];l[p]!==void 0&&en(m)&&m.set(l[p],!1)}}mount(e){this.current=e,y2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Db.current||xR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){y2.delete(this.current),this.projection&&this.projection.unmount(),is(this.notifyUpdate),is(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=uo.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ke.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in aa){const n=aa[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ct()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<x2.length;r++){const i=x2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=CR(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=nc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(nb(i)||KS(i))?i=parseFloat(i):!_R(i)&&ss.test(n)&&(i=JS(e,n)),this.setBaseTarget(e,en(i)?i.get():i)),en(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Xm(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!en(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new lg),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Mb extends ER{constructor(){super(...arguments),this.KeyframeResolver=ob}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;en(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function SR(t){return window.getComputedStyle(t)}class bR extends Mb{constructor(){super(...arguments),this.type="html",this.renderInstance=CS}readValueFromInstance(e,n){if(uo.has(n)){const r=hg(n);return r&&r.default||0}else{const r=SR(e),i=(xS(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Eb(e,n)}build(e,n,r){Qm(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return tg(e,n,r)}}class AR extends Mb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ct}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(uo.has(n)){const r=hg(n);return r&&r.default||0}return n=ES.has(n)?n:$m(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return AS(e,n,r)}build(e,n,r){Zm(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){SS(e,n,r,i)}mount(e){this.isSVGTag=eg(e.tagName),super.mount(e)}}const NR=(t,e)=>Km(t)?new AR(e):new bR(e,{allowProjection:t!==b.Fragment}),TR=J8({...Qk,...vR,...oR,...yR},NR),U=p8(TR);let IR={data:""},kR=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||IR},PR=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,RR=/\/\*[^]*?\*\/|  +/g,w2=/\n+/g,Ri=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Ri(o,s):s+"{"+Ri(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Ri(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ri.p?Ri.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Wr={},jb=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+jb(t[n]);return e}return t},OR=(t,e,n,r,i)=>{let s=jb(t),o=Wr[s]||(Wr[s]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(s));if(!Wr[o]){let l=s!==t?t:(c=>{let d,f,h=[{}];for(;d=PR.exec(c.replace(RR,""));)d[4]?h.shift():d[3]?(f=d[3].replace(w2," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][d[1]]=d[2].replace(w2," ").trim();return h[0]})(t);Wr[o]=Ri(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Wr.g?Wr.g:null;return n&&(Wr.g=Wr[o]),((l,c,d,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(Wr[o],e,r,a),o},DR=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Ri(a,""):a===!1?"":a}return r+i+(o??"")},"");function jf(t){let e=this||{},n=t.call?t(e.p):t;return OR(n.unshift?n.raw?DR(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,kR(e.target),e.g,e.o,e.k)}let Lb,Kp,Xp;jf.bind({g:1});let di=jf.bind({k:1});function MR(t,e,n,r){Ri.p=e,Lb=t,Kp=n,Xp=r}function gs(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:Kp&&Kp()},a),n.o=/ *go\d+/.test(l),a.className=jf.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),Xp&&c[0]&&Xp(a),Lb(c,a)}return i}}var jR=t=>typeof t=="function",Rd=(t,e)=>jR(t)?t(e):t,LR=(()=>{let t=0;return()=>(++t).toString()})(),Fb=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),FR=20,yg="default",Bb=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return Bb(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+s}))}}},$u=[],Ub={toasts:[],pausedAt:void 0,settings:{toastLimit:FR}},Nr={},Vb=(t,e=yg)=>{Nr[e]=Bb(Nr[e]||Ub,t),$u.forEach(([n,r])=>{n===e&&r(Nr[e])})},Hb=t=>Object.keys(Nr).forEach(e=>Vb(t,e)),BR=t=>Object.keys(Nr).find(e=>Nr[e].toasts.some(n=>n.id===t)),Lf=(t=yg)=>e=>{Vb(e,t)},UR={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},VR=(t={},e=yg)=>{let[n,r]=b.useState(Nr[e]||Ub),i=b.useRef(Nr[e]);b.useEffect(()=>(i.current!==Nr[e]&&r(Nr[e]),$u.push([e,r]),()=>{let o=$u.findIndex(([a])=>a===e);o>-1&&$u.splice(o,1)}),[e]);let s=n.toasts.map(o=>{var a,l,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((a=t[o.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((l=t[o.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||UR[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...n,toasts:s}},HR=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||LR()}),Pc=t=>(e,n)=>{let r=HR(e,t,n);return Lf(r.toasterId||BR(r.id))({type:2,toast:r}),r.id},wt=(t,e)=>Pc("blank")(t,e);wt.error=Pc("error");wt.success=Pc("success");wt.loading=Pc("loading");wt.custom=Pc("custom");wt.dismiss=(t,e)=>{let n={type:3,toastId:t};e?Lf(e)(n):Hb(n)};wt.dismissAll=t=>wt.dismiss(void 0,t);wt.remove=(t,e)=>{let n={type:4,toastId:t};e?Lf(e)(n):Hb(n)};wt.removeAll=t=>wt.remove(void 0,t);wt.promise=(t,e,n)=>{let r=wt.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?Rd(e.success,i):void 0;return s?wt.success(s,{id:r,...n,...n==null?void 0:n.success}):wt.dismiss(r),i}).catch(i=>{let s=e.error?Rd(e.error,i):void 0;s?wt.error(s,{id:r,...n,...n==null?void 0:n.error}):wt.dismiss(r)}),t};var WR=1e3,zR=(t,e="default")=>{let{toasts:n,pausedAt:r}=VR(t,e),i=b.useRef(new Map).current,s=b.useCallback((f,h=WR)=>{if(i.has(f))return;let p=setTimeout(()=>{i.delete(f),o({type:4,toastId:f})},h);i.set(f,p)},[]);b.useEffect(()=>{if(r)return;let f=Date.now(),h=n.map(p=>{if(p.duration===1/0)return;let m=(p.duration||0)+p.pauseDuration-(f-p.createdAt);if(m<0){p.visible&&wt.dismiss(p.id);return}return setTimeout(()=>wt.dismiss(p.id,e),m)});return()=>{h.forEach(p=>p&&clearTimeout(p))}},[n,r,e]);let o=b.useCallback(Lf(e),[e]),a=b.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=b.useCallback((f,h)=>{o({type:1,toast:{id:f,height:h}})},[o]),c=b.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),d=b.useCallback((f,h)=>{let{reverseOrder:p=!1,gutter:m=8,defaultPosition:v}=h||{},w=n.filter(x=>(x.position||v)===(f.position||v)&&x.height),y=w.findIndex(x=>x.id===f.id),g=w.filter((x,_)=>_<y&&x.visible).length;return w.filter(x=>x.visible).slice(...p?[g+1]:[0,g]).reduce((x,_)=>x+(_.height||0)+m,0)},[n]);return b.useEffect(()=>{n.forEach(f=>{if(f.dismissed)s(f.id,f.removeDelay);else{let h=i.get(f.id);h&&(clearTimeout(h),i.delete(f.id))}})},[n,s]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:d}}},$R=di`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,GR=di`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,KR=di`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,XR=gs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$R} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${GR} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${KR} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,YR=di`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,qR=gs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${YR} 1s linear infinite;
`,QR=di`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ZR=di`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,JR=gs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${QR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ZR} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,eO=gs("div")`
  position: absolute;
`,tO=gs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,nO=di`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rO=gs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${nO} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,iO=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?b.createElement(rO,null,e):e:n==="blank"?null:b.createElement(tO,null,b.createElement(qR,{...r}),n!=="loading"&&b.createElement(eO,null,n==="error"?b.createElement(XR,{...r}):b.createElement(JR,{...r})))},sO=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,oO=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,aO="0%{opacity:0;} 100%{opacity:1;}",lO="0%{opacity:1;} 100%{opacity:0;}",cO=gs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,uO=gs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,dO=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=Fb()?[aO,lO]:[sO(n),oO(n)];return{animation:e?`${di(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${di(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},fO=b.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?dO(t.position||e||"top-center",t.visible):{opacity:0},s=b.createElement(iO,{toast:t}),o=b.createElement(uO,{...t.ariaProps},Rd(t.message,t));return b.createElement(cO,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):b.createElement(b.Fragment,null,s,o))});MR(b.createElement);var hO=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=b.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return b.createElement("div",{ref:s,className:e,style:n},i)},pO=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Fb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},mO=jf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,gu=16,_2=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:s,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=zR(n,s);return b.createElement("div",{"data-rht-toaster":s||"",style:{position:"fixed",zIndex:9999,top:gu,left:gu,right:gu,bottom:gu,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let f=d.position||e,h=c.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),p=pO(f,h);return b.createElement(hO,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?mO:"",style:p},d.type==="custom"?Rd(d.message,d):i?i(d):b.createElement(fO,{toast:d,position:f}))}))},Y=wt,Rc=t=>t.type==="checkbox",Fs=t=>t instanceof Date,_n=t=>t==null;const Wb=t=>typeof t=="object";var pt=t=>!_n(t)&&!Array.isArray(t)&&Wb(t)&&!Fs(t),gO=t=>pt(t)&&t.target?Rc(t.target)?t.target.checked:t.target.value:t,vO=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,yO=(t,e)=>t.has(vO(e)),xO=t=>{const e=t.constructor&&t.constructor.prototype;return pt(e)&&e.hasOwnProperty("isPrototypeOf")},xg=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Tt(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(xg&&(t instanceof Blob||r))&&(n||pt(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!xO(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Tt(t[i]));else return t;return e}var Ff=t=>/^\w*$/.test(t),ut=t=>t===void 0,wg=t=>Array.isArray(t)?t.filter(Boolean):[],_g=t=>wg(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ee=(t,e,n)=>{if(!e||!pt(t))return n;const r=(Ff(e)?[e]:_g(e)).reduce((i,s)=>_n(i)?i:i[s],t);return ut(r)||r===t?ut(t[e])?n:t[e]:r},br=t=>typeof t=="boolean",Qe=(t,e,n)=>{let r=-1;const i=Ff(e)?[e]:_g(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const c=t[a];l=pt(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const C2={BLUR:"blur",FOCUS_OUT:"focusout"},dr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},zr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},wO=un.createContext(null);wO.displayName="HookFormContext";var _O=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==dr.all&&(e._proxyFormState[o]=!r||dr.all),t[o]}});return i};const CO=typeof window<"u"?un.useLayoutEffect:un.useEffect;var Dn=t=>typeof t=="string",EO=(t,e,n,r,i)=>Dn(t)?(r&&e.watch.add(t),ee(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),ee(n,s))):(r&&(e.watchAll=!0),n),Yp=t=>_n(t)||!Wb(t);function Oi(t,e,n=new WeakSet){if(Yp(t)||Yp(e))return t===e;if(Fs(t)&&Fs(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(Fs(o)&&Fs(a)||pt(o)&&pt(a)||Array.isArray(o)&&Array.isArray(a)?!Oi(o,a,n):o!==a)return!1}}return!0}var SO=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Nl=t=>Array.isArray(t)?t:[t],E2=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function zb(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],s=e[r];if(i&&pt(i)&&s){const o=zb(i,s);pt(o)&&(n[r]=o)}else t[r]&&(n[r]=s)}return n}var wn=t=>pt(t)&&!Object.keys(t).length,Cg=t=>t.type==="file",fr=t=>typeof t=="function",Od=t=>{if(!xg)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},$b=t=>t.type==="select-multiple",Eg=t=>t.type==="radio",bO=t=>Eg(t)||Rc(t),Zh=t=>Od(t)&&t.isConnected;function AO(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=ut(t)?r++:t[e[r++]];return t}function NO(t){for(const e in t)if(t.hasOwnProperty(e)&&!ut(t[e]))return!1;return!0}function ft(t,e){const n=Array.isArray(e)?e:Ff(e)?[e]:_g(e),r=n.length===1?t:AO(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(pt(r)&&wn(r)||Array.isArray(r)&&NO(r))&&ft(t,n.slice(0,-1)),t}var TO=t=>{for(const e in t)if(fr(t[e]))return!0;return!1};function Gb(t){return Array.isArray(t)||pt(t)&&!TO(t)}function qp(t,e={}){for(const n in t)Gb(t[n])?(e[n]=Array.isArray(t[n])?[]:{},qp(t[n],e[n])):ut(t[n])||(e[n]=!0);return e}function wo(t,e,n){n||(n=qp(e));for(const r in t)Gb(t[r])?ut(e)||Yp(n[r])?n[r]=qp(t[r],Array.isArray(t[r])?[]:{}):wo(t[r],_n(e)?{}:e[r],n[r]):n[r]=!Oi(t[r],e[r]);return n}const S2={value:!1,isValid:!1},b2={value:!0,isValid:!0};var Kb=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ut(t[0].attributes.value)?ut(t[0].value)||t[0].value===""?b2:{value:t[0].value,isValid:!0}:b2:S2}return S2},Xb=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>ut(t)?t:e?t===""?NaN:t&&+t:n&&Dn(t)?new Date(t):r?r(t):t;const A2={isValid:!1,value:null};var Yb=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,A2):A2;function N2(t){const e=t.ref;return Cg(e)?e.files:Eg(e)?Yb(t.refs).value:$b(e)?[...e.selectedOptions].map(({value:n})=>n):Rc(e)?Kb(t.refs).value:Xb(ut(e.value)?t.ref.value:e.value,t)}var IO=(t,e,n,r)=>{const i={};for(const s of t){const o=ee(e,s);o&&Qe(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Dd=t=>t instanceof RegExp,Ka=t=>ut(t)?t:Dd(t)?t.source:pt(t)?Dd(t.value)?t.value.source:t.value:t,T2=t=>({isOnSubmit:!t||t===dr.onSubmit,isOnBlur:t===dr.onBlur,isOnChange:t===dr.onChange,isOnAll:t===dr.all,isOnTouch:t===dr.onTouched});const I2="AsyncFunction";var kO=t=>!!t&&!!t.validate&&!!(fr(t.validate)&&t.validate.constructor.name===I2||pt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===I2)),PO=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),k2=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Tl=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=ee(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Tl(a,e))break}else if(pt(a)&&Tl(a,e))break}}};function P2(t,e,n){const r=ee(t,n);if(r||Ff(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=ee(e,s),a=ee(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:n}}var RO=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return wn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||dr.all))},OO=(t,e,n)=>!t||!e||t===e||Nl(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),DO=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,MO=(t,e)=>!wg(ee(t,e)).length&&ft(t,e),jO=(t,e,n)=>{const r=Nl(ee(t,n));return Qe(r,"root",e[n]),Qe(t,n,r),t};function R2(t,e,n="validate"){if(Dn(t)||Array.isArray(t)&&t.every(Dn)||br(t)&&!t)return{type:n,message:Dn(t)?t:"",ref:e}}var vo=t=>pt(t)&&!Dd(t)?t:{value:t,message:""},O2=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:d,min:f,max:h,pattern:p,validate:m,name:v,valueAsNumber:w,mount:y}=t._f,g=ee(n,v);if(!y||e.has(v))return{};const x=a?a[0]:o,_=G=>{i&&x.reportValidity&&(x.setCustomValidity(br(G)?"":G||""),x.reportValidity())},C={},E=Eg(o),A=Rc(o),T=E||A,k=(w||Cg(o))&&ut(o.value)&&ut(g)||Od(o)&&o.value===""||g===""||Array.isArray(g)&&!g.length,O=SO.bind(null,v,r,C),q=(G,D,L,ne=zr.maxLength,de=zr.minLength)=>{const se=G?D:L;C[v]={type:G?ne:de,message:se,ref:o,...O(G?ne:de,se)}};if(s?!Array.isArray(g)||!g.length:l&&(!T&&(k||_n(g))||br(g)&&!g||A&&!Kb(a).isValid||E&&!Yb(a).isValid)){const{value:G,message:D}=Dn(l)?{value:!!l,message:l}:vo(l);if(G&&(C[v]={type:zr.required,message:D,ref:x,...O(zr.required,D)},!r))return _(D),C}if(!k&&(!_n(f)||!_n(h))){let G,D;const L=vo(h),ne=vo(f);if(!_n(g)&&!isNaN(g)){const de=o.valueAsNumber||g&&+g;_n(L.value)||(G=de>L.value),_n(ne.value)||(D=de<ne.value)}else{const de=o.valueAsDate||new Date(g),se=re=>new Date(new Date().toDateString()+" "+re),V=o.type=="time",Z=o.type=="week";Dn(L.value)&&g&&(G=V?se(g)>se(L.value):Z?g>L.value:de>new Date(L.value)),Dn(ne.value)&&g&&(D=V?se(g)<se(ne.value):Z?g<ne.value:de<new Date(ne.value))}if((G||D)&&(q(!!G,L.message,ne.message,zr.max,zr.min),!r))return _(C[v].message),C}if((c||d)&&!k&&(Dn(g)||s&&Array.isArray(g))){const G=vo(c),D=vo(d),L=!_n(G.value)&&g.length>+G.value,ne=!_n(D.value)&&g.length<+D.value;if((L||ne)&&(q(L,G.message,D.message),!r))return _(C[v].message),C}if(p&&!k&&Dn(g)){const{value:G,message:D}=vo(p);if(Dd(G)&&!g.match(G)&&(C[v]={type:zr.pattern,message:D,ref:o,...O(zr.pattern,D)},!r))return _(D),C}if(m){if(fr(m)){const G=await m(g,n),D=R2(G,x);if(D&&(C[v]={...D,...O(zr.validate,D.message)},!r))return _(D.message),C}else if(pt(m)){let G={};for(const D in m){if(!wn(G)&&!r)break;const L=R2(await m[D](g,n),x,D);L&&(G={...L,...O(D,L.message)},_(L.message),r&&(C[v]=G))}if(!wn(G)&&(C[v]={ref:x,...G},!r))return C}}return _(!0),C};const LO={mode:dr.onSubmit,reValidateMode:dr.onChange,shouldFocusError:!0};function FO(t={}){let e={...LO,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:fr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=pt(e.defaultValues)||pt(e.values)?Tt(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Tt(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:E2(),state:E2()},p=e.criteriaMode===dr.all,m=N=>P=>{clearTimeout(c),c=setTimeout(N,P)},v=async N=>{if(!e.disabled&&(d.isValid||f.isValid||N)){const P=e.resolver?wn((await A()).errors):await k(r,!0);P!==n.isValid&&h.state.next({isValid:P})}},w=(N,P)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((N||Array.from(a.mount)).forEach(M=>{M&&(P?Qe(n.validatingFields,M,P):ft(n.validatingFields,M))}),h.state.next({validatingFields:n.validatingFields,isValidating:!wn(n.validatingFields)}))},y=(N,P=[],M,F,z=!0,W=!0)=>{if(F&&M&&!e.disabled){if(o.action=!0,W&&Array.isArray(ee(r,N))){const te=M(ee(r,N),F.argA,F.argB);z&&Qe(r,N,te)}if(W&&Array.isArray(ee(n.errors,N))){const te=M(ee(n.errors,N),F.argA,F.argB);z&&Qe(n.errors,N,te),MO(n.errors,N)}if((d.touchedFields||f.touchedFields)&&W&&Array.isArray(ee(n.touchedFields,N))){const te=M(ee(n.touchedFields,N),F.argA,F.argB);z&&Qe(n.touchedFields,N,te)}(d.dirtyFields||f.dirtyFields)&&(n.dirtyFields=wo(i,s)),h.state.next({name:N,isDirty:q(N,P),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Qe(s,N,P)},g=(N,P)=>{Qe(n.errors,N,P),h.state.next({errors:n.errors})},x=N=>{n.errors=N,h.state.next({errors:n.errors,isValid:!1})},_=(N,P,M,F)=>{const z=ee(r,N);if(z){const W=ee(s,N,ut(M)?ee(i,N):M);ut(W)||F&&F.defaultChecked||P?Qe(s,N,P?W:N2(z._f)):L(N,W),o.mount&&v()}},C=(N,P,M,F,z)=>{let W=!1,te=!1;const Ce={name:N};if(!e.disabled){if(!M||F){(d.isDirty||f.isDirty)&&(te=n.isDirty,n.isDirty=Ce.isDirty=q(),W=te!==Ce.isDirty);const Ie=Oi(ee(i,N),P);te=!!ee(n.dirtyFields,N),Ie?ft(n.dirtyFields,N):Qe(n.dirtyFields,N,!0),Ce.dirtyFields=n.dirtyFields,W=W||(d.dirtyFields||f.dirtyFields)&&te!==!Ie}if(M){const Ie=ee(n.touchedFields,N);Ie||(Qe(n.touchedFields,N,M),Ce.touchedFields=n.touchedFields,W=W||(d.touchedFields||f.touchedFields)&&Ie!==M)}W&&z&&h.state.next(Ce)}return W?Ce:{}},E=(N,P,M,F)=>{const z=ee(n.errors,N),W=(d.isValid||f.isValid)&&br(P)&&n.isValid!==P;if(e.delayError&&M?(l=m(()=>g(N,M)),l(e.delayError)):(clearTimeout(c),l=null,M?Qe(n.errors,N,M):ft(n.errors,N)),(M?!Oi(z,M):z)||!wn(F)||W){const te={...F,...W&&br(P)?{isValid:P}:{},errors:n.errors,name:N};n={...n,...te},h.state.next(te)}},A=async N=>{w(N,!0);const P=await e.resolver(s,e.context,IO(N||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return w(N),P},T=async N=>{const{errors:P}=await A(N);if(N)for(const M of N){const F=ee(P,M);F?Qe(n.errors,M,F):ft(n.errors,M)}else n.errors=P;return P},k=async(N,P,M={valid:!0})=>{for(const F in N){const z=N[F];if(z){const{_f:W,...te}=z;if(W){const Ce=a.array.has(W.name),Ie=z._f&&kO(z._f);Ie&&d.validatingFields&&w([W.name],!0);const Ft=await O2(z,a.disabled,s,p,e.shouldUseNativeValidation&&!P,Ce);if(Ie&&d.validatingFields&&w([W.name]),Ft[W.name]&&(M.valid=!1,P))break;!P&&(ee(Ft,W.name)?Ce?jO(n.errors,Ft,W.name):Qe(n.errors,W.name,Ft[W.name]):ft(n.errors,W.name))}!wn(te)&&await k(te,P,M)}}return M.valid},O=()=>{for(const N of a.unMount){const P=ee(r,N);P&&(P._f.refs?P._f.refs.every(M=>!Zh(M)):!Zh(P._f.ref))&&Nt(N)}a.unMount=new Set},q=(N,P)=>!e.disabled&&(N&&P&&Qe(s,N,P),!Oi(re(),i)),G=(N,P,M)=>EO(N,a,{...o.mount?s:ut(P)?i:Dn(N)?{[N]:P}:P},M,P),D=N=>wg(ee(o.mount?s:i,N,e.shouldUnregister?ee(i,N,[]):[])),L=(N,P,M={})=>{const F=ee(r,N);let z=P;if(F){const W=F._f;W&&(!W.disabled&&Qe(s,N,Xb(P,W)),z=Od(W.ref)&&_n(P)?"":P,$b(W.ref)?[...W.ref.options].forEach(te=>te.selected=z.includes(te.value)):W.refs?Rc(W.ref)?W.refs.forEach(te=>{(!te.defaultChecked||!te.disabled)&&(Array.isArray(z)?te.checked=!!z.find(Ce=>Ce===te.value):te.checked=z===te.value||!!z)}):W.refs.forEach(te=>te.checked=te.value===z):Cg(W.ref)?W.ref.value="":(W.ref.value=z,W.ref.type||h.state.next({name:N,values:Tt(s)})))}(M.shouldDirty||M.shouldTouch)&&C(N,z,M.shouldTouch,M.shouldDirty,!0),M.shouldValidate&&Z(N)},ne=(N,P,M)=>{for(const F in P){if(!P.hasOwnProperty(F))return;const z=P[F],W=N+"."+F,te=ee(r,W);(a.array.has(N)||pt(z)||te&&!te._f)&&!Fs(z)?ne(W,z,M):L(W,z,M)}},de=(N,P,M={})=>{const F=ee(r,N),z=a.array.has(N),W=Tt(P);Qe(s,N,W),z?(h.array.next({name:N,values:Tt(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&M.shouldDirty&&h.state.next({name:N,dirtyFields:wo(i,s),isDirty:q(N,W)})):F&&!F._f&&!_n(W)?ne(N,W,M):L(N,W,M),k2(N,a)&&h.state.next({...n,name:N}),h.state.next({name:o.mount?N:void 0,values:Tt(s)})},se=async N=>{o.mount=!0;const P=N.target;let M=P.name,F=!0;const z=ee(r,M),W=Ie=>{F=Number.isNaN(Ie)||Fs(Ie)&&isNaN(Ie.getTime())||Oi(Ie,ee(s,M,Ie))},te=T2(e.mode),Ce=T2(e.reValidateMode);if(z){let Ie,Ft;const B=P.type?N2(z._f):gO(N),fe=N.type===C2.BLUR||N.type===C2.FOCUS_OUT,qe=!PO(z._f)&&!e.resolver&&!ee(n.errors,M)&&!z._f.deps||DO(fe,ee(n.touchedFields,M),n.isSubmitted,Ce,te),I=k2(M,a,fe);Qe(s,M,B),fe?(!P||!P.readOnly)&&(z._f.onBlur&&z._f.onBlur(N),l&&l(0)):z._f.onChange&&z._f.onChange(N);const X=C(M,B,fe),Se=!wn(X)||I;if(!fe&&h.state.next({name:M,type:N.type,values:Tt(s)}),qe)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?fe&&v():fe||v()),Se&&h.state.next({name:M,...I?{}:X});if(!fe&&I&&h.state.next({...n}),e.resolver){const{errors:lt}=await A([M]);if(W(B),F){const Rn=P2(n.errors,r,M),Hr=P2(lt,r,Rn.name||M);Ie=Hr.error,M=Hr.name,Ft=wn(lt)}}else w([M],!0),Ie=(await O2(z,a.disabled,s,p,e.shouldUseNativeValidation))[M],w([M]),W(B),F&&(Ie?Ft=!1:(d.isValid||f.isValid)&&(Ft=await k(r,!0)));F&&(z._f.deps&&(!Array.isArray(z._f.deps)||z._f.deps.length>0)&&Z(z._f.deps),E(M,Ft,Ie,X))}},V=(N,P)=>{if(ee(n.errors,P)&&N.focus)return N.focus(),1},Z=async(N,P={})=>{let M,F;const z=Nl(N);if(e.resolver){const W=await T(ut(N)?N:z);M=wn(W),F=N?!z.some(te=>ee(W,te)):M}else N?(F=(await Promise.all(z.map(async W=>{const te=ee(r,W);return await k(te&&te._f?{[W]:te}:te)}))).every(Boolean),!(!F&&!n.isValid)&&v()):F=M=await k(r);return h.state.next({...!Dn(N)||(d.isValid||f.isValid)&&M!==n.isValid?{}:{name:N},...e.resolver||!N?{isValid:M}:{},errors:n.errors}),P.shouldFocus&&!F&&Tl(r,V,N?z:a.mount),F},re=(N,P)=>{let M={...o.mount?s:i};return P&&(M=zb(P.dirtyFields?n.dirtyFields:n.touchedFields,M)),ut(N)?M:Dn(N)?ee(M,N):N.map(F=>ee(M,F))},we=(N,P)=>({invalid:!!ee((P||n).errors,N),isDirty:!!ee((P||n).dirtyFields,N),error:ee((P||n).errors,N),isValidating:!!ee(n.validatingFields,N),isTouched:!!ee((P||n).touchedFields,N)}),_e=N=>{N&&Nl(N).forEach(P=>ft(n.errors,P)),h.state.next({errors:N?n.errors:{}})},xe=(N,P,M)=>{const F=(ee(r,N,{_f:{}})._f||{}).ref,z=ee(n.errors,N)||{},{ref:W,message:te,type:Ce,...Ie}=z;Qe(n.errors,N,{...Ie,...P,ref:F}),h.state.next({name:N,errors:n.errors,isValid:!1}),M&&M.shouldFocus&&F&&F.focus&&F.focus()},Xe=(N,P)=>fr(N)?h.state.subscribe({next:M=>"values"in M&&N(G(void 0,P),M)}):G(N,P,!0),Ye=N=>h.state.subscribe({next:P=>{OO(N.name,P.name,N.exact)&&RO(P,N.formState||d,_i,N.reRenderRoot)&&N.callback({values:{...s},...n,...P,defaultValues:i})}}).unsubscribe,mt=N=>(o.mount=!0,f={...f,...N.formState},Ye({...N,formState:f})),Nt=(N,P={})=>{for(const M of N?Nl(N):a.mount)a.mount.delete(M),a.array.delete(M),P.keepValue||(ft(r,M),ft(s,M)),!P.keepError&&ft(n.errors,M),!P.keepDirty&&ft(n.dirtyFields,M),!P.keepTouched&&ft(n.touchedFields,M),!P.keepIsValidating&&ft(n.validatingFields,M),!e.shouldUnregister&&!P.keepDefaultValue&&ft(i,M);h.state.next({values:Tt(s)}),h.state.next({...n,...P.keepDirty?{isDirty:q()}:{}}),!P.keepIsValid&&v()},wi=({disabled:N,name:P})=>{(br(N)&&o.mount||N||a.disabled.has(P))&&(N?a.disabled.add(P):a.disabled.delete(P))},Lt=(N,P={})=>{let M=ee(r,N);const F=br(P.disabled)||br(e.disabled);return Qe(r,N,{...M||{},_f:{...M&&M._f?M._f:{ref:{name:N}},name:N,mount:!0,...P}}),a.mount.add(N),M?wi({disabled:br(P.disabled)?P.disabled:e.disabled,name:N}):_(N,!0,P.value),{...F?{disabled:P.disabled||e.disabled}:{},...e.progressive?{required:!!P.required,min:Ka(P.min),max:Ka(P.max),minLength:Ka(P.minLength),maxLength:Ka(P.maxLength),pattern:Ka(P.pattern)}:{},name:N,onChange:se,onBlur:se,ref:z=>{if(z){Lt(N,P),M=ee(r,N);const W=ut(z.value)&&z.querySelectorAll&&z.querySelectorAll("input,select,textarea")[0]||z,te=bO(W),Ce=M._f.refs||[];if(te?Ce.find(Ie=>Ie===W):W===M._f.ref)return;Qe(r,N,{_f:{...M._f,...te?{refs:[...Ce.filter(Zh),W,...Array.isArray(ee(i,N))?[{}]:[]],ref:{type:W.type,name:N}}:{ref:W}}}),_(N,!1,void 0,W)}else M=ee(r,N,{}),M._f&&(M._f.mount=!1),(e.shouldUnregister||P.shouldUnregister)&&!(yO(a.array,N)&&o.action)&&a.unMount.add(N)}}},Ur=()=>e.shouldFocusError&&Tl(r,V,a.mount),Vr=N=>{br(N)&&(h.state.next({disabled:N}),Tl(r,(P,M)=>{const F=ee(r,M);F&&(P.disabled=F._f.disabled||N,Array.isArray(F._f.refs)&&F._f.refs.forEach(z=>{z.disabled=F._f.disabled||N}))},0,!1))},ys=(N,P)=>async M=>{let F;M&&(M.preventDefault&&M.preventDefault(),M.persist&&M.persist());let z=Tt(s);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:W,values:te}=await A();n.errors=W,z=Tt(te)}else await k(r);if(a.disabled.size)for(const W of a.disabled)ft(z,W);if(ft(n.errors,"root"),wn(n.errors)){h.state.next({errors:{}});try{await N(z,M)}catch(W){F=W}}else P&&await P({...n.errors},M),Ur(),setTimeout(Ur);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:wn(n.errors)&&!F,submitCount:n.submitCount+1,errors:n.errors}),F)throw F},mo=(N,P={})=>{ee(r,N)&&(ut(P.defaultValue)?de(N,Tt(ee(i,N))):(de(N,P.defaultValue),Qe(i,N,Tt(P.defaultValue))),P.keepTouched||ft(n.touchedFields,N),P.keepDirty||(ft(n.dirtyFields,N),n.isDirty=P.defaultValue?q(N,Tt(ee(i,N))):q()),P.keepError||(ft(n.errors,N),d.isValid&&v()),h.state.next({...n}))},xs=(N,P={})=>{const M=N?Tt(N):i,F=Tt(M),z=wn(N),W=z?i:F;if(P.keepDefaultValues||(i=M),!P.keepValues){if(P.keepDirtyValues){const te=new Set([...a.mount,...Object.keys(wo(i,s))]);for(const Ce of Array.from(te))ee(n.dirtyFields,Ce)?Qe(W,Ce,ee(s,Ce)):de(Ce,ee(W,Ce))}else{if(xg&&ut(N))for(const te of a.mount){const Ce=ee(r,te);if(Ce&&Ce._f){const Ie=Array.isArray(Ce._f.refs)?Ce._f.refs[0]:Ce._f.ref;if(Od(Ie)){const Ft=Ie.closest("form");if(Ft){Ft.reset();break}}}}if(P.keepFieldsRef)for(const te of a.mount)de(te,ee(W,te));else r={}}s=e.shouldUnregister?P.keepDefaultValues?Tt(i):{}:Tt(W),h.array.next({values:{...W}}),h.state.next({values:{...W}})}a={mount:P.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!P.keepIsValid||!!P.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:P.keepSubmitCount?n.submitCount:0,isDirty:z?!1:P.keepDirty?n.isDirty:!!(P.keepDefaultValues&&!Oi(N,i)),isSubmitted:P.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:z?{}:P.keepDirtyValues?P.keepDefaultValues&&s?wo(i,s):n.dirtyFields:P.keepDefaultValues&&N?wo(i,N):P.keepDirty?n.dirtyFields:{},touchedFields:P.keepTouched?n.touchedFields:{},errors:P.keepErrors?n.errors:{},isSubmitSuccessful:P.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},rr=(N,P)=>xs(fr(N)?N(s):N,P),ws=(N,P={})=>{const M=ee(r,N),F=M&&M._f;if(F){const z=F.refs?F.refs[0]:F.ref;z.focus&&(z.focus(),P.shouldSelect&&fr(z.select)&&z.select())}},_i=N=>{n={...n,...N}},_s={control:{register:Lt,unregister:Nt,getFieldState:we,handleSubmit:ys,setError:xe,_subscribe:Ye,_runSchema:A,_focusError:Ur,_getWatch:G,_getDirty:q,_setValid:v,_setFieldArray:y,_setDisabledField:wi,_setErrors:x,_getFieldArray:D,_reset:xs,_resetDefaultValues:()=>fr(e.defaultValues)&&e.defaultValues().then(N=>{rr(N,e.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:Vr,_subjects:h,_proxyFormState:d,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(N){o=N},get _defaultValues(){return i},get _names(){return a},set _names(N){a=N},get _formState(){return n},get _options(){return e},set _options(N){e={...e,...N}}},subscribe:mt,trigger:Z,register:Lt,handleSubmit:ys,watch:Xe,setValue:de,getValues:re,reset:rr,resetField:mo,clearErrors:_e,unregister:Nt,setError:xe,setFocus:ws,getFieldState:we};return{..._s,formControl:_s}}function D2(t={}){const e=un.useRef(void 0),n=un.useRef(void 0),[r,i]=un.useState({isDirty:!1,isValidating:!1,isLoading:fr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:fr(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!fr(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=FO(t);e.current={...a,formState:r}}const s=e.current.control;return s._options=t,CO(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),un.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),un.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),un.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),un.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),un.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),un.useEffect(()=>{t.values&&!Oi(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),un.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=_O(r,s),e.current}var Bt=[];for(var Jh=0;Jh<256;++Jh)Bt.push((Jh+256).toString(16).slice(1));function BO(t,e=0){return(Bt[t[e+0]]+Bt[t[e+1]]+Bt[t[e+2]]+Bt[t[e+3]]+"-"+Bt[t[e+4]]+Bt[t[e+5]]+"-"+Bt[t[e+6]]+Bt[t[e+7]]+"-"+Bt[t[e+8]]+Bt[t[e+9]]+"-"+Bt[t[e+10]]+Bt[t[e+11]]+Bt[t[e+12]]+Bt[t[e+13]]+Bt[t[e+14]]+Bt[t[e+15]]).toLowerCase()}var vu,UO=new Uint8Array(16);function VO(){if(!vu&&(vu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vu(UO)}var HO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const M2={randomUUID:HO};function Oc(t,e,n){if(M2.randomUUID&&!t)return M2.randomUUID();t=t||{};var r=t.random||(t.rng||VO)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,BO(r)}/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qb=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...zO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:qb("lucide",i),...a},[...o.map(([c,d])=>b.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(t,e)=>{const n=b.forwardRef(({className:r,...i},s)=>b.createElement($O,{ref:s,iconNode:e,className:qb(`lucide-${WO(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=ce("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=ce("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=ce("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=ce("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=ce("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=ce("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=ce("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=ce("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=ce("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=ce("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=ce("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=ce("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=ce("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=ce("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=ce("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=ce("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=ce("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=ce("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=ce("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=ce("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=ce("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ce("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=ce("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function i5({onLogin:t}){const[e,n]=b.useState(!0),[r,i]=b.useState(!1),s=()=>{localStorage.removeItem("cricketUsers"),localStorage.removeItem("cricketUser"),Y.success("Storage cleared! You can now create new accounts.")},o=()=>{const f=JSON.parse(localStorage.getItem("cricketUsers")||"[]");console.log("All stored users:",f),Y.success(`Found ${f.length} users in storage. Check console for details.`)},a=D2(),l=D2(),c=async f=>{i(!0),setTimeout(()=>{const h=JSON.parse(localStorage.getItem("cricketUsers")||"[]"),p=f.email.trim().toLowerCase(),m=f.password.trim();console.log("Login attempt:",{email:p,totalUsers:h.length}),console.log("Stored users:",h.map(w=>({email:w.email,hasPassword:!!w.password})));const v=h.find(w=>w.email.toLowerCase().trim()===p&&w.password===m);if(v){const{password:w,...y}=v;Y.success("Welcome back!"),t(y)}else h.find(y=>y.email.toLowerCase().trim()===p)?(Y.error("Invalid password"),console.log("Email found but password mismatch")):(Y.error("Email not found. Please check your email or sign up."),console.log("Email not found in database"));i(!1)},1e3)},d=async f=>{if(f.password!==f.confirmPassword){Y.error("Passwords do not match");return}i(!0),setTimeout(()=>{const h=JSON.parse(localStorage.getItem("cricketUsers")||"[]"),p=f.email.trim().toLowerCase();if(h.find(g=>g.email.toLowerCase().trim()===p)){Y.error("User already exists"),i(!1);return}const v={id:Oc(),name:f.name.trim(),email:p,phone:f.phone.trim(),password:f.password.trim(),stats:{totalRuns:0,totalBalls:0,fours:0,sixes:0,wickets:0,overallStrikeRate:0,centuries:0,halfCenturies:0,hatTricks:0,matchesPlayed:0,totalOvers:0,runsGiven:0,economyRate:0},createdAt:new Date};h.push(v),localStorage.setItem("cricketUsers",JSON.stringify(h));const{password:w,...y}=v;Y.success("Account created successfully!"),t(y),i(!1)},1e3)};return u.jsxs(U.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,type:"spring"},className:"royal-card p-8 w-full max-w-md mx-4",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx(U.div,{initial:{y:-20},animate:{y:0},className:"w-28 h-28 mx-auto mb-4",children:u.jsx("img",{src:"/logo.png",alt:"Pitch Pioneers Logo",className:"w-full h-full object-contain"})}),u.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Pitch Pioneers"}),u.jsx("p",{className:"text-gray-600",children:"Your complete cricket management solution"})]}),u.jsxs("div",{className:"flex mb-6",children:[u.jsxs("button",{onClick:()=>n(!0),className:`flex-1 py-2 px-4 rounded-l-lg font-semibold transition-all duration-300 ${e?"bg-cricket-primary text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[u.jsx(QO,{className:"inline w-4 h-4 mr-2"}),"Login"]}),u.jsxs("button",{onClick:()=>n(!1),className:`flex-1 py-2 px-4 rounded-r-lg font-semibold transition-all duration-300 ${e?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-cricket-primary text-white shadow-lg"}`,children:[u.jsx(Fd,{className:"inline w-4 h-4 mr-2"}),"Sign Up"]})]}),u.jsx(Sn,{mode:"wait",children:e?u.jsxs(U.form,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},exit:{x:20,opacity:0},transition:{duration:.3},onSubmit:a.handleSubmit(c),className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(e1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{...a.register("email",{required:!0}),type:"email",placeholder:"Email",className:"input-field pl-12",required:!0})]}),u.jsxs("div",{className:"relative",children:[u.jsx(e0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{...a.register("password",{required:!0}),type:"password",placeholder:"Password",className:"input-field pl-12",required:!0})]}),u.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:r,className:"w-full btn-primary py-3 disabled:opacity-50",children:r?"Logging in...":"Login"})]},"login"):u.jsxs(U.form,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},transition:{duration:.3},onSubmit:l.handleSubmit(d),className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(ac,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{...l.register("name",{required:!0}),type:"text",placeholder:"Full Name",className:"input-field pl-12",required:!0})]}),u.jsxs("div",{className:"relative",children:[u.jsx(e1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{...l.register("email",{required:!0}),type:"email",placeholder:"Email",className:"input-field pl-12",required:!0})]}),u.jsxs("div",{className:"relative",children:[u.jsx(tA,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{...l.register("phone",{required:!0}),type:"tel",placeholder:"Phone Number",className:"input-field pl-12",required:!0})]}),u.jsxs("div",{className:"relative",children:[u.jsx(e0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{...l.register("password",{required:!0}),type:"password",placeholder:"Password",className:"input-field pl-12",required:!0})]}),u.jsxs("div",{className:"relative",children:[u.jsx(e0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{...l.register("confirmPassword",{required:!0}),type:"password",placeholder:"Confirm Password",className:"input-field pl-12",required:!0})]}),u.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:r,className:"w-full btn-primary py-3 disabled:opacity-50",children:r?"Creating Account...":"Sign Up"})]},"signup")}),u.jsxs("div",{className:"mt-6 text-center space-y-3",children:[u.jsxs("p",{className:"text-sm text-gray-600",children:[e?"Don't have an account? ":"Already have an account? ",u.jsx("button",{onClick:()=>n(!e),className:"text-cricket-primary font-semibold hover:underline",children:e?"Sign up":"Login"})]}),u.jsxs("div",{className:"border-t pt-3 space-y-2",children:[u.jsx("button",{onClick:o,className:"text-xs text-blue-500 hover:text-blue-700 underline block mx-auto",children:"Check Stored Users"}),u.jsx("button",{onClick:s,className:"text-xs text-red-500 hover:text-red-700 underline block mx-auto",children:"Clear Storage (Reset)"})]})]})]})}var F2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=function(t,e){if(!t)throw Na(e)},Na=function(t){return new Error("Firebase Database ("+sA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},s5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let h=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(h=64)),r.push(n[d],n[f],n[h],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):s5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new o5;const h=s<<2|a>>4;if(r.push(h),c!==64){const p=a<<4&240|c>>2;if(r.push(p),f!==64){const m=c<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class o5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aA=function(t){const e=oA(t);return bg.encodeByteArray(e,!0)},Bd=function(t){return aA(t).replace(/\./g,"")},Ud=function(t){try{return bg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(t){return lA(void 0,t)}function lA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!l5(n)||(t[n]=lA(t[n],e[n]));return t}function l5(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=()=>c5().__FIREBASE_DEFAULTS__,d5=()=>{if(typeof process>"u"||typeof F2>"u")return;const t=F2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},f5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ud(t[1]);return e&&JSON.parse(e)},Ag=()=>{try{return u5()||d5()||f5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cA=t=>{var e,n;return(n=(e=Ag())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},h5=t=>{const e=cA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uA=()=>{var t;return(t=Ag())===null||t===void 0?void 0:t.config},dA=t=>{var e;return(e=Ag())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bd(JSON.stringify(n)),Bd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ng(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function m5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function g5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function v5(){const t=mn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y5(){return sA.NODE_ADMIN===!0}function hA(){try{return typeof indexedDB=="object"}catch{return!1}}function pA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function x5(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5="FirebaseError";class yi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=w5,Object.setPrototypeOf(this,yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fo.prototype.create)}}class fo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?_5(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yi(i,a,r)}}function _5(t,e){return t.replace(C5,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const C5=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){return JSON.parse(t)}function Et(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=lc(Ud(s[0])||""),n=lc(Ud(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},E5=function(t){const e=mA(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},S5=function(t){const e=mA(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function da(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function t1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vd(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Hd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(B2(s)&&B2(o)){if(!Hd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function B2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const h=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,d;for(let f=0;f<80;f++){f<40?f<20?(c=a^s&(o^a),d=1518500249):(c=s^o^a,d=1859775393):f<60?(c=s&o|a&(s|o),d=2400959708):(c=s^o^a,d=3395469782);const h=(i<<5|i>>>27)+c+l+d+r[f]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function A5(t,e){const n=new N5(t,e);return n.subscribe.bind(n)}class N5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");T5(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=n0),i.error===void 0&&(i.error=n0),i.complete===void 0&&(i.complete=n0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function T5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function n0(){}function Uf(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,$(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Vf=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(t){return t&&t._delegate?t._delegate:t}class _r{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Mc;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R5(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:P5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function P5(t){return t===Is?void 0:t}function R5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new k5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Fe||(Fe={}));const D5={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},M5=Fe.INFO,j5={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},L5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=j5[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tg{constructor(e){this.name=e,this._logLevel=M5,this._logHandler=L5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const F5=(t,e)=>e.some(n=>t instanceof n);let U2,V2;function B5(){return U2||(U2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U5(){return V2||(V2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gA=new WeakMap,n1=new WeakMap,vA=new WeakMap,r0=new WeakMap,Ig=new WeakMap;function V5(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ii(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gA.set(n,t)}).catch(()=>{}),Ig.set(e,t),e}function H5(t){if(n1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});n1.set(t,e)}let r1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return n1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ii(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W5(t){r1=t(r1)}function z5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(i0(this),e,...n);return vA.set(r,e.sort?e.sort():[e]),ii(r)}:U5().includes(t)?function(...e){return t.apply(i0(this),e),ii(gA.get(this))}:function(...e){return ii(t.apply(i0(this),e))}}function $5(t){return typeof t=="function"?z5(t):(t instanceof IDBTransaction&&H5(t),F5(t,B5())?new Proxy(t,r1):t)}function ii(t){if(t instanceof IDBRequest)return V5(t);if(r0.has(t))return r0.get(t);const e=$5(t);return e!==t&&(r0.set(t,e),Ig.set(e,t)),e}const i0=t=>Ig.get(t);function Hf(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ii(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ii(o.result),l.oldVersion,l.newVersion,ii(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function s0(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),ii(n).then(()=>{})}const G5=["get","getKey","getAll","getAllKeys","count"],K5=["put","add","delete","clear"],o0=new Map;function H2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(o0.get(e))return o0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=K5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||G5.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return o0.set(e,s),s}W5(t=>({...t,get:(e,n,r)=>H2(e,n)||t.get(e,n,r),has:(e,n)=>!!H2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Y5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const i1="@firebase/app",W2="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new Tg("@firebase/app"),q5="@firebase/app-compat",Q5="@firebase/analytics-compat",Z5="@firebase/analytics",J5="@firebase/app-check-compat",eD="@firebase/app-check",tD="@firebase/auth",nD="@firebase/auth-compat",rD="@firebase/database",iD="@firebase/data-connect",sD="@firebase/database-compat",oD="@firebase/functions",aD="@firebase/functions-compat",lD="@firebase/installations",cD="@firebase/installations-compat",uD="@firebase/messaging",dD="@firebase/messaging-compat",fD="@firebase/performance",hD="@firebase/performance-compat",pD="@firebase/remote-config",mD="@firebase/remote-config-compat",gD="@firebase/storage",vD="@firebase/storage-compat",yD="@firebase/firestore",xD="@firebase/vertexai-preview",wD="@firebase/firestore-compat",_D="firebase",CD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="[DEFAULT]",ED={[i1]:"fire-core",[q5]:"fire-core-compat",[Z5]:"fire-analytics",[Q5]:"fire-analytics-compat",[eD]:"fire-app-check",[J5]:"fire-app-check-compat",[tD]:"fire-auth",[nD]:"fire-auth-compat",[rD]:"fire-rtdb",[iD]:"fire-data-connect",[sD]:"fire-rtdb-compat",[oD]:"fire-fn",[aD]:"fire-fn-compat",[lD]:"fire-iid",[cD]:"fire-iid-compat",[uD]:"fire-fcm",[dD]:"fire-fcm-compat",[fD]:"fire-perf",[hD]:"fire-perf-compat",[pD]:"fire-rc",[mD]:"fire-rc-compat",[gD]:"fire-gcs",[vD]:"fire-gcs-compat",[yD]:"fire-fst",[wD]:"fire-fst-compat",[xD]:"fire-vertex","fire-js":"fire-js",[_D]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new Map,SD=new Map,o1=new Map;function z2(t,e){try{t.container.addComponent(e)}catch(n){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jr(t){const e=t.name;if(o1.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;o1.set(e,t);for(const n of Wd.values())z2(n,t);for(const n of SD.values())z2(n,t);return!0}function Ia(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ui(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new fo("app","Firebase",bD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=CD;function yA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:s1,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Qi.create("bad-app-name",{appName:String(i)});if(n||(n=uA()),!n)throw Qi.create("no-options");const s=Wd.get(i);if(s){if(Hd(n,s.options)&&Hd(r,s.config))return s;throw Qi.create("duplicate-app",{appName:i})}const o=new O5(i);for(const l of o1.values())o.addComponent(l);const a=new AD(n,r,o);return Wd.set(i,a),a}function kg(t=s1){const e=Wd.get(t);if(!e&&t===s1&&uA())return yA();if(!e)throw Qi.create("no-app",{appName:t});return e}function Zn(t,e,n){var r;let i=(r=ED[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(a.join(" "));return}jr(new _r(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND="firebase-heartbeat-database",TD=1,cc="firebase-heartbeat-store";let a0=null;function xA(){return a0||(a0=Hf(ND,TD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qi.create("idb-open",{originalErrorMessage:t.message})})),a0}async function ID(t){try{const n=(await xA()).transaction(cc),r=await n.objectStore(cc).get(wA(t));return await n.done,r}catch(e){if(e instanceof yi)hi.warn(e.message);else{const n=Qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(n.message)}}}async function $2(t,e){try{const r=(await xA()).transaction(cc,"readwrite");await r.objectStore(cc).put(e,wA(t)),await r.done}catch(n){if(n instanceof yi)hi.warn(n.message);else{const r=Qi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hi.warn(r.message)}}}function wA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=1024,PD=30*24*60*60*1e3;class RD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=G2();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=PD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){hi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=G2(),{heartbeatsToSend:r,unsentEntries:i}=OD(this._heartbeatsCache.heartbeats),s=Bd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return hi.warn(n),""}}}function G2(){return new Date().toISOString().substring(0,10)}function OD(t,e=kD){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),K2(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),K2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hA()?pA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ID(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function K2(t){return Bd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t){jr(new _r("platform-logger",e=>new X5(e),"PRIVATE")),jr(new _r("heartbeat",e=>new RD(e),"PRIVATE")),Zn(i1,W2,t),Zn(i1,W2,"esm2017"),Zn("fire-js","")}MD("");var jD="firebase",LD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(jD,LD,"app");var X2={};const Y2="@firebase/database",q2="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _A="";function FD(t){_A=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Et(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:lc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Fr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new BD(e)}}catch{}return new UD},Bs=CA("localStorage"),VD=CA("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new Tg("@firebase/database"),HD=function(){let t=1;return function(){return t++}}(),EA=function(t){const e=I5(t),n=new b5;n.update(e);const r=n.digest();return bg.encodeByteArray(r)},jc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=jc.apply(null,r):typeof r=="object"?e+=Et(r):e+=r,e+=" "}return e};let Il=null,Q2=!0;const WD=function(t,e){$(!0,"Can't turn on custom loggers persistently."),Yo.logLevel=Fe.VERBOSE,Il=Yo.log.bind(Yo)},zt=function(...t){if(Q2===!0&&(Q2=!1,Il===null&&VD.get("logging_enabled")===!0&&WD()),Il){const e=jc.apply(null,t);Il(e)}},Lc=function(t){return function(...e){zt(t,...e)}},a1=function(...t){const e="FIREBASE INTERNAL ERROR: "+jc(...t);Yo.error(e)},pi=function(...t){const e=`FIREBASE FATAL ERROR: ${jc(...t)}`;throw Yo.error(e),new Error(e)},pn=function(...t){const e="FIREBASE WARNING: "+jc(...t);Yo.warn(e)},zD=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&pn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Pg=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},$D=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},no="[MIN_NAME]",ls="[MAX_NAME]",ho=function(t,e){if(t===e)return 0;if(t===no||e===ls)return-1;if(e===no||t===ls)return 1;{const n=Z2(t),r=Z2(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},GD=function(t,e){return t===e?0:t<e?-1:1},Xa=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Et(e))},Rg=function(t){if(typeof t!="object"||t===null)return Et(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Et(e[r]),n+=":",n+=Rg(t[e[r]]);return n+="}",n},SA=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Xt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const bA=function(t){$(!Pg(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const d=c.join("");let f="";for(l=0;l<64;l+=8){let h=parseInt(d.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),f=f+h}return f.toLowerCase()},KD=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},XD=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function YD(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const qD=new RegExp("^-?(0*)\\d{1,10}$"),QD=-2147483648,ZD=2147483647,Z2=function(t){if(qD.test(t)){const e=Number(t);if(e>=QD&&e<=ZD)return e}return null},Pa=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw pn("Exception was thrown by user callback.",n),e},Math.floor(0))}},JD=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},kl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){pn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pn(e)}}class Gu{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Gu.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="5",AA="v",NA="s",TA="r",IA="f",kA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,PA="ls",RA="p",l1="ac",OA="websocket",DA="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Bs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function nM(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function jA(t,e,n){$(typeof e=="string","typeof type must == string"),$(typeof n=="object","typeof params must == object");let r;if(e===OA)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===DA)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);nM(t)&&(n.ns=t.namespace);const i=[];return Xt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.counters_={}}incrementCounter(e,n=1){Fr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return a5(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0={},c0={};function Dg(t){const e=t.toString();return l0[e]||(l0[e]=new rM),l0[e]}function iM(t,e){const n=t.toString();return c0[n]||(c0[n]=e()),c0[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Pa(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="start",oM="close",aM="pLPCommand",lM="pRTLPCB",LA="id",FA="pw",BA="ser",cM="cb",uM="seg",dM="ts",fM="d",hM="dframe",UA=1870,VA=30,pM=UA-VA,mM=25e3,gM=3e4;class Fo{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lc(e),this.stats_=Dg(n),this.urlFn=l=>(this.appCheckToken&&(l[l1]=this.appCheckToken),jA(n,DA,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new sM(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(gM)),$D(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Mg((...s)=>{const[o,a,l,c,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===J2)this.id=a,this.password=l;else if(o===oM)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[J2]="t",r[BA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[cM]=this.scriptTagHolder.uniqueCallbackIdentifier),r[AA]=Og,this.transportSessionId&&(r[NA]=this.transportSessionId),this.lastSessionId&&(r[PA]=this.lastSessionId),this.applicationId&&(r[RA]=this.applicationId),this.appCheckToken&&(r[l1]=this.appCheckToken),typeof location<"u"&&location.hostname&&kA.test(location.hostname)&&(r[TA]=IA);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fo.forceAllow_=!0}static forceDisallow(){Fo.forceDisallow_=!0}static isAvailable(){return Fo.forceAllow_?!0:!Fo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!KD()&&!XD()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Et(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=aA(n),i=SA(r,pM);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[hM]="t",r[LA]=e,r[FA]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Et(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Mg{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=HD(),window[aM+this.uniqueCallbackIdentifier]=e,window[lM+this.uniqueCallbackIdentifier]=n,this.myIFrame=Mg.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){zt("frame writing exception"),a.stack&&zt(a.stack),zt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||zt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[LA]=this.myID,e[FA]=this.myPW,e[BA]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+VA+r.length<=UA;){const o=this.pendingSegs.shift();r=r+"&"+uM+i+"="+o.seg+"&"+dM+i+"="+o.ts+"&"+fM+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(mM)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{zt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=16384,yM=45e3;let zd=null;typeof MozWebSocket<"u"?zd=MozWebSocket:typeof WebSocket<"u"&&(zd=WebSocket);class hr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lc(this.connId),this.stats_=Dg(n),this.connURL=hr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[AA]=Og,typeof location<"u"&&location.hostname&&kA.test(location.hostname)&&(o[TA]=IA),n&&(o[NA]=n),r&&(o[PA]=r),i&&(o[l1]=i),s&&(o[RA]=s),jA(e,OA,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bs.set("previous_websocket_failure",!0);try{let r;y5(),this.mySock=new zd(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){hr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&zd!==null&&!hr.forceDisallow_}static previouslyFailed(){return Bs.isInMemoryStorage||Bs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Bs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=lc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if($(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Et(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=SA(n,vM);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(yM))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hr.responsesRequiredToBeHealthy=2;hr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Fo,hr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=hr&&hr.isAvailable();let r=n&&!hr.previouslyFailed();if(e.webSocketOnly&&(n||pn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hr];else{const i=this.transports_=[];for(const s of uc.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);uc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}uc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=6e4,wM=5e3,_M=10*1024,CM=100*1024,u0="t",ew="d",EM="s",tw="r",SM="e",nw="o",rw="a",iw="n",sw="p",bM="h";class AM{constructor(e,n,r,i,s,o,a,l,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lc("c:"+this.id+":"),this.transportManager_=new uc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=kl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>CM?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>_M?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(u0 in e){const n=e[u0];n===rw?this.upgradeIfSecondaryHealthy_():n===tw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===nw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Xa("t",e),r=Xa("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:sw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:rw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:iw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Xa("t",e),r=Xa("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Xa(u0,e);if(ew in e){const r=e[ew];if(n===bM){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===iw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===EM?this.onConnectionShutdown_(r):n===tw?this.onReset_(r):n===SM?a1("Server Error: "+r):n===nw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):a1("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Og!==r&&pn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),kl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(xM))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):kl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(wM))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:sw,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){$(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends WA{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ng()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $d}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=32,aw=768;class je{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Te(){return new je("")}function me(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function cs(t){return t.pieces_.length-t.pieceNum_}function Ue(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new je(t.pieces_,e)}function jg(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function NM(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function dc(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function zA(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new je(e,0)}function at(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof je)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new je(n,0)}function ge(t){return t.pieceNum_>=t.pieces_.length}function fn(t,e){const n=me(t),r=me(e);if(n===null)return e;if(n===r)return fn(Ue(t),Ue(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function TM(t,e){const n=dc(t,0),r=dc(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=ho(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Lg(t,e){if(cs(t)!==cs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Yn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(cs(t)>cs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class IM{constructor(e,n){this.errorPrefix_=n,this.parts_=dc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Vf(this.parts_[r]);$A(this)}}function kM(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Vf(e),$A(t)}function PM(t){const e=t.parts_.pop();t.byteLength_-=Vf(e),t.parts_.length>0&&(t.byteLength_-=1)}function $A(t){if(t.byteLength_>aw)throw new Error(t.errorPrefix_+"has a key path longer than "+aw+" bytes ("+t.byteLength_+").");if(t.parts_.length>ow)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ow+") or object contains a cycle "+ks(t))}function ks(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends WA{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Fg}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=1e3,RM=60*5*1e3,lw=30*1e3,OM=1.3,DM=3e4,MM="server_kill",cw=3;class si extends HA{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=si.nextPersistentConnectionId_++,this.log_=Lc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ya,this.maxReconnectDelay_=RM,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Fg.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&$d.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Et(s)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Mc,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;si.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Fr(e,"w")){const r=da(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();pn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||S5(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=lw)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=E5(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Et(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):a1("Unrecognized action received from server: "+Et(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ya,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ya,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>DM&&(this.reconnectDelay_=Ya),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*OM)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+si.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(f){$(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(f)};this.realtime_={close:l,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,h]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?zt("getToken() completed but was canceled"):(zt("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,a=new AM(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{pn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(MM)},s))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&pn(f),l())}}}interrupt(e){zt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){zt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],t1(this.interruptReasons_)&&(this.reconnectDelay_=Ya,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Rg(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new je(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){zt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=cw&&(this.reconnectDelay_=lw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){zt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=cw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+_A.replace(/\./g,"-")]=1,Ng()?e["framework.cordova"]=1:fA()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=$d.getInstance().currentlyOnline();return t1(this.interruptReasons_)&&e}}si.nextPersistentConnectionId_=0;si.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ve(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ve(no,e),i=new ve(no,n);return this.compare(r,i)!==0}minPost(){return ve.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu;class GA extends Wf{static get __EMPTY_NODE(){return yu}static set __EMPTY_NODE(e){yu=e}compare(e,n){return ho(e.name,n.name)}isDefinedOn(e){throw Na("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ve.MIN}maxPost(){return new ve(ls,yu)}makePost(e,n){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new ve(e,yu)}toString(){return".key"}}const Gs=new GA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ot{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ot.RED,this.left=i??Nn.EMPTY_NODE,this.right=s??Nn.EMPTY_NODE}copy(e,n,r,i,s){return new Ot(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Nn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Nn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ot.RED=!0;Ot.BLACK=!1;class jM{copy(e,n,r,i,s){return this}insert(e,n,r){return new Ot(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Nn{constructor(e,n=Nn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Nn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ot.BLACK,null,null))}remove(e){return new Nn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ot.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new xu(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new xu(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new xu(this.root_,null,this.comparator_,!0,e)}}Nn.EMPTY_NODE=new jM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(t,e){return ho(t.name,e.name)}function Bg(t,e){return ho(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c1;function FM(t){c1=t}const KA=function(t){return typeof t=="number"?"number:"+bA(t):"string:"+t},XA=function(t){if(t.isLeafNode()){const e=t.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Fr(e,".sv"),"Priority must be a string or number.")}else $(t===c1||t.isEmpty(),"priority of unexpected type.");$(t===c1||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uw;class Pt{constructor(e,n=Pt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),XA(this.priorityNode_)}static set __childrenNodeConstructor(e){uw=e}static get __childrenNodeConstructor(){return uw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Pt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Pt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ge(e)?this:me(e)===".priority"?this.priorityNode_:Pt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Pt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=me(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:($(r!==".priority"||cs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Pt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ue(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+KA(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=bA(this.value_):e+=this.value_,this.lazyHash_=EA(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Pt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Pt.__childrenNodeConstructor?-1:($(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Pt.VALUE_TYPE_ORDER.indexOf(n),s=Pt.VALUE_TYPE_ORDER.indexOf(r);return $(i>=0,"Unknown leaf type: "+n),$(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Pt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YA,qA;function BM(t){YA=t}function UM(t){qA=t}class VM extends Wf{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ho(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(ls,new Pt("[PRIORITY-POST]",qA))}makePost(e,n){const r=YA(e);return new ve(n,new Pt("[PRIORITY-POST]",r))}toString(){return".priority"}}const nt=new VM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=Math.log(2);class WM{constructor(e){const n=s=>parseInt(Math.log(s)/HM,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Gd=function(t,e,n,r){t.sort(e);const i=function(l,c){const d=c-l;let f,h;if(d===0)return null;if(d===1)return f=t[l],h=n?n(f):f,new Ot(h,f.node,Ot.BLACK,null,null);{const p=parseInt(d/2,10)+l,m=i(l,p),v=i(p+1,c);return f=t[p],h=n?n(f):f,new Ot(h,f.node,Ot.BLACK,m,v)}},s=function(l){let c=null,d=null,f=t.length;const h=function(m,v){const w=f-m,y=f;f-=m;const g=i(w+1,y),x=t[w],_=n?n(x):x;p(new Ot(_,x.node,v,null,g))},p=function(m){c?(c.left=m,c=m):(d=m,c=m)};for(let m=0;m<l.count;++m){const v=l.nextBitIsOne(),w=Math.pow(2,l.count-(m+1));v?h(w,Ot.BLACK):(h(w,Ot.BLACK),h(w,Ot.RED))}return d},o=new WM(t.length),a=s(o);return new Nn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d0;const yo={};class qr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return $(yo&&nt,"ChildrenNode.ts has not been loaded"),d0=d0||new qr({".priority":yo},{".priority":nt}),d0}get(e){const n=da(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Nn?n:null}hasIndex(e){return Fr(this.indexSet_,e.toString())}addIndex(e,n){$(e!==Gs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ve.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Gd(r,e.getCompare()):a=yo;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new qr(d,c)}addToIndexes(e,n){const r=Vd(this.indexes_,(i,s)=>{const o=da(this.indexSet_,s);if($(o,"Missing index implementation for "+s),i===yo)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ve.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Gd(a,o.getCompare())}else return yo;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new ve(e.name,a))),l.insert(e,e.node)}});return new qr(r,this.indexSet_)}removeFromIndexes(e,n){const r=Vd(this.indexes_,i=>{if(i===yo)return i;{const s=n.get(e.name);return s?i.remove(new ve(e.name,s)):i}});return new qr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa;class le{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&XA(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qa||(qa=new le(new Nn(Bg),null,qr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qa}updatePriority(e){return this.children_.isEmpty()?this:new le(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?qa:n}}getChild(e){const n=me(e);return n===null?this:this.getImmediateChild(n).getChild(Ue(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if($(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ve(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?qa:this.priorityNode_;return new le(i,o,s)}}updateChild(e,n){const r=me(e);if(r===null)return n;{$(me(e)!==".priority"||cs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Ue(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(nt,(o,a)=>{n[o]=a.val(e),r++,s&&le.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+KA(this.getPriority().val())+":"),this.forEachChild(nt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":EA(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ve(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ve(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ve(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ve.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ve.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Fc?-1:0}withIndex(e){if(e===Gs||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new le(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Gs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(nt),i=n.getIterator(nt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Gs?null:this.indexMap_.get(e.toString())}}le.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class zM extends le{constructor(){super(new Nn(Bg),le.EMPTY_NODE,qr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return le.EMPTY_NODE}isEmpty(){return!1}}const Fc=new zM;Object.defineProperties(ve,{MIN:{value:new ve(no,le.EMPTY_NODE)},MAX:{value:new ve(ls,Fc)}});GA.__EMPTY_NODE=le.EMPTY_NODE;Pt.__childrenNodeConstructor=le;FM(Fc);UM(Fc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=!0;function _t(t,e=null){if(t===null)return le.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Pt(n,_t(e))}if(!(t instanceof Array)&&$M){const n=[];let r=!1;if(Xt(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=_t(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new ve(o,l)))}}),n.length===0)return le.EMPTY_NODE;const s=Gd(n,LM,o=>o.name,Bg);if(r){const o=Gd(n,nt.getCompare());return new le(s,_t(e),new qr({".priority":o},{".priority":nt}))}else return new le(s,_t(e),qr.Default)}else{let n=le.EMPTY_NODE;return Xt(t,(r,i)=>{if(Fr(t,r)&&r.substring(0,1)!=="."){const s=_t(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(_t(e))}}BM(_t);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends Wf{constructor(e){super(),this.indexPath_=e,$(!ge(e)&&me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ho(e.name,n.name):s}makePost(e,n){const r=_t(e),i=le.EMPTY_NODE.updateChild(this.indexPath_,r);return new ve(n,i)}maxPost(){const e=le.EMPTY_NODE.updateChild(this.indexPath_,Fc);return new ve(ls,e)}toString(){return dc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM extends Wf{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ho(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(e,n){const r=_t(e);return new ve(n,r)}toString(){return".value"}}const QA=new GM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){return{type:"value",snapshotNode:t}}function fa(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function fc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function hc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function KM(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){$(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(fc(n,a)):$(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(fa(n,r)):o.trackChildChange(hc(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(nt,(i,s)=>{n.hasChild(i)||r.trackChildChange(fc(i,s))}),n.isLeafNode()||n.forEachChild(nt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(hc(i,s,o))}else r.trackChildChange(fa(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?le.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.indexedFilter_=new Vg(e.getIndex()),this.index_=e.getIndex(),this.startPost_=pc.getStartPost_(e),this.endPost_=pc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ve(n,r))||(r=le.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=le.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(le.EMPTY_NODE);const s=this;return n.forEachChild(nt,(o,a)=>{s.matches(new ve(o,a))||(i=i.updateImmediateChild(o,le.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new pc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ve(n,r))||(r=le.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=le.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=le.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(le.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const f=this.index_.getCompare();o=(h,p)=>f(p,h)}else o=this.index_.getCompare();const a=e;$(a.numChildren()===this.limit_,"");const l=new ve(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(n)){const f=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const p=h==null?1:o(h,l);if(d&&!r.isEmpty()&&p>=0)return s!=null&&s.trackChildChange(hc(n,r,f)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(fc(n,f));const v=a.updateImmediateChild(n,le.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(fa(h.name,h.node)),v.updateImmediateChild(h.name,h.node)):v}}else return r.isEmpty()?e:d&&o(c,l)>=0?(s!=null&&(s.trackChildChange(fc(c.name,c.node)),s.trackChildChange(fa(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,le.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:no}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ls}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nt}copy(){const e=new Hg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function YM(t){return t.loadsAllData()?new Vg(t.getIndex()):t.hasLimit()?new XM(t):new pc(t)}function qM(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function QM(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function ZM(t,e){const n=t.copy();return n.index_=e,n}function dw(t){const e={};if(t.isDefault())return e;let n;if(t.index_===nt?n="$priority":t.index_===QA?n="$value":t.index_===Gs?n="$key":($(t.index_ instanceof Ug,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Et(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Et(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Et(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Et(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Et(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function fw(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==nt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends HA{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Lc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Kd.getListenId_(e,r),a={};this.listens_[o]=a;const l=dw(e._queryParams);this.restRequest_(s+".json",l,(c,d)=>{let f=d;if(c===404&&(f=null,c=null),c===null&&this.onDataUpdate_(s,f,!1,r),da(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,n){const r=Kd.getListenId_(e,n);delete this.listens_[r]}get(e){const n=dw(e._queryParams),r=e._path.toString(),i=new Mc;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ta(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=lc(a.responseText)}catch{pn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&pn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.rootNode_=le.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(){return{value:null,children:new Map}}function JA(t,e,n){if(ge(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=me(e);t.children.has(r)||t.children.set(r,Xd());const i=t.children.get(r);e=Ue(e),JA(i,e,n)}}function u1(t,e,n){t.value!==null?n(e,t.value):e7(t,(r,i)=>{const s=new je(e.toString()+"/"+r);u1(i,s,n)})}function e7(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Xt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=10*1e3,n7=30*1e3,r7=5*60*1e3;class i7{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new t7(e);const r=hw+(n7-hw)*Math.random();kl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Xt(e,(i,s)=>{s>0&&Fr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),kl(this.reportStats_.bind(this),Math.floor(Math.random()*2*r7))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(gr||(gr={}));function Wg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $g(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=gr.ACK_USER_WRITE,this.source=Wg()}operationForChild(e){if(ge(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new je(e));return new Yd(Te(),n,this.revert)}}else return $(me(this.path)===e,"operationForChild called for unrelated child."),new Yd(Ue(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this.source=e,this.path=n,this.type=gr.LISTEN_COMPLETE}operationForChild(e){return ge(this.path)?new mc(this.source,Te()):new mc(this.source,Ue(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=gr.OVERWRITE}operationForChild(e){return ge(this.path)?new ro(this.source,Te(),this.snap.getImmediateChild(e)):new ro(this.source,Ue(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=gr.MERGE}operationForChild(e){if(ge(this.path)){const n=this.children.subtree(new je(e));return n.isEmpty()?null:n.value?new ro(this.source,Te(),n.value):new ha(this.source,Te(),n)}else return $(me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ha(this.source,Ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ge(e))return this.isFullyInitialized()&&!this.filtered_;const n=me(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function o7(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(KM(o.childName,o.snapshotNode))}),Qa(t,i,"child_removed",e,r,n),Qa(t,i,"child_added",e,r,n),Qa(t,i,"child_moved",s,r,n),Qa(t,i,"child_changed",e,r,n),Qa(t,i,"value",e,r,n),i}function Qa(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>l7(t,a,l)),o.forEach(a=>{const l=a7(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function a7(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function l7(t,e,n){if(e.childName==null||n.childName==null)throw Na("Should only compare child_ events.");const r=new ve(e.childName,e.snapshotNode),i=new ve(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,e){return{eventCache:t,serverCache:e}}function Pl(t,e,n,r){return zf(new us(e,n,r),t.serverCache)}function e3(t,e,n,r){return zf(t.eventCache,new us(e,n,r))}function qd(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function io(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f0;const c7=()=>(f0||(f0=new Nn(GD)),f0);class Be{constructor(e,n=c7()){this.value=e,this.children=n}static fromObject(e){let n=new Be(null);return Xt(e,(r,i)=>{n=n.set(new je(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Te(),value:this.value};if(ge(e))return null;{const r=me(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Ue(e),n);return s!=null?{path:at(new je(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ge(e))return this;{const n=me(e),r=this.children.get(n);return r!==null?r.subtree(Ue(e)):new Be(null)}}set(e,n){if(ge(e))return new Be(n,this.children);{const r=me(e),s=(this.children.get(r)||new Be(null)).set(Ue(e),n),o=this.children.insert(r,s);return new Be(this.value,o)}}remove(e){if(ge(e))return this.children.isEmpty()?new Be(null):new Be(null,this.children);{const n=me(e),r=this.children.get(n);if(r){const i=r.remove(Ue(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Be(null):new Be(this.value,s)}else return this}}get(e){if(ge(e))return this.value;{const n=me(e),r=this.children.get(n);return r?r.get(Ue(e)):null}}setTree(e,n){if(ge(e))return n;{const r=me(e),s=(this.children.get(r)||new Be(null)).setTree(Ue(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Be(this.value,o)}}fold(e){return this.fold_(Te(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(at(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Te(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(ge(e))return null;{const s=me(e),o=this.children.get(s);return o?o.findOnPath_(Ue(e),at(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Te(),n)}foreachOnPath_(e,n,r){if(ge(e))return this;{this.value&&r(n,this.value);const i=me(e),s=this.children.get(i);return s?s.foreachOnPath_(Ue(e),at(n,i),r):new Be(null)}}foreach(e){this.foreach_(Te(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(at(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.writeTree_=e}static empty(){return new xr(new Be(null))}}function Rl(t,e,n){if(ge(e))return new xr(new Be(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=fn(i,e);return s=s.updateChild(o,n),new xr(t.writeTree_.set(i,s))}else{const i=new Be(n),s=t.writeTree_.setTree(e,i);return new xr(s)}}}function d1(t,e,n){let r=t;return Xt(n,(i,s)=>{r=Rl(r,at(e,i),s)}),r}function pw(t,e){if(ge(e))return xr.empty();{const n=t.writeTree_.setTree(e,new Be(null));return new xr(n)}}function f1(t,e){return po(t,e)!=null}function po(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(fn(n.path,e)):null}function mw(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(nt,(r,i)=>{e.push(new ve(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ve(r,i.value))}),e}function Zi(t,e){if(ge(e))return t;{const n=po(t,e);return n!=null?new xr(new Be(n)):new xr(t.writeTree_.subtree(e))}}function h1(t){return t.writeTree_.isEmpty()}function pa(t,e){return t3(Te(),t.writeTree_,e)}function t3(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?($(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=t3(at(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(at(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t,e){return s3(e,t)}function u7(t,e,n,r,i){$(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Rl(t.visibleWrites,e,n)),t.lastWriteId=r}function d7(t,e,n,r){$(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=d1(t.visibleWrites,e,n),t.lastWriteId=r}function f7(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function h7(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);$(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&p7(a,r.path)?i=!1:Yn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return m7(t),!0;if(r.snap)t.visibleWrites=pw(t.visibleWrites,r.path);else{const a=r.children;Xt(a,l=>{t.visibleWrites=pw(t.visibleWrites,at(r.path,l))})}return!0}else return!1}function p7(t,e){if(t.snap)return Yn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Yn(at(t.path,n),e))return!0;return!1}function m7(t){t.visibleWrites=n3(t.allWrites,g7,Te()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function g7(t){return t.visible}function n3(t,e,n){let r=xr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Yn(n,o)?(a=fn(n,o),r=Rl(r,a,s.snap)):Yn(o,n)&&(a=fn(o,n),r=Rl(r,Te(),s.snap.getChild(a)));else if(s.children){if(Yn(n,o))a=fn(n,o),r=d1(r,a,s.children);else if(Yn(o,n))if(a=fn(o,n),ge(a))r=d1(r,Te(),s.children);else{const l=da(s.children,me(a));if(l){const c=l.getChild(Ue(a));r=Rl(r,Te(),c)}}}else throw Na("WriteRecord should have .snap or .children")}}return r}function r3(t,e,n,r,i){if(!r&&!i){const s=po(t.visibleWrites,e);if(s!=null)return s;{const o=Zi(t.visibleWrites,e);if(h1(o))return n;if(n==null&&!f1(o,Te()))return null;{const a=n||le.EMPTY_NODE;return pa(o,a)}}}else{const s=Zi(t.visibleWrites,e);if(!i&&h1(s))return n;if(!i&&n==null&&!f1(s,Te()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Yn(c.path,e)||Yn(e,c.path))},a=n3(t.allWrites,o,e),l=n||le.EMPTY_NODE;return pa(a,l)}}}function v7(t,e,n){let r=le.EMPTY_NODE;const i=po(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Zi(t.visibleWrites,e);return n.forEachChild(nt,(o,a)=>{const l=pa(Zi(s,new je(o)),a);r=r.updateImmediateChild(o,l)}),mw(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Zi(t.visibleWrites,e);return mw(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function y7(t,e,n,r,i){$(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=at(e,n);if(f1(t.visibleWrites,s))return null;{const o=Zi(t.visibleWrites,s);return h1(o)?i.getChild(n):pa(o,i.getChild(n))}}function x7(t,e,n,r){const i=at(e,n),s=po(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Zi(t.visibleWrites,i);return pa(o,r.getNode().getImmediateChild(n))}else return null}function w7(t,e){return po(t.visibleWrites,e)}function _7(t,e,n,r,i,s,o){let a;const l=Zi(t.visibleWrites,e),c=po(l,Te());if(c!=null)a=c;else if(n!=null)a=pa(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],f=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let p=h.getNext();for(;p&&d.length<i;)f(p,r)!==0&&d.push(p),p=h.getNext();return d}else return[]}function C7(){return{visibleWrites:xr.empty(),allWrites:[],lastWriteId:-1}}function Qd(t,e,n,r){return r3(t.writeTree,t.treePath,e,n,r)}function Gg(t,e){return v7(t.writeTree,t.treePath,e)}function gw(t,e,n,r){return y7(t.writeTree,t.treePath,e,n,r)}function Zd(t,e){return w7(t.writeTree,at(t.treePath,e))}function E7(t,e,n,r,i,s){return _7(t.writeTree,t.treePath,e,n,r,i,s)}function Kg(t,e,n){return x7(t.writeTree,t.treePath,e,n)}function i3(t,e){return s3(at(t.treePath,e),t.writeTree)}function s3(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;$(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),$(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,hc(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,fc(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,fa(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,hc(r,e.snapshotNode,i.oldSnap));else throw Na("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const o3=new b7;class Xg{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new us(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kg(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:io(this.viewCache_),s=E7(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(t){return{filter:t}}function N7(t,e){$(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function T7(t,e,n,r,i){const s=new S7;let o,a;if(n.type===gr.OVERWRITE){const c=n;c.source.fromUser?o=p1(t,e,c.path,c.snap,r,i,s):($(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ge(c.path),o=Jd(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===gr.MERGE){const c=n;c.source.fromUser?o=k7(t,e,c.path,c.children,r,i,s):($(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=m1(t,e,c.path,c.children,r,i,a,s))}else if(n.type===gr.ACK_USER_WRITE){const c=n;c.revert?o=O7(t,e,c.path,r,i,s):o=P7(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===gr.LISTEN_COMPLETE)o=R7(t,e,n.path,r,s);else throw Na("Unknown operation type: "+n.type);const l=s.getChanges();return I7(e,o,l),{viewCache:o,changes:l}}function I7(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=qd(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ZA(qd(e)))}}function a3(t,e,n,r,i,s){const o=e.eventCache;if(Zd(r,n)!=null)return e;{let a,l;if(ge(n))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=io(e),d=c instanceof le?c:le.EMPTY_NODE,f=Gg(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const c=Qd(r,io(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=me(n);if(c===".priority"){$(cs(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const f=gw(r,n,d,l);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{const d=Ue(n);let f;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=gw(r,n,o.getNode(),l);h!=null?f=o.getNode().getImmediateChild(c).updateChild(d,h):f=o.getNode().getImmediateChild(c)}else f=Kg(r,c,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),c,f,d,i,s):a=o.getNode()}}return Pl(e,a,o.isFullyInitialized()||ge(n),t.filter.filtersNodes())}}function Jd(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if(ge(n))c=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(n,r);c=d.updateFullNode(l.getNode(),p,null)}else{const p=me(n);if(!l.isCompleteForPath(n)&&cs(n)>1)return e;const m=Ue(n),w=l.getNode().getImmediateChild(p).updateChild(m,r);p===".priority"?c=d.updatePriority(l.getNode(),w):c=d.updateChild(l.getNode(),p,w,m,o3,null)}const f=e3(e,c,l.isFullyInitialized()||ge(n),d.filtersNodes()),h=new Xg(i,f,s);return a3(t,f,n,i,h,a)}function p1(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const d=new Xg(i,e,s);if(ge(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Pl(e,c,!0,t.filter.filtersNodes());else{const f=me(n);if(f===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Pl(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Ue(n),p=a.getNode().getImmediateChild(f);let m;if(ge(h))m=r;else{const v=d.getCompleteChild(f);v!=null?jg(h)===".priority"&&v.getChild(zA(h)).isEmpty()?m=v:m=v.updateChild(h,r):m=le.EMPTY_NODE}if(p.equals(m))l=e;else{const v=t.filter.updateChild(a.getNode(),f,m,h,d,o);l=Pl(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function vw(t,e){return t.eventCache.isCompleteForChild(e)}function k7(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const d=at(n,l);vw(e,me(d))&&(a=p1(t,a,d,c,i,s,o))}),r.foreach((l,c)=>{const d=at(n,l);vw(e,me(d))||(a=p1(t,a,d,c,i,s,o))}),a}function yw(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function m1(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ge(n)?c=r:c=new Be(null).setTree(n,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((f,h)=>{if(d.hasChild(f)){const p=e.serverCache.getNode().getImmediateChild(f),m=yw(t,p,h);l=Jd(t,l,new je(f),m,i,s,o,a)}}),c.children.inorderTraversal((f,h)=>{const p=!e.serverCache.isCompleteForChild(f)&&h.value===null;if(!d.hasChild(f)&&!p){const m=e.serverCache.getNode().getImmediateChild(f),v=yw(t,m,h);l=Jd(t,l,new je(f),v,i,s,o,a)}}),l}function P7(t,e,n,r,i,s,o){if(Zd(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ge(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Jd(t,e,n,l.getNode().getChild(n),i,s,a,o);if(ge(n)){let c=new Be(null);return l.getNode().forEachChild(Gs,(d,f)=>{c=c.set(new je(d),f)}),m1(t,e,n,c,i,s,a,o)}else return e}else{let c=new Be(null);return r.foreach((d,f)=>{const h=at(n,d);l.isCompleteForPath(h)&&(c=c.set(d,l.getNode().getChild(h)))}),m1(t,e,n,c,i,s,a,o)}}function R7(t,e,n,r,i){const s=e.serverCache,o=e3(e,s.getNode(),s.isFullyInitialized()||ge(n),s.isFiltered());return a3(t,o,n,r,o3,i)}function O7(t,e,n,r,i,s){let o;if(Zd(r,n)!=null)return e;{const a=new Xg(r,e,i),l=e.eventCache.getNode();let c;if(ge(n)||me(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Qd(r,io(e));else{const f=e.serverCache.getNode();$(f instanceof le,"serverChildren would be complete if leaf node"),d=Gg(r,f)}d=d,c=t.filter.updateFullNode(l,d,s)}else{const d=me(n);let f=Kg(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=l.getImmediateChild(d)),f!=null?c=t.filter.updateChild(l,d,f,Ue(n),a,s):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,le.EMPTY_NODE,Ue(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Qd(r,io(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Zd(r,Te())!=null,Pl(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Vg(r.getIndex()),s=YM(r);this.processor_=A7(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(le.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(le.EMPTY_NODE,a.getNode(),null),d=new us(l,o.isFullyInitialized(),i.filtersNodes()),f=new us(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=zf(f,d),this.eventGenerator_=new s7(this.query_)}get query(){return this.query_}}function M7(t){return t.viewCache_.serverCache.getNode()}function j7(t){return qd(t.viewCache_)}function L7(t,e){const n=io(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ge(e)&&!n.getImmediateChild(me(e)).isEmpty())?n.getChild(e):null}function xw(t){return t.eventRegistrations_.length===0}function F7(t,e){t.eventRegistrations_.push(e)}function ww(t,e,n){const r=[];if(n){$(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function _w(t,e,n,r){e.type===gr.MERGE&&e.source.queryId!==null&&($(io(t.viewCache_),"We should always have a full cache before handling merges"),$(qd(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=T7(t.processor_,i,e,n,r);return N7(t.processor_,s.viewCache),$(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,l3(t,s.changes,s.viewCache.eventCache.getNode(),null)}function B7(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(nt,(s,o)=>{r.push(fa(s,o))}),n.isFullyInitialized()&&r.push(ZA(n.getNode())),l3(t,r,n.getNode(),e)}function l3(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return o7(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef;class c3{constructor(){this.views=new Map}}function U7(t){$(!ef,"__referenceConstructor has already been defined"),ef=t}function V7(){return $(ef,"Reference.ts has not been loaded"),ef}function H7(t){return t.views.size===0}function Yg(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return $(s!=null,"SyncTree gave us an op for an invalid query."),_w(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(_w(o,e,n,r));return s}}function u3(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Qd(n,i?r:null),l=!1;a?l=!0:r instanceof le?(a=Gg(n,r),l=!1):(a=le.EMPTY_NODE,l=!1);const c=zf(new us(a,l,!1),new us(r,i,!1));return new D7(e,c)}return o}function W7(t,e,n,r,i,s){const o=u3(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),F7(o,n),B7(o,n)}function z7(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=ds(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(ww(c,n,r)),xw(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(ww(l,n,r)),xw(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!ds(t)&&s.push(new(V7())(e._repo,e._path)),{removed:s,events:o}}function d3(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ji(t,e){let n=null;for(const r of t.views.values())n=n||L7(r,e);return n}function f3(t,e){if(e._queryParams.loadsAllData())return Gf(t);{const r=e._queryIdentifier;return t.views.get(r)}}function h3(t,e){return f3(t,e)!=null}function ds(t){return Gf(t)!=null}function Gf(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf;function $7(t){$(!tf,"__referenceConstructor has already been defined"),tf=t}function G7(){return $(tf,"Reference.ts has not been loaded"),tf}let K7=1;class Cw{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Be(null),this.pendingWriteTree_=C7(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function p3(t,e,n,r,i){return u7(t.pendingWriteTree_,e,n,r,i),i?Ra(t,new ro(Wg(),e,n)):[]}function X7(t,e,n,r){d7(t.pendingWriteTree_,e,n,r);const i=Be.fromObject(n);return Ra(t,new ha(Wg(),e,i))}function Vi(t,e,n=!1){const r=f7(t.pendingWriteTree_,e);if(h7(t.pendingWriteTree_,e)){let s=new Be(null);return r.snap!=null?s=s.set(Te(),!0):Xt(r.children,o=>{s=s.set(new je(o),!0)}),Ra(t,new Yd(r.path,s,n))}else return[]}function Bc(t,e,n){return Ra(t,new ro(zg(),e,n))}function Y7(t,e,n){const r=Be.fromObject(n);return Ra(t,new ha(zg(),e,r))}function q7(t,e){return Ra(t,new mc(zg(),e))}function Q7(t,e,n){const r=Qg(t,n);if(r){const i=Zg(r),s=i.path,o=i.queryId,a=fn(s,e),l=new mc($g(o),a);return Jg(t,s,l)}else return[]}function nf(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||h3(o,e))){const l=z7(o,e,n,r);H7(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const d=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(s,(h,p)=>ds(p));if(d&&!f){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const p=ej(h);for(let m=0;m<p.length;++m){const v=p[m],w=v.query,y=y3(t,v);t.listenProvider_.startListening(Ol(w),gc(t,w),y.hashFn,y.onComplete)}}}!f&&c.length>0&&!r&&(d?t.listenProvider_.stopListening(Ol(e),null):c.forEach(h=>{const p=t.queryToTagMap.get(Kf(h));t.listenProvider_.stopListening(Ol(h),p)}))}tj(t,c)}return a}function m3(t,e,n,r){const i=Qg(t,r);if(i!=null){const s=Zg(i),o=s.path,a=s.queryId,l=fn(o,e),c=new ro($g(a),l,n);return Jg(t,o,c)}else return[]}function Z7(t,e,n,r){const i=Qg(t,r);if(i){const s=Zg(i),o=s.path,a=s.queryId,l=fn(o,e),c=Be.fromObject(n),d=new ha($g(a),l,c);return Jg(t,o,d)}else return[]}function g1(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,p)=>{const m=fn(h,i);s=s||Ji(p,m),o=o||ds(p)});let a=t.syncPointTree_.get(i);a?(o=o||ds(a),s=s||Ji(a,Te())):(a=new c3,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=le.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((p,m)=>{const v=Ji(m,Te());v&&(s=s.updateImmediateChild(p,v))}));const c=h3(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=Kf(e);$(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const p=nj();t.queryToTagMap.set(h,p),t.tagToQueryMap.set(p,h)}const d=$f(t.pendingWriteTree_,i);let f=W7(a,e,n,d,s,l);if(!c&&!o&&!r){const h=f3(a,e);f=f.concat(rj(t,e,h))}return f}function qg(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=fn(o,e),c=Ji(a,l);if(c)return c});return r3(i,e,s,n,!0)}function J7(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,d)=>{const f=fn(c,n);r=r||Ji(d,f)});let i=t.syncPointTree_.get(n);i?r=r||Ji(i,Te()):(i=new c3,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new us(r,!0,!1):null,a=$f(t.pendingWriteTree_,e._path),l=u3(i,e,a,s?o.getNode():le.EMPTY_NODE,s);return j7(l)}function Ra(t,e){return g3(e,t.syncPointTree_,null,$f(t.pendingWriteTree_,Te()))}function g3(t,e,n,r){if(ge(t.path))return v3(t,e,n,r);{const i=e.get(Te());n==null&&i!=null&&(n=Ji(i,Te()));let s=[];const o=me(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,d=i3(r,o);s=s.concat(g3(a,l,c,d))}return i&&(s=s.concat(Yg(i,t,r,n))),s}}function v3(t,e,n,r){const i=e.get(Te());n==null&&i!=null&&(n=Ji(i,Te()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=i3(r,o),d=t.operationForChild(o);d&&(s=s.concat(v3(d,a,l,c)))}),i&&(s=s.concat(Yg(i,t,r,n))),s}function y3(t,e){const n=e.query,r=gc(t,n);return{hashFn:()=>(M7(e)||le.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Q7(t,n._path,r):q7(t,n._path);{const s=YD(i,n);return nf(t,n,null,s)}}}}function gc(t,e){const n=Kf(e);return t.queryToTagMap.get(n)}function Kf(t){return t._path.toString()+"$"+t._queryIdentifier}function Qg(t,e){return t.tagToQueryMap.get(e)}function Zg(t){const e=t.indexOf("$");return $(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new je(t.substr(0,e))}}function Jg(t,e,n){const r=t.syncPointTree_.get(e);$(r,"Missing sync point for query tag that we're tracking");const i=$f(t.pendingWriteTree_,e);return Yg(r,n,i,null)}function ej(t){return t.fold((e,n,r)=>{if(n&&ds(n))return[Gf(n)];{let i=[];return n&&(i=d3(n)),Xt(r,(s,o)=>{i=i.concat(o)}),i}})}function Ol(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(G7())(t._repo,t._path):t}function tj(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Kf(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function nj(){return K7++}function rj(t,e,n){const r=e._path,i=gc(t,e),s=y3(t,n),o=t.listenProvider_.startListening(Ol(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)$(!ds(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,d,f)=>{if(!ge(c)&&d&&ds(d))return[Gf(d).query];{let h=[];return d&&(h=h.concat(d3(d).map(p=>p.query))),Xt(f,(p,m)=>{h=h.concat(m)}),h}});for(let c=0;c<l.length;++c){const d=l[c];t.listenProvider_.stopListening(Ol(d),gc(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new ev(n)}node(){return this.node_}}class tv{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=at(this.path_,e);return new tv(this.syncTree_,n)}node(){return qg(this.syncTree_,this.path_)}}const ij=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Ew=function(t,e,n){if(!t||typeof t!="object")return t;if($(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return sj(t[".sv"],e,n);if(typeof t[".sv"]=="object")return oj(t[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},sj=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:$(!1,"Unexpected server value: "+t)}},oj=function(t,e,n){t.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&$(!1,"Unexpected increment value: "+r);const i=e.node();if($(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},x3=function(t,e,n,r){return nv(e,new tv(n,t),r)},w3=function(t,e,n){return nv(t,new ev(e),n)};function nv(t,e,n){const r=t.getPriority().val(),i=Ew(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=Ew(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Pt(a,_t(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Pt(i))),o.forEachChild(nt,(a,l)=>{const c=nv(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function iv(t,e){let n=e instanceof je?e:new je(e),r=t,i=me(n);for(;i!==null;){const s=da(r.node.children,i)||{children:{},childCount:0};r=new rv(i,r,s),n=Ue(n),i=me(n)}return r}function Oa(t){return t.node.value}function _3(t,e){t.node.value=e,v1(t)}function C3(t){return t.node.childCount>0}function aj(t){return Oa(t)===void 0&&!C3(t)}function Xf(t,e){Xt(t.node.children,(n,r)=>{e(new rv(n,t,r))})}function E3(t,e,n,r){n&&e(t),Xf(t,i=>{E3(i,e,!0)})}function lj(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Uc(t){return new je(t.parent===null?t.name:Uc(t.parent)+"/"+t.name)}function v1(t){t.parent!==null&&cj(t.parent,t.name,t)}function cj(t,e,n){const r=aj(n),i=Fr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,v1(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,v1(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=/[\[\].#$\/\u0000-\u001F\u007F]/,dj=/[\[\].#$\u0000-\u001F\u007F]/,h0=10*1024*1024,sv=function(t){return typeof t=="string"&&t.length!==0&&!uj.test(t)},S3=function(t){return typeof t=="string"&&t.length!==0&&!dj.test(t)},fj=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),S3(t)},y1=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Pg(t)||t&&typeof t=="object"&&Fr(t,".sv")},Yf=function(t,e,n,r){r&&e===void 0||qf(Uf(t,"value"),e,n)},qf=function(t,e,n){const r=n instanceof je?new IM(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ks(r));if(typeof e=="function")throw new Error(t+"contains a function "+ks(r)+" with contents = "+e.toString());if(Pg(e))throw new Error(t+"contains "+e.toString()+" "+ks(r));if(typeof e=="string"&&e.length>h0/3&&Vf(e)>h0)throw new Error(t+"contains a string greater than "+h0+" utf8 bytes "+ks(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Xt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!sv(o)))throw new Error(t+" contains an invalid key ("+o+") "+ks(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);kM(r,o),qf(t,a,r),PM(r)}),i&&s)throw new Error(t+' contains ".value" child '+ks(r)+" in addition to actual children.")}},hj=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=dc(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!sv(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(TM);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Yn(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},pj=function(t,e,n,r){const i=Uf(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Xt(e,(o,a)=>{const l=new je(o);if(qf(i,a,at(n,l)),jg(l)===".priority"&&!y1(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),hj(i,s)},ov=function(t,e,n,r){if(!S3(n))throw new Error(Uf(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},mj=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ov(t,e,n)},b3=function(t,e){if(me(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},gj=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!sv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!fj(n))throw new Error(Uf(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Qf(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Lg(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function A3(t,e,n){Qf(t,n),N3(t,r=>Lg(r,e))}function nr(t,e,n){Qf(t,n),N3(t,r=>Yn(r,e)||Yn(e,r))}function N3(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(yj(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function yj(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Il&&zt("event: "+n.toString()),Pa(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj="repo_interrupt",wj=25;class _j{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xd(),this.transactionQueueTree_=new rv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Cj(t,e,n){if(t.stats_=Dg(t.repoInfo_),t.forceRestClient_||JD())t.server_=new Kd(t.repoInfo_,(r,i,s,o)=>{Sw(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>bw(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Et(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new si(t.repoInfo_,e,(r,i,s,o)=>{Sw(t,r,i,s,o)},r=>{bw(t,r)},r=>{Sj(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=iM(t.repoInfo_,()=>new i7(t.stats_,t.server_)),t.infoData_=new JM,t.infoSyncTree_=new Cw({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Bc(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),av(t,"connected",!1),t.serverSyncTree_=new Cw({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);nr(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Ej(t){const n=t.infoData_.getNode(new je(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Zf(t){return ij({timestamp:Ej(t)})}function Sw(t,e,n,r,i){t.dataUpdateCount++;const s=new je(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Vd(n,c=>_t(c));o=Z7(t.serverSyncTree_,s,l,i)}else{const l=_t(n);o=m3(t.serverSyncTree_,s,l,i)}else if(r){const l=Vd(n,c=>_t(c));o=Y7(t.serverSyncTree_,s,l)}else{const l=_t(n);o=Bc(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=ma(t,s)),nr(t.eventQueue_,a,o)}function bw(t,e){av(t,"connected",e),e===!1&&Tj(t)}function Sj(t,e){Xt(e,(n,r)=>{av(t,n,r)})}function av(t,e,n){const r=new je("/.info/"+e),i=_t(n);t.infoData_.updateSnapshot(r,i);const s=Bc(t.infoSyncTree_,r,i);nr(t.eventQueue_,r,s)}function lv(t){return t.nextWriteId_++}function bj(t,e,n){const r=J7(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=_t(i).withIndex(e._queryParams.getIndex());g1(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Bc(t.serverSyncTree_,e._path,s);else{const a=gc(t.serverSyncTree_,e);o=m3(t.serverSyncTree_,e._path,s,a)}return nr(t.eventQueue_,e._path,o),nf(t.serverSyncTree_,e,n,null,!0),s},i=>(Vc(t,"get for query "+Et(e)+" failed: "+i),Promise.reject(new Error(i))))}function Aj(t,e,n,r,i){Vc(t,"set",{path:e.toString(),value:n,priority:r});const s=Zf(t),o=_t(n,r),a=qg(t.serverSyncTree_,e),l=w3(o,a,s),c=lv(t),d=p3(t.serverSyncTree_,e,l,c,!0);Qf(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(h,p)=>{const m=h==="ok";m||pn("set at "+e+" failed: "+h);const v=Vi(t.serverSyncTree_,c,!m);nr(t.eventQueue_,e,v),x1(t,i,h,p)});const f=uv(t,e);ma(t,f),nr(t.eventQueue_,f,[])}function Nj(t,e,n,r){Vc(t,"update",{path:e.toString(),value:n});let i=!0;const s=Zf(t),o={};if(Xt(n,(a,l)=>{i=!1,o[a]=x3(at(e,a),_t(l),t.serverSyncTree_,s)}),i)zt("update() called with empty data.  Don't do anything."),x1(t,r,"ok",void 0);else{const a=lv(t),l=X7(t.serverSyncTree_,e,o,a);Qf(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,d)=>{const f=c==="ok";f||pn("update at "+e+" failed: "+c);const h=Vi(t.serverSyncTree_,a,!f),p=h.length>0?ma(t,e):e;nr(t.eventQueue_,p,h),x1(t,r,c,d)}),Xt(n,c=>{const d=uv(t,at(e,c));ma(t,d)}),nr(t.eventQueue_,e,[])}}function Tj(t){Vc(t,"onDisconnectEvents");const e=Zf(t),n=Xd();u1(t.onDisconnect_,Te(),(i,s)=>{const o=x3(i,s,t.serverSyncTree_,e);JA(n,i,o)});let r=[];u1(n,Te(),(i,s)=>{r=r.concat(Bc(t.serverSyncTree_,i,s));const o=uv(t,i);ma(t,o)}),t.onDisconnect_=Xd(),nr(t.eventQueue_,Te(),r)}function Ij(t,e,n){let r;me(e._path)===".info"?r=g1(t.infoSyncTree_,e,n):r=g1(t.serverSyncTree_,e,n),A3(t.eventQueue_,e._path,r)}function T3(t,e,n){let r;me(e._path)===".info"?r=nf(t.infoSyncTree_,e,n):r=nf(t.serverSyncTree_,e,n),A3(t.eventQueue_,e._path,r)}function kj(t){t.persistentConnection_&&t.persistentConnection_.interrupt(xj)}function Vc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),zt(n,...e)}function x1(t,e,n,r){e&&Pa(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function I3(t,e,n){return qg(t.serverSyncTree_,e,n)||le.EMPTY_NODE}function cv(t,e=t.transactionQueueTree_){if(e||Jf(t,e),Oa(e)){const n=P3(t,e);$(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Pj(t,Uc(e),n)}else C3(e)&&Xf(e,n=>{cv(t,n)})}function Pj(t,e,n){const r=n.map(c=>c.currentWriteId),i=I3(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const d=n[c];$(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const f=fn(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Vc(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){const f=[];for(let h=0;h<n.length;h++)n[h].status=2,d=d.concat(Vi(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&f.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Jf(t,iv(t.transactionQueueTree_,e)),cv(t,t.transactionQueueTree_),nr(t.eventQueue_,e,d);for(let h=0;h<f.length;h++)Pa(f[h])}else{if(c==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{pn("transaction at "+l.toString()+" failed: "+c);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=c}ma(t,e)}},o)}function ma(t,e){const n=k3(t,e),r=Uc(n),i=P3(t,n);return Rj(t,i,r),r}function Rj(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=fn(n,l.path);let d=!1,f;if($(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,f=l.abortReason,i=i.concat(Vi(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=wj)d=!0,f="maxretry",i=i.concat(Vi(t.serverSyncTree_,l.currentWriteId,!0));else{const h=I3(t,l.path,o);l.currentInputSnapshot=h;const p=e[a].update(h.val());if(p!==void 0){qf("transaction failed: Data returned ",p,l.path);let m=_t(p);typeof p=="object"&&p!=null&&Fr(p,".priority")||(m=m.updatePriority(h.getPriority()));const w=l.currentWriteId,y=Zf(t),g=w3(m,h,y);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=g,l.currentWriteId=lv(t),o.splice(o.indexOf(w),1),i=i.concat(p3(t.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally)),i=i.concat(Vi(t.serverSyncTree_,w,!0))}else d=!0,f="nodata",i=i.concat(Vi(t.serverSyncTree_,l.currentWriteId,!0))}nr(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Jf(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Pa(r[a]);cv(t,t.transactionQueueTree_)}function k3(t,e){let n,r=t.transactionQueueTree_;for(n=me(e);n!==null&&Oa(r)===void 0;)r=iv(r,n),e=Ue(e),n=me(e);return r}function P3(t,e){const n=[];return R3(t,e,n),n.sort((r,i)=>r.order-i.order),n}function R3(t,e,n){const r=Oa(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Xf(e,i=>{R3(t,i,n)})}function Jf(t,e){const n=Oa(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,_3(e,n.length>0?n:void 0)}Xf(e,r=>{Jf(t,r)})}function uv(t,e){const n=Uc(k3(t,e)),r=iv(t.transactionQueueTree_,e);return lj(r,i=>{p0(t,i)}),p0(t,r),E3(r,i=>{p0(t,i)}),n}function p0(t,e){const n=Oa(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?($(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):($(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Vi(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?_3(e,void 0):n.length=s+1,nr(t.eventQueue_,Uc(e),i);for(let o=0;o<r.length;o++)Pa(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Dj(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):pn(`Invalid query segment '${n}' in query '${t}'`)}return e}const Aw=function(t,e){const n=Mj(t),r=n.namespace;n.domain==="firebase.com"&&pi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&pi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||zD();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new MA(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new je(n.pathString)}},Mj=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=Oj(t.substring(d,f)));const h=Dj(t.substring(Math.min(t.length,f)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),n=e.substring(m+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Et(this.snapshot.exportVal())}}class Lj{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return $(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ge(this._path)?null:jg(this._path)}get ref(){return new xi(this._repo,this._path)}get _queryIdentifier(){const e=fw(this._queryParams),n=Rg(e);return n==="{}"?"default":n}get _queryObject(){return fw(this._queryParams)}isEqual(e){if(e=rn(e),!(e instanceof Da))return!1;const n=this._repo===e._repo,r=Lg(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+NM(this._path)}}function Fj(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function fv(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Gs){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==no)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==ls)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===nt){if(e!=null&&!y1(e)||n!=null&&!y1(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if($(t.getIndex()instanceof Ug||t.getIndex()===QA,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function O3(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class xi extends Da{constructor(e,n){super(e,n,new Hg,!1)}get parent(){const e=zA(this._path);return e===null?null:new xi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class vc{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new je(e),r=w1(this.ref,e);return new vc(this._node.getChild(n),r,nt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new vc(i,w1(this.ref,r),nt)))}hasChild(e){const n=new je(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xn(t,e){return t=rn(t),t._checkNotDeleted("ref"),e!==void 0?w1(t._root,e):t._root}function w1(t,e){return t=rn(t),me(t._path)===null?mj("child","path",e):ov("child","path",e),new xi(t._repo,at(t._path,e))}function Nw(t){return b3("remove",t._path),Rs(t,null)}function Rs(t,e){t=rn(t),b3("set",t._path),Yf("set",e,t._path,!1);const n=new Mc;return Aj(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Bj(t,e){pj("update",e,t._path);const n=new Mc;return Nj(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function wu(t){t=rn(t);const e=new dv(()=>{}),n=new Hc(e);return bj(t._repo,t,n).then(r=>new vc(r,new xi(t._repo,t._path),t._queryParams.getIndex()))}class Hc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new jj("value",this,new vc(e.snapshotNode,new xi(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Lj(this,e,n):null}matches(e){return e instanceof Hc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Uj(t,e,n,r,i){const s=new dv(n,void 0),o=new Hc(s);return Ij(t._repo,t,o),()=>T3(t._repo,t,o)}function Vj(t,e,n,r){return Uj(t,"value",e)}function Hj(t,e,n){let r=null;const i=n?new dv(n):null;r=new Hc(i),T3(t._repo,t,r)}class eh{}class Wj extends eh{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Yf("endAt",this._value,e._path,!0);const n=QM(e._queryParams,this._value,this._key);if(O3(n),fv(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Da(e._repo,e._path,n,e._orderByCalled)}}class zj extends eh{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Yf("startAt",this._value,e._path,!0);const n=qM(e._queryParams,this._value,this._key);if(O3(n),fv(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Da(e._repo,e._path,n,e._orderByCalled)}}class $j extends eh{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Fj(e,"orderByChild");const n=new je(this._path);if(ge(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ug(n),i=ZM(e._queryParams,r);return fv(i),new Da(e._repo,e._path,i,!0)}}function Gj(t){return ov("orderByChild","path",t),new $j(t)}class Kj extends eh{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Yf("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Wj(this._value,this._key)._apply(new zj(this._value,this._key)._apply(e))}}function Xj(t,e){return new Kj(t,e)}function Yj(t,...e){let n=rn(t);for(const r of e)n=r._apply(n);return n}U7(xi);$7(xi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj="FIREBASE_DATABASE_EMULATOR_HOST",_1={};let Qj=!1;function Zj(t,e,n,r){t.repoInfo_=new MA(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Jj(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||pi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Aw(s,i),a=o.repoInfo,l;typeof process<"u"&&X2&&(l=X2[qj]),l?(s=`http://${l}?ns=${a.namespace}`,o=Aw(s,i),a=o.repoInfo):o.repoInfo.secure;const c=new tM(t.name,t.options,e);gj("Invalid Firebase Database URL",o),ge(o.path)||pi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=t9(a,t,c,new eM(t.name,n));return new n9(d,t)}function e9(t,e){const n=_1[e];(!n||n[t.key]!==t)&&pi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),kj(t),delete n[t.key]}function t9(t,e,n,r){let i=_1[e.name];i||(i={},_1[e.name]=i);let s=i[t.toURLString()];return s&&pi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new _j(t,Qj,n,r),i[t.toURLString()]=s,s}class n9{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Cj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xi(this._repo,Te())),this._rootInternal}_delete(){return this._rootInternal!==null&&(e9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&pi("Cannot call "+e+" on a deleted database.")}}function r9(t=kg(),e){const n=Ia(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=h5("database");r&&i9(n,...r)}return n}function i9(t,e,n,r={}){t=rn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&pi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Gu(Gu.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:p5(r.mockUserToken,t.app.options.projectId);s=new Gu(o)}Zj(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(t){FD(ka),jr(new _r("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Jj(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Zn(Y2,q2,t),Zn(Y2,q2,"esm2017")}si.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};si.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};s9();function hv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function D3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const o9=D3,M3=new fo("auth","Firebase",D3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Tg("@firebase/auth");function a9(t,...e){rf.logLevel<=Fe.WARN&&rf.warn(`Auth (${ka}): ${t}`,...e)}function Ku(t,...e){rf.logLevel<=Fe.ERROR&&rf.error(`Auth (${ka}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t,...e){throw pv(t,...e)}function Or(t,...e){return pv(t,...e)}function j3(t,e,n){const r=Object.assign(Object.assign({},o9()),{[e]:n});return new fo("auth","Firebase",r).create(e,{appName:t.name})}function Ks(t){return j3(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return M3.create(t,...e)}function ue(t,e,...n){if(!t)throw pv(e,...n)}function Qr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ku(e),new Error(e)}function gi(t,e){t||Qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function l9(){return Tw()==="http:"||Tw()==="https:"}function Tw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(l9()||g5()||"connection"in navigator)?navigator.onLine:!0}function u9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){this.shortDelay=e,this.longDelay=n,gi(n>e,"Short delay should be less than long delay!"),this.isMobile=Ng()||fA()}get(){return c9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t,e){gi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9=new Wc(3e4,6e4);function gv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ma(t,e,n,r,i={}){return F3(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ta(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return m5()||(c.referrerPolicy="no-referrer"),L3.fetch()(B3(t,t.config.apiHost,n,a),c)})}async function F3(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},d9),e);try{const i=new p9(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw _u(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw _u(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw _u(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw _u(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw j3(t,d,c);mi(t,d)}}catch(i){if(i instanceof yi)throw i;mi(t,"network-request-failed",{message:String(i)})}}async function h9(t,e,n,r,i={}){const s=await Ma(t,e,n,r,i);return"mfaPendingCredential"in s&&mi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function B3(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?mv(t.config,i):`${t.config.apiScheme}://${i}`}class p9{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Or(this.auth,"network-request-failed")),f9.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _u(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Or(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m9(t,e){return Ma(t,"POST","/v1/accounts:delete",e)}async function U3(t,e){return Ma(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function g9(t,e=!1){const n=rn(t),r=await n.getIdToken(e),i=vv(r);ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Dl(m0(i.auth_time)),issuedAtTime:Dl(m0(i.iat)),expirationTime:Dl(m0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function m0(t){return Number(t)*1e3}function vv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ku("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ud(n);return i?JSON.parse(i):(Ku("Failed to decode base64 JWT payload"),null)}catch(i){return Ku("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Iw(t){const e=vv(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yi&&v9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function v9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await yc(t,U3(n,{idToken:r}));ue(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?V3(s.providerUserInfo):[],a=w9(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new E1(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function x9(t){const e=rn(t);await sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function w9(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function V3(t){return t.map(e=>{var{providerId:n}=e,r=hv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _9(t,e){const n=await F3(t,{},async()=>{const r=Ta({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=B3(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",L3.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function C9(t,e){return Ma(t,"POST","/v2/accounts:revokeToken",gv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Iw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=Iw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await _9(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qo;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qo,this.toJSON())}_performRefresh(){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=hv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new y9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new E1(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await yc(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return g9(this,e)}reload(){return x9(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ui(this.auth.app))return Promise.reject(Ks(this.auth));const e=await this.getIdToken();return await yc(this,m9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:x,emailVerified:_,isAnonymous:C,providerData:E,stsTokenManager:A}=n;ue(x&&A,e,"internal-error");const T=qo.fromJSON(this.name,A);ue(typeof x=="string",e,"internal-error"),Ei(f,e.name),Ei(h,e.name),ue(typeof _=="boolean",e,"internal-error"),ue(typeof C=="boolean",e,"internal-error"),Ei(p,e.name),Ei(m,e.name),Ei(v,e.name),Ei(w,e.name),Ei(y,e.name),Ei(g,e.name);const k=new Zr({uid:x,auth:e,email:h,emailVerified:_,displayName:f,isAnonymous:C,photoURL:m,phoneNumber:p,tenantId:v,stsTokenManager:T,createdAt:y,lastLoginAt:g});return E&&Array.isArray(E)&&(k.providerData=E.map(O=>Object.assign({},O))),w&&(k._redirectEventId=w),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new qo;i.updateFromServerResponse(n);const s=new Zr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await sf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ue(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?V3(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new qo;a.updateFromIdToken(r);const l=new Zr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new E1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=new Map;function Jr(t){gi(t instanceof Function,"Expected a class definition");let e=kw.get(t);return e?(gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}H3.type="NONE";const Pw=H3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t,e,n){return`firebase:${t}:${e}:${n}`}class Qo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Xu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qo(Jr(Pw),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Jr(Pw);const o=Xu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=Zr._fromJSON(e,d);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Qo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Qo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(G3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(W3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(X3(e))return"Blackberry";if(Y3(e))return"Webos";if(z3(e))return"Safari";if((e.includes("chrome/")||$3(e))&&!e.includes("edge/"))return"Chrome";if(K3(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function W3(t=mn()){return/firefox\//i.test(t)}function z3(t=mn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $3(t=mn()){return/crios\//i.test(t)}function G3(t=mn()){return/iemobile/i.test(t)}function K3(t=mn()){return/android/i.test(t)}function X3(t=mn()){return/blackberry/i.test(t)}function Y3(t=mn()){return/webos/i.test(t)}function yv(t=mn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function E9(t=mn()){var e;return yv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function S9(){return v5()&&document.documentMode===10}function q3(t=mn()){return yv(t)||K3(t)||Y3(t)||X3(t)||/windows phone/i.test(t)||G3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(t,e=[]){let n;switch(t){case"Browser":n=Rw(mn());break;case"Worker":n=`${Rw(mn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ka}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A9(t,e={}){return Ma(t,"GET","/v2/passwordPolicy",gv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=6;class T9{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:N9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ow(this),this.idTokenSubscription=new Ow(this),this.beforeStateQueue=new b9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=M3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await U3(this,{idToken:e}),r=await Zr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ui(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=u9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ui(this.app))return Promise.reject(Ks(this));const n=e?rn(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ui(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ui(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await A9(this),n=new T9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await C9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jr(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[Jr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&a9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xv(t){return rn(t)}class Ow{constructor(e){this.auth=e,this.observer=null,this.addObserver=A5(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k9(t){wv=t}function P9(t){return wv.loadJS(t)}function R9(){return wv.gapiScript}function O9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(t,e){const n=Ia(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Hd(s,e??{}))return i;mi(i,"already-initialized")}return n.initialize({options:e})}function M9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function j9(t,e,n){const r=xv(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Z3(e),{host:o,port:a}=L9(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),F9()}function Z3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function L9(t){const e=Z3(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Dw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Dw(o)}}}function Dw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function F9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,n){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(t,e){return h9(t,"POST","/v1/accounts:signInWithIdp",gv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9="http://localhost";class so extends J3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=hv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new so(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Zo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Zo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zo(e,n)}buildRequest(){const e={requestUri:B9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ta(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends eN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends zc{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends zc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return so._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Mi.credential(n,r)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends zc{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.GITHUB_SIGN_IN_METHOD="github.com";ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends zc{constructor(){super("twitter.com")}static credential(e,n){return so._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Li.credential(n,r)}catch{return null}}}Li.TWITTER_SIGN_IN_METHOD="twitter.com";Li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Zr._fromIdTokenResponse(e,r,i),o=Mw(r);return new ga({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Mw(r);return new ga({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Mw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of extends yi{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,of.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new of(e,n,r,i)}}function tN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?of._fromErrorAndOperation(t,s,e,r):s})}async function U9(t,e,n=!1){const r=await yc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ga._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V9(t,e,n=!1){const{auth:r}=t;if(Ui(r.app))return Promise.reject(Ks(r));const i="reauthenticate";try{const s=await yc(t,tN(r,i,e,t),n);ue(s.idToken,r,"internal-error");const o=vv(s.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),ga._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&mi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H9(t,e,n=!1){if(Ui(t.app))return Promise.reject(Ks(t));const r="signIn",i=await tN(t,r,e),s=await ga._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function W9(t,e,n,r){return rn(t).onIdTokenChanged(e,n,r)}function z9(t,e,n){return rn(t).beforeAuthStateChanged(e,n)}const af="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(af,"1"),this.storage.removeItem(af),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=1e3,G9=10;class rN extends nN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=q3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);S9()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,G9):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},$9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rN.type="LOCAL";const K9=rN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN extends nN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iN.type="SESSION";const sN=iN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new th(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await X9(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}th.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=_v("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const h=f;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(){return window}function q9(t){Dr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}async function Q9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Z9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function J9(){return oN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="firebaseLocalStorageDb",eL=1,lf="firebaseLocalStorage",lN="fbase_key";class $c{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nh(t,e){return t.transaction([lf],e?"readwrite":"readonly").objectStore(lf)}function tL(){const t=indexedDB.deleteDatabase(aN);return new $c(t).toPromise()}function S1(){const t=indexedDB.open(aN,eL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(lf,{keyPath:lN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(lf)?e(r):(r.close(),await tL(),e(await S1()))})})}async function jw(t,e,n){const r=nh(t,!0).put({[lN]:e,value:n});return new $c(r).toPromise()}async function nL(t,e){const n=nh(t,!1).get(e),r=await new $c(n).toPromise();return r===void 0?null:r.value}function Lw(t,e){const n=nh(t,!0).delete(e);return new $c(n).toPromise()}const rL=800,iL=3;class cN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await S1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=th._getInstance(J9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Q9(),!this.activeServiceWorker)return;this.sender=new Y9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Z9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await S1();return await jw(e,af,"1"),await Lw(e,af),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Lw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=nh(i,!1).getAll();return new $c(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cN.type="LOCAL";const sL=cN;new Wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t,e){return e?Jr(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv extends J3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aL(t){return H9(t.auth,new Cv(t),t.bypassAuthState)}function lL(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),V9(n,new Cv(t),t.bypassAuthState)}async function cL(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),U9(n,new Cv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aL;case"linkViaPopup":case"linkViaRedirect":return cL;case"reauthViaPopup":case"reauthViaRedirect":return lL;default:mi(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=new Wc(2e3,1e4);class Bo extends uN{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Bo.currentPopupAction&&Bo.currentPopupAction.cancel(),Bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){gi(this.filter.length===1,"Popup operations only handle one event");const e=_v();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uL.get())};e()}}Bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL="pendingRedirect",Yu=new Map;class fL extends uN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yu.get(this.auth._key());if(!e){try{const r=await hL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yu.set(this.auth._key(),e)}return this.bypassAuthState||Yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hL(t,e){const n=gL(e),r=mL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function pL(t,e){Yu.set(t._key(),e)}function mL(t){return Jr(t._redirectPersistence)}function gL(t){return Xu(dL,t.config.apiKey,t.name)}async function vL(t,e,n=!1){if(Ui(t.app))return Promise.reject(Ks(t));const r=xv(t),i=oL(r,e),o=await new fL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=10*60*1e3;class xL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dN(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Or(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fw(e))}saveEventToCache(e){this.cachedEventUids.add(Fw(e)),this.lastProcessedEventTime=Date.now()}}function Fw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(t,e={}){return Ma(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EL=/^https?/;async function SL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _L(t);for(const n of e)try{if(bL(n))return}catch{}mi(t,"unauthorized-domain")}function bL(t){const e=C1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!EL.test(n))return!1;if(CL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=new Wc(3e4,6e4);function Bw(){const t=Dr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NL(t){return new Promise((e,n)=>{var r,i,s;function o(){Bw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bw(),n(Or(t,"network-request-failed"))},timeout:AL.get()})}if(!((i=(r=Dr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Dr().gapi)===null||s===void 0)&&s.load)o();else{const a=O9("iframefcb");return Dr()[a]=()=>{gapi.load?o():n(Or(t,"network-request-failed"))},P9(`${R9()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw qu=null,e})}let qu=null;function TL(t){return qu=qu||NL(t),qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=new Wc(5e3,15e3),kL="__/auth/iframe",PL="emulator/auth/iframe",RL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DL(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mv(e,PL):`https://${t.config.authDomain}/${kL}`,r={apiKey:e.apiKey,appName:t.name,v:ka},i=OL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ta(r).slice(1)}`}async function ML(t){const e=await TL(t),n=Dr().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:DL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Or(t,"network-request-failed"),a=Dr().setTimeout(()=>{s(o)},IL.get());function l(){Dr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LL=500,FL=600,BL="_blank",UL="http://localhost";class Uw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VL(t,e,n,r=LL,i=FL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},jL),{width:r.toString(),height:i.toString(),top:s,left:o}),c=mn().toLowerCase();n&&(a=$3(c)?BL:n),W3(c)&&(e=e||UL,l.scrollbars="yes");const d=Object.entries(l).reduce((h,[p,m])=>`${h}${p}=${m},`,"");if(E9(c)&&a!=="_self")return HL(e||"",a),new Uw(null);const f=window.open(e||"",a,d);ue(f,t,"popup-blocked");try{f.focus()}catch{}return new Uw(f)}function HL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL="__/auth/handler",zL="emulator/auth/handler",$L=encodeURIComponent("fac");async function Vw(t,e,n,r,i,s){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ka,eventId:i};if(e instanceof eN){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",t1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof zc){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${$L}=${encodeURIComponent(l)}`:"";return`${GL(t)}?${Ta(a).slice(1)}${c}`}function GL({config:t}){return t.emulator?mv(t,zL):`https://${t.authDomain}/${WL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="webStorageSupport";class KL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sN,this._completeRedirectFn=vL,this._overrideRedirectResult=pL}async _openPopup(e,n,r,i){var s;gi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Vw(e,n,r,C1(),i);return VL(e,o,_v())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Vw(e,n,r,C1(),i);return q9(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(gi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ML(e),r=new xL(e);return n.register("authEvent",i=>(ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(g0,{type:g0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[g0];o!==void 0&&n(!!o),mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return q3()||z3()||yv()}}const XL=KL;var Hw="@firebase/auth",Ww="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QL(t){jr(new _r("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q3(t)},c=new I9(r,i,s,l);return M9(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jr(new _r("auth-internal",e=>{const n=xv(e.getProvider("auth").getImmediate());return(r=>new YL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(Hw,Ww,qL(t)),Zn(Hw,Ww,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=5*60,JL=dA("authIdTokenMaxAge")||ZL;let zw=null;const eF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JL)return;const i=n==null?void 0:n.token;zw!==i&&(zw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tF(t=kg()){const e=Ia(t,"auth");if(e.isInitialized())return e.getImmediate();const n=D9(t,{popupRedirectResolver:XL,persistence:[sL,K9,sN]}),r=dA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=eF(s.toString());z9(n,o,()=>o(n.currentUser)),W9(n,a=>o(a))}}const i=cA("auth");return i&&j9(n,`http://${i}`),n}function nF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}k9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Or("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",nF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QL("Browser");const fN="@firebase/installations",Ev="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=1e4,pN=`w:${Ev}`,mN="FIS_v2",rF="https://firebaseinstallations.googleapis.com/v1",iF=60*60*1e3,sF="installations",oF="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},oo=new fo(sF,oF,aF);function gN(t){return t instanceof yi&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN({projectId:t}){return`${rF}/projects/${t}/installations`}function yN(t){return{token:t.token,requestStatus:2,expiresIn:cF(t.expiresIn),creationTime:Date.now()}}async function xN(t,e){const r=(await e.json()).error;return oo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function wN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function lF(t,{refreshToken:e}){const n=wN(t);return n.append("Authorization",uF(e)),n}async function _N(t){const e=await t();return e.status>=500&&e.status<600?t():e}function cF(t){return Number(t.replace("s","000"))}function uF(t){return`${mN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dF({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=vN(t),i=wN(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:mN,appId:t.appId,sdkVersion:pN},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await _N(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:yN(c.authToken)}}else throw await xN("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=/^[cdef][\w-]{21}$/,b1="";function pF(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=mF(t);return hF.test(n)?n:b1}catch{return b1}}function mF(t){return fF(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new Map;function SN(t,e){const n=rh(t);bN(n,e),gF(n,e)}function bN(t,e){const n=EN.get(t);if(n)for(const r of n)r(e)}function gF(t,e){const n=vF();n&&n.postMessage({key:t,fid:e}),yF()}let Us=null;function vF(){return!Us&&"BroadcastChannel"in self&&(Us=new BroadcastChannel("[Firebase] FID Change"),Us.onmessage=t=>{bN(t.data.key,t.data.fid)}),Us}function yF(){EN.size===0&&Us&&(Us.close(),Us=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF="firebase-installations-database",wF=1,ao="firebase-installations-store";let v0=null;function Sv(){return v0||(v0=Hf(xF,wF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ao)}}})),v0}async function cf(t,e){const n=rh(t),i=(await Sv()).transaction(ao,"readwrite"),s=i.objectStore(ao),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&SN(t,e.fid),e}async function AN(t){const e=rh(t),r=(await Sv()).transaction(ao,"readwrite");await r.objectStore(ao).delete(e),await r.done}async function ih(t,e){const n=rh(t),i=(await Sv()).transaction(ao,"readwrite"),s=i.objectStore(ao),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&SN(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bv(t){let e;const n=await ih(t.appConfig,r=>{const i=_F(r),s=CF(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===b1?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function _F(t){const e=t||{fid:pF(),registrationStatus:0};return NN(e)}function CF(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(oo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=EF(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:SF(t)}:{installationEntry:e}}async function EF(t,e){try{const n=await dF(t,e);return cf(t.appConfig,n)}catch(n){throw gN(n)&&n.customData.serverCode===409?await AN(t.appConfig):await cf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function SF(t){let e=await $w(t.appConfig);for(;e.registrationStatus===1;)await CN(100),e=await $w(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await bv(t);return r||n}return e}function $w(t){return ih(t,e=>{if(!e)throw oo.create("installation-not-found");return NN(e)})}function NN(t){return bF(t)?{fid:t.fid,registrationStatus:0}:t}function bF(t){return t.registrationStatus===1&&t.registrationTime+hN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AF({appConfig:t,heartbeatServiceProvider:e},n){const r=NF(t,n),i=lF(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:pN,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await _N(()=>fetch(r,a));if(l.ok){const c=await l.json();return yN(c)}else throw await xN("Generate Auth Token",l)}function NF(t,{fid:e}){return`${vN(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Av(t,e=!1){let n;const r=await ih(t.appConfig,s=>{if(!TN(s))throw oo.create("not-registered");const o=s.authToken;if(!e&&kF(o))return s;if(o.requestStatus===1)return n=TF(t,e),s;{if(!navigator.onLine)throw oo.create("app-offline");const a=RF(s);return n=IF(t,a),a}});return n?await n:r.authToken}async function TF(t,e){let n=await Gw(t.appConfig);for(;n.authToken.requestStatus===1;)await CN(100),n=await Gw(t.appConfig);const r=n.authToken;return r.requestStatus===0?Av(t,e):r}function Gw(t){return ih(t,e=>{if(!TN(e))throw oo.create("not-registered");const n=e.authToken;return OF(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function IF(t,e){try{const n=await AF(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await cf(t.appConfig,r),n}catch(n){if(gN(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await AN(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await cf(t.appConfig,r)}throw n}}function TN(t){return t!==void 0&&t.registrationStatus===2}function kF(t){return t.requestStatus===2&&!PF(t)}function PF(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+iF}function RF(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function OF(t){return t.requestStatus===1&&t.requestTime+hN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(t){const e=t,{installationEntry:n,registrationPromise:r}=await bv(e);return r?r.catch(console.error):Av(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MF(t,e=!1){const n=t;return await jF(n),(await Av(n,e)).token}async function jF(t){const{registrationPromise:e}=await bv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){if(!t||!t.options)throw y0("App Configuration");if(!t.name)throw y0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw y0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function y0(t){return oo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="installations",FF="installations-internal",BF=t=>{const e=t.getProvider("app").getImmediate(),n=LF(e),r=Ia(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},UF=t=>{const e=t.getProvider("app").getImmediate(),n=Ia(e,IN).getImmediate();return{getId:()=>DF(n),getToken:i=>MF(n,i)}};function VF(){jr(new _r(IN,BF,"PUBLIC")),jr(new _r(FF,UF,"PRIVATE"))}VF();Zn(fN,Ev);Zn(fN,Ev,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF="/firebase-messaging-sw.js",WF="/firebase-cloud-messaging-push-scope",kN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zF="https://fcmregistrations.googleapis.com/v1",PN="google.c.a.c_id",$F="google.c.a.c_l",GF="google.c.a.ts",KF="google.c.a.e";var Kw;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Kw||(Kw={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var xc;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(xc||(xc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function XF(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="fcm_token_details_db",YF=5,Xw="fcm_token_object_Store";async function qF(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(x0))return null;let e=null;return(await Hf(x0,YF,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(Xw))return;const l=o.objectStore(Xw),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(i===2){const d=c;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Gr(d.vapidKey)}}}else if(i===3){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Gr(d.auth),p256dh:Gr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Gr(d.vapidKey)}}}else if(i===4){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Gr(d.auth),p256dh:Gr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Gr(d.vapidKey)}}}}}})).close(),await s0(x0),await s0("fcm_vapid_details_db"),await s0("undefined"),QF(e)?e:null}function QF(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="firebase-messaging-database",JF=1,wc="firebase-messaging-store";let w0=null;function RN(){return w0||(w0=Hf(ZF,JF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wc)}}})),w0}async function eB(t){const e=ON(t),r=await(await RN()).transaction(wc).objectStore(wc).get(e);if(r)return r;{const i=await qF(t.appConfig.senderId);if(i)return await Nv(t,i),i}}async function Nv(t,e){const n=ON(t),i=(await RN()).transaction(wc,"readwrite");return await i.objectStore(wc).put(e,n),await i.done,e}function ON({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},tn=new fo("messaging","Messaging",tB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nB(t,e){const n=await Iv(t),r=DN(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(Tv(t.appConfig),i)).json()}catch(o){throw tn.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw tn.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw tn.create("token-subscribe-no-token");return s.token}async function rB(t,e){const n=await Iv(t),r=DN(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${Tv(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw tn.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw tn.create("token-update-failed",{errorInfo:o})}if(!s.token)throw tn.create("token-update-no-token");return s.token}async function iB(t,e){const r={method:"DELETE",headers:await Iv(t)};try{const s=await(await fetch(`${Tv(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw tn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw tn.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Tv({projectId:t}){return`${zF}/projects/${t}/registrations`}async function Iv({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function DN({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==kN&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB=7*24*60*60*1e3;async function oB(t){const e=await lB(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Gr(e.getKey("auth")),p256dh:Gr(e.getKey("p256dh"))},r=await eB(t.firebaseDependencies);if(r){if(cB(r.subscriptionOptions,n))return Date.now()>=r.createTime+sB?aB(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await iB(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Yw(t.firebaseDependencies,n)}else return Yw(t.firebaseDependencies,n)}async function aB(t,e){try{const n=await rB(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Nv(t.firebaseDependencies,r),n}catch(n){throw n}}async function Yw(t,e){const r={token:await nB(t,e),createTime:Date.now(),subscriptionOptions:e};return await Nv(t,r),r.token}async function lB(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:XF(e)})}function cB(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return uB(e,t),dB(e,t),fB(e,t),e}function uB(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function dB(t,e){e.data&&(t.data=e.data)}function fB(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(t){return typeof t=="object"&&!!t&&PN in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pB(t){if(!t||!t.options)throw _0("App Configuration Object");if(!t.name)throw _0("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw _0(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function _0(t){return tn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=pB(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gB(t){try{t.swRegistration=await navigator.serviceWorker.register(HF,{scope:WF}),t.swRegistration.update().catch(()=>{})}catch(e){throw tn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vB(t,e){if(!e&&!t.swRegistration&&await gB(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw tn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yB(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=kN)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t,e){if(!navigator)throw tn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw tn.create("permission-blocked");return await yB(t,e==null?void 0:e.vapidKey),await vB(t,e==null?void 0:e.serviceWorkerRegistration),oB(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xB(t,e,n){const r=wB(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[PN],message_name:n[$F],message_time:n[GF],message_device_time:Math.floor(Date.now()/1e3)})}function wB(t){switch(t){case xc.NOTIFICATION_CLICKED:return"notification_open";case xc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _B(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===xc.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(qw(n)):t.onMessageHandler.next(qw(n)));const r=n.data;hB(r)&&r[KF]==="1"&&await xB(t,n.messageType,r)}const Qw="@firebase/messaging",Zw="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=t=>{const e=new mB(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>_B(e,n)),e},EB=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>MN(e,r)}};function SB(){jr(new _r("messaging",CB,"PUBLIC")),jr(new _r("messaging-internal",EB,"PRIVATE")),Zn(Qw,Zw),Zn(Qw,Zw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(){try{await pA()}catch{return!1}return typeof window<"u"&&hA()&&x5()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t,e){if(!navigator)throw tn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(t=kg()){return jN().then(e=>{if(!e)throw tn.create("unsupported-browser")},e=>{throw tn.create("indexed-db-unsupported")}),Ia(rn(t),"messaging").getImmediate()}async function NB(t,e){return t=rn(t),MN(t,e)}function TB(t,e){return t=rn(t),bB(t,e)}SB();const IB={apiKey:"AIzaSyBr3kBbnZ35l7Tp7eoyzhHFJiaIab2Zopg",authDomain:"cricket-team-manager-5ef78.firebaseapp.com",databaseURL:"https://cricket-team-manager-5ef78-default-rtdb.asia-southeast1.firebasedatabase.app/",projectId:"cricket-team-manager-5ef78",storageBucket:"cricket-team-manager-5ef78.firebasestorage.app",messagingSenderId:"590004782129",appId:"1:590004782129:web:3f984d423998a1532b4110"},kv=yA(IB),ln=r9(kv);tF(kv);let Uo=null;typeof window<"u"&&jN().then(t=>{t&&(Uo=AB(kv))});const kB=Object.freeze(Object.defineProperty({__proto__:null,database:ln,get messaging(){return Uo}},Symbol.toStringTag,{value:"Module"}));var Gc={},PB=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},LN={},Hn={};let Pv;const RB=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Hn.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Hn.getSymbolTotalCodewords=function(e){return RB[e]};Hn.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Hn.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Pv=e};Hn.isKanjiModeEnabled=function(){return typeof Pv<"u"};Hn.toSJIS=function(e){return Pv(e)};var sh={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}})(sh);function FN(){this.buffer=[],this.length=0}FN.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var OB=FN;function Kc(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Kc.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)};Kc.prototype.get=function(t,e){return this.data[t*this.size+e]};Kc.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Kc.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var DB=Kc,BN={};(function(t){const e=Hn.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let l=1;l<i-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const i=[],s=t.getRowColCoords(r),o=s.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||i.push([s[a],s[l]]);return i}})(BN);var UN={};const MB=Hn.getSymbolSize,Jw=7;UN.getPositions=function(e){const n=MB(e);return[[0,0],[n-Jw,0],[0,n-Jw]]};var VN={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,l=0,c=null,d=null;for(let f=0;f<s;f++){a=l=0,c=d=null;for(let h=0;h<s;h++){let p=i.get(f,h);p===c?a++:(a>=5&&(o+=e.N1+(a-5)),c=p,a=1),p=i.get(h,f),p===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=p,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let l=0;l<s-1;l++){const c=i.get(a,l)+i.get(a,l+1)+i.get(a+1,l)+i.get(a+1,l+1);(c===4||c===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,l=0;for(let c=0;c<s;c++){a=l=0;for(let d=0;d<s;d++)a=a<<1&2047|i.get(c,d),d>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|i.get(d,c),d>=10&&(l===1488||l===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let l=0;l<o;l++)s+=i.data[l];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function n(r,i,s){switch(r){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)s.isReserved(l,a)||s.xor(l,a,n(i,l,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,l=1/0;for(let c=0;c<o;c++){s(c),t.applyMask(c,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(c,i),d<l&&(l=d,a=c)}return a}})(VN);var oh={};const Hi=sh,Cu=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Eu=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];oh.getBlocksCount=function(e,n){switch(n){case Hi.L:return Cu[(e-1)*4+0];case Hi.M:return Cu[(e-1)*4+1];case Hi.Q:return Cu[(e-1)*4+2];case Hi.H:return Cu[(e-1)*4+3];default:return}};oh.getTotalCodewordsCount=function(e,n){switch(n){case Hi.L:return Eu[(e-1)*4+0];case Hi.M:return Eu[(e-1)*4+1];case Hi.Q:return Eu[(e-1)*4+2];case Hi.H:return Eu[(e-1)*4+3];default:return}};var HN={},ah={};const Ml=new Uint8Array(512),uf=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)Ml[n]=e,uf[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)Ml[n]=Ml[n-255]})();ah.log=function(e){if(e<1)throw new Error("log("+e+")");return uf[e]};ah.exp=function(e){return Ml[e]};ah.mul=function(e,n){return e===0||n===0?0:Ml[uf[e]+uf[n]]};(function(t){const e=ah;t.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(r[o],i[a]);return s},t.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let l=0;l<i.length;l++)s[l]^=e.mul(i[l],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(HN);const WN=HN;function Rv(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Rv.prototype.initialize=function(e){this.degree=e,this.genPoly=WN.generateECPolynomial(this.degree)};Rv.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=WN.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(r,i),s}return r};var jB=Rv,zN={},vs={},Ov={};Ov.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Br={};const $N="[0-9]+",LB="[A-Z $%*+\\-./:]+";let _c="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";_c=_c.replace(/u/g,"\\u");const FB="(?:(?![A-Z0-9 $%*+\\-./:]|"+_c+`)(?:.|[\r
]))+`;Br.KANJI=new RegExp(_c,"g");Br.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Br.BYTE=new RegExp(FB,"g");Br.NUMERIC=new RegExp($N,"g");Br.ALPHANUMERIC=new RegExp(LB,"g");const BB=new RegExp("^"+_c+"$"),UB=new RegExp("^"+$N+"$"),VB=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Br.testKanji=function(e){return BB.test(e)};Br.testNumeric=function(e){return UB.test(e)};Br.testAlphanumeric=function(e){return VB.test(e)};(function(t){const e=Ov,n=Br;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return r(s)}catch{return o}}})(vs);(function(t){const e=Hn,n=oh,r=sh,i=vs,s=Ov,o=7973,a=e.getBCHDigit(o);function l(h,p,m){for(let v=1;v<=40;v++)if(p<=t.getCapacity(v,m,h))return v}function c(h,p){return i.getCharCountIndicator(h,p)+4}function d(h,p){let m=0;return h.forEach(function(v){const w=c(v.mode,p);m+=w+v.getBitsLength()}),m}function f(h,p){for(let m=1;m<=40;m++)if(d(h,m)<=t.getCapacity(m,p,i.MIXED))return m}t.from=function(p,m){return s.isValid(p)?parseInt(p,10):m},t.getCapacity=function(p,m,v){if(!s.isValid(p))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=i.BYTE);const w=e.getSymbolTotalCodewords(p),y=n.getTotalCodewordsCount(p,m),g=(w-y)*8;if(v===i.MIXED)return g;const x=g-c(v,p);switch(v){case i.NUMERIC:return Math.floor(x/10*3);case i.ALPHANUMERIC:return Math.floor(x/11*2);case i.KANJI:return Math.floor(x/13);case i.BYTE:default:return Math.floor(x/8)}},t.getBestVersionForData=function(p,m){let v;const w=r.from(m,r.M);if(Array.isArray(p)){if(p.length>1)return f(p,w);if(p.length===0)return 1;v=p[0]}else v=p;return l(v.mode,v.getLength(),w)},t.getEncodedBits=function(p){if(!s.isValid(p)||p<7)throw new Error("Invalid QR Code version");let m=p<<12;for(;e.getBCHDigit(m)-a>=0;)m^=o<<e.getBCHDigit(m)-a;return p<<12|m}})(zN);var GN={};const A1=Hn,KN=1335,HB=21522,e_=A1.getBCHDigit(KN);GN.getEncodedBits=function(e,n){const r=e.bit<<3|n;let i=r<<10;for(;A1.getBCHDigit(i)-e_>=0;)i^=KN<<A1.getBCHDigit(i)-e_;return(r<<10|i)^HB};var XN={};const WB=vs;function va(t){this.mode=WB.NUMERIC,this.data=t.toString()}va.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};va.prototype.getLength=function(){return this.data.length};va.prototype.getBitsLength=function(){return va.getBitsLength(this.data.length)};va.prototype.write=function(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),e.put(i,10);const s=this.data.length-n;s>0&&(r=this.data.substr(n),i=parseInt(r,10),e.put(i,s*3+1))};var zB=va;const $B=vs,C0=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ya(t){this.mode=$B.ALPHANUMERIC,this.data=t}ya.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};ya.prototype.getLength=function(){return this.data.length};ya.prototype.getBitsLength=function(){return ya.getBitsLength(this.data.length)};ya.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=C0.indexOf(this.data[n])*45;r+=C0.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(C0.indexOf(this.data[n]),6)};var GB=ya;const KB=vs;function xa(t){this.mode=KB.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}xa.getBitsLength=function(e){return e*8};xa.prototype.getLength=function(){return this.data.length};xa.prototype.getBitsLength=function(){return xa.getBitsLength(this.data.length)};xa.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var XB=xa;const YB=vs,qB=Hn;function wa(t){this.mode=YB.KANJI,this.data=t}wa.getBitsLength=function(e){return e*13};wa.prototype.getLength=function(){return this.data.length};wa.prototype.getBitsLength=function(){return wa.getBitsLength(this.data.length)};wa.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=qB.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var QB=wa,YN={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,i){var s={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var l,c,d,f,h,p,m,v,w;!a.empty();){l=a.pop(),c=l.value,f=l.cost,h=n[c]||{};for(d in h)h.hasOwnProperty(d)&&(p=h[d],m=f+p,v=o[d],w=typeof o[d]>"u",(w||v>m)&&(o[d]=m,a.push(d,m),s[d]=c))}if(typeof i<"u"&&typeof o[i]>"u"){var y=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(y)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],s=r;s;)i.push(s),n[s],s=n[s];return i.reverse(),i},find_path:function(n,r,i){var s=e.single_source_shortest_paths(n,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,i={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(YN);var ZB=YN.exports;(function(t){const e=vs,n=zB,r=GB,i=XB,s=QB,o=Br,a=Hn,l=ZB;function c(y){return unescape(encodeURIComponent(y)).length}function d(y,g,x){const _=[];let C;for(;(C=y.exec(x))!==null;)_.push({data:C[0],index:C.index,mode:g,length:C[0].length});return _}function f(y){const g=d(o.NUMERIC,e.NUMERIC,y),x=d(o.ALPHANUMERIC,e.ALPHANUMERIC,y);let _,C;return a.isKanjiModeEnabled()?(_=d(o.BYTE,e.BYTE,y),C=d(o.KANJI,e.KANJI,y)):(_=d(o.BYTE_KANJI,e.BYTE,y),C=[]),g.concat(x,_,C).sort(function(A,T){return A.index-T.index}).map(function(A){return{data:A.data,mode:A.mode,length:A.length}})}function h(y,g){switch(g){case e.NUMERIC:return n.getBitsLength(y);case e.ALPHANUMERIC:return r.getBitsLength(y);case e.KANJI:return s.getBitsLength(y);case e.BYTE:return i.getBitsLength(y)}}function p(y){return y.reduce(function(g,x){const _=g.length-1>=0?g[g.length-1]:null;return _&&_.mode===x.mode?(g[g.length-1].data+=x.data,g):(g.push(x),g)},[])}function m(y){const g=[];for(let x=0;x<y.length;x++){const _=y[x];switch(_.mode){case e.NUMERIC:g.push([_,{data:_.data,mode:e.ALPHANUMERIC,length:_.length},{data:_.data,mode:e.BYTE,length:_.length}]);break;case e.ALPHANUMERIC:g.push([_,{data:_.data,mode:e.BYTE,length:_.length}]);break;case e.KANJI:g.push([_,{data:_.data,mode:e.BYTE,length:c(_.data)}]);break;case e.BYTE:g.push([{data:_.data,mode:e.BYTE,length:c(_.data)}])}}return g}function v(y,g){const x={},_={start:{}};let C=["start"];for(let E=0;E<y.length;E++){const A=y[E],T=[];for(let k=0;k<A.length;k++){const O=A[k],q=""+E+k;T.push(q),x[q]={node:O,lastCount:0},_[q]={};for(let G=0;G<C.length;G++){const D=C[G];x[D]&&x[D].node.mode===O.mode?(_[D][q]=h(x[D].lastCount+O.length,O.mode)-h(x[D].lastCount,O.mode),x[D].lastCount+=O.length):(x[D]&&(x[D].lastCount=O.length),_[D][q]=h(O.length,O.mode)+4+e.getCharCountIndicator(O.mode,g))}}C=T}for(let E=0;E<C.length;E++)_[C[E]].end=0;return{map:_,table:x}}function w(y,g){let x;const _=e.getBestModeForData(y);if(x=e.from(g,_),x!==e.BYTE&&x.bit<_.bit)throw new Error('"'+y+'" cannot be encoded with mode '+e.toString(x)+`.
 Suggested mode is: `+e.toString(_));switch(x===e.KANJI&&!a.isKanjiModeEnabled()&&(x=e.BYTE),x){case e.NUMERIC:return new n(y);case e.ALPHANUMERIC:return new r(y);case e.KANJI:return new s(y);case e.BYTE:return new i(y)}}t.fromArray=function(g){return g.reduce(function(x,_){return typeof _=="string"?x.push(w(_,null)):_.data&&x.push(w(_.data,_.mode)),x},[])},t.fromString=function(g,x){const _=f(g,a.isKanjiModeEnabled()),C=m(_),E=v(C,x),A=l.find_path(E.map,"start","end"),T=[];for(let k=1;k<A.length-1;k++)T.push(E.table[A[k]].node);return t.fromArray(p(T))},t.rawSplit=function(g){return t.fromArray(f(g,a.isKanjiModeEnabled()))}})(XN);const lh=Hn,E0=sh,JB=OB,eU=DB,tU=BN,nU=UN,N1=VN,T1=oh,rU=jB,df=zN,iU=GN,sU=vs,S0=XN;function oU(t,e){const n=t.size,r=nU.getPositions(e);for(let i=0;i<r.length;i++){const s=r[i][0],o=r[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||n<=s+a))for(let l=-1;l<=7;l++)o+l<=-1||n<=o+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?t.set(s+a,o+l,!0,!0):t.set(s+a,o+l,!1,!0))}}function aU(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function lU(t,e){const n=tU.getPositions(e);for(let r=0;r<n.length;r++){const i=n[r][0],s=n[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function cU(t,e){const n=t.size,r=df.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+n-8-3,o=(r>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function b0(t,e,n){const r=t.size,i=iU.getEncodedBits(e,n);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(r-15+s,8,o,!0),s<8?t.set(8,r-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(r-8,8,1,!0)}function uU(t,e){const n=t.size;let r=-1,i=n-1,s=7,o=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!t.isReserved(i,a-l)){let c=!1;o<e.length&&(c=(e[o]>>>s&1)===1),t.set(i,a-l,c),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function dU(t,e,n){const r=new JB;n.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),sU.getCharCountIndicator(l.mode,t)),l.write(r)});const i=lh.getSymbolTotalCodewords(t),s=T1.getTotalCodewordsCount(t,e),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let l=0;l<a;l++)r.put(l%2?17:236,8);return fU(r,t,e)}function fU(t,e,n){const r=lh.getSymbolTotalCodewords(e),i=T1.getTotalCodewordsCount(e,n),s=r-i,o=T1.getBlocksCount(e,n),a=r%o,l=o-a,c=Math.floor(r/o),d=Math.floor(s/o),f=d+1,h=c-d,p=new rU(h);let m=0;const v=new Array(o),w=new Array(o);let y=0;const g=new Uint8Array(t.buffer);for(let A=0;A<o;A++){const T=A<l?d:f;v[A]=g.slice(m,m+T),w[A]=p.encode(v[A]),m+=T,y=Math.max(y,T)}const x=new Uint8Array(r);let _=0,C,E;for(C=0;C<y;C++)for(E=0;E<o;E++)C<v[E].length&&(x[_++]=v[E][C]);for(C=0;C<h;C++)for(E=0;E<o;E++)x[_++]=w[E][C];return x}function hU(t,e,n,r){let i;if(Array.isArray(t))i=S0.fromArray(t);else if(typeof t=="string"){let c=e;if(!c){const d=S0.rawSplit(t);c=df.getBestVersionForData(d,n)}i=S0.fromString(t,c||40)}else throw new Error("Invalid data");const s=df.getBestVersionForData(i,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=dU(e,n,i),a=lh.getSymbolSize(e),l=new eU(a);return oU(l,e),aU(l),lU(l,e),b0(l,n,0),e>=7&&cU(l,e),uU(l,o),isNaN(r)&&(r=N1.getBestMask(l,b0.bind(null,l,n))),N1.applyMask(r,l),b0(l,n,r),{modules:l,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}LN.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=E0.M,i,s;return typeof n<"u"&&(r=E0.from(n.errorCorrectionLevel,E0.M),i=df.from(n.version),s=N1.from(n.maskPattern),n.toSJISFunc&&lh.setToSJISFunction(n.toSJISFunc)),hU(e,i,r,s)};var qN={},Dv={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const s=t.getScale(r,i);return Math.floor((r+i.margin*2)*s)},t.qrToImageData=function(r,i,s){const o=i.modules.size,a=i.modules.data,l=t.getScale(o,s),c=Math.floor((o+s.margin*2)*l),d=s.margin*l,f=[s.color.light,s.color.dark];for(let h=0;h<c;h++)for(let p=0;p<c;p++){let m=(h*c+p)*4,v=s.color.light;if(h>=d&&p>=d&&h<c-d&&p<c-d){const w=Math.floor((h-d)/l),y=Math.floor((p-d)/l);v=f[a[w*o+y]?1:0]}r[m++]=v.r,r[m++]=v.g,r[m++]=v.b,r[m]=v.a}}})(Dv);(function(t){const e=Dv;function n(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let l=a,c=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(c=r()),l=e.getOptions(l);const d=e.getImageWidth(s.modules.size,l),f=c.getContext("2d"),h=f.createImageData(d,d);return e.qrToImageData(h.data,s,l),n(f,c,d),f.putImageData(h,0,0),c},t.renderToDataURL=function(s,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const c=t.render(s,o,l),d=l.type||"image/png",f=l.rendererOpts||{};return c.toDataURL(d,f.quality)}})(qN);var QN={};const pU=Dv;function t_(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function A0(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function mU(t,e,n){let r="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const l=Math.floor(a%e),c=Math.floor(a/e);!l&&!s&&(s=!0),t[a]?(o++,a>0&&l>0&&t[a-1]||(r+=s?A0("M",l+n,.5+c+n):A0("m",i,0),i=0,s=!1),l+1<e&&t[a+1]||(r+=A0("h",o),o=0)):i++}return r}QN.render=function(e,n,r){const i=pU.getOptions(n),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,l=i.color.light.a?"<path "+t_(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",c="<path "+t_(i.color.dark,"stroke")+' d="'+mU(o,s,i.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+l+c+`</svg>
`;return typeof r=="function"&&r(null,h),h};const gU=PB,I1=LN,ZN=qN,vU=QN;function Mv(t,e,n,r,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!gU())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(l,c){try{const d=I1.create(n,r);l(t(d,e,r))}catch(d){c(d)}})}try{const l=I1.create(n,r);i(null,t(l,e,r))}catch(l){i(l)}}Gc.create=I1.create;Gc.toCanvas=Mv.bind(null,ZN.render);Gc.toDataURL=Mv.bind(null,ZN.renderToDataURL);Gc.toString=Mv.bind(null,function(t,e,n){return vU.render(t,n)});class Er{static generateShortCode(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let r=0;r<6;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}static generateTeamId(){return Math.floor(Math.random()*(9999999999-1e9+1)+1e9).toString()}static async isShortCodeUnique(e){try{const n=xn(ln,"teams"),r=Yj(n,Gj("shortCode"),Xj(e));return!(await wu(r)).exists()}catch(n){return console.error("Error checking short code uniqueness:",n),!1}}static async generateUniqueShortCode(){let e,n=0;const r=10;do e=this.generateShortCode(),n++;while(!await this.isShortCodeUnique(e)&&n<r);return n>=r&&(e=this.generateShortCode()+Date.now().toString().slice(-2)),e}static async createTeam(e){try{const n=this.generateTeamId(),r=await this.generateUniqueShortCode(),i=`${window.location.origin}/join/${r}`,s={...e,id:n,shortCode:r,joinUrl:i},o=xn(ln,`teams/${n}`);await Rs(o,s);const a=xn(ln,`teamsByShortCode/${r}`);return await Rs(a,n),s}catch(n){throw console.error("Error creating team:",n),new Error("Failed to create team")}}static async getTeamById(e){try{const n=xn(ln,`teams/${e}`),r=await wu(n);return r.exists()?r.val():null}catch(n){return console.error("Error getting team:",n),null}}static async getTeamByShortCode(e){try{const n=xn(ln,`teamsByShortCode/${e}`),r=await wu(n);if(!r.exists())return null;const i=r.val();return await this.getTeamById(i)}catch(n){return console.error("Error getting team by short code:",n),null}}static async getAllTeams(){try{const e=xn(ln,"teams"),n=await wu(e);if(!n.exists())return[];const r=n.val();return Object.values(r)}catch(e){return console.error("Error getting all teams:",e),[]}}static onTeamsChange(e){const n=xn(ln,"teams"),r=Vj(n,i=>{if(i.exists()){const s=i.val(),o=Object.values(s);e(o)}else e([])});return()=>Hj(n,"value",r)}static async joinTeam(e,n){try{const r=await this.getTeamById(e);if(!r)throw new Error("Team not found");if(r.players.some(a=>a.userId===n.id))throw new Error("User already in team");const i={userId:n.id,name:n.name,role:"All-rounder",battingOrder:r.players.length+1},s=[...r.players,i],o=xn(ln,`teams/${e}/players`);return await Rs(o,s),!0}catch(r){throw console.error("Error joining team:",r),r}}static async updateTeam(e,n){try{const r=xn(ln,`teams/${e}`);return await Bj(r,n),!0}catch(r){return console.error("Error updating team:",r),!1}}static async deleteTeam(e,n){try{const r=xn(ln,`teams/${e}`);if(await Nw(r),n){const i=xn(ln,`teamsByShortCode/${n}`);await Nw(i)}return!0}catch(r){return console.error("Error deleting team:",r),!1}}static async generateQRCode(e){try{return await Gc.toDataURL(e,{width:200,margin:1,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"M"})}catch(n){throw console.error("Error generating QR code:",n),new Error("Failed to generate QR code")}}static async migrateLocalStorageToFirebase(){try{if(localStorage.getItem("firebaseMigrationCompleted")==="true")return;const n=JSON.parse(localStorage.getItem("cricketTeams")||"[]");if(n.length===0){localStorage.setItem("firebaseMigrationCompleted","true");return}console.log(`Migrating ${n.length} teams from localStorage to Firebase...`);for(const r of n){const i=await this.generateUniqueShortCode(),s=`${window.location.origin}/join/${i}`,o={...r,shortCode:i,joinUrl:s},a=xn(ln,`teams/${r.id}`);await Rs(a,o);const l=xn(ln,`teamsByShortCode/${i}`);await Rs(l,r.id)}console.log("Migration completed successfully"),localStorage.setItem("firebaseMigrationCompleted","true"),localStorage.removeItem("cricketTeams")}catch(e){throw console.error("Error migrating data:",e),new Error("Failed to migrate data to Firebase")}}}const JN=()=>{const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(null);return b.useEffect(()=>{let f=null;return(async()=>{try{r(!0),f=Er.onTeamsChange(p=>{e(p),r(!1),s(null)}),Er.migrateLocalStorageToFirebase().catch(p=>{console.warn("Migration failed (non-critical):",p)})}catch(p){console.error("Error initializing teams:",p),s("Failed to load teams"),r(!1);const m=JSON.parse(localStorage.getItem("cricketTeams")||"[]");e(m)}})(),()=>{f&&f()}},[]),{teams:t,loading:n,error:i,createTeam:async f=>{try{r(!0);const h=await Er.createTeam(f);return Y.success(`Team "${h.name}" created successfully!`),Y.success(`Team Code: ${h.shortCode} (copied to clipboard)`),navigator.clipboard&&await navigator.clipboard.writeText(h.shortCode||""),h}catch(h){return console.error("Error creating team:",h),Y.error("Failed to create team"),null}finally{r(!1)}},joinTeam:async(f,h)=>{try{r(!0);let p=await Er.getTeamById(f);return!p&&f.length===6&&(p=await Er.getTeamByShortCode(f.toUpperCase())),p?(await Er.joinTeam(p.id,h),Y.success(`Successfully joined "${p.name}"!`),!0):(Y.error("Team not found!"),!1)}catch(p){return console.error("Error joining team:",p),Y.error(p.message||"Failed to join team"),!1}finally{r(!1)}},updateTeam:async(f,h)=>{try{r(!0);const p=await Er.updateTeam(f,h);return p?Y.success("Team updated successfully!"):Y.error("Failed to update team"),p}catch(p){return console.error("Error updating team:",p),Y.error("Failed to update team"),!1}finally{r(!1)}},deleteTeam:async(f,h)=>{try{r(!0);const p=await Er.deleteTeam(f,h);return p?Y.success("Team deleted successfully!"):Y.error("Failed to delete team"),p}catch(p){return console.error("Error deleting team:",p),Y.error("Failed to delete team"),!1}finally{r(!1)}},generateTeamQR:async f=>{try{const h=f.joinUrl||`${window.location.origin}/join/${f.shortCode}`;return await Er.generateQRCode(h)}catch(h){return console.error("Error generating QR code:",h),Y.error("Failed to generate QR code"),null}}}};function yU(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function xU(t,e){e===void 0&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var wU=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])},t(n,r)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_U=function(t){wU(e,t);function e(n,r){var i=this.constructor,s=t.call(this,n,r)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1,configurable:!0}),yU(s,i.prototype),xU(s),s}return e}(Error),CU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pn=function(t){CU(e,t);function e(n){n===void 0&&(n=void 0);var r=t.call(this,n)||this;return r.message=n,r}return e.prototype.getKind=function(){var n=this.constructor;return n.kind},e.kind="Exception",e}(_U),EU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),or=function(t){EU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Pn),SU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oe=function(t){SU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Pn),bU=function(){function t(e){if(this.binarizer=e,e===null)throw new oe("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,n,r,i){var s=this.binarizer.getLuminanceSource().crop(e,n,r,i);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),AU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dt=function(t){AU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Pn),NU=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),He=function(){function t(){}return t.arraycopy=function(e,n,r,i,s){for(;s--;)r[i++]=e[n++]},t.currentTimeMillis=function(){return Date.now()},t}(),TU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jv=function(t){TU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Pn),IU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),n_=function(t){IU(e,t);function e(n,r){n===void 0&&(n=void 0),r===void 0&&(r=void 0);var i=t.call(this,r)||this;return i.index=n,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(jv),kU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},St=function(){function t(){}return t.fill=function(e,n){for(var r=0,i=e.length;r<i;r++)e[r]=n},t.fillWithin=function(e,n,r,i){t.rangeCheck(e.length,n,r);for(var s=n;s<r;s++)e[s]=i},t.rangeCheck=function(e,n,r){if(n>r)throw new oe("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new n_(n);if(r>e)throw new n_(r)},t.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},t.create=function(e,n,r){var i=Array.from({length:e});return i.map(function(s){return Array.from({length:n}).fill(r)})},t.createInt32Array=function(e,n,r){var i=Array.from({length:e});return i.map(function(s){return Int32Array.from({length:n}).fill(r)})},t.equals=function(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!1;return!0},t.hashCode=function(e){var n,r;if(e===null)return 0;var i=1;try{for(var s=kU(e),o=s.next();!o.done;o=s.next()){var a=o.value;i=31*i+a}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},t.fillUint8Array=function(e,n){for(var r=0;r!==e.length;r++)e[r]=n},t.copyOf=function(e,n){return e.slice(0,n)},t.copyOfUint8Array=function(e,n){if(e.length<=n){var r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)},t.copyOfRange=function(e,n,r){var i=r-n,s=new Int32Array(i);return He.arraycopy(e,n,s,0,i),s},t.binarySearch=function(e,n,r){r===void 0&&(r=t.numberComparator);for(var i=0,s=e.length-1;i<=s;){var o=s+i>>1,a=r(n,e[o]);if(a>0)i=o+1;else if(a<0)s=o-1;else return o}return-i-1},t.numberComparator=function(e,n){return e-n},t}(),pe=function(){function t(){}return t.numberOfTrailingZeros=function(e){var n;if(e===0)return 32;var r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,n){return Math.trunc(e/n)},t.parseInt=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Mt=function(){function t(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=t.makeArray(e):this.bits=n)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var n=t.makeArray(e);He.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),s=r[i];s&=~((1<<(e&31))-1);for(var o=r.length;s===0;){if(++i===o)return n;s=r[i]}var a=i*32+pe.numberOfTrailingZeros(s);return a>n?n:a},t.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),s=~r[i];s&=~((1<<(e&31))-1);for(var o=r.length;s===0;){if(++i===o)return n;s=~r[i]}var a=i*32+pe.numberOfTrailingZeros(s);return a>n?n:a},t.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},t.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new oe;if(n!==e){n--;for(var r=Math.floor(e/32),i=Math.floor(n/32),s=this.bits,o=r;o<=i;o++){var a=o>r?0:e&31,l=o<i?31:n&31,c=(2<<l)-(1<<a);s[o]|=c}}},t.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,r=0;r<e;r++)n[r]=0},t.prototype.isRange=function(e,n,r){if(n<e||e<0||n>this.size)throw new oe;if(n===e)return!0;n--;for(var i=Math.floor(e/32),s=Math.floor(n/32),o=this.bits,a=i;a<=s;a++){var l=a>i?0:e&31,c=a<s?31:n&31,d=(2<<c)-(1<<l)&4294967295;if((o[a]&d)!==(r?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,n){if(n<0||n>32)throw new oe("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)},t.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var r=0;r<n;r++)this.appendBit(e.get(r))},t.prototype.xor=function(e){if(this.size!==e.size)throw new oe("Sizes don't match");for(var n=this.bits,r=0,i=n.length;r<i;r++)n[r]^=e.bits[r]},t.prototype.toBytes=function(e,n,r,i){for(var s=0;s<i;s++){for(var o=0,a=0;a<8;a++)this.get(e)&&(o|=1<<7-a),e++;n[r+s]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,i=this.bits,s=0;s<r;s++){var o=i[s];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[n-s]=o}if(this.size!==r*32){for(var a=r*32-this.size,l=e[0]>>>a,s=1;s<r;s++){var c=e[s];l|=c<<32-a,e[s-1]=l,l=c>>>a}e[r-1]=l}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.size===n.size&&St.equals(this.bits,n.bits)},t.prototype.hashCode=function(){return 31*this.size+St.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",n=0,r=this.size;n<r;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],n=0,r=this.size;n<r;n++)e.push(this.get(n));return e},t}(),k1;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(k1||(k1={}));const Je=k1;var PU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(t){PU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Pn),RU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oe;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Oe||(Oe={}));var Ct=function(){function t(e,n,r){for(var i,s,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(r,this);for(var l=this.values,c=0,d=l.length;c!==d;c++){var f=l[c];t.VALUES_TO_ECI.set(f,this)}try{for(var h=RU(o),p=h.next();!p.done;p=h.next()){var m=p.value;t.NAME_TO_ECI.set(m,this)}}catch(v){i={error:v}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new K("incorect value");var n=t.VALUES_TO_ECI.get(e);if(n===void 0)throw new K("incorect value");return n},t.getCharacterSetECIByName=function(e){var n=t.NAME_TO_ECI.get(e);if(n===void 0)throw new K("incorect value");return n},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.getName()===n.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Oe.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Oe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Oe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Oe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Oe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Oe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Oe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Oe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Oe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Oe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Oe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Oe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Oe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Oe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Oe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Oe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Oe.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Oe.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Oe.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Oe.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Oe.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Oe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Oe.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Oe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Oe.Big5,28,"Big5"),t.GB18030=new t(Oe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Oe.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),OU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qu=function(t){OU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Pn),Jn=function(){function t(){}return t.decode=function(e,n){var r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,n){var r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Ct?e:Ct.getCharacterSetECIByName(e)},t.decodeFallback=function(e,n){var r=this.encodingCharacterSet(n);if(t.isDecodeFallbackSupported(r)){for(var i="",s=0,o=e.length;s<o;s++){var a=e[s].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(Ct.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Qu("Encoding "+this.encodingName(n)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Ct.UTF8)||e.equals(Ct.ISO8859_1)||e.equals(Ct.ASCII)},t.encodeFallback=function(e){for(var n=btoa(unescape(encodeURIComponent(e))),r=n.split(""),i=[],s=0;s<r.length;s++)i.push(r[s].charCodeAt(0));return new Uint8Array(i)},t}(),Ee=function(){function t(){}return t.castAsNonUtf8Char=function(e,n){n===void 0&&(n=null);var r=n?n.getName():this.ISO88591;return Jn.decode(new Uint8Array([e]),r)},t.guessEncoding=function(e,n){if(n!=null&&n.get(Je.CHARACTER_SET)!==void 0)return n.get(Je.CHARACTER_SET).toString();for(var r=e.length,i=!0,s=!0,o=!0,a=0,l=0,c=0,d=0,f=0,h=0,p=0,m=0,v=0,w=0,y=0,g=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,x=0;x<r&&(i||s||o);x++){var _=e[x]&255;o&&(a>0?_&128?a--:o=!1:_&128&&(_&64?(a++,_&32?(a++,_&16?(a++,_&8?o=!1:d++):c++):l++):o=!1)),i&&(_>127&&_<160?i=!1:_>159&&(_<192||_===215||_===247)&&y++),s&&(f>0?_<64||_===127||_>252?s=!1:f--:_===128||_===160||_>239?s=!1:_>160&&_<224?(h++,m=0,p++,p>v&&(v=p)):_>127?(f++,p=0,m++,m>w&&(w=m)):(p=0,m=0))}return o&&a>0&&(o=!1),s&&f>0&&(s=!1),o&&(g||l+c+d>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||v>=3||w>=3)?t.SHIFT_JIS:i&&s?v===2&&h===2||y*10>=r?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:s?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=-1;function s(a,l,c,d,f,h){if(a==="%%")return"%";if(n[++i]!==void 0){a=d?parseInt(d.substr(1)):void 0;var p=f?parseInt(f.substr(1)):void 0,m;switch(h){case"s":m=n[i];break;case"c":m=n[i][0];break;case"f":m=parseFloat(n[i]).toFixed(a);break;case"p":m=parseFloat(n[i]).toPrecision(a);break;case"e":m=parseFloat(n[i]).toExponential(a);break;case"x":m=parseInt(n[i]).toString(p||16);break;case"d":m=parseFloat(parseInt(n[i],p||10).toPrecision(a)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(p);for(var v=parseInt(c),w=c&&c[0]+""=="0"?"0":" ";m.length<v;)m=l!==void 0?m+w:w+m;return m}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,s)},t.getBytes=function(e,n){return Jn.encode(e,n)},t.getCharCode=function(e,n){return n===void 0&&(n=0),e.charCodeAt(n)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Ct.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Ct.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Ct.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),he=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ee.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,n,r){for(var i=n;n<n+r;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},t.prototype.substring=function(e,n){return this.value.substring(e,n)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},t}(),Lr=function(){function t(e,n,r,i){if(this.width=e,this.height=n,this.rowSize=r,this.bits=i,n==null&&(n=e),this.height=n,e<1||n<1)throw new oe("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var n=e.length,r=e[0].length,i=new t(r,n),s=0;s<n;s++)for(var o=e[s],a=0;a<r;a++)o[a]&&i.set(a,s);return i},t.parseFromString=function(e,n,r){if(e===null)throw new oe("stringRepresentation cannot be null");for(var i=new Array(e.length),s=0,o=0,a=-1,l=0,c=0;c<e.length;)if(e.charAt(c)===`
`||e.charAt(c)==="\r"){if(s>o){if(a===-1)a=s-o;else if(s-o!==a)throw new oe("row lengths do not match");o=s,l++}c++}else if(e.substring(c,c+n.length)===n)c+=n.length,i[s]=!0,s++;else if(e.substring(c,c+r.length)===r)c+=r.length,i[s]=!1,s++;else throw new oe("illegal character encountered: "+e.substring(c));if(s>o){if(a===-1)a=s-o;else if(s-o!==a)throw new oe("row lengths do not match");l++}for(var d=new t(a,l),f=0;f<s;f++)i[f]&&d.set(Math.floor(f%a),Math.floor(f/a));return d},t.prototype.get=function(e,n){var r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},t.prototype.set=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new oe("input matrix dimensions do not match");for(var n=new Mt(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,s=0,o=this.height;s<o;s++)for(var a=s*r,l=e.getRow(s,n).getBitArray(),c=0;c<r;c++)i[a+c]^=l[c]},t.prototype.clear=function(){for(var e=this.bits,n=e.length,r=0;r<n;r++)e[r]=0},t.prototype.setRegion=function(e,n,r,i){if(n<0||e<0)throw new oe("Left and top must be nonnegative");if(i<1||r<1)throw new oe("Height and width must be at least 1");var s=e+r,o=n+i;if(o>this.height||s>this.width)throw new oe("The region must fit inside the matrix");for(var a=this.rowSize,l=this.bits,c=n;c<o;c++)for(var d=c*a,f=e;f<s;f++)l[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,n){n==null||n.getSize()<this.width?n=new Mt(this.width):n.clear();for(var r=this.rowSize,i=this.bits,s=e*r,o=0;o<r;o++)n.setBulk(o*32,i[s+o]);return n},t.prototype.setRow=function(e,n){He.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),r=new Mt(e),i=new Mt(e),s=0,o=Math.floor((n+1)/2);s<o;s++)r=this.getRow(s,r),i=this.getRow(n-1-s,i),r.reverse(),i.reverse(),this.setRow(s,i),this.setRow(n-1-s,r)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,n=this.height,r=this.rowSize,i=this.bits,s=e,o=n,a=-1,l=-1,c=0;c<n;c++)for(var d=0;d<r;d++){var f=i[c*r+d];if(f!==0){if(c<o&&(o=c),c>l&&(l=c),d*32<s){for(var h=0;!(f<<31-h&4294967295);)h++;d*32+h<s&&(s=d*32+h)}if(d*32+31>a){for(var h=31;!(f>>>h);)h--;d*32+h>a&&(a=d*32+h)}}}return a<s||l<o?null:Int32Array.from([s,o,a-s+1,l-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,r=0;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;for(var i=r/e,s=r%e*32,o=n[r],a=0;!(o<<31-a&4294967295);)a++;return s+=a,Int32Array.from([s,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,r=n.length-1;r>=0&&n[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),s=Math.floor(r%e)*32,o=n[r],a=31;!(o>>>a);)a--;return s+=a,Int32Array.from([s,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&St.equals(this.bits,n.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+St.hashCode(this.bits),e},t.prototype.toString=function(e,n,r){return e===void 0&&(e="X "),n===void 0&&(n="  "),r===void 0&&(r=`
`),this.buildToString(e,n,r)},t.prototype.buildToString=function(e,n,r){for(var i=new he,s=0,o=this.height;s<o;s++){for(var a=0,l=this.width;a<l;a++)i.append(this.get(a,s)?e:n);i.append(r)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),DU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(t){DU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Pn),MU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jU=function(t){MU(e,t);function e(n){var r=t.call(this,n)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(n,r){var i=this.getLuminanceSource(),s=i.getWidth();r==null||r.getSize()<s?r=new Mt(s):r.clear(),this.initArrays(s);for(var o=i.getRow(n,this.luminances),a=this.buckets,l=0;l<s;l++)a[(o[l]&255)>>e.LUMINANCE_SHIFT]++;var c=e.estimateBlackPoint(a);if(s<3)for(var l=0;l<s;l++)(o[l]&255)<c&&r.set(l);else for(var d=o[0]&255,f=o[1]&255,l=1;l<s-1;l++){var h=o[l+1]&255;(f*4-d-h)/2<c&&r.set(l),d=f,f=h}return r},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight(),s=new Lr(r,i);this.initArrays(r);for(var o=this.buckets,a=1;a<5;a++)for(var l=Math.floor(i*a/5),c=n.getRow(l,this.luminances),d=Math.floor(r*4/5),f=Math.floor(r/5);f<d;f++){var h=c[f]&255;o[h>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(o),m=n.getMatrix(),a=0;a<i;a++)for(var v=a*r,f=0;f<r;f++){var h=m[v+f]&255;h<p&&s.set(f,a)}return s},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(n){for(var r=n.length,i=0,s=0,o=0,a=0;a<r;a++)n[a]>o&&(s=a,o=n[a]),n[a]>i&&(i=n[a]);for(var l=0,c=0,a=0;a<r;a++){var d=a-s,f=n[a]*d*d;f>c&&(l=a,c=f)}if(s>l){var h=s;s=l,l=h}if(l-s<=r/16)throw new j;for(var p=l-1,m=-1,a=l-1;a>s;a--){var v=a-s,f=v*v*(l-a)*(i-n[a]);f>m&&(p=a,m=f)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(NU),LU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FU=function(t){LU(e,t);function e(n){var r=t.call(this,n)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var s=n.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;r&e.BLOCK_SIZE_MASK&&o++;var a=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&a++;var l=e.calculateBlackPoints(s,o,a,r,i),c=new Lr(r,i);e.calculateThresholdForBlock(s,o,a,r,i,l,c),this.matrix=c}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,r,i,s,o,a,l){for(var c=o-e.BLOCK_SIZE,d=s-e.BLOCK_SIZE,f=0;f<i;f++){var h=f<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var p=e.cap(f,2,i-3),m=0;m<r;m++){var v=m<<e.BLOCK_SIZE_POWER;v>d&&(v=d);for(var w=e.cap(m,2,r-3),y=0,g=-2;g<=2;g++){var x=a[p+g];y+=x[w-2]+x[w-1]+x[w]+x[w+1]+x[w+2]}var _=y/25;e.thresholdBlock(n,v,h,_,s,l)}}},e.cap=function(n,r,i){return n<r?r:n>i?i:n},e.thresholdBlock=function(n,r,i,s,o,a){for(var l=0,c=i*o+r;l<e.BLOCK_SIZE;l++,c+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(n[c+d]&255)<=s&&a.set(r+d,i+l)},e.calculateBlackPoints=function(n,r,i,s,o){for(var a=o-e.BLOCK_SIZE,l=s-e.BLOCK_SIZE,c=new Array(i),d=0;d<i;d++){c[d]=new Int32Array(r);var f=d<<e.BLOCK_SIZE_POWER;f>a&&(f=a);for(var h=0;h<r;h++){var p=h<<e.BLOCK_SIZE_POWER;p>l&&(p=l);for(var m=0,v=255,w=0,y=0,g=f*s+p;y<e.BLOCK_SIZE;y++,g+=s){for(var x=0;x<e.BLOCK_SIZE;x++){var _=n[g+x]&255;m+=_,_<v&&(v=_),_>w&&(w=_)}if(w-v>e.MIN_DYNAMIC_RANGE)for(y++,g+=s;y<e.BLOCK_SIZE;y++,g+=s)for(var x=0;x<e.BLOCK_SIZE;x++)m+=n[g+x]&255}var C=m>>e.BLOCK_SIZE_POWER*2;if(w-v<=e.MIN_DYNAMIC_RANGE&&(C=v/2,d>0&&h>0)){var E=(c[d-1][h]+2*c[d][h-1]+c[d-1][h-1])/4;v<E&&(C=E)}c[d][h]=C}}return c},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(jU),ch=function(){function t(e,n){this.width=e,this.height=n}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,n,r,i){throw new Qu("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new Qu("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new Qu("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new he,r=0;r<this.height;r++){for(var i=this.getRow(r,e),s=0;s<this.width;s++){var o=i[s]&255,a=void 0;o<64?a="#":o<128?a="+":o<192?a=".":a=" ",n.append(a)}n.append(`
`)}return n.toString()},t}(),BU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lv=function(t){BU(e,t);function e(n){var r=t.call(this,n.getWidth(),n.getHeight())||this;return r.delegate=n,r}return e.prototype.getRow=function(n,r){for(var i=this.delegate.getRow(n,r),s=this.getWidth(),o=0;o<s;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),s=0;s<r;s++)i[s]=255-(n[s]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,r,i,s){return new e(this.delegate.crop(n,r,i,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(ch),UU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),VU=function(t){UU(e,t);function e(n,r){r===void 0&&(r=!1);var i=t.call(this,n.width,n.height)||this;return i.canvas=n,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(n,r),i}return e.makeBufferFromCanvasImageData=function(n,r){r===void 0&&(r=!1);var i=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(i.data,n.width,n.height,r)},e.toGrayscaleBuffer=function(n,r,i,s){s===void 0&&(s=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var a=0,l=0,c=n.length;a<c;a+=4,l++){var d=void 0,f=n[a+3];if(f===0)d=255;else{var h=n[a],p=n[a+1],m=n[a+2];d=306*h+601*p+117*m+512>>10}o[l]=d}else for(var a=0,l=0,v=n.length;a<v;a+=4,l++){var d=void 0,f=n[a+3];if(f===0)d=255;else{var h=n[a],p=n[a+1],m=n[a+2];d=306*h+601*p+117*m+512>>10}o[l]=255-d}return o},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new oe("Requested row is outside the image: "+n);var i=this.getWidth(),s=n*i;return r===null?r=this.buffer.slice(s,s+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(s,s+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,s){return t.prototype.crop.call(this,n,r,i,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement(),i=r.getContext("2d"),s=n*e.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(s))*o+Math.abs(Math.sin(s))*a),c=Math.ceil(Math.abs(Math.sin(s))*o+Math.abs(Math.cos(s))*a);return r.width=l,r.height=c,i.translate(l/2,c/2),i.rotate(s),i.drawImage(this.canvas,o/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Lv(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(ch),HU=function(){function t(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),on=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},an=function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},WU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ja=function(){function t(e,n,r){n===void 0&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return on(this,void 0,void 0,function(){var e,n,r,i,s,o,a,l,c,d,f,h;return an(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),n=[];try{for(r=WU(e),i=r.next();!i.done;i=r.next())s=i.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(a=s.deviceId||s.id,l=s.label||"Video device "+(n.length+1),c=s.groupId,d={deviceId:a,label:l,kind:o,groupId:c},n.push(d))}catch(m){f={error:m}}finally{try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(f)throw f.error}}return[2,n]}})})},t.prototype.getVideoInputDevices=function(){return on(this,void 0,void 0,function(){var e;return an(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=n.sent(),[2,e.map(function(r){return new HU(r.deviceId,r.label)})]}})})},t.prototype.findDeviceById=function(e){return on(this,void 0,void 0,function(){var n;return an(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,n){return on(this,void 0,void 0,function(){return an(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return on(this,void 0,void 0,function(){var r,i;return an(this,function(s){switch(s.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return on(this,void 0,void 0,function(){var r;return an(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return on(this,void 0,void 0,function(){var r,i;return an(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return r=s.sent(),[4,this.decodeOnce(r)];case 2:return i=s.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,r){return on(this,void 0,void 0,function(){return an(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,n,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return on(this,void 0,void 0,function(){var i,s;return an(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},s={video:i},[4,this.decodeFromConstraints(s,n,r)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return on(this,void 0,void 0,function(){var i;return an(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=s.sent(),[4,this.decodeFromStream(i,n,r)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,n,r){return on(this,void 0,void 0,function(){var i;return an(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return i=s.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,n){return on(this,void 0,void 0,function(){var r;return an(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(n),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(r,i){return n.playVideoOnLoad(e,function(){return r()})})},t.prototype.playVideoOnLoad=function(e,n){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return on(this,void 0,void 0,function(){return an(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new or("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new or("element with id '"+e+"' must be an "+n+" element");return r},t.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new or("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new or("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,n,r){if(e===void 0&&n===void 0)throw new or("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new or("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);this.imageElement=n;var r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r},t.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},t.prototype.decodeFromVideoElementContinuously=function(e,n){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new or("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new or("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var r=this._decodeOnLoadImage(n);return n.src=e,r},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new or("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r},t.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new or("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,n);return r.src=e,i},t.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(r,i){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",n.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return on(this,void 0,void 0,function(){return an(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,n){return on(this,void 0,void 0,function(){return an(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,n),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},t.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.prototype.decodeOnce=function(e,n,r){var i=this;n===void 0&&(n=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var s=function(o,a){if(i._stopAsyncDecode){a(new j("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);o(l)}catch(h){var c=n&&h instanceof j,d=h instanceof Dt||h instanceof K,f=d&&r;if(c||f)return setTimeout(s,i._timeBetweenDecodingAttempts,o,a);a(h)}};return new Promise(function(o,a){return s(o,a)})},t.prototype.decodeContinuously=function(e,n){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var s=r.decode(e);n(s,null),setTimeout(i,r.timeBetweenScansMillis)}catch(l){n(null,l);var o=l instanceof Dt||l instanceof K,a=l instanceof j;(o||a)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var n=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),n=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new VU(r,n),s=new FU(i);return new bU(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),r=void 0;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.drawImageOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var n=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=i+"px",n.width=r,n.height=i,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),sn=function(){function t(e,n,r,i,s,o){r===void 0&&(r=n==null?0:8*n.length),o===void 0&&(o=He.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=i,this.format=s,this.timestamp=o,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=i,this.format=s,this.resultMetadata=null,o==null?this.timestamp=He.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(n.length+e.length);He.arraycopy(n,0,r,0,n.length),He.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),P1;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(P1||(P1={}));const ie=P1;var R1;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(R1||(R1={}));const $t=R1;var uh=function(){function t(e,n,r,i,s,o){s===void 0&&(s=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),ul=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new oe;return this.logTable[e]},t.addOrSubtract=function(e,n){return e^n},t}(),es=function(){function t(e,n){if(n.length===0)throw new oe;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),He.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var n=this.coefficients,r;if(e===1){r=0;for(var i=0,s=n.length;i!==s;i++){var o=n[i];r=ul.addOrSubtract(r,o)}return r}r=n[0];for(var a=n.length,l=this.field,i=1;i<a;i++)r=ul.addOrSubtract(l.multiply(e,r),n[i]);return r},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new oe("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var s=new Int32Array(r.length),o=r.length-n.length;He.arraycopy(r,0,s,0,o);for(var a=o;a<r.length;a++)s[a]=ul.addOrSubtract(n[a-o],r[a]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new oe("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,i=e.coefficients,s=i.length,o=new Int32Array(r+s-1),a=this.field,l=0;l<r;l++)for(var c=n[l],d=0;d<s;d++)o[l+d]=ul.addOrSubtract(o[l+d],a.multiply(c,i[d]));return new t(a,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var n=this.coefficients.length,r=this.field,i=new Int32Array(n),s=this.coefficients,o=0;o<n;o++)i[o]=r.multiply(s[o],e);return new t(r,i)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new oe;if(n===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,s=new Int32Array(i+e),o=this.field,a=0;a<i;a++)s[a]=o.multiply(r[a],n);return new t(o,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new oe("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new oe("Divide by 0");for(var n=this.field,r=n.getZero(),i=this,s=e.getCoefficient(e.getDegree()),o=n.inverse(s);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),l=n.multiply(i.getCoefficient(i.getDegree()),o),c=e.multiplyByMonomial(a,l),d=n.buildMonomial(a,l);r=r.addOrSubtract(d),i=i.addOrSubtract(c)}return[r,i]},t.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e},t}(),zU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),eT=function(t){zU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Pn),$U=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bn=function(t){$U(e,t);function e(n,r,i){var s=t.call(this)||this;s.primitive=n,s.size=r,s.generatorBase=i;for(var o=new Int32Array(r),a=1,l=0;l<r;l++)o[l]=a,a*=2,a>=r&&(a^=n,a&=r-1);s.expTable=o;for(var c=new Int32Array(r),l=0;l<r-1;l++)c[o[l]]=l;return s.logTable=c,s.zero=new es(s,Int32Array.from([0])),s.one=new es(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new oe;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new es(this,i)},e.prototype.inverse=function(n){if(n===0)throw new eT;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+pe.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(ul),GU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Su=function(t){GU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Pn),KU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xc=function(t){KU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Pn),dh=function(){function t(e){this.field=e}return t.prototype.decode=function(e,n){for(var r=this.field,i=new es(r,e),s=new Int32Array(n),o=!0,a=0;a<n;a++){var l=i.evaluateAt(r.exp(a+r.getGeneratorBase()));s[s.length-1-a]=l,l!==0&&(o=!1)}if(!o)for(var c=new es(r,s),d=this.runEuclideanAlgorithm(r.buildMonomial(n,1),c,n),f=d[0],h=d[1],p=this.findErrorLocations(f),m=this.findErrorMagnitudes(h,p),a=0;a<p.length;a++){var v=e.length-1-r.log(p[a]);if(v<0)throw new Su("Bad error location");e[v]=bn.addOrSubtract(e[v],m[a])}},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var s=this.field,o=e,a=n,l=s.getZero(),c=s.getOne();a.getDegree()>=(r/2|0);){var d=o,f=l;if(o=a,l=c,o.isZero())throw new Su("r_{i-1} was zero");a=d;for(var h=s.getZero(),p=o.getCoefficient(o.getDegree()),m=s.inverse(p);a.getDegree()>=o.getDegree()&&!a.isZero();){var v=a.getDegree()-o.getDegree(),w=s.multiply(a.getCoefficient(a.getDegree()),m);h=h.addOrSubtract(s.buildMonomial(v,w)),a=a.addOrSubtract(o.multiplyByMonomial(v,w))}if(c=h.multiply(l).addOrSubtract(f),a.getDegree()>=o.getDegree())throw new Xc("Division algorithm failed to reduce polynomial?")}var y=c.getCoefficient(0);if(y===0)throw new Su("sigmaTilde(0) was zero");var g=s.inverse(y),x=c.multiplyScalar(g),_=a.multiplyScalar(g);return[x,_]},t.prototype.findErrorLocations=function(e){var n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(n),i=0,s=this.field,o=1;o<s.getSize()&&i<n;o++)e.evaluateAt(o)===0&&(r[i]=s.inverse(o),i++);if(i!==n)throw new Su("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(e,n){for(var r=n.length,i=new Int32Array(r),s=this.field,o=0;o<r;o++){for(var a=s.inverse(n[o]),l=1,c=0;c<r;c++)if(o!==c){var d=s.multiply(n[c],a),f=d&1?d&-2:d|1;l=s.multiply(l,f)}i[o]=s.multiply(e.evaluateAt(a),s.inverse(l)),s.getGeneratorBase()!==0&&(i[o]=s.multiply(i[o],a))}return i},t}(),Ut;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Ut||(Ut={}));var r_=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),r=this.extractBits(n),i=this.correctBits(r),s=t.convertBoolArrayToByteArray(i),o=t.getEncodedData(i),a=new uh(s,o,null,null);return a.setNumBits(i.length),a},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var n=e.length,r=Ut.UPPER,i=Ut.UPPER,s="",o=0;o<n;)if(i===Ut.BINARY){if(n-o<5)break;var a=t.readCode(e,o,5);if(o+=5,a===0){if(n-o<11)break;a=t.readCode(e,o,11)+31,o+=11}for(var l=0;l<a;l++){if(n-o<8){o=n;break}var c=t.readCode(e,o,8);s+=Ee.castAsNonUtf8Char(c),o+=8}i=r}else{var d=i===Ut.DIGIT?4:5;if(n-o<d)break;var c=t.readCode(e,o,d);o+=d;var f=t.getCharacter(i,c);f.startsWith("CTRL_")?(r=i,i=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(r=i)):(s+=f,i=r)}return s},t.getTable=function(e){switch(e){case"L":return Ut.LOWER;case"P":return Ut.PUNCT;case"M":return Ut.MIXED;case"D":return Ut.DIGIT;case"B":return Ut.BINARY;case"U":default:return Ut.UPPER}},t.getCharacter=function(e,n){switch(e){case Ut.UPPER:return t.UPPER_TABLE[n];case Ut.LOWER:return t.LOWER_TABLE[n];case Ut.MIXED:return t.MIXED_TABLE[n];case Ut.PUNCT:return t.PUNCT_TABLE[n];case Ut.DIGIT:return t.DIGIT_TABLE[n];default:throw new Xc("Bad table")}},t.prototype.correctBits=function(e){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=bn.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=bn.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=bn.AZTEC_DATA_10):(r=12,n=bn.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),s=e.length/r;if(s<i)throw new K;for(var o=e.length%r,a=new Int32Array(s),l=0;l<s;l++,o+=r)a[l]=t.readCode(e,o,r);try{var c=new dh(n);c.decode(a,s-i)}catch(w){throw new K(w)}for(var d=(1<<r)-1,f=0,l=0;l<i;l++){var h=a[l];if(h===0||h===d)throw new K;(h===1||h===d-1)&&f++}for(var p=new Array(i*r-f),m=0,l=0;l<i;l++){var h=a[l];if(h===1||h===d-1)p.fill(h>1,m,m+r-1),m+=r-1;else for(var v=r-1;v>=0;--v)p[m++]=(h&1<<v)!==0}return p},t.prototype.extractBits=function(e){var n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+r*4,s=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,n));if(n)for(var a=0;a<s.length;a++)s[a]=a;else for(var l=i+1+2*pe.truncDivision(pe.truncDivision(i,2)-1,15),c=i/2,d=pe.truncDivision(l,2),a=0;a<c;a++){var f=a+pe.truncDivision(a,15);s[c-a-1]=d-f-1,s[c+a]=d+f+1}for(var a=0,h=0;a<r;a++){for(var p=(r-a)*4+(n?9:12),m=a*2,v=i-1-m,w=0;w<p;w++)for(var y=w*2,g=0;g<2;g++)o[h+y+g]=e.get(s[m+g],s[m+w]),o[h+2*p+y+g]=e.get(s[m+w],s[v-g]),o[h+4*p+y+g]=e.get(s[v-g],s[v-w]),o[h+6*p+y+g]=e.get(s[v-w],s[m+g]);h+=p*8}return o},t.readCode=function(e,n,r){for(var i=0,s=n;s<n+r;s++)i<<=1,e[s]&&(i|=1);return i},t.readByte=function(e,n){var r=e.length-n;return r>=8?t.readCode(e,n,8):t.readCode(e,n,r)<<8-r},t.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),r=0;r<n.length;r++)n[r]=t.readByte(e,8*r);return n},t.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Ne=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,n,r,i){var s=e-r,o=n-i;return Math.sqrt(s*s+o*o)},t.sum=function(e){for(var n=0,r=0,i=e.length;r!==i;r++){var s=e[r];n+=s}return n},t}(),O1=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),J=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var n=e;return this.x===n.x&&this.y===n.y}return!1},t.prototype.hashCode=function(){return 31*O1.floatToIntBits(this.x)+O1.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),s,o,a;if(r>=n&&r>=i?(o=e[0],s=e[1],a=e[2]):i>=r&&i>=n?(o=e[1],s=e[0],a=e[2]):(o=e[2],s=e[0],a=e[1]),this.crossProductZ(s,o,a)<0){var l=s;s=a,a=l}e[0]=s,e[1]=o,e[2]=a},t.distance=function(e,n){return Ne.distance(e.x,e.y,n.x,n.y)},t.crossProductZ=function(e,n,r){var i=n.x,s=n.y;return(r.x-i)*(e.y-s)-(r.y-s)*(e.x-i)},t}(),Fv=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),XU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YU=function(t){XU(e,t);function e(n,r,i,s,o){var a=t.call(this,n,r)||this;return a.compact=i,a.nbDatablocks=s,a.nbLayers=o,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Fv),D1=function(){function t(e,n,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=t.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var s=n/2|0;if(this.leftInit=r-s,this.rightInit=r+s,this.upInit=i-s,this.downInit=i+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new j}return t.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,s=!1,o=!0,a=!1,l=!1,c=!1,d=!1,f=!1,h=this.width,p=this.height;o;){o=!1;for(var m=!0;(m||!l)&&n<h;)m=this.containsBlackPoint(r,i,n,!1),m?(n++,o=!0,l=!0):l||n++;if(n>=h){s=!0;break}for(var v=!0;(v||!c)&&i<p;)v=this.containsBlackPoint(e,n,i,!0),v?(i++,o=!0,c=!0):c||i++;if(i>=p){s=!0;break}for(var w=!0;(w||!d)&&e>=0;)w=this.containsBlackPoint(r,i,e,!1),w?(e--,o=!0,d=!0):d||e--;if(e<0){s=!0;break}for(var y=!0;(y||!f)&&r>=0;)y=this.containsBlackPoint(e,n,r,!0),y?(r--,o=!0,f=!0):f||r--;if(r<0){s=!0;break}o&&(a=!0)}if(!s&&a){for(var g=n-e,x=null,_=1;x===null&&_<g;_++)x=this.getBlackPointOnSegment(e,i-_,e+_,i);if(x==null)throw new j;for(var C=null,_=1;C===null&&_<g;_++)C=this.getBlackPointOnSegment(e,r+_,e+_,r);if(C==null)throw new j;for(var E=null,_=1;E===null&&_<g;_++)E=this.getBlackPointOnSegment(n,r+_,n-_,r);if(E==null)throw new j;for(var A=null,_=1;A===null&&_<g;_++)A=this.getBlackPointOnSegment(n,i-_,n-_,i);if(A==null)throw new j;return this.centerEdges(A,x,E,C)}else throw new j},t.prototype.getBlackPointOnSegment=function(e,n,r,i){for(var s=Ne.round(Ne.distance(e,n,r,i)),o=(r-e)/s,a=(i-n)/s,l=this.image,c=0;c<s;c++){var d=Ne.round(e+c*o),f=Ne.round(n+c*a);if(l.get(d,f))return new J(d,f)}return null},t.prototype.centerEdges=function(e,n,r,i){var s=e.getX(),o=e.getY(),a=n.getX(),l=n.getY(),c=r.getX(),d=r.getY(),f=i.getX(),h=i.getY(),p=t.CORR;return s<this.width/2?[new J(f-p,h+p),new J(a+p,l+p),new J(c-p,d-p),new J(s+p,o-p)]:[new J(f+p,h+p),new J(a+p,l-p),new J(c-p,d+p),new J(s-p,o-p)]},t.prototype.containsBlackPoint=function(e,n,r,i){var s=this.image;if(i){for(var o=e;o<=n;o++)if(s.get(o,r))return!0}else for(var a=e;a<=n;a++)if(s.get(r,a))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),i_=function(){function t(){}return t.checkAndNudgePoints=function(e,n){for(var r=e.getWidth(),i=e.getHeight(),s=!0,o=0;o<n.length&&s;o+=2){var a=Math.floor(n[o]),l=Math.floor(n[o+1]);if(a<-1||a>r||l<-1||l>i)throw new j;s=!1,a===-1?(n[o]=0,s=!0):a===r&&(n[o]=r-1,s=!0),l===-1?(n[o+1]=0,s=!0):l===i&&(n[o+1]=i-1,s=!0)}s=!0;for(var o=n.length-2;o>=0&&s;o-=2){var a=Math.floor(n[o]),l=Math.floor(n[o+1]);if(a<-1||a>r||l<-1||l>i)throw new j;s=!1,a===-1?(n[o]=0,s=!0):a===r&&(n[o]=r-1,s=!0),l===-1?(n[o+1]=0,s=!0):l===i&&(n[o+1]=i-1,s=!0)}},t}(),tT=function(){function t(e,n,r,i,s,o,a,l,c){this.a11=e,this.a21=n,this.a31=r,this.a12=i,this.a22=s,this.a32=o,this.a13=a,this.a23=l,this.a33=c}return t.quadrilateralToQuadrilateral=function(e,n,r,i,s,o,a,l,c,d,f,h,p,m,v,w){var y=t.quadrilateralToSquare(e,n,r,i,s,o,a,l),g=t.squareToQuadrilateral(c,d,f,h,p,m,v,w);return g.times(y)},t.prototype.transformPoints=function(e){for(var n=e.length,r=this.a11,i=this.a12,s=this.a13,o=this.a21,a=this.a22,l=this.a23,c=this.a31,d=this.a32,f=this.a33,h=0;h<n;h+=2){var p=e[h],m=e[h+1],v=s*p+l*m+f;e[h]=(r*p+o*m+c)/v,e[h+1]=(i*p+a*m+d)/v}},t.prototype.transformPointsWithValues=function(e,n){for(var r=this.a11,i=this.a12,s=this.a13,o=this.a21,a=this.a22,l=this.a23,c=this.a31,d=this.a32,f=this.a33,h=e.length,p=0;p<h;p++){var m=e[p],v=n[p],w=s*m+l*v+f;e[p]=(r*m+o*v+c)/w,n[p]=(i*m+a*v+d)/w}},t.squareToQuadrilateral=function(e,n,r,i,s,o,a,l){var c=e-r+s-a,d=n-i+o-l;if(c===0&&d===0)return new t(r-e,s-r,e,i-n,o-i,n,0,0,1);var f=r-s,h=a-s,p=i-o,m=l-o,v=f*m-h*p,w=(c*m-h*d)/v,y=(f*d-c*p)/v;return new t(r-e+w*r,a-e+y*a,e,i-n+w*i,l-n+y*l,n,w,y,1)},t.quadrilateralToSquare=function(e,n,r,i,s,o,a,l){return t.squareToQuadrilateral(e,n,r,i,s,o,a,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),qU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),QU=function(t){qU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(n,r,i,s,o,a,l,c,d,f,h,p,m,v,w,y,g,x,_){var C=tT.quadrilateralToQuadrilateral(s,o,a,l,c,d,f,h,p,m,v,w,y,g,x,_);return this.sampleGridWithTransform(n,r,i,C)},e.prototype.sampleGridWithTransform=function(n,r,i,s){if(r<=0||i<=0)throw new j;for(var o=new Lr(r,i),a=new Float32Array(2*r),l=0;l<i;l++){for(var c=a.length,d=l+.5,f=0;f<c;f+=2)a[f]=f/2+.5,a[f+1]=d;s.transformPoints(a),i_.checkAndNudgePoints(n,a);try{for(var f=0;f<c;f+=2)n.get(Math.floor(a[f]),Math.floor(a[f+1]))&&o.set(f/2,l)}catch{throw new j}}return o},e}(i_),Bv=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new QU,t}(),yn=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.toResultPoint=function(){return new J(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),ZU=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var s=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new YU(s,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new j;var n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);for(var i=0,s=0;s<4;s++){var o=r[(this.shift+s)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},t.prototype.getRotation=function(e,n){var r=0;e.forEach(function(s,o,a){var l=(s>>n-2<<1)+(s&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(pe.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new j},t.prototype.getCorrectedParameterData=function(e,n){var r,i;n?(r=7,i=2):(r=10,i=4);for(var s=r-i,o=new Int32Array(r),a=r-1;a>=0;--a)o[a]=e&15,e>>=4;try{var l=new dh(bn.AZTEC_PARAM);l.decode(o,s)}catch{throw new j}for(var c=0,a=0;a<i;a++)c=(c<<4)+o[a];return c},t.prototype.getBullsEyeCorners=function(e){var n=e,r=e,i=e,s=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(n,o,1,-1),l=this.getFirstDifferent(r,o,1,1),c=this.getFirstDifferent(i,o,-1,1),d=this.getFirstDifferent(s,o,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,a)*this.nbCenterLayers/(this.distancePoint(s,n)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(a,l,c,d))break}n=a,r=l,i=c,s=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new j;this.compact=this.nbCenterLayers===5;var h=new J(n.getX()+.5,n.getY()-.5),p=new J(r.getX()+.5,r.getY()+.5),m=new J(i.getX()-.5,i.getY()+.5),v=new J(s.getX()-.5,s.getY()-.5);return this.expandSquare([h,p,m,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,n,r,i;try{var s=new D1(this.image).detect();e=s[0],n=s[1],r=s[2],i=s[3]}catch{var o=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new yn(o+7,a-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new yn(o+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new yn(o-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new yn(o-7,a-7),!1,-1,-1).toResultPoint()}var l=Ne.round((e.getX()+i.getX()+n.getX()+r.getX())/4),c=Ne.round((e.getY()+i.getY()+n.getY()+r.getY())/4);try{var s=new D1(this.image,15,l,c).detect();e=s[0],n=s[1],r=s[2],i=s[3]}catch{e=this.getFirstDifferent(new yn(l+7,c-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new yn(l+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new yn(l-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new yn(l-7,c-7),!1,-1,-1).toResultPoint()}return l=Ne.round((e.getX()+i.getX()+n.getX()+r.getX())/4),c=Ne.round((e.getY()+i.getY()+n.getY()+r.getY())/4),new yn(l,c)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,n,r,i,s){var o=Bv.getInstance(),a=this.getDimension(),l=a/2-this.nbCenterLayers,c=a/2+this.nbCenterLayers;return o.sampleGrid(e,a,a,l,l,c,l,c,c,l,c,n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,n,r){for(var i=0,s=this.distanceResultPoint(e,n),o=s/r,a=e.getX(),l=e.getY(),c=o*(n.getX()-e.getX())/s,d=o*(n.getY()-e.getY())/s,f=0;f<r;f++)this.image.get(Ne.round(a+f*c),Ne.round(l+f*d))&&(i|=1<<r-f-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,n,r,i){var s=3;e=new yn(e.getX()-s,e.getY()+s),n=new yn(n.getX()-s,n.getY()-s),r=new yn(r.getX()+s,r.getY()-s),i=new yn(i.getX()+s,i.getY()+s);var o=this.getColor(i,e);if(o===0)return!1;var a=this.getColor(e,n);return a!==o||(a=this.getColor(n,r),a!==o)?!1:(a=this.getColor(r,i),a===o)},t.prototype.getColor=function(e,n){for(var r=this.distancePoint(e,n),i=(n.getX()-e.getX())/r,s=(n.getY()-e.getY())/r,o=0,a=e.getX(),l=e.getY(),c=this.image.get(e.getX(),e.getY()),d=Math.ceil(r),f=0;f<d;f++)a+=i,l+=s,this.image.get(Ne.round(a),Ne.round(l))!==c&&o++;var h=o/r;return h>.1&&h<.9?0:h<=.1===c?1:-1},t.prototype.getFirstDifferent=function(e,n,r,i){for(var s=e.getX()+r,o=e.getY()+i;this.isValid(s,o)&&this.image.get(s,o)===n;)s+=r,o+=i;for(s-=r,o-=i;this.isValid(s,o)&&this.image.get(s,o)===n;)s+=r;for(s-=r;this.isValid(s,o)&&this.image.get(s,o)===n;)o+=i;return o-=i,new yn(s,o)},t.prototype.expandSquare=function(e,n,r){var i=r/(2*n),s=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,c=new J(a+i*s,l+i*o),d=new J(a-i*s,l-i*o);s=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var f=new J(a+i*s,l+i*o),h=new J(a-i*s,l-i*o),p=[c,f,d,h];return p},t.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},t.prototype.isValidPoint=function(e){var n=Ne.round(e.getX()),r=Ne.round(e.getY());return this.isValid(n,r)},t.prototype.distancePoint=function(e,n){return Ne.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.distanceResultPoint=function(e,n){return Ne.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(pe.truncDivision(this.nbLayers-4,8)+1)+15},t}(),M1=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=null,i=new ZU(e.getBlackMatrix()),s=null,o=null;try{var a=i.detectMirror(!1);s=a.getPoints(),this.reportFoundResultPoints(n,s),o=new r_().decode(a)}catch(f){r=f}if(o==null)try{var a=i.detectMirror(!0);s=a.getPoints(),this.reportFoundResultPoints(n,s),o=new r_().decode(a)}catch(f){throw r??f}var l=new sn(o.getText(),o.getRawBytes(),o.getNumBits(),s,ie.AZTEC,He.currentTimeMillis()),c=o.getByteSegments();c!=null&&l.putMetadata($t.BYTE_SEGMENTS,c);var d=o.getECLevel();return d!=null&&l.putMetadata($t.ERROR_CORRECTION_LEVEL,d),l},t.prototype.reportFoundResultPoints=function(e,n){if(e!=null){var r=e.get(Je.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach(function(i,s,o){r.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),JU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){JU(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new M1,n)||this}return e})(ja);var At=function(){function t(){}return t.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{var r=n&&n.get(Je.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),s=this.doDecode(i,n),o=s.getResultMetadata(),a=270;o!==null&&o.get($t.ORIENTATION)===!0&&(a=a+o.get($t.ORIENTATION)%360),s.putMetadata($t.ORIENTATION,a);var l=s.getResultPoints();if(l!==null)for(var c=i.getHeight(),d=0;d<l.length;d++)l[d]=new J(c-l[d].getY()-1,l[d].getX());return s}else throw new j}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,n){var r=e.getWidth(),i=e.getHeight(),s=new Mt(r),o=n&&n.get(Je.TRY_HARDER)===!0,a=Math.max(1,i>>(o?8:5)),l;o?l=i:l=15;for(var c=Math.trunc(i/2),d=0;d<l;d++){var f=Math.trunc((d+1)/2),h=(d&1)===0,p=c+a*(h?f:-f);if(p<0||p>=i)break;try{s=e.getBlackRow(p,s)}catch{continue}for(var m=function(g){if(g===1&&(s.reverse(),n&&n.get(Je.NEED_RESULT_POINT_CALLBACK)===!0)){var x=new Map;n.forEach(function(E,A){return x.set(A,E)}),x.delete(Je.NEED_RESULT_POINT_CALLBACK),n=x}try{var _=v.decodeRow(p,s,n);if(g===1){_.putMetadata($t.ORIENTATION,180);var C=_.getResultPoints();C!==null&&(C[0]=new J(r-C[0].getX()-1,C[0].getY()),C[1]=new J(r-C[1].getX()-1,C[1].getY()))}return{value:_}}catch{}},v=this,w=0;w<2;w++){var y=m(w);if(typeof y=="object")return y.value}}throw new j},t.recordPattern=function(e,n,r){for(var i=r.length,s=0;s<i;s++)r[s]=0;var o=e.getSize();if(n>=o)throw new j;for(var a=!e.get(n),l=0,c=n;c<o;){if(e.get(c)!==a)r[l]++;else{if(++l===i)break;r[l]=1,a=!a}c++}if(!(l===i||l===i-1&&c===o))throw new j},t.recordPatternInReverse=function(e,n,r){for(var i=r.length,s=e.get(n);n>0&&i>=0;)e.get(--n)!==s&&(i--,s=!s);if(i>=0)throw new j;t.recordPattern(e,n+1,r)},t.patternMatchVariance=function(e,n,r){for(var i=e.length,s=0,o=0,a=0;a<i;a++)s+=e[a],o+=n[a];if(s<o)return Number.POSITIVE_INFINITY;var l=s/o;r*=l;for(var c=0,d=0;d<i;d++){var f=e[d],h=n[d]*l,p=f>h?f-h:h-f;if(p>r)return Number.POSITIVE_INFINITY;c+=p}return c/s},t}(),eV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),s_=function(t){eV(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(n){for(var r=n.getSize(),i=n.getNextSet(0),s=0,o=Int32Array.from([0,0,0,0,0,0]),a=i,l=!1,c=6,d=i;d<r;d++)if(n.get(d)!==l)o[s]++;else{if(s===c-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var m=At.patternMatchVariance(o,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,h=p)}if(h>=0&&n.isRange(Math.max(0,a-(d-a)/2),a,!1))return Int32Array.from([a,d,h]);a+=o[0]+o[1],o=o.slice(2,o.length),o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,l=!l}throw new j},e.decodeCode=function(n,r,i){At.recordPattern(n,i,r);for(var s=e.MAX_AVG_VARIANCE,o=-1,a=0;a<e.CODE_PATTERNS.length;a++){var l=e.CODE_PATTERNS[a],c=this.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<s&&(s=c,o=a)}if(o>=0)return o;throw new j},e.prototype.decodeRow=function(n,r,i){var s=i&&i.get(Je.ASSUME_GS1)===!0,o=e.findStartPattern(r),a=o[2],l=0,c=new Uint8Array(20);c[l++]=a;var d;switch(a){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new K}for(var f=!1,h=!1,p="",m=o[0],v=o[1],w=Int32Array.from([0,0,0,0,0,0]),y=0,g=0,x=a,_=0,C=!0,E=!1,A=!1;!f;){var T=h;switch(h=!1,y=g,g=e.decodeCode(r,w,v),c[l++]=g,g!==e.CODE_STOP&&(C=!0),g!==e.CODE_STOP&&(_++,x+=_*g),m=v,v+=w.reduce(function(se,V){return se+V},0),g){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new K}switch(d){case e.CODE_CODE_A:if(g<64)A===E?p+=String.fromCharCode(32+g):p+=String.fromCharCode(32+g+128),A=!1;else if(g<96)A===E?p+=String.fromCharCode(g-64):p+=String.fromCharCode(g+64),A=!1;else switch(g!==e.CODE_STOP&&(C=!1),g){case e.CODE_FNC_1:s&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!E&&A?(E=!0,A=!1):E&&A?(E=!1,A=!1):A=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(g<96)A===E?p+=String.fromCharCode(32+g):p+=String.fromCharCode(32+g+128),A=!1;else switch(g!==e.CODE_STOP&&(C=!1),g){case e.CODE_FNC_1:s&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!E&&A?(E=!0,A=!1):E&&A?(E=!1,A=!1):A=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(g<100)g<10&&(p+="0"),p+=g;else switch(g!==e.CODE_STOP&&(C=!1),g){case e.CODE_FNC_1:s&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}T&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var k=v-m;if(v=r.getNextUnset(v),!r.isRange(v,Math.min(r.getSize(),v+(v-m)/2),!1))throw new j;if(x-=_*y,x%103!==y)throw new Dt;var O=p.length;if(O===0)throw new j;O>0&&C&&(d===e.CODE_CODE_C?p=p.substring(0,O-2):p=p.substring(0,O-1));for(var q=(o[1]+o[0])/2,G=m+k/2,D=c.length,L=new Uint8Array(D),ne=0;ne<D;ne++)L[ne]=c[ne];var de=[new J(q,n),new J(G,n)];return new sn(p,L,0,de,ie.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(At),tV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),N0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o_=function(t){tV(e,t);function e(n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var i=t.call(this)||this;return i.usingCheckDigit=n,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(n,r,i){var s,o,a,l,c=this.counters;c.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(r,c),f=r.getNextSet(d[1]),h=r.getSize(),p,m;do{e.recordPattern(r,f,c);var v=e.toNarrowWidePattern(c);if(v<0)throw new j;p=e.patternToChar(v),this.decodeRowResult+=p,m=f;try{for(var w=(s=void 0,N0(c)),y=w.next();!y.done;y=w.next()){var g=y.value;f+=g}}catch(D){s={error:D}}finally{try{y&&!y.done&&(o=w.return)&&o.call(w)}finally{if(s)throw s.error}}f=r.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var x=0;try{for(var _=N0(c),C=_.next();!C.done;C=_.next()){var g=C.value;x+=g}}catch(D){a={error:D}}finally{try{C&&!C.done&&(l=_.return)&&l.call(_)}finally{if(a)throw a.error}}var E=f-m-x;if(f!==h&&E*2<x)throw new j;if(this.usingCheckDigit){for(var A=this.decodeRowResult.length-1,T=0,k=0;k<A;k++)T+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(k));if(this.decodeRowResult.charAt(A)!==e.ALPHABET_STRING.charAt(T%43))throw new Dt;this.decodeRowResult=this.decodeRowResult.substring(0,A)}if(this.decodeRowResult.length===0)throw new j;var O;this.extendedMode?O=e.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;var q=(d[1]+d[0])/2,G=m+x/2;return new sn(O,null,0,[new J(q,n),new J(G,n)],ie.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(n,r){for(var i=n.getSize(),s=n.getNextSet(0),o=0,a=s,l=!1,c=r.length,d=s;d<i;d++)if(n.get(d)!==l)r[o]++;else{if(o===c-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,a-Math.floor((d-a)/2)),a,!1))return[a,d];a+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,l=!l}throw new j},e.toNarrowWidePattern=function(n){var r,i,s=n.length,o=0,a;do{var l=2147483647;try{for(var c=(r=void 0,N0(n)),d=c.next();!d.done;d=c.next()){var f=d.value;f<l&&f>o&&(l=f)}}catch(v){r={error:v}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}o=l,a=0;for(var h=0,p=0,m=0;m<s;m++){var f=n[m];f>o&&(p|=1<<s-1-m,a++,h+=f)}if(a===3){for(var m=0;m<s&&a>0;m++){var f=n[m];if(f>o&&(a--,f*2>=h))return-1}return p}}while(a>3);return-1},e.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);if(n===e.ASTERISK_ENCODING)return"*";throw new j},e.decodeExtended=function(n){for(var r=n.length,i="",s=0;s<r;s++){var o=n.charAt(s);if(o==="+"||o==="$"||o==="%"||o==="/"){var a=n.charAt(s+1),l="\0";switch(o){case"+":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)+32);else throw new K;break;case"$":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)-64);else throw new K;break;case"%":if(a>="A"&&a<="E")l=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")l=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")l=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")l="\0";else if(a==="V")l="@";else if(a==="W")l="`";else if(a==="X"||a==="Y"||a==="Z")l="";else throw new K;break;case"/":if(a>="A"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")l=":";else throw new K;break}i+=l,s++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(At),nV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),T0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a_=function(t){nV(e,t);function e(){var n=t.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return e.prototype.decodeRow=function(n,r,i){var s,o,a,l,c=this.findAsteriskPattern(r),d=r.getNextSet(c[1]),f=r.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var p,m;do{e.recordPattern(r,d,h);var v=this.toPattern(h);if(v<0)throw new j;p=this.patternToChar(v),this.decodeRowResult+=p,m=d;try{for(var w=(s=void 0,T0(h)),y=w.next();!y.done;y=w.next()){var g=y.value;d+=g}}catch(k){s={error:k}}finally{try{y&&!y.done&&(o=w.return)&&o.call(w)}finally{if(s)throw s.error}}d=r.getNextSet(d)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var x=0;try{for(var _=T0(h),C=_.next();!C.done;C=_.next()){var g=C.value;x+=g}}catch(k){a={error:k}}finally{try{C&&!C.done&&(l=_.return)&&l.call(_)}finally{if(a)throw a.error}}if(d===f||!r.get(d))throw new j;if(this.decodeRowResult.length<2)throw new j;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var E=this.decodeExtended(this.decodeRowResult),A=(c[1]+c[0])/2,T=m+x/2;return new sn(E,null,0,[new J(A,n),new J(T,n)],ie.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(n){var r=n.getSize(),i=n.getNextSet(0);this.counters.fill(0);for(var s=this.counters,o=i,a=!1,l=s.length,c=0,d=i;d<r;d++)if(n.get(d)!==a)s[c]++;else{if(c===l-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=s[0]+s[1],s.copyWithin(0,2,2+c-1),s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,a=!a}throw new j},e.prototype.toPattern=function(n){var r,i,s=0;try{for(var o=T0(n),a=o.next();!a.done;a=o.next()){var l=a.value;s+=l}}catch(m){r={error:m}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var c=0,d=n.length,f=0;f<d;f++){var h=Math.round(n[f]*9/s);if(h<1||h>4)return-1;if(f&1)c<<=h;else for(var p=0;p<h;p++)c=c<<1|1}return c},e.prototype.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);throw new j},e.prototype.decodeExtended=function(n){for(var r=n.length,i="",s=0;s<r;s++){var o=n.charAt(s);if(o>="a"&&o<="d"){if(s>=r-1)throw new K;var a=n.charAt(s+1),l="\0";switch(o){case"d":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)+32);else throw new K;break;case"a":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)-64);else throw new K;break;case"b":if(a>="A"&&a<="E")l=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")l=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")l=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")l="\0";else if(a==="V")l="@";else if(a==="W")l="`";else if(a>="X"&&a<="Z")l="";else throw new K;break;case"c":if(a>="A"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")l=":";else throw new K;break}i+=l,s++}else i+=o}return i},e.prototype.checkChecksums=function(n){var r=n.length;this.checkOneChecksum(n,r-2,20),this.checkOneChecksum(n,r-1,15)},e.prototype.checkOneChecksum=function(n,r,i){for(var s=1,o=0,a=r-1;a>=0;a--)o+=s*e.ALPHABET_STRING.indexOf(n.charAt(a)),++s>i&&(s=1);if(n.charAt(r)!==e.ALPHABET_STRING[o%47])throw new Dt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(At),rV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),iV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l_=function(t){rV(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return e.prototype.decodeRow=function(n,r,i){var s,o,a=this.decodeStart(r),l=this.decodeEnd(r),c=new he;e.decodeMiddle(r,a[1],l[0],c);var d=c.toString(),f=null;i!=null&&(f=i.get(Je.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=d.length,p=!1,m=0;try{for(var v=iV(f),w=v.next();!w.done;w=v.next()){var y=w.value;if(h===y){p=!0;break}y>m&&(m=y)}}catch(_){s={error:_}}finally{try{w&&!w.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}if(!p&&h>m&&(p=!0),!p)throw new K;var g=[new J(a[1],n),new J(l[0],n)],x=new sn(d,null,0,g,ie.ITF,new Date().getTime());return x},e.decodeMiddle=function(n,r,i,s){var o=new Int32Array(10),a=new Int32Array(5),l=new Int32Array(5);for(o.fill(0),a.fill(0),l.fill(0);r<i;){At.recordPattern(n,r,o);for(var c=0;c<5;c++){var d=2*c;a[c]=o[d],l[c]=o[d+1]}var f=e.decodeDigit(a);s.append(f.toString()),f=this.decodeDigit(l),s.append(f.toString()),o.forEach(function(h){r+=h})}},e.prototype.decodeStart=function(n){var r=e.skipWhiteSpace(n),i=e.findGuardPattern(n,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(n,i[0]),i},e.prototype.validateQuietZone=function(n,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var s=r-1;i>0&&s>=0&&!n.get(s);s--)i--;if(i!==0)throw new j},e.skipWhiteSpace=function(n){var r=n.getSize(),i=n.getNextSet(0);if(i===r)throw new j;return i},e.prototype.decodeEnd=function(n){n.reverse();try{var r=e.skipWhiteSpace(n),i=void 0;try{i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof j&&(i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,i[0]);var s=i[0];return i[0]=n.getSize()-i[1],i[1]=n.getSize()-s,i}finally{n.reverse()}},e.findGuardPattern=function(n,r,i){var s=i.length,o=new Int32Array(s),a=n.getSize(),l=!1,c=0,d=r;o.fill(0);for(var f=r;f<a;f++)if(n.get(f)!==l)o[c]++;else{if(c===s-1){if(At.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=o[0]+o[1],He.arraycopy(o,2,o,0,c-1),o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,l=!l}throw new j},e.decodeDigit=function(n){for(var r=e.MAX_AVG_VARIANCE,i=-1,s=e.PATTERNS.length,o=0;o<s;o++){var a=e.PATTERNS[o],l=At.patternMatchVariance(n,a,e.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,i=o):l===r&&(i=-1)}if(i>=0)return i%10;throw new j},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(At),sV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_a=function(t){sV(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return e.findStartGuardPattern=function(n){for(var r=!1,i,s=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(n,s,!1,this.START_END_PATTERN,o);var a=i[0];s=i[1];var l=a-(s-a);l>=0&&(r=n.isRange(l,a,!1))}return i},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,s=r-1;s>=0;s-=2){var o=n.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new K;i+=o}i*=3;for(var s=r-2;s>=0;s-=2){var o=n.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new K;i+=o}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,r,i,s){return this.findGuardPattern(n,r,i,s,new Int32Array(s.length))},e.findGuardPattern=function(n,r,i,s,o){var a=n.getSize();r=i?n.getNextUnset(r):n.getNextSet(r);for(var l=0,c=r,d=s.length,f=i,h=r;h<a;h++)if(n.get(h)!==f)o[l]++;else{if(l===d-1){if(At.patternMatchVariance(o,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([c,h]);c+=o[0]+o[1];for(var p=o.slice(2,o.length),m=0;m<l-1;m++)o[m]=p[m];o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,f=!f}throw new j},e.decodeDigit=function(n,r,i,s){this.recordPattern(n,i,r);for(var o=this.MAX_AVG_VARIANCE,a=-1,l=s.length,c=0;c<l;c++){var d=s[c],f=At.patternMatchVariance(r,d,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,a=c)}if(a>=0)return a;throw new j},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(At),oV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aV=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(n,r,i),o=i.toString(),a=t.parseExtensionString(o),l=[new J((r[0]+r[1])/2,e),new J(s,e)],c=new sn(o,null,0,l,ie.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&c.putAllMetadata(a),c},t.prototype.decodeMiddle=function(e,n,r){var i,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var a=e.getSize(),l=n[1],c=0,d=0;d<5&&l<a;d++){var f=_a.decodeDigit(e,o,l,_a.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var h=(i=void 0,oV(o)),p=h.next();!p.done;p=h.next()){var m=p.value;l+=m}}catch(w){i={error:w}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}f>=10&&(c|=1<<4-d),d!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==5)throw new j;var v=this.determineCheckDigit(c);if(t.extensionChecksum(r.toString())!==v)throw new j;return l},t.extensionChecksum=function(e){for(var n=e.length,r=0,i=n-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=n-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},t.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new j},t.parseExtensionString=function(e){if(e.length!==5)return null;var n=t.parseExtension5String(e);return n==null?null:new Map([[$t.SUGGESTED_PRICE,n]])},t.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),s=r%100,o=s<10?"0"+s:s.toString();return n+i+"."+o},t}(),lV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cV=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,s=this.decodeMiddle(n,r,i),o=i.toString(),a=t.parseExtensionString(o),l=[new J((r[0]+r[1])/2,e),new J(s,e)],c=new sn(o,null,0,l,ie.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&c.putAllMetadata(a),c},t.prototype.decodeMiddle=function(e,n,r){var i,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var a=e.getSize(),l=n[1],c=0,d=0;d<2&&l<a;d++){var f=_a.decodeDigit(e,o,l,_a.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var h=(i=void 0,lV(o)),p=h.next();!p.done;p=h.next()){var m=p.value;l+=m}}catch(v){i={error:v}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}f>=10&&(c|=1<<1-d),d!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==2)throw new j;if(parseInt(r.toString())%4!==c)throw new j;return l},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[$t.ISSUE_NUMBER,parseInt(e)]])},t}(),uV=function(){function t(){}return t.decodeRow=function(e,n,r){var i=_a.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new aV;return s.decodeRow(e,n,i)}catch{var o=new cV;return o.decodeRow(e,n,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),dV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xt=function(t){dV(e,t);function e(){var n=t.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],s=new Int32Array(i.length),o=0;o<i.length;o++)s[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=s}return n}return e.prototype.decodeRow=function(n,r,i){var s=e.findStartGuardPattern(r),o=i==null?null:i.get(Je.NEED_RESULT_POINT_CALLBACK);if(o!=null){var a=new J((s[0]+s[1])/2,n);o.foundPossibleResultPoint(a)}var l=this.decodeMiddle(r,s,this.decodeRowStringBuffer),c=l.rowOffset,d=l.resultString;if(o!=null){var f=new J(c,n);o.foundPossibleResultPoint(f)}var h=e.decodeEnd(r,c);if(o!=null){var p=new J((h[0]+h[1])/2,n);o.foundPossibleResultPoint(p)}var m=h[1],v=m+(m-h[0]);if(v>=r.getSize()||!r.isRange(m,v,!1))throw new j;var w=d.toString();if(w.length<8)throw new K;if(!e.checkChecksum(w))throw new Dt;var y=(s[1]+s[0])/2,g=(h[1]+h[0])/2,x=this.getBarcodeFormat(),_=[new J(y,n),new J(g,n)],C=new sn(w,null,0,_,x,new Date().getTime()),E=0;try{var A=uV.decodeRow(n,r,h[1]);C.putMetadata($t.UPC_EAN_EXTENSION,A.getText()),C.putAllMetadata(A.getResultMetadata()),C.addResultPoints(A.getResultPoints()),E=A.getText().length}catch{}var T=i==null?null:i.get(Je.ALLOWED_EAN_EXTENSIONS);if(T!=null){var k=!1;for(var O in T)if(E.toString()===O){k=!0;break}if(!k)throw new j}return x===ie.EAN_13||ie.UPC_A,C},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,s=r-1;s>=0;s-=2){var o=n.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new K;i+=o}i*=3;for(var s=r-2;s>=0;s-=2){var o=n.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new K;i+=o}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(_a),fV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),c_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j1=function(t){fV(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var s,o,a,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var d=n.getSize(),f=r[1],h=0,p=0;p<6&&f<d;p++){var m=xt.decodeDigit(n,c,f,xt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var v=(s=void 0,c_(c)),w=v.next();!w.done;w=v.next()){var y=w.value;f+=y}}catch(C){s={error:C}}finally{try{w&&!w.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}m>=10&&(h|=1<<5-p)}i=e.determineFirstDigit(i,h);var g=xt.findGuardPattern(n,f,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0));f=g[1];for(var p=0;p<6&&f<d;p++){var m=xt.decodeDigit(n,c,f,xt.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var x=(a=void 0,c_(c)),_=x.next();!_.done;_=x.next()){var y=_.value;f+=y}}catch(A){a={error:A}}finally{try{_&&!_.done&&(l=x.return)&&l.call(x)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return ie.EAN_13},e.determineFirstDigit=function(n,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return n=String.fromCharCode(48+i)+n,n;throw new j},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(xt),hV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),u_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d_=function(t){hV(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var s,o,a,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var d=n.getSize(),f=r[1],h=0;h<4&&f<d;h++){var p=xt.decodeDigit(n,c,f,xt.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var m=(s=void 0,u_(c)),v=m.next();!v.done;v=m.next()){var w=v.value;f+=w}}catch(_){s={error:_}}finally{try{v&&!v.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}}var y=xt.findGuardPattern(n,f,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var h=0;h<4&&f<d;h++){var p=xt.decodeDigit(n,c,f,xt.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var g=(a=void 0,u_(c)),x=g.next();!x.done;x=g.next()){var w=x.value;f+=w}}catch(E){a={error:E}}finally{try{x&&!x.done&&(l=g.return)&&l.call(g)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return ie.EAN_8},e}(xt),pV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),f_=function(t){pV(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ean13Reader=new j1,n}return e.prototype.getBarcodeFormat=function(){return ie.UPC_A},e.prototype.decode=function(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,i))},e.prototype.decodeMiddle=function(n,r,i){return this.ean13Reader.decodeMiddle(n,r,i)},e.prototype.maybeReturnResult=function(n){var r=n.getText();if(r.charAt(0)==="0"){var i=new sn(r.substring(1),null,null,n.getResultPoints(),ie.UPC_A);return n.getResultMetadata()!=null&&i.putAllMetadata(n.getResultMetadata()),i}else throw new j},e.prototype.reset=function(){this.ean13Reader.reset()},e}(xt),mV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h_=function(t){mV(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return e.prototype.decodeMiddle=function(n,r,i){var s,o,a=this.decodeMiddleCounters.map(function(w){return w});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var l=n.getSize(),c=r[1],d=0,f=0;f<6&&c<l;f++){var h=e.decodeDigit(n,a,c,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+h%10);try{for(var p=(s=void 0,gV(a)),m=p.next();!m.done;m=p.next()){var v=m.value;c+=v}}catch(w){s={error:w}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}h>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new he(i),d),c},e.prototype.decodeEnd=function(n,r){return e.findGuardPatternWithoutCounters(n,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return xt.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,r){for(var i=0;i<=1;i++)for(var s=0;s<10;s++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][s]){n.insert(0,"0"+i),n.append("0"+s);return}throw j.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ie.UPC_E},e.convertUPCEtoUPCA=function(n){var r=n.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new he;i.append(n.charAt(0));var s=r[5];switch(s){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(s),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(s);break}return n.length>=8&&i.append(n.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(xt),vV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),p_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I0=function(t){vV(e,t);function e(n){var r=t.call(this)||this,i=n==null?null:n.get(Je.POSSIBLE_FORMATS),s=[];return i!=null&&(i.indexOf(ie.EAN_13)>-1&&s.push(new j1),i.indexOf(ie.UPC_A)>-1&&s.push(new f_),i.indexOf(ie.EAN_8)>-1&&s.push(new d_),i.indexOf(ie.UPC_E)>-1&&s.push(new h_)),s.length===0&&(s.push(new j1),s.push(new f_),s.push(new d_),s.push(new h_)),r.readers=s,r}return e.prototype.decodeRow=function(n,r,i){var s,o;try{for(var a=p_(this.readers),l=a.next();!l.done;l=a.next()){var c=l.value;try{var d=c.decodeRow(n,r,i),f=d.getBarcodeFormat()===ie.EAN_13&&d.getText().charAt(0)==="0",h=i==null?null:i.get(Je.POSSIBLE_FORMATS),p=h==null||h.includes(ie.UPC_A);if(f&&p){var m=d.getRawBytes(),v=new sn(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),ie.UPC_A);return v.putAllMetadata(d.getResultMetadata()),v}return d}catch{}}}catch(w){s={error:w}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(s)throw s.error}}throw new j},e.prototype.reset=function(){var n,r;try{for(var i=p_(this.readers),s=i.next();!s.done;s=i.next()){var o=s.value;o.reset()}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e}(At),yV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xV=function(t){yV(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return e.prototype.decodeRow=function(n,r,i){var s=this.getValidRowData(r);if(!s)throw new j;var o=this.codaBarDecodeRow(s.row);if(!o)throw new j;return new sn(o,null,0,[new J(s.left,n),new J(s.right,n)],ie.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(n){var r=n.toArray(),i=r.indexOf(!0);if(i===-1)return null;var s=r.lastIndexOf(!0);if(s<=i)return null;r=r.slice(i,s+1);for(var o=[],a=r[0],l=1,c=1;c<r.length;c++)r[c]===a?l++:(a=r[c],o.push(l),l=1);return o.push(l),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:s}},e.prototype.codaBarDecodeRow=function(n){for(var r=[],i=Math.ceil(n.reduce(function(l,c){return(l+c)/2},0));n.length>0;){var s=n.splice(0,8).splice(0,7),o=s.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var a=r.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(n){var r=/^[A-D].{1,}[A-D]$/;return r.test(n)},e}(At),wV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_V=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ps=function(t){wV(e,t);function e(){var n=t.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,r){for(var i=0;i<r.length;i++)if(At.patternMatchVariance(n,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new j},e.count=function(n){return Ne.sum(new Int32Array(n))},e.increment=function(n,r){for(var i=0,s=r[0],o=1;o<n.length;o++)r[o]>s&&(s=r[o],i=o);n[i]++},e.decrement=function(n,r){for(var i=0,s=r[0],o=1;o<n.length;o++)r[o]<s&&(s=r[o],i=o);n[i]--},e.isFinderPattern=function(n){var r,i,s=n[0]+n[1],o=s+n[2]+n[3],a=s/o;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;try{for(var d=_V(n),f=d.next();!f.done;f=d.next()){var h=f.value;h>c&&(c=h),h<l&&(l=h)}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return c<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(At),ff=function(){function t(e,n){this.value=e,this.checksumPortion=n}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),nT=function(){function t(e,n,r,i,s){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new J(r,s)),this.resultPoints.push(new J(i,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.hashCode=function(){return this.value},t}(),CV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vo=function(){function t(){}return t.getRSSvalue=function(e,n,r){var i,s,o=0;try{for(var a=CV(e),l=a.next();!l.done;l=a.next()){var c=l.value;o+=c}}catch(g){i={error:g}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}for(var d=0,f=0,h=e.length,p=0;p<h-1;p++){var m=void 0;for(m=1,f|=1<<p;m<e[p];m++,f&=~(1<<p)){var v=t.combins(o-m-1,h-p-2);if(r&&f===0&&o-m-(h-p-1)>=h-p-1&&(v-=t.combins(o-m-(h-p),h-p-2)),h-p-1>1){for(var w=0,y=o-m-(h-p-2);y>n;y--)w+=t.combins(o-m-y-1,h-p-3);v-=w*(h-1-p)}else o-m>n&&v--;d+=v}o-=m}return d},t.combins=function(e,n){var r,i;e-n>n?(i=n,r=e-n):(i=e-n,r=n);for(var s=1,o=1,a=e;a>r;a--)s*=a,o<=i&&(s/=o,o++);for(;o<=i;)s/=o,o++;return s},t}(),EV=function(){function t(){}return t.buildBitArray=function(e){var n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);for(var r=12*n,i=new Mt(r),s=0,o=e[0],a=o.getRightChar().getValue(),l=11;l>=0;--l)a&1<<l&&i.set(s),s++;for(var l=1;l<e.length;++l){for(var c=e[l],d=c.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&i.set(s),s++;if(c.getRightChar()!==null)for(var h=c.getRightChar().getValue(),f=11;f>=0;--f)h&1<<f&&i.set(s),s++}return i},t}(),Es=function(){function t(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),Uv=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),SV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sr=function(t){SV(e,t);function e(n,r){var i=t.call(this,n)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Uv),bV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ss=function(t){bV(e,t);function e(n,r,i){var s=t.call(this,n)||this;return i?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=r,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Uv),AV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xo=function(t){AV(e,t);function e(n,r,i){var s=t.call(this,n)||this;if(r<0||r>10||i<0||i>10)throw new K;return s.firstDigit=r,s.secondDigit=i,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Uv),bu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NV=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var n,r,i,s,o,a,l,c;if(!e)return null;if(e.length<2)throw new j;var d=e.substring(0,2);try{for(var f=bu(t.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var p=h.value;if(p[0]===d)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch(E){n={error:E}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}if(e.length<3)throw new j;var m=e.substring(0,3);try{for(var v=bu(t.THREE_DIGIT_DATA_LENGTH),w=v.next();!w.done;w=v.next()){var p=w.value;if(p[0]===m)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch(E){i={error:E}}finally{try{w&&!w.done&&(s=v.return)&&s.call(v)}finally{if(i)throw i.error}}try{for(var y=bu(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),g=y.next();!g.done;g=y.next()){var p=g.value;if(p[0]===m)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(E){o={error:E}}finally{try{g&&!g.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}if(e.length<4)throw new j;var x=e.substring(0,4);try{for(var _=bu(t.FOUR_DIGIT_DATA_LENGTH),C=_.next();!C.done;C=_.next()){var p=C.value;if(p[0]===x)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(E){l={error:E}}finally{try{C&&!C.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}throw new j},t.processFixedAI=function(e,n,r){if(r.length<e)throw new j;var i=r.substring(0,e);if(r.length<e+n)throw new j;var s=r.substring(e,e+n),o=r.substring(e+n),a="("+i+")"+s,l=t.parseFieldsInGeneralPurpose(o);return l==null?a:a+l},t.processVariableAI=function(e,n,r){var i=r.substring(0,e),s;r.length<e+n?s=r.length:s=e+n;var o=r.substring(e,s),a=r.substring(s),l="("+i+")"+o,c=t.parseFieldsInGeneralPurpose(a);return c==null?l:l+c},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),Zu=function(){function t(e){this.buffer=new he,this.information=e}return t.prototype.decodeAllCodes=function(e,n){var r=n,i=null;do{var s=this.decodeGeneralPurposeField(r,i),o=NV.parseFieldsInGeneralPurpose(s.getNewString());if(o!=null&&e.append(o),s.isRemaining()?i=""+s.getRemainingValue():i=null,r===s.getNewPosition())break;r=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return n===0?new xo(this.information.getSize(),xo.FNC1,xo.FNC1):new xo(this.information.getSize(),n-1,xo.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,s=(r-8)%11;return new xo(e+7,i,s)},t.prototype.extractNumericValueFromBitArray=function(e,n){return t.extractNumericValueFromBitArray(this.information,e,n)},t.extractNumericValueFromBitArray=function(e,n,r){for(var i=0,s=0;s<r;++s)e.get(n+s)&&(i|=1<<r-s-1);return i},t.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Ss(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Ss(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,n;do{var r=this.current.getPosition();this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return n.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return e.isSecondDigitFNC1()?n=new Ss(this.current.getPosition(),this.buffer.toString()):n=new Ss(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Es(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var n=new Ss(this.current.getPosition(),this.buffer.toString());return new Es(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Es(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Ss(this.current.getPosition(),this.buffer.toString());return new Es(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Es(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Ss(this.current.getPosition(),this.buffer.toString());return new Es(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Es(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new sr(e+5,sr.FNC1);if(n>=5&&n<15)return new sr(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new sr(e+7,""+(r+1));if(r>=90&&r<116)return new sr(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),s;switch(i){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new K}return new sr(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new sr(e+5,sr.FNC1);if(n>=5&&n<15)return new sr(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new sr(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Xc("Decoding invalid alphanumeric value: "+r)}return new sr(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},t}(),rT=function(){function t(e){this.information=e,this.generalDecoder=new Zu(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),TV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pr=function(t){TV(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedGtin=function(n,r){n.append("(01)");var i=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(n,r,i){for(var s=0;s<4;++s){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*s,10);o/100===0&&n.append("0"),o/10===0&&n.append("0"),n.append(o)}e.appendCheckDigit(n,i)},e.appendCheckDigit=function(n,r){for(var i=0,s=0;s<13;s++){var o=n.charAt(s+r).charCodeAt(0)-48;i+=s&1?o:3*o}i=10-i%10,i===10&&(i=0),n.append(i)},e.GTIN_SIZE=40,e}(rT),IV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kV=function(t){IV(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new he;n.append("(01)");var r=n.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(i),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(pr),PV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),RV=function(t){PV(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new he;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(rT),OV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ju=function(t){OV(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedWeight=function(n,r,i){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(n,s);for(var o=this.checkWeight(s),a=1e5,l=0;l<5;++l)o/a===0&&n.append("0"),a/=10;n.append(o)},e}(pr),DV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),iT=function(t){DV(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Ju.GTIN_SIZE+e.WEIGHT_SIZE)throw new j;var n=new he;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+Ju.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Ju),MV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jV=function(t){MV(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e}(iT),LV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FV=function(t){LV(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e}(iT),BV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),UV=function(t){BV(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+pr.GTIN_SIZE)throw new j;var n=new he;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+pr.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+pr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(i.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(pr),VV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HV=function(t){VV(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+pr.GTIN_SIZE)throw new j;var n=new he;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+pr.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+pr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&n.append("0"),i/10===0&&n.append("0"),n.append(i);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+pr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(s.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(pr),WV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Si=function(t){WV(e,t);function e(n,r,i){var s=t.call(this,n)||this;return s.dateCode=i,s.firstAIdigits=r,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new j;var n=new he;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){n.append("("),n.append(this.dateCode),n.append(")");var s=i%32;i/=32;var o=i%12+1;i/=12;var a=i;a/10===0&&n.append("0"),n.append(a),o/10===0&&n.append("0"),n.append(o),s/10===0&&n.append("0"),n.append(s)}},e.prototype.addWeightCode=function(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Ju);function zV(t){try{if(t.get(1))return new kV(t);if(!t.get(2))return new RV(t);var e=Zu.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new jV(t);case 5:return new FV(t)}var n=Zu.extractNumericValueFromBitArray(t,1,5);switch(n){case 12:return new UV(t);case 13:return new HV(t)}var r=Zu.extractNumericValueFromBitArray(t,1,7);switch(r){case 56:return new Si(t,"310","11");case 57:return new Si(t,"320","11");case 58:return new Si(t,"310","13");case 59:return new Si(t,"320","13");case 60:return new Si(t,"310","15");case 61:return new Si(t,"320","15");case 62:return new Si(t,"310","17");case 63:return new Si(t,"320","17")}}catch(i){throw console.log(i),new Xc("unknown decoder: "+t)}}var m_=function(){function t(e,n,r,i){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,n){return e instanceof t?t.equalsOrNull(e.leftchar,n.leftchar)&&t.equalsOrNull(e.rightchar,n.rightchar)&&t.equalsOrNull(e.finderpattern,n.finderpattern):!1},t.equalsOrNull=function(e,n){return e===null?n===null:t.equals(e,n)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),$V=function(){function t(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,n){return e instanceof t?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1},t.prototype.checkEqualitity=function(e,n){if(!(!e||!n)){var r;return e.forEach(function(i,s){n.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},t}(),GV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bi=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KV=function(t){GV(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return e.prototype.decodeRow=function(n,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(a){if(a instanceof j){if(!this.pairs.length)throw new j;i=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(n,!1),s){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new j},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return n&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(n,r){for(var i,s,o=r;o<this.rows.length;o++){var a=this.rows[o];this.pairs.length=0;try{for(var l=(i=void 0,bi(n)),c=l.next();!c.done;c=l.next()){var d=c.value;this.pairs.push(d.getPairs())}}catch(h){i={error:h}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(n);f.push(a);try{return this.checkRows(f,o+1)}catch(h){console.log(h)}}}throw new j},e.isValidSequence=function(n){var r,i;try{for(var s=bi(e.FINDER_PATTERN_SEQUENCES),o=s.next();!o.done;o=s.next()){var a=o.value;if(!(n.length>a.length)){for(var l=!0,c=0;c<n.length;c++)if(n[c].getFinderPattern().getValue()!==a[c]){l=!1;break}if(l)return!0}}}catch(d){r={error:d}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(n,r){for(var i=0,s=!1,o=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>n){o=a.isEquivalent(this.pairs);break}s=a.isEquivalent(this.pairs),i++}o||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new $V(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,r){var i,s,o,a,l,c;try{for(var d=bi(r),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.getPairs().length!==n.length){var p=!0;try{for(var m=(o=void 0,bi(h.getPairs())),v=m.next();!v.done;v=m.next()){var w=v.value,y=!1;try{for(var g=(l=void 0,bi(n)),x=g.next();!x.done;x=g.next()){var _=x.value;if(m_.equals(w,_)){y=!0;break}}}catch(C){l={error:C}}finally{try{x&&!x.done&&(c=g.return)&&c.call(g)}finally{if(l)throw l.error}}y||(p=!1)}}catch(C){o={error:C}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}}}}catch(C){i={error:C}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(n,r){var i,s,o,a,l,c;try{for(var d=bi(r),f=d.next();!f.done;f=d.next()){var h=f.value,p=!0;try{for(var m=(o=void 0,bi(n)),v=m.next();!v.done;v=m.next()){var w=v.value,y=!1;try{for(var g=(l=void 0,bi(h.getPairs())),x=g.next();!x.done;x=g.next()){var _=x.value;if(w.equals(_)){y=!0;break}}}catch(C){l={error:C}}finally{try{x&&!x.done&&(c=g.return)&&c.call(g)}finally{if(l)throw l.error}}if(!y){p=!1;break}}}catch(C){o={error:C}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}if(p)return!0}}catch(C){i={error:C}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var r=EV.buildBitArray(n),i=zV(r),s=i.parseInformation(),o=n[0].getFinderPattern().getResultPoints(),a=n[n.length-1].getFinderPattern().getResultPoints(),l=[o[0],o[1],a[0],a[1]];return new sn(s,null,null,l,ie.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),r=n.getLeftChar(),i=n.getRightChar();if(i===null)return!1;for(var s=i.getChecksumPortion(),o=2,a=1;a<this.pairs.size();++a){var l=this.pairs.get(a);s+=l.getLeftChar().getChecksumPortion(),o++;var c=l.getRightChar();c!=null&&(s+=c.getChecksumPortion(),o++)}s%=211;var d=211*(o-4)+s;return d===r.getValue()},e.getNextSecondBar=function(n,r){var i;return n.get(r)?(i=n.getNextUnset(r),i=n.getNextSet(i)):(i=n.getNextSet(r),i=n.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(n,r,i){var s=r.length%2===0;this.startFromEven&&(s=!s);var o,a=!0,l=-1;do this.findNextPair(n,r,l),o=this.parseFoundFinderPattern(n,i,s),o===null?l=e.getNextSecondBar(n,this.startEnd[0]):a=!1;while(a);var c=this.decodeDataCharacter(n,o,s,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new j;var d;try{d=this.decodeDataCharacter(n,o,s,!1)}catch(f){d=null,console.log(f)}return new m_(c,d,o,!0)},e.prototype.isEmptyPair=function(n){return n.length===0},e.prototype.findNextPair=function(n,r,i){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var o=n.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(r))a=0;else{var l=r[r.length-1];a=l.getFinderPattern().getStartEnd()[1]}var c=r.length%2!==0;this.startFromEven&&(c=!c);for(var d=!1;a<o&&(d=!n.get(a),!!d);)a++;for(var f=0,h=a,p=a;p<o;p++)if(n.get(p)!==d)s[f]++;else{if(f===3){if(c&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=h,this.startEnd[1]=p;return}c&&e.reverseCounters(s),h+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,d=!d}throw new j},e.reverseCounters=function(n){for(var r=n.length,i=0;i<r/2;++i){var s=n[i];n[i]=n[r-i-1],n[r-i-1]=s}},e.prototype.parseFoundFinderPattern=function(n,r,i){var s,o,a;if(i){for(var l=this.startEnd[0]-1;l>=0&&!n.get(l);)l--;l++,s=this.startEnd[0]-l,o=l,a=this.startEnd[1]}else o=this.startEnd[0],a=n.getNextUnset(this.startEnd[1]+1),s=a-this.startEnd[1];var c=this.getDecodeFinderCounters();He.arraycopy(c,0,c,1,c.length-1),c[0]=s;var d;try{d=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch{return null}return new nT(d,[o,a],o,a,r)},e.prototype.decodeDataCharacter=function(n,r,i,s){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(s)e.recordPatternInReverse(n,r.getStartEnd()[0],o);else{e.recordPattern(n,r.getStartEnd()[1],o);for(var l=0,c=o.length-1;l<c;l++,c--){var d=o[l];o[l]=o[c],o[c]=d}}var f=17,h=Ne.sum(new Int32Array(o))/f,p=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new j;for(var m=this.getOddCounts(),v=this.getEvenCounts(),w=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),l=0;l<o.length;l++){var g=1*o[l]/h,x=g+.5;if(x<1){if(g<.3)throw new j;x=1}else if(x>8){if(g>8.7)throw new j;x=8}var _=l/2;l&1?(v[_]=x,y[_]=g-x):(m[_]=x,w[_]=g-x)}this.adjustOddEvenCounts(f);for(var C=4*r.getValue()+(i?0:2)+(s?0:1)-1,E=0,A=0,l=m.length-1;l>=0;l--){if(e.isNotA1left(r,i,s)){var T=e.WEIGHTS[C][2*l];A+=m[l]*T}E+=m[l]}for(var k=0,l=v.length-1;l>=0;l--)if(e.isNotA1left(r,i,s)){var T=e.WEIGHTS[C][2*l+1];k+=v[l]*T}var O=A+k;if(E&1||E>13||E<4)throw new j;var q=(13-E)/2,G=e.SYMBOL_WIDEST[q],D=9-G,L=Vo.getRSSvalue(m,G,!0),ne=Vo.getRSSvalue(v,D,!1),de=e.EVEN_TOTAL_SUBSET[q],se=e.GSUM[q],V=L*de+ne+se;return new ff(V,O)},e.isNotA1left=function(n,r,i){return!(n.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(n){var r=Ne.sum(new Int32Array(this.getOddCounts())),i=Ne.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1;r>13?o=!0:r<4&&(s=!0);var a=!1,l=!1;i>13?l=!0:i<4&&(a=!0);var c=r+i-n,d=(r&1)===1,f=(i&1)===0;if(c===1)if(d){if(f)throw new j;o=!0}else{if(!f)throw new j;l=!0}else if(c===-1)if(d){if(f)throw new j;s=!0}else{if(!f)throw new j;a=!0}else if(c===0){if(d){if(!f)throw new j;r<i?(s=!0,l=!0):(o=!0,a=!0)}else if(f)throw new j}else throw new j;if(s){if(o)throw new j;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(l)throw new j;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Ps),XV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YV=function(t){XV(e,t);function e(n,r,i){var s=t.call(this,n,r)||this;return s.count=0,s.finderPattern=i,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(ff),qV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),k0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g_=function(t){qV(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return e.prototype.decodeRow=function(n,r,i){var s,o,a,l,c=this.decodePair(r,!1,n,i);e.addOrTally(this.possibleLeftPairs,c),r.reverse();var d=this.decodePair(r,!0,n,i);e.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var f=k0(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var p=h.value;if(p.getCount()>1)try{for(var m=(a=void 0,k0(this.possibleRightPairs)),v=m.next();!v.done;v=m.next()){var w=v.value;if(w.getCount()>1&&e.checkChecksum(p,w))return e.constructResult(p,w)}}catch(y){a={error:y}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(a)throw a.error}}}}catch(y){s={error:y}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(s)throw s.error}}throw new j},e.addOrTally=function(n,r){var i,s;if(r!=null){var o=!1;try{for(var a=k0(n),l=a.next();!l.done;l=a.next()){var c=l.value;if(c.getValue()===r.getValue()){c.incrementCount(),o=!0;break}}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}o||n.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,r){for(var i=4537077*n.getValue()+r.getValue(),s=new String(i).toString(),o=new he,a=13-s.length;a>0;a--)o.append("0");o.append(s);for(var l=0,a=0;a<13;a++){var c=o.charAt(a).charCodeAt(0)-48;l+=a&1?c:3*c}l=10-l%10,l===10&&(l=0),o.append(l.toString());var d=n.getFinderPattern().getResultPoints(),f=r.getFinderPattern().getResultPoints();return new sn(o.toString(),null,0,[d[0],d[1],f[0],f[1]],ie.RSS_14,new Date().getTime())},e.checkChecksum=function(n,r){var i=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,s=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,i===s},e.prototype.decodePair=function(n,r,i,s){try{var o=this.findFinderPattern(n,r),a=this.parseFoundFinderPattern(n,i,r,o),l=s==null?null:s.get(Je.NEED_RESULT_POINT_CALLBACK);if(l!=null){var c=(o[0]+o[1])/2;r&&(c=n.getSize()-1-c),l.foundPossibleResultPoint(new J(c,i))}var d=this.decodeDataCharacter(n,a,!0),f=this.decodeDataCharacter(n,a,!1);return new YV(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(n,r,i){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(i)At.recordPatternInReverse(n,r.getStartEnd()[0],s);else{At.recordPattern(n,r.getStartEnd()[1]+1,s);for(var a=0,l=s.length-1;a<l;a++,l--){var c=s[a];s[a]=s[l],s[l]=c}}for(var d=i?16:15,f=Ne.sum(new Int32Array(s))/d,h=this.getOddCounts(),p=this.getEvenCounts(),m=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),a=0;a<s.length;a++){var w=s[a]/f,y=Math.floor(w+.5);y<1?y=1:y>8&&(y=8);var g=Math.floor(a/2);a&1?(p[g]=y,v[g]=w-y):(h[g]=y,m[g]=w-y)}this.adjustOddEvenCounts(i,d);for(var x=0,_=0,a=h.length-1;a>=0;a--)_*=9,_+=h[a],x+=h[a];for(var C=0,E=0,a=p.length-1;a>=0;a--)C*=9,C+=p[a],E+=p[a];var A=_+3*C;if(i){if(x&1||x>12||x<4)throw new j;var T=(12-x)/2,k=e.OUTSIDE_ODD_WIDEST[T],O=9-k,q=Vo.getRSSvalue(h,k,!1),G=Vo.getRSSvalue(p,O,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[T],L=e.OUTSIDE_GSUM[T];return new ff(q*D+G+L,A)}else{if(E&1||E>10||E<4)throw new j;var T=(10-E)/2,k=e.INSIDE_ODD_WIDEST[T],O=9-k,q=Vo.getRSSvalue(h,k,!0),G=Vo.getRSSvalue(p,O,!1),ne=e.INSIDE_ODD_TOTAL_SUBSET[T],L=e.INSIDE_GSUM[T];return new ff(G*ne+q+L,A)}},e.prototype.findFinderPattern=function(n,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=n.getSize(),o=!1,a=0;a<s&&(o=!n.get(a),r!==o);)a++;for(var l=0,c=a,d=a;d<s;d++)if(n.get(d)!==o)i[l]++;else{if(l===3){if(Ps.isFinderPattern(i))return[c,d];c+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,o=!o}throw new j},e.prototype.parseFoundFinderPattern=function(n,r,i,s){for(var o=n.get(s[0]),a=s[0]-1;a>=0&&o!==n.get(a);)a--;a++;var l=s[0]-a,c=this.getDecodeFinderCounters(),d=new Int32Array(c.length);He.arraycopy(c,0,d,1,c.length-1),d[0]=l;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),h=a,p=s[1];return i&&(h=n.getSize()-1-h,p=n.getSize()-1-p),new nT(f,[a,s[1]],h,p,r)},e.prototype.adjustOddEvenCounts=function(n,r){var i=Ne.sum(new Int32Array(this.getOddCounts())),s=Ne.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1,l=!1,c=!1;n?(i>12?a=!0:i<4&&(o=!0),s>12?c=!0:s<4&&(l=!0)):(i>11?a=!0:i<5&&(o=!0),s>10?c=!0:s<4&&(l=!0));var d=i+s-r,f=(i&1)===(n?1:0),h=(s&1)===1;if(d===1)if(f){if(h)throw new j;a=!0}else{if(!h)throw new j;c=!0}else if(d===-1)if(f){if(h)throw new j;o=!0}else{if(!h)throw new j;l=!0}else if(d===0){if(f){if(!h)throw new j;i<s?(o=!0,c=!0):(a=!0,l=!0)}else if(h)throw new j}else throw new j;if(o){if(a)throw new j;Ps.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Ps.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new j;Ps.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&Ps.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Ps),QV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dl=function(t){QV(e,t);function e(n){var r=t.call(this)||this;r.readers=[];var i=n?n.get(Je.POSSIBLE_FORMATS):null,s=n&&n.get(Je.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=n&&n.get(Je.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(ie.EAN_13)||i.includes(ie.UPC_A)||i.includes(ie.EAN_8)||i.includes(ie.UPC_E))&&r.readers.push(new I0(n)),i.includes(ie.CODE_39)&&r.readers.push(new o_(s,o)),i.includes(ie.CODE_93)&&r.readers.push(new a_),i.includes(ie.CODE_128)&&r.readers.push(new s_),i.includes(ie.ITF)&&r.readers.push(new l_),i.includes(ie.CODABAR)&&r.readers.push(new xV),i.includes(ie.RSS_14)&&r.readers.push(new g_),i.includes(ie.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new KV))),r.readers.length===0&&(r.readers.push(new I0(n)),r.readers.push(new o_),r.readers.push(new a_),r.readers.push(new I0(n)),r.readers.push(new s_),r.readers.push(new l_),r.readers.push(new g_)),r}return e.prototype.decodeRow=function(n,r,i){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(n,r,i)}catch{}throw new j},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e}(At),ZV=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){ZV(e,t);function e(n,r){return n===void 0&&(n=500),t.call(this,new dl(r),n,r)||this}return e})(ja);var v_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Re=function(){function t(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),ke=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),JV=function(){function t(e,n,r,i,s,o){var a,l;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=s,this.ecBlocks=o;var c=0,d=o.getECCodewords(),f=o.getECBlocks();try{for(var h=v_(f),p=h.next();!p.done;p=h.next()){var m=p.value;c+=m.getCount()*(m.getDataCodewords()+d)}}catch(v){a={error:v}}finally{try{p&&!p.done&&(l=h.return)&&l.call(h)}finally{if(a)throw a.error}}this.totalCodewords=c}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,n){var r,i;if(e&1||n&1)throw new K;try{for(var s=v_(t.VERSIONS),o=s.next();!o.done;o=s.next()){var a=o.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===n)return a}}catch(l){r={error:l}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}throw new K},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Re(5,new ke(1,3))),new t(2,12,12,10,10,new Re(7,new ke(1,5))),new t(3,14,14,12,12,new Re(10,new ke(1,8))),new t(4,16,16,14,14,new Re(12,new ke(1,12))),new t(5,18,18,16,16,new Re(14,new ke(1,18))),new t(6,20,20,18,18,new Re(18,new ke(1,22))),new t(7,22,22,20,20,new Re(20,new ke(1,30))),new t(8,24,24,22,22,new Re(24,new ke(1,36))),new t(9,26,26,24,24,new Re(28,new ke(1,44))),new t(10,32,32,14,14,new Re(36,new ke(1,62))),new t(11,36,36,16,16,new Re(42,new ke(1,86))),new t(12,40,40,18,18,new Re(48,new ke(1,114))),new t(13,44,44,20,20,new Re(56,new ke(1,144))),new t(14,48,48,22,22,new Re(68,new ke(1,174))),new t(15,52,52,24,24,new Re(42,new ke(2,102))),new t(16,64,64,14,14,new Re(56,new ke(2,140))),new t(17,72,72,16,16,new Re(36,new ke(4,92))),new t(18,80,80,18,18,new Re(48,new ke(4,114))),new t(19,88,88,20,20,new Re(56,new ke(4,144))),new t(20,96,96,22,22,new Re(68,new ke(4,174))),new t(21,104,104,24,24,new Re(56,new ke(6,136))),new t(22,120,120,18,18,new Re(68,new ke(6,175))),new t(23,132,132,20,20,new Re(62,new ke(8,163))),new t(24,144,144,22,22,new Re(62,new ke(8,156),new ke(2,155))),new t(25,8,18,6,16,new Re(7,new ke(1,5))),new t(26,8,32,6,14,new Re(11,new ke(1,10))),new t(27,12,26,10,24,new Re(14,new ke(1,16))),new t(28,12,36,10,16,new Re(18,new ke(1,22))),new t(29,16,36,14,16,new Re(24,new ke(1,32))),new t(30,16,48,14,22,new Re(28,new ke(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),eH=function(){function t(e){var n=e.getHeight();if(n<8||n>144||n&1)throw new K;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Lr(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var n=e.getHeight(),r=e.getWidth();return JV.getVersionForDimensions(n,r)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,r=4,i=0,s=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),a=!1,l=!1,c=!1,d=!1;do if(r===s&&i===0&&!a)e[n++]=this.readCorner1(s,o)&255,r-=2,i+=2,a=!0;else if(r===s-2&&i===0&&o&3&&!l)e[n++]=this.readCorner2(s,o)&255,r-=2,i+=2,l=!0;else if(r===s+4&&i===2&&!(o&7)&&!c)e[n++]=this.readCorner3(s,o)&255,r-=2,i+=2,c=!0;else if(r===s-2&&i===0&&(o&7)===4&&!d)e[n++]=this.readCorner4(s,o)&255,r-=2,i+=2,d=!0;else{do r<s&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,s,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,s,o)&255),r+=2,i-=2;while(r<s&&i>=0);r+=3,i+=1}while(r<s||i<o);if(n!==this.version.getTotalCodewords())throw new K;return e},t.prototype.readModule=function(e,n,r,i){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},t.prototype.readUtah=function(e,n,r,i){var s=0;return this.readModule(e-2,n-2,r,i)&&(s|=1),s<<=1,this.readModule(e-2,n-1,r,i)&&(s|=1),s<<=1,this.readModule(e-1,n-2,r,i)&&(s|=1),s<<=1,this.readModule(e-1,n-1,r,i)&&(s|=1),s<<=1,this.readModule(e-1,n,r,i)&&(s|=1),s<<=1,this.readModule(e,n-2,r,i)&&(s|=1),s<<=1,this.readModule(e,n-1,r,i)&&(s|=1),s<<=1,this.readModule(e,n,r,i)&&(s|=1),s},t.prototype.readCorner1=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.readCorner2=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner3=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner4=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new oe("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),o=n/i|0,a=r/s|0,l=o*i,c=a*s,d=new Lr(c,l),f=0;f<o;++f)for(var h=f*i,p=0;p<a;++p)for(var m=p*s,v=0;v<i;++v)for(var w=f*(i+2)+1+v,y=h+v,g=0;g<s;++g){var x=p*(s+2)+1+g;if(e.get(x,w)){var _=m+g;d.set(_,y)}}return d},t}(),y_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tH=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n){var r,i,s,o,a=n.getECBlocks(),l=0,c=a.getECBlocks();try{for(var d=y_(c),f=d.next();!f.done;f=d.next()){var h=f.value;l+=h.getCount()}}catch(L){r={error:L}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var p=new Array(l),m=0;try{for(var v=y_(c),w=v.next();!w.done;w=v.next())for(var h=w.value,y=0;y<h.getCount();y++){var g=h.getDataCodewords(),x=a.getECCodewords()+g;p[m++]=new t(g,new Uint8Array(x))}}catch(L){s={error:L}}finally{try{w&&!w.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}for(var _=p[0].codewords.length,C=_-a.getECCodewords(),E=C-1,A=0,y=0;y<E;y++)for(var T=0;T<m;T++)p[T].codewords[y]=e[A++];for(var k=n.getVersionNumber()===24,O=k?8:m,T=0;T<O;T++)p[T].codewords[C-1]=e[A++];for(var q=p[0].codewords.length,y=C;y<q;y++)for(var T=0;T<m;T++){var G=k?(T+8)%m:T,D=k&&G>7?y-1:y;p[G].codewords[D]=e[A++]}if(A!==e.length)throw new oe;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),sT=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new oe(""+e);var n=0,r=this.bitOffset,i=this.byteOffset,s=this.bytes;if(r>0){var o=8-r,a=e<o?e:o,l=o-a,c=255>>8-a<<l;n=(s[i]&c)>>l,e-=a,r+=a,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)n=n<<8|s[i]&255,i++,e-=8;if(e>0){var l=8-e,c=255>>l<<l;n=n<<e|(s[i]&c)>>l,r+=e}}return this.bitOffset=r,this.byteOffset=i,n},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),gt;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(gt||(gt={}));var nH=function(){function t(){}return t.decode=function(e){var n=new sT(e),r=new he,i=new he,s=new Array,o=gt.ASCII_ENCODE;do if(o===gt.ASCII_ENCODE)o=this.decodeAsciiSegment(n,r,i);else{switch(o){case gt.C40_ENCODE:this.decodeC40Segment(n,r);break;case gt.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case gt.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case gt.BASE256_ENCODE:this.decodeBase256Segment(n,r,s);break;default:throw new K}o=gt.ASCII_ENCODE}while(o!==gt.PAD_ENCODE&&n.available()>0);return i.length()>0&&r.append(i.toString()),new uh(e,r.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,n,r){var i=!1;do{var s=e.readBits(8);if(s===0)throw new K;if(s<=128)return i&&(s+=128),n.append(String.fromCharCode(s-1)),gt.ASCII_ENCODE;if(s===129)return gt.PAD_ENCODE;if(s<=229){var o=s-130;o<10&&n.append("0"),n.append(""+o)}else switch(s){case 230:return gt.C40_ENCODE;case 231:return gt.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return gt.ANSIX12_ENCODE;case 239:return gt.TEXT_ENCODE;case 240:return gt.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new K;break}}while(e.available()>0);return gt.ASCII_ENCODE},t.decodeC40Segment=function(e,n){var r=!1,i=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var a=0;a<3;a++){var l=i[a];switch(s){case 0:if(l<3)s=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var c=this.C40_BASIC_SET_CHARS[l];r?(n.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):n.append(c)}else throw new K;break;case 1:r?(n.append(String.fromCharCode(l+128)),r=!1):n.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var c=this.C40_SHIFT2_SET_CHARS[l];r?(n.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):n.append(c)}else switch(l){case 27:n.append("");break;case 30:r=!0;break;default:throw new K}s=0;break;case 3:r?(n.append(String.fromCharCode(l+224)),r=!1):n.append(String.fromCharCode(l+96)),s=0;break;default:throw new K}}}while(e.available()>0)},t.decodeTextSegment=function(e,n){var r=!1,i=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var a=0;a<3;a++){var l=i[a];switch(s){case 0:if(l<3)s=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var c=this.TEXT_BASIC_SET_CHARS[l];r?(n.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):n.append(c)}else throw new K;break;case 1:r?(n.append(String.fromCharCode(l+128)),r=!1):n.append(String.fromCharCode(l)),s=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var c=this.TEXT_SHIFT2_SET_CHARS[l];r?(n.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):n.append(c)}else switch(l){case 27:n.append("");break;case 30:r=!0;break;default:throw new K}s=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var c=this.TEXT_SHIFT3_SET_CHARS[l];r?(n.append(String.fromCharCode(c.charCodeAt(0)+128)),r=!1):n.append(c),s=0}else throw new K;break;default:throw new K}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,n){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var s=0;s<3;s++){var o=r[s];switch(o){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(o<14)n.append(String.fromCharCode(o+44));else if(o<40)n.append(String.fromCharCode(o+51));else throw new K;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,n,r){var i=(e<<8)+n-1,s=Math.floor(i/1600);r[0]=s,i-=s*1600,s=Math.floor(i/40),r[1]=s,r[2]=i-s*40},t.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}i&32||(i|=64),n.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,n,r){var i=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),i++),o;if(s===0?o=e.available()/8|0:s<250?o=s:o=250*(s-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new K;for(var a=new Uint8Array(o),l=0;l<o;l++){if(e.available()<8)throw new K;a[l]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{n.append(Jn.decode(a,Ee.ISO88591))}catch(c){throw new Xc("Platform does not support required encoding: "+c.message)}},t.unrandomize255State=function(e,n){var r=149*n%255+1,i=e-r;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),rH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iH=function(){function t(){this.rsDecoder=new dh(bn.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var n,r,i=new eH(e),s=i.getVersion(),o=i.readCodewords(),a=tH.getDataBlocks(o,s),l=0;try{for(var c=rH(a),d=c.next();!d.done;d=c.next()){var f=d.value;l+=f.getNumDataCodewords()}}catch(x){n={error:x}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}for(var h=new Uint8Array(l),p=a.length,m=0;m<p;m++){var v=a[m],w=v.getCodewords(),y=v.getNumDataCodewords();this.correctErrors(w,y);for(var g=0;g<y;g++)h[g*p+m]=w[g]}return nH.decode(h)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new Dt}for(var i=0;i<n;i++)e[i]=r[i]},t}(),sH=function(){function t(e){this.image=e,this.rectangleDetector=new D1(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new j;n=this.shiftToModuleCenter(n);var r=n[0],i=n[1],s=n[2],o=n[3],a=this.transitionsBetween(r,o)+1,l=this.transitionsBetween(s,o)+1;(a&1)===1&&(a+=1),(l&1)===1&&(l+=1),4*a<7*l&&4*l<7*a&&(a=l=Math.max(a,l));var c=t.sampleGrid(this.image,r,i,s,o,a,l);return new Fv(c,[r,i,s,o])},t.shiftPoint=function(e,n,r){var i=(n.getX()-e.getX())/(r+1),s=(n.getY()-e.getY())/(r+1);return new J(e.getX()+i,e.getY()+s)},t.moveAway=function(e,n,r){var i=e.getX(),s=e.getY();return i<n?i-=1:i+=1,s<r?s-=1:s+=1,new J(i,s)},t.prototype.detectSolid1=function(e){var n=e[0],r=e[1],i=e[3],s=e[2],o=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),l=this.transitionsBetween(i,s),c=this.transitionsBetween(s,n),d=o,f=[s,n,r,i];return d>a&&(d=a,f[0]=n,f[1]=r,f[2]=i,f[3]=s),d>l&&(d=l,f[0]=r,f[1]=i,f[2]=s,f[3]=n),d>c&&(f[0]=i,f[1]=s,f[2]=n,f[3]=r),f},t.prototype.detectSolid2=function(e){var n=e[0],r=e[1],i=e[2],s=e[3],o=this.transitionsBetween(n,s),a=t.shiftPoint(r,i,(o+1)*4),l=t.shiftPoint(i,r,(o+1)*4),c=this.transitionsBetween(a,n),d=this.transitionsBetween(l,s);return c<d?(e[0]=n,e[1]=r,e[2]=i,e[3]=s):(e[0]=r,e[1]=i,e[2]=s,e[3]=n),e},t.prototype.correctTopRight=function(e){var n=e[0],r=e[1],i=e[2],s=e[3],o=this.transitionsBetween(n,s),a=this.transitionsBetween(r,s),l=t.shiftPoint(n,r,(a+1)*4),c=t.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(l,s),a=this.transitionsBetween(c,s);var d=new J(s.getX()+(i.getX()-r.getX())/(o+1),s.getY()+(i.getY()-r.getY())/(o+1)),f=new J(s.getX()+(n.getX()-r.getX())/(a+1),s.getY()+(n.getY()-r.getY())/(a+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var h=this.transitionsBetween(l,d)+this.transitionsBetween(c,d),p=this.transitionsBetween(l,f)+this.transitionsBetween(c,f);return h>p?d:f},t.prototype.shiftToModuleCenter=function(e){var n=e[0],r=e[1],i=e[2],s=e[3],o=this.transitionsBetween(n,s)+1,a=this.transitionsBetween(i,s)+1,l=t.shiftPoint(n,r,a*4),c=t.shiftPoint(i,r,o*4);o=this.transitionsBetween(l,s)+1,a=this.transitionsBetween(c,s)+1,(o&1)===1&&(o+=1),(a&1)===1&&(a+=1);var d=(n.getX()+r.getX()+i.getX()+s.getX())/4,f=(n.getY()+r.getY()+i.getY()+s.getY())/4;n=t.moveAway(n,d,f),r=t.moveAway(r,d,f),i=t.moveAway(i,d,f),s=t.moveAway(s,d,f);var h,p;return l=t.shiftPoint(n,r,a*4),l=t.shiftPoint(l,s,o*4),h=t.shiftPoint(r,n,a*4),h=t.shiftPoint(h,i,o*4),c=t.shiftPoint(i,s,a*4),c=t.shiftPoint(c,r,o*4),p=t.shiftPoint(s,i,a*4),p=t.shiftPoint(p,n,o*4),[l,h,c,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,n,r,i,s,o,a){var l=Bv.getInstance();return l.sampleGrid(e,o,a,.5,.5,o-.5,.5,o-.5,a-.5,.5,a-.5,n.getX(),n.getY(),s.getX(),s.getY(),i.getX(),i.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(e,n){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),s=Math.trunc(n.getX()),o=Math.trunc(n.getY()),a=Math.abs(o-i)>Math.abs(s-r);if(a){var l=r;r=i,i=l,l=s,s=o,o=l}for(var c=Math.abs(s-r),d=Math.abs(o-i),f=-c/2,h=i<o?1:-1,p=r<s?1:-1,m=0,v=this.image.get(a?i:r,a?r:i),w=r,y=i;w!==s;w+=p){var g=this.image.get(a?y:w,a?w:y);if(g!==v&&(m++,v=g),f+=d,f>0){if(y===o)break;y+=h,f-=c}}return m},t}(),L1=function(){function t(){this.decoder=new iH}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r,i;if(n!=null&&n.has(Je.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(s),i=t.NO_POINTS}else{var o=new sH(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var a=r.getRawBytes(),l=new sn(r.getText(),a,8*a.length,i,ie.DATA_MATRIX,He.currentTimeMillis()),c=r.getByteSegments();c!=null&&l.putMetadata($t.BYTE_SEGMENTS,c);var d=r.getECLevel();return d!=null&&l.putMetadata($t.ERROR_CORRECTION_LEVEL,d),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new j;var i=this.moduleSize(n,e),s=n[1],o=r[1],a=n[0],l=r[0],c=(l-a+1)/i,d=(o-s+1)/i;if(c<=0||d<=0)throw new j;var f=i/2;s+=f,a+=f;for(var h=new Lr(c,d),p=0;p<d;p++)for(var m=s+p*i,v=0;v<c;v++)e.get(a+v*i,m)&&h.set(v,p);return h},t.moduleSize=function(e,n){for(var r=n.getWidth(),i=e[0],s=e[1];i<r&&n.get(i,s);)i++;if(i===r)throw new j;var o=i-e[0];if(o===0)throw new j;return o},t.NO_POINTS=[],t}(),oH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){oH(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new L1,n)||this}return e})(ja);var Ho;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Ho||(Ho={}));var aH=function(){function t(e,n,r){this.value=e,this.stringValue=n,this.bits=r,t.FOR_BITS.set(r,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new or(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new oe;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Ho.L,"L",1),t.M=new t(Ho.M,"M",0),t.Q=new t(Ho.Q,"Q",3),t.H=new t(Ho.H,"H",2),t}(),lH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oT=function(){function t(e){this.errorCorrectionLevel=aH.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,n){return pe.bitCount(e^n)},t.decodeFormatInformation=function(e,n){var r=t.doDecodeFormatInformation(e,n);return r!==null?r:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,n^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,n){var r,i,s=Number.MAX_SAFE_INTEGER,o=0;try{for(var a=lH(t.FORMAT_INFO_DECODE_LOOKUP),l=a.next();!l.done;l=a.next()){var c=l.value,d=c[0];if(d===e||d===n)return new t(c[1]);var f=t.numBitsDiffering(e,d);f<s&&(o=c[1],s=f),e!==n&&(f=t.numBitsDiffering(n,d),f<s&&(o=c[1],s=f))}}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),cH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R=function(){function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,n,r=0,i=this.ecBlocks;try{for(var s=cH(i),o=s.next();!o.done;o=s.next()){var a=o.value;r+=a.getCount()}}catch(l){e={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),S=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),uH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xs=function(){function t(e,n){for(var r,i,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=s;var a=0,l=s[0].getECCodewordsPerBlock(),c=s[0].getECBlocks();try{for(var d=uH(c),f=d.next();!f.done;f=d.next()){var h=f.value;a+=h.getCount()*(h.getDataCodewords()+l)}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=a}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new K;try{return this.getVersionForNumber((e-17)/4)}catch{throw new K}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new oe;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,r=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var s=t.VERSION_DECODE_INFO[i];if(s===e)return t.getVersionForNumber(i+7);var o=oT.numBitsDiffering(e,s);o<n&&(r=i+7,n=o)}return n<=3?t.getVersionForNumber(r):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new Lr(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var s=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||n.setRegion(this.alignmentPatternCenters[o]-2,s,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new R(7,new S(1,19)),new R(10,new S(1,16)),new R(13,new S(1,13)),new R(17,new S(1,9))),new t(2,Int32Array.from([6,18]),new R(10,new S(1,34)),new R(16,new S(1,28)),new R(22,new S(1,22)),new R(28,new S(1,16))),new t(3,Int32Array.from([6,22]),new R(15,new S(1,55)),new R(26,new S(1,44)),new R(18,new S(2,17)),new R(22,new S(2,13))),new t(4,Int32Array.from([6,26]),new R(20,new S(1,80)),new R(18,new S(2,32)),new R(26,new S(2,24)),new R(16,new S(4,9))),new t(5,Int32Array.from([6,30]),new R(26,new S(1,108)),new R(24,new S(2,43)),new R(18,new S(2,15),new S(2,16)),new R(22,new S(2,11),new S(2,12))),new t(6,Int32Array.from([6,34]),new R(18,new S(2,68)),new R(16,new S(4,27)),new R(24,new S(4,19)),new R(28,new S(4,15))),new t(7,Int32Array.from([6,22,38]),new R(20,new S(2,78)),new R(18,new S(4,31)),new R(18,new S(2,14),new S(4,15)),new R(26,new S(4,13),new S(1,14))),new t(8,Int32Array.from([6,24,42]),new R(24,new S(2,97)),new R(22,new S(2,38),new S(2,39)),new R(22,new S(4,18),new S(2,19)),new R(26,new S(4,14),new S(2,15))),new t(9,Int32Array.from([6,26,46]),new R(30,new S(2,116)),new R(22,new S(3,36),new S(2,37)),new R(20,new S(4,16),new S(4,17)),new R(24,new S(4,12),new S(4,13))),new t(10,Int32Array.from([6,28,50]),new R(18,new S(2,68),new S(2,69)),new R(26,new S(4,43),new S(1,44)),new R(24,new S(6,19),new S(2,20)),new R(28,new S(6,15),new S(2,16))),new t(11,Int32Array.from([6,30,54]),new R(20,new S(4,81)),new R(30,new S(1,50),new S(4,51)),new R(28,new S(4,22),new S(4,23)),new R(24,new S(3,12),new S(8,13))),new t(12,Int32Array.from([6,32,58]),new R(24,new S(2,92),new S(2,93)),new R(22,new S(6,36),new S(2,37)),new R(26,new S(4,20),new S(6,21)),new R(28,new S(7,14),new S(4,15))),new t(13,Int32Array.from([6,34,62]),new R(26,new S(4,107)),new R(22,new S(8,37),new S(1,38)),new R(24,new S(8,20),new S(4,21)),new R(22,new S(12,11),new S(4,12))),new t(14,Int32Array.from([6,26,46,66]),new R(30,new S(3,115),new S(1,116)),new R(24,new S(4,40),new S(5,41)),new R(20,new S(11,16),new S(5,17)),new R(24,new S(11,12),new S(5,13))),new t(15,Int32Array.from([6,26,48,70]),new R(22,new S(5,87),new S(1,88)),new R(24,new S(5,41),new S(5,42)),new R(30,new S(5,24),new S(7,25)),new R(24,new S(11,12),new S(7,13))),new t(16,Int32Array.from([6,26,50,74]),new R(24,new S(5,98),new S(1,99)),new R(28,new S(7,45),new S(3,46)),new R(24,new S(15,19),new S(2,20)),new R(30,new S(3,15),new S(13,16))),new t(17,Int32Array.from([6,30,54,78]),new R(28,new S(1,107),new S(5,108)),new R(28,new S(10,46),new S(1,47)),new R(28,new S(1,22),new S(15,23)),new R(28,new S(2,14),new S(17,15))),new t(18,Int32Array.from([6,30,56,82]),new R(30,new S(5,120),new S(1,121)),new R(26,new S(9,43),new S(4,44)),new R(28,new S(17,22),new S(1,23)),new R(28,new S(2,14),new S(19,15))),new t(19,Int32Array.from([6,30,58,86]),new R(28,new S(3,113),new S(4,114)),new R(26,new S(3,44),new S(11,45)),new R(26,new S(17,21),new S(4,22)),new R(26,new S(9,13),new S(16,14))),new t(20,Int32Array.from([6,34,62,90]),new R(28,new S(3,107),new S(5,108)),new R(26,new S(3,41),new S(13,42)),new R(30,new S(15,24),new S(5,25)),new R(28,new S(15,15),new S(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new R(28,new S(4,116),new S(4,117)),new R(26,new S(17,42)),new R(28,new S(17,22),new S(6,23)),new R(30,new S(19,16),new S(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new R(28,new S(2,111),new S(7,112)),new R(28,new S(17,46)),new R(30,new S(7,24),new S(16,25)),new R(24,new S(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new R(30,new S(4,121),new S(5,122)),new R(28,new S(4,47),new S(14,48)),new R(30,new S(11,24),new S(14,25)),new R(30,new S(16,15),new S(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new R(30,new S(6,117),new S(4,118)),new R(28,new S(6,45),new S(14,46)),new R(30,new S(11,24),new S(16,25)),new R(30,new S(30,16),new S(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new R(26,new S(8,106),new S(4,107)),new R(28,new S(8,47),new S(13,48)),new R(30,new S(7,24),new S(22,25)),new R(30,new S(22,15),new S(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new R(28,new S(10,114),new S(2,115)),new R(28,new S(19,46),new S(4,47)),new R(28,new S(28,22),new S(6,23)),new R(30,new S(33,16),new S(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new R(30,new S(8,122),new S(4,123)),new R(28,new S(22,45),new S(3,46)),new R(30,new S(8,23),new S(26,24)),new R(30,new S(12,15),new S(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new R(30,new S(3,117),new S(10,118)),new R(28,new S(3,45),new S(23,46)),new R(30,new S(4,24),new S(31,25)),new R(30,new S(11,15),new S(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new R(30,new S(7,116),new S(7,117)),new R(28,new S(21,45),new S(7,46)),new R(30,new S(1,23),new S(37,24)),new R(30,new S(19,15),new S(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new R(30,new S(5,115),new S(10,116)),new R(28,new S(19,47),new S(10,48)),new R(30,new S(15,24),new S(25,25)),new R(30,new S(23,15),new S(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new R(30,new S(13,115),new S(3,116)),new R(28,new S(2,46),new S(29,47)),new R(30,new S(42,24),new S(1,25)),new R(30,new S(23,15),new S(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new R(30,new S(17,115)),new R(28,new S(10,46),new S(23,47)),new R(30,new S(10,24),new S(35,25)),new R(30,new S(19,15),new S(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new R(30,new S(17,115),new S(1,116)),new R(28,new S(14,46),new S(21,47)),new R(30,new S(29,24),new S(19,25)),new R(30,new S(11,15),new S(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new R(30,new S(13,115),new S(6,116)),new R(28,new S(14,46),new S(23,47)),new R(30,new S(44,24),new S(7,25)),new R(30,new S(59,16),new S(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new R(30,new S(12,121),new S(7,122)),new R(28,new S(12,47),new S(26,48)),new R(30,new S(39,24),new S(14,25)),new R(30,new S(22,15),new S(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new R(30,new S(6,121),new S(14,122)),new R(28,new S(6,47),new S(34,48)),new R(30,new S(46,24),new S(10,25)),new R(30,new S(2,15),new S(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new R(30,new S(17,122),new S(4,123)),new R(28,new S(29,46),new S(14,47)),new R(30,new S(49,24),new S(10,25)),new R(30,new S(24,15),new S(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new R(30,new S(4,122),new S(18,123)),new R(28,new S(13,46),new S(32,47)),new R(30,new S(48,24),new S(14,25)),new R(30,new S(42,15),new S(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new R(30,new S(20,117),new S(4,118)),new R(28,new S(40,47),new S(7,48)),new R(30,new S(43,24),new S(22,25)),new R(30,new S(10,15),new S(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new R(30,new S(19,118),new S(6,119)),new R(28,new S(18,47),new S(31,48)),new R(30,new S(34,24),new S(34,25)),new R(30,new S(20,15),new S(61,16)))],t}(),It;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(It||(It={}));var x_=function(){function t(e,n){this.value=e,this.isMasked=n}return t.prototype.unmaskBitMatrix=function(e,n){for(var r=0;r<n;r++)for(var i=0;i<n;i++)this.isMasked(r,i)&&e.flip(i,r)},t.values=new Map([[It.DATA_MASK_000,new t(It.DATA_MASK_000,function(e,n){return(e+n&1)===0})],[It.DATA_MASK_001,new t(It.DATA_MASK_001,function(e,n){return(e&1)===0})],[It.DATA_MASK_010,new t(It.DATA_MASK_010,function(e,n){return n%3===0})],[It.DATA_MASK_011,new t(It.DATA_MASK_011,function(e,n){return(e+n)%3===0})],[It.DATA_MASK_100,new t(It.DATA_MASK_100,function(e,n){return(Math.floor(e/2)+Math.floor(n/3)&1)===0})],[It.DATA_MASK_101,new t(It.DATA_MASK_101,function(e,n){return e*n%6===0})],[It.DATA_MASK_110,new t(It.DATA_MASK_110,function(e,n){return e*n%6<3})],[It.DATA_MASK_111,new t(It.DATA_MASK_111,function(e,n){return(e+n+e*n%3&1)===0})]]),t}(),dH=function(){function t(e){var n=e.getHeight();if(n<21||(n&3)!==1)throw new K;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),s=0,o=i-7,r=i-1;r>=o;r--)s=this.copyBit(8,r,s);for(var n=i-8;n<i;n++)s=this.copyBit(n,8,s);if(this.parsedFormatInfo=oT.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new K},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Xs.getVersionForNumber(n);for(var r=0,i=e-11,s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,s,r);var a=Xs.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(var o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(o,s,r);if(a=Xs.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new K},t.prototype.copyBit=function(e,n,r){var i=this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n);return i?r<<1|1:r<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),r=x_.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var s=n.buildFunctionPattern(),o=!0,a=new Uint8Array(n.getTotalCodewords()),l=0,c=0,d=0,f=i-1;f>0;f-=2){f===6&&f--;for(var h=0;h<i;h++)for(var p=o?i-1-h:h,m=0;m<2;m++)s.get(f-m,p)||(d++,c<<=1,this.bitMatrix.get(f-m,p)&&(c|=1),d===8&&(a[l++]=c,d=0,c=0));o=!o}if(l!==n.getTotalCodewords())throw new K;return a},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=x_.values.get(this.parsedFormatInfo.getDataMask()),n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,r=e.getWidth();n<r;n++)for(var i=n+1,s=e.getHeight();i<s;i++)e.get(n,i)!==e.get(i,n)&&(e.flip(i,n),e.flip(n,i))},t}(),w_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fH=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n,r){var i,s,o,a;if(e.length!==n.getTotalCodewords())throw new oe;var l=n.getECBlocksForLevel(r),c=0,d=l.getECBlocks();try{for(var f=w_(d),h=f.next();!h.done;h=f.next()){var p=h.value;c+=p.getCount()}}catch(D){i={error:D}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}var m=new Array(c),v=0;try{for(var w=w_(d),y=w.next();!y.done;y=w.next())for(var p=y.value,g=0;g<p.getCount();g++){var x=p.getDataCodewords(),_=l.getECCodewordsPerBlock()+x;m[v++]=new t(x,new Uint8Array(_))}}catch(D){o={error:D}}finally{try{y&&!y.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}for(var C=m[0].codewords.length,E=m.length-1;E>=0;){var A=m[E].codewords.length;if(A===C)break;E--}E++;for(var T=C-l.getECCodewordsPerBlock(),k=0,g=0;g<T;g++)for(var O=0;O<v;O++)m[O].codewords[g]=e[k++];for(var O=E;O<v;O++)m[O].codewords[T]=e[k++];for(var q=m[0].codewords.length,g=T;g<q;g++)for(var O=0;O<v;O++){var G=O<E?g:g+1;m[O].codewords[G]=e[k++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),$n;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})($n||($n={}));var $e=function(){function t(e,n,r,i){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var n=t.FOR_BITS.get(e);if(n===void 0)throw new oe;return n},t.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber(),r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t($n.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t($n.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t($n.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t($n.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t($n.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t($n.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t($n.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t($n.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t($n.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t($n.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),hH=function(){function t(){}return t.decode=function(e,n,r,i){var s=new sT(e),o=new he,a=new Array,l=-1,c=-1;try{var d=null,f=!1,h=void 0;do{if(s.available()<4)h=$e.TERMINATOR;else{var p=s.readBits(4);h=$e.forBits(p)}switch(h){case $e.TERMINATOR:break;case $e.FNC1_FIRST_POSITION:case $e.FNC1_SECOND_POSITION:f=!0;break;case $e.STRUCTURED_APPEND:if(s.available()<16)throw new K;l=s.readBits(8),c=s.readBits(8);break;case $e.ECI:var m=t.parseECIValue(s);if(d=Ct.getCharacterSetECIByValue(m),d===null)throw new K;break;case $e.HANZI:var v=s.readBits(4),w=s.readBits(h.getCharacterCountBits(n));v===t.GB2312_SUBSET&&t.decodeHanziSegment(s,o,w);break;default:var y=s.readBits(h.getCharacterCountBits(n));switch(h){case $e.NUMERIC:t.decodeNumericSegment(s,o,y);break;case $e.ALPHANUMERIC:t.decodeAlphanumericSegment(s,o,y,f);break;case $e.BYTE:t.decodeByteSegment(s,o,y,d,a,i);break;case $e.KANJI:t.decodeKanjiSegment(s,o,y);break;default:throw new K}break}}while(h!==$e.TERMINATOR)}catch{throw new K}return new uh(e,o.toString(),a.length===0?null:a,r===null?null:r.toString(),l,c)},t.decodeHanziSegment=function(e,n,r){if(r*13>e.available())throw new K;for(var i=new Uint8Array(2*r),s=0;r>0;){var o=e.readBits(13),a=o/96<<8&4294967295|o%96;a<959?a+=41377:a+=42657,i[s]=a>>8&255,i[s+1]=a&255,s+=2,r--}try{n.append(Jn.decode(i,Ee.GB2312))}catch(l){throw new K(l)}},t.decodeKanjiSegment=function(e,n,r){if(r*13>e.available())throw new K;for(var i=new Uint8Array(2*r),s=0;r>0;){var o=e.readBits(13),a=o/192<<8&4294967295|o%192;a<7936?a+=33088:a+=49472,i[s]=a>>8,i[s+1]=a,s+=2,r--}try{n.append(Jn.decode(i,Ee.SHIFT_JIS))}catch(l){throw new K(l)}},t.decodeByteSegment=function(e,n,r,i,s,o){if(8*r>e.available())throw new K;for(var a=new Uint8Array(r),l=0;l<r;l++)a[l]=e.readBits(8);var c;i===null?c=Ee.guessEncoding(a,o):c=i.getName();try{n.append(Jn.decode(a,c))}catch(d){throw new K(d)}s.push(a)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new K;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,n,r,i){for(var s=n.length();r>1;){if(e.available()<11)throw new K;var o=e.readBits(11);n.append(t.toAlphaNumericChar(Math.floor(o/45))),n.append(t.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new K;n.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=s;a<n.length();a++)n.charAt(a)==="%"&&(a<n.length()-1&&n.charAt(a+1)==="%"?n.deleteCharAt(a+1):n.setCharAt(a,""))},t.decodeNumericSegment=function(e,n,r){for(;r>=3;){if(e.available()<10)throw new K;var i=e.readBits(10);if(i>=1e3)throw new K;n.append(t.toAlphaNumericChar(Math.floor(i/100))),n.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(t.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new K;var s=e.readBits(7);if(s>=100)throw new K;n.append(t.toAlphaNumericChar(Math.floor(s/10))),n.append(t.toAlphaNumericChar(s%10))}else if(r===1){if(e.available()<4)throw new K;var o=e.readBits(4);if(o>=10)throw new K;n.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){var r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){var i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new K},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),aT=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},t}(),__=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pH=function(){function t(){this.rsDecoder=new dh(bn.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(Lr.parseFromBooleanArray(e),n)},t.prototype.decodeBitMatrix=function(e,n){var r=new dH(e),i=null;try{return this.decodeBitMatrixParser(r,n)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var s=this.decodeBitMatrixParser(r,n);return s.setOther(new aT(!0)),s}catch(o){throw i!==null?i:o}},t.prototype.decodeBitMatrixParser=function(e,n){var r,i,s,o,a=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),d=fH.getDataBlocks(c,a,l),f=0;try{for(var h=__(d),p=h.next();!p.done;p=h.next()){var m=p.value;f+=m.getNumDataCodewords()}}catch(E){r={error:E}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}var v=new Uint8Array(f),w=0;try{for(var y=__(d),g=y.next();!g.done;g=y.next()){var m=g.value,x=m.getCodewords(),_=m.getNumDataCodewords();this.correctErrors(x,_);for(var C=0;C<_;C++)v[w++]=x[C]}}catch(E){s={error:E}}finally{try{g&&!g.done&&(o=y.return)&&o.call(y)}finally{if(s)throw s.error}}return hH.decode(v,a,l,n)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new Dt}for(var i=0;i<n;i++)e[i]=r[i]},t}(),mH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gH=function(t){mH(e,t);function e(n,r,i){var s=t.call(this,n,r)||this;return s.estimatedModuleSize=i,s}return e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var s=Math.abs(n-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var s=(this.getX()+r)/2,o=(this.getY()+n)/2,a=(this.estimatedModuleSize+i)/2;return new e(s,o,a)},e}(J),vH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yH=function(){function t(e,n,r,i,s,o,a){this.image=e,this.startX=n,this.startY=r,this.width=i,this.height=s,this.moduleSize=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,n=this.height,r=this.width,i=e+r,s=this.startY+n/2,o=new Int32Array(3),a=this.image,l=0;l<n;l++){var c=s+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<i&&!a.get(d,c);)d++;for(var f=0;d<i;){if(a.get(d,c))if(f===1)o[1]++;else if(f===2){if(this.foundPatternCross(o)){var h=this.handlePossibleCenter(o,c,d);if(h!==null)return h}o[0]=o[2],o[1]=1,o[2]=0,f=1}else o[++f]++;else f===1&&f++,o[f]++;d++}if(this.foundPatternCross(o)){var h=this.handlePossibleCenter(o,c,i);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new j},t.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,r=n/2,i=0;i<3;i++)if(Math.abs(n-e[i])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,n,r,i){var s=this.image,o=s.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var l=e;l>=0&&s.get(n,l)&&a[1]<=r;)a[1]++,l--;if(l<0||a[1]>r)return NaN;for(;l>=0&&!s.get(n,l)&&a[0]<=r;)a[0]++,l--;if(a[0]>r)return NaN;for(l=e+1;l<o&&s.get(n,l)&&a[1]<=r;)a[1]++,l++;if(l===o||a[1]>r)return NaN;for(;l<o&&!s.get(n,l)&&a[2]<=r;)a[2]++,l++;if(a[2]>r)return NaN;var c=a[0]+a[1]+a[2];return 5*Math.abs(c-i)>=2*i?NaN:this.foundPatternCross(a)?t.centerFromEnd(a,l):NaN},t.prototype.handlePossibleCenter=function(e,n,r){var i,s,o=e[0]+e[1]+e[2],a=t.centerFromEnd(e,r),l=this.crossCheckVertical(n,a,2*e[1],o);if(!isNaN(l)){var c=(e[0]+e[1]+e[2])/3;try{for(var d=vH(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.aboutEquals(c,l,a))return h.combineEstimate(l,a,c)}}catch(m){i={error:m}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}var p=new gH(a,l,c);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t}(),xH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wH=function(t){xH(e,t);function e(n,r,i,s){var o=t.call(this,n,r)||this;return o.estimatedModuleSize=i,o.count=s,s===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var s=Math.abs(n-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var s=this.count+1,o=(this.count*this.getX()+r)/s,a=(this.count*this.getY()+n)/s,l=(this.count*this.estimatedModuleSize+i)/s;return new e(o,a,l,s)},e}(J),_H=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Za=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CH=function(){function t(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var n=e!=null&&e.get(Je.TRY_HARDER)!==void 0,r=e!=null&&e.get(Je.PURE_BARCODE)!==void 0,i=this.image,s=i.getHeight(),o=i.getWidth(),a=Math.floor(3*s/(4*t.MAX_MODULES));(a<t.MIN_SKIP||n)&&(a=t.MIN_SKIP);for(var l=!1,c=new Int32Array(5),d=a-1;d<s&&!l;d+=a){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var f=0,h=0;h<o;h++)if(i.get(h,d))(f&1)===1&&f++,c[f]++;else if(f&1)c[f]++;else if(f===4)if(t.foundPatternCross(c)){var p=this.handlePossibleCenter(c,d,h,r);if(p===!0)if(a=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>c[2]&&(d+=m-c[2]-a,h=o-1)}else{c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,f=3;continue}f=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,f=3;else c[++f]++;if(t.foundPatternCross(c)){var p=this.handlePossibleCenter(c,d,o,r);p===!0&&(a=c[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var v=this.selectBestPatterns();return J.orderBestPatterns(v),new _H(v)},t.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var n=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;n+=i}if(n<7)return!1;var s=n/7,o=s/2;return Math.abs(s-e[0])<o&&Math.abs(s-e[1])<o&&Math.abs(3*s-e[2])<3*o&&Math.abs(s-e[3])<o&&Math.abs(s-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,n,r,i){for(var s=this.getCrossCheckStateCount(),o=0,a=this.image;e>=o&&n>=o&&a.get(n-o,e-o);)s[2]++,o++;if(e<o||n<o)return!1;for(;e>=o&&n>=o&&!a.get(n-o,e-o)&&s[1]<=r;)s[1]++,o++;if(e<o||n<o||s[1]>r)return!1;for(;e>=o&&n>=o&&a.get(n-o,e-o)&&s[0]<=r;)s[0]++,o++;if(s[0]>r)return!1;var l=a.getHeight(),c=a.getWidth();for(o=1;e+o<l&&n+o<c&&a.get(n+o,e+o);)s[2]++,o++;if(e+o>=l||n+o>=c)return!1;for(;e+o<l&&n+o<c&&!a.get(n+o,e+o)&&s[3]<r;)s[3]++,o++;if(e+o>=l||n+o>=c||s[3]>=r)return!1;for(;e+o<l&&n+o<c&&a.get(n+o,e+o)&&s[4]<r;)s[4]++,o++;if(s[4]>=r)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-i)<2*i&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,n,r,i){for(var s=this.image,o=s.getHeight(),a=this.getCrossCheckStateCount(),l=e;l>=0&&s.get(n,l);)a[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(n,l)&&a[1]<=r;)a[1]++,l--;if(l<0||a[1]>r)return NaN;for(;l>=0&&s.get(n,l)&&a[0]<=r;)a[0]++,l--;if(a[0]>r)return NaN;for(l=e+1;l<o&&s.get(n,l);)a[2]++,l++;if(l===o)return NaN;for(;l<o&&!s.get(n,l)&&a[3]<r;)a[3]++,l++;if(l===o||a[3]>=r)return NaN;for(;l<o&&s.get(n,l)&&a[4]<r;)a[4]++,l++;if(a[4]>=r)return NaN;var c=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(c-i)>=2*i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,l):NaN},t.prototype.crossCheckHorizontal=function(e,n,r,i){for(var s=this.image,o=s.getWidth(),a=this.getCrossCheckStateCount(),l=e;l>=0&&s.get(l,n);)a[2]++,l--;if(l<0)return NaN;for(;l>=0&&!s.get(l,n)&&a[1]<=r;)a[1]++,l--;if(l<0||a[1]>r)return NaN;for(;l>=0&&s.get(l,n)&&a[0]<=r;)a[0]++,l--;if(a[0]>r)return NaN;for(l=e+1;l<o&&s.get(l,n);)a[2]++,l++;if(l===o)return NaN;for(;l<o&&!s.get(l,n)&&a[3]<r;)a[3]++,l++;if(l===o||a[3]>=r)return NaN;for(;l<o&&s.get(l,n)&&a[4]<r;)a[4]++,l++;if(a[4]>=r)return NaN;var c=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(c-i)>=i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,l):NaN},t.prototype.handlePossibleCenter=function(e,n,r,i){var s=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,r),a=this.crossCheckVertical(n,Math.floor(o),e[2],s);if(!isNaN(a)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(a),e[2],s),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(o),e[2],s)))){for(var l=s/7,c=!1,d=this.possibleCenters,f=0,h=d.length;f<h;f++){var p=d[f];if(p.aboutEquals(l,a,o)){d[f]=p.combineEstimate(a,o,l),c=!0;break}}if(!c){var m=new wH(o,a,l);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,n,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var s=Za(this.possibleCenters),o=s.next();!o.done;o=s.next()){var a=o.value;if(a.getCount()>=t.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,n,r,i,s=0,o=0,a=this.possibleCenters.length;try{for(var l=Za(this.possibleCenters),c=l.next();!c.done;c=l.next()){var d=c.value;d.getCount()>=t.CENTER_QUORUM&&(s++,o+=d.getEstimatedModuleSize())}}catch(v){e={error:v}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}if(s<3)return!1;var f=o/a,h=0;try{for(var p=Za(this.possibleCenters),m=p.next();!m.done;m=p.next()){var d=m.value;h+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(v){r={error:v}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return h<=.05*o},t.prototype.selectBestPatterns=function(){var e,n,r,i,s=this.possibleCenters.length;if(s<3)throw new j;var o=this.possibleCenters,a;if(s>3){var l=0,c=0;try{for(var d=Za(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value,p=h.getEstimatedModuleSize();l+=p,c+=p*p}}catch(C){e={error:C}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}a=l/s;var m=Math.sqrt(c/s-a*a);o.sort(function(C,E){var A=Math.abs(E.getEstimatedModuleSize()-a),T=Math.abs(C.getEstimatedModuleSize()-a);return A<T?-1:A>T?1:0});for(var v=Math.max(.2*a,m),w=0;w<o.length&&o.length>3;w++){var y=o[w];Math.abs(y.getEstimatedModuleSize()-a)>v&&(o.splice(w,1),w--)}}if(o.length>3){var l=0;try{for(var g=Za(o),x=g.next();!x.done;x=g.next()){var _=x.value;l+=_.getEstimatedModuleSize()}}catch(E){r={error:E}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}a=l/o.length,o.sort(function(E,A){if(A.getCount()===E.getCount()){var T=Math.abs(A.getEstimatedModuleSize()-a),k=Math.abs(E.getEstimatedModuleSize()-a);return T<k?1:T>k?-1:0}else return A.getCount()-E.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),EH=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Je.NEED_RESULT_POINT_CALLBACK);var n=new CH(this.image,this.resultPointCallback),r=n.find(e);return this.processFinderPatternInfo(r)},t.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),s=this.calculateModuleSize(n,r,i);if(s<1)throw new j("No pattern found in proccess finder.");var o=t.computeDimension(n,r,i,s),a=Xs.getProvisionalVersionForDimension(o),l=a.getDimensionForVersion()-7,c=null;if(a.getAlignmentPatternCenters().length>0)for(var d=r.getX()-n.getX()+i.getX(),f=r.getY()-n.getY()+i.getY(),h=1-3/l,p=Math.floor(n.getX()+h*(d-n.getX())),m=Math.floor(n.getY()+h*(f-n.getY())),v=4;v<=16;v<<=1)try{c=this.findAlignmentInRegion(s,p,m,v);break}catch(x){if(!(x instanceof j))throw x}var w=t.createTransform(n,r,i,c,o),y=t.sampleGrid(this.image,w,o),g;return c===null?g=[i,n,r]:g=[i,n,r,c],new Fv(y,g)},t.createTransform=function(e,n,r,i,s){var o=s-3.5,a,l,c,d;return i!==null?(a=i.getX(),l=i.getY(),c=o-3,d=c):(a=n.getX()-e.getX()+r.getX(),l=n.getY()-e.getY()+r.getY(),c=o,d=o),tT.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,c,d,3.5,o,e.getX(),e.getY(),n.getX(),n.getY(),a,l,r.getX(),r.getY())},t.sampleGrid=function(e,n,r){var i=Bv.getInstance();return i.sampleGridWithTransform(e,r,r,n)},t.computeDimension=function(e,n,r,i){var s=Ne.round(J.distance(e,n)/i),o=Ne.round(J.distance(e,r)/i),a=Math.floor((s+o)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new j("Dimensions could be not found.")}return a},t.prototype.calculateModuleSize=function(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2},t.prototype.calculateModuleSizeOneWay=function(e,n){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,r,i){var s=this.sizeOfBlackWhiteBlackRun(e,n,r,i),o=1,a=e-(r-e);a<0?(o=e/(e-a),a=0):a>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var l=Math.floor(n-(i-n)*o);return o=1,l<0?(o=n/(n-l),l=0):l>=this.image.getHeight()&&(o=(this.image.getHeight()-1-n)/(l-n),l=this.image.getHeight()-1),a=Math.floor(e+(a-e)*o),s+=this.sizeOfBlackWhiteBlackRun(e,n,a,l),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,n,r,i){var s=Math.abs(i-n)>Math.abs(r-e);if(s){var o=e;e=n,n=o,o=r,r=i,i=o}for(var a=Math.abs(r-e),l=Math.abs(i-n),c=-a/2,d=e<r?1:-1,f=n<i?1:-1,h=0,p=r+d,m=e,v=n;m!==p;m+=d){var w=s?v:m,y=s?m:v;if(h===1===this.image.get(w,y)){if(h===2)return Ne.distance(m,v,e,n);h++}if(c+=l,c>0){if(v===i)break;v+=f,c-=a}}return h===2?Ne.distance(r+d,i,e,n):NaN},t.prototype.findAlignmentInRegion=function(e,n,r,i){var s=Math.floor(i*e),o=Math.max(0,n-s),a=Math.min(this.image.getWidth()-1,n+s);if(a-o<e*3)throw new j("Alignment top exceeds estimated module size.");var l=Math.max(0,r-s),c=Math.min(this.image.getHeight()-1,r+s);if(c-l<e*3)throw new j("Alignment bottom exceeds estimated module size.");var d=new yH(this.image,o,l,a-o,c-l,e,this.resultPointCallback);return d.find()},t}(),F1=function(){function t(){this.decoder=new pH}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,n){var r,i;if(n!=null&&n.get(Je.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(s,n),i=t.NO_POINTS}else{var o=new EH(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(o.getBits(),n),i=o.getPoints()}r.getOther()instanceof aT&&r.getOther().applyMirroredCorrection(i);var a=new sn(r.getText(),r.getRawBytes(),void 0,i,ie.QR_CODE,void 0),l=r.getByteSegments();l!==null&&a.putMetadata($t.BYTE_SEGMENTS,l);var c=r.getECLevel();return c!==null&&a.putMetadata($t.ERROR_CORRECTION_LEVEL,c),r.hasStructuredAppend()&&(a.putMetadata($t.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata($t.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new j;var i=this.moduleSize(n,e),s=n[1],o=r[1],a=n[0],l=r[0];if(a>=l||s>=o)throw new j;if(o-s!==l-a&&(l=a+(o-s),l>=e.getWidth()))throw new j;var c=Math.round((l-a+1)/i),d=Math.round((o-s+1)/i);if(c<=0||d<=0)throw new j;if(d!==c)throw new j;var f=Math.floor(i/2);s+=f,a+=f;var h=a+Math.floor((c-1)*i)-l;if(h>0){if(h>f)throw new j;a-=h}var p=s+Math.floor((d-1)*i)-o;if(p>0){if(p>f)throw new j;s-=p}for(var m=new Lr(c,d),v=0;v<d;v++)for(var w=s+Math.floor(v*i),y=0;y<c;y++)e.get(a+Math.floor(y*i),w)&&m.set(y,v);return m},t.moduleSize=function(e,n){for(var r=n.getHeight(),i=n.getWidth(),s=e[0],o=e[1],a=!0,l=0;s<i&&o<r;){if(a!==n.get(s,o)){if(++l===5)break;a=!a}s++,o++}if(s===i||o===r)throw new j;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),SH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},be=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Ne.sum(e)},t.toIntArray=function(e){var n,r;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),s=0;try{for(var o=SH(e),a=o.next();!a.done;a=o.next()){var l=a.value;i[s++]=l}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.getCodeword=function(e){var n=St.binarySearch(t.SYMBOL_TABLE,e&262143);return n<0?-1:(t.CODEWORD_TABLE[n]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),bH=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),AH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NH=function(){function t(){}return t.detectMultiple=function(e,n,r){var i=e.getBlackMatrix(),s=t.detect(r,i);return s.length||(i=i.clone(),i.rotate180(),s=t.detect(r,i)),new bH(i,s)},t.detect=function(e,n){for(var r,i,s=new Array,o=0,a=0,l=!1;o<n.getHeight();){var c=t.findVertices(n,o,a);if(c[0]==null&&c[3]==null){if(!l)break;l=!1,a=0;try{for(var d=(r=void 0,AH(s)),f=d.next();!f.done;f=d.next()){var h=f.value;h[1]!=null&&(o=Math.trunc(Math.max(o,h[1].getY()))),h[3]!=null&&(o=Math.max(o,Math.trunc(h[3].getY())))}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}o+=t.ROW_STEP;continue}if(l=!0,s.push(c),!e)break;c[2]!=null?(a=Math.trunc(c[2].getX()),o=Math.trunc(c[2].getY())):(a=Math.trunc(c[4].getX()),o=Math.trunc(c[4].getY()))}return s},t.findVertices=function(e,n,r){var i=e.getHeight(),s=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,i,s,n,r,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),n=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,i,s,n,r,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,n,r){for(var i=0;i<r.length;i++)e[r[i]]=n[i]},t.findRowsWithPattern=function(e,n,r,i,s,o){for(var a=new Array(4),l=!1,c=new Int32Array(o.length);i<n;i+=t.ROW_STEP){var d=t.findGuardPattern(e,s,i,r,!1,o,c);if(d!=null){for(;i>0;){var f=t.findGuardPattern(e,s,--i,r,!1,o,c);if(f!=null)d=f;else{i++;break}}a[0]=new J(d[0],i),a[1]=new J(d[1],i),l=!0;break}}var h=i+1;if(l){for(var p=0,f=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);h<n;h++){var d=t.findGuardPattern(e,f[0],h,r,!1,o,c);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}h-=p+1,a[2]=new J(f[0],h),a[3]=new J(f[1],h)}return h-i<t.BARCODE_MIN_HEIGHT&&St.fill(a,null),a},t.findGuardPattern=function(e,n,r,i,s,o,a){St.fillWithin(a,0,a.length,0);for(var l=n,c=0;e.get(l,r)&&l>0&&c++<t.MAX_PIXEL_DRIFT;)l--;for(var d=l,f=0,h=o.length,p=s;d<i;d++){var m=e.get(d,r);if(m!==p)a[f]++;else{if(f===h-1){if(t.patternMatchVariance(a,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,d]);l+=a[0]+a[1],He.arraycopy(a,2,a,0,f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,p=!p}}return f===h-1&&t.patternMatchVariance(a,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,d-1]):null},t.patternMatchVariance=function(e,n,r){for(var i=e.length,s=0,o=0,a=0;a<i;a++)s+=e[a],o+=n[a];if(s<o)return 1/0;var l=s/o;r*=l;for(var c=0,d=0;d<i;d++){var f=e[d],h=n[d]*l,p=f>h?f-h:h-f;if(p>r)return 1/0;c+=p}return c/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),TH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vs=function(){function t(e,n){if(n.length===0)throw new oe;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),He.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var n,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var s=TH(this.coefficients),o=s.next();!o.done;o=s.next()){var a=o.value;i=this.field.add(i,a)}}catch(f){n={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}for(var l=this.coefficients[0],c=this.coefficients.length,d=1;d<c;d++)l=this.field.add(this.field.multiply(e,l),this.coefficients[d]);return l},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new oe("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var s=new Int32Array(r.length),o=r.length-n.length;He.arraycopy(r,0,s,0,o);for(var a=o;a<r.length;a++)s[a]=this.field.add(n[a-o],r[a]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new oe("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new oe("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,i=e.coefficients,s=i.length,o=new Int32Array(r+s-1),a=0;a<r;a++)for(var l=n[a],c=0;c<s;c++)o[a+c]=this.field.add(o[a+c],this.field.multiply(l,i[c]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new t(this.field,n)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var n=this.coefficients.length,r=new Int32Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,r)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new oe;if(n===0)return new t(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),s=0;s<r;s++)i[s]=this.field.multiply(this.coefficients[s],n);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new he,n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},t}(),IH=function(){function t(){}return t.prototype.add=function(e,n){return(e+n)%this.modulus},t.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new oe;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new eT;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),kH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),PH=function(t){kH(e,t);function e(n,r){var i=t.call(this)||this;i.modulus=n,i.expTable=new Int32Array(n),i.logTable=new Int32Array(n);for(var s=1,o=0;o<n;o++)i.expTable[o]=s,s=s*r%n;for(var o=0;o<n-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Vs(i,new Int32Array([0])),i.one=new Vs(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new oe;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new Vs(this,i)},e.PDF417_GF=new e(be.NUMBER_OF_CODEWORDS,3),e}(IH),RH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OH=function(){function t(){this.field=PH.PDF417_GF}return t.prototype.decode=function(e,n,r){for(var i,s,o=new Vs(this.field,e),a=new Int32Array(n),l=!1,c=n;c>0;c--){var d=o.evaluateAt(this.field.exp(c));a[n-c]=d,d!==0&&(l=!0)}if(!l)return 0;var f=this.field.getOne();if(r!=null)try{for(var h=RH(r),p=h.next();!p.done;p=h.next()){var m=p.value,v=this.field.exp(e.length-1-m),w=new Vs(this.field,new Int32Array([this.field.subtract(0,v),1]));f=f.multiply(w)}}catch(T){i={error:T}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}for(var y=new Vs(this.field,a),g=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),y,n),x=g[0],_=g[1],C=this.findErrorLocations(x),E=this.findErrorMagnitudes(_,x,C),c=0;c<C.length;c++){var A=e.length-1-this.field.log(C[c]);if(A<0)throw Dt.getChecksumInstance();e[A]=this.field.subtract(e[A],E[c])}return C.length},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var s=e,o=n,a=this.field.getZero(),l=this.field.getOne();o.getDegree()>=Math.round(r/2);){var c=s,d=a;if(s=o,a=l,s.isZero())throw Dt.getChecksumInstance();o=c;for(var f=this.field.getZero(),h=s.getCoefficient(s.getDegree()),p=this.field.inverse(h);o.getDegree()>=s.getDegree()&&!o.isZero();){var m=o.getDegree()-s.getDegree(),v=this.field.multiply(o.getCoefficient(o.getDegree()),p);f=f.add(this.field.buildMonomial(m,v)),o=o.subtract(s.multiplyByMonomial(m,v))}l=f.multiply(a).subtract(d).negative()}var w=l.getCoefficient(0);if(w===0)throw Dt.getChecksumInstance();var y=this.field.inverse(w),g=l.multiply(y),x=o.multiply(y);return[g,x]},t.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),r=new Int32Array(n),i=0,s=1;s<this.field.getSize()&&i<n;s++)e.evaluateAt(s)===0&&(r[i]=this.field.inverse(s),i++);if(i!==n)throw Dt.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(e,n,r){for(var i=n.getDegree(),s=new Int32Array(i),o=1;o<=i;o++)s[i-o]=this.field.multiply(o,n.getCoefficient(o));for(var a=new Vs(this.field,s),l=r.length,c=new Int32Array(l),o=0;o<l;o++){var d=this.field.inverse(r[o]),f=this.field.subtract(0,e.evaluateAt(d)),h=this.field.inverse(a.evaluateAt(d));c[o]=this.field.multiply(f,h)}return c},t}(),B1=function(){function t(e,n,r,i,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,n,r,i,s)}return t.prototype.constructor_1=function(e,n,r,i,s){var o=n==null||r==null,a=i==null||s==null;if(o&&a)throw new j;o?(n=new J(0,i.getY()),r=new J(0,s.getY())):a&&(i=new J(e.getWidth()-1,n.getY()),s=new J(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=i,this.bottomRight=s,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),s.getX())),this.minY=Math.trunc(Math.min(n.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,n){return e==null?n:n==null?e:new t(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},t.prototype.addMissingRows=function(e,n,r){var i=this.topLeft,s=this.bottomLeft,o=this.topRight,a=this.bottomRight;if(e>0){var l=r?this.topLeft:this.topRight,c=Math.trunc(l.getY()-e);c<0&&(c=0);var d=new J(l.getX(),c);r?i=d:o=d}if(n>0){var f=r?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+n);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var p=new J(f.getX(),h);r?s=p:a=p}return new t(this.image,i,s,o,a)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),DH=function(){function t(e,n,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),Vv=function(){function t(){this.buffer=""}return t.form=function(e,n){var r=-1;function i(o,a,l,c,d,f){if(o==="%%")return"%";if(n[++r]!==void 0){o=c?parseInt(c.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,p;switch(f){case"s":p=n[r];break;case"c":p=n[r][0];break;case"f":p=parseFloat(n[r]).toFixed(o);break;case"p":p=parseFloat(n[r]).toPrecision(o);break;case"e":p=parseFloat(n[r]).toExponential(o);break;case"x":p=parseInt(n[r]).toString(h||16);break;case"d":p=parseFloat(parseInt(n[r],h||10).toPrecision(o)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var m=parseInt(l),v=l&&l[0]+""=="0"?"0":" ";p.length<m;)p=a!==void 0?p+v:v+p;return p}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,i)},t.prototype.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=t.form(e,n)},t.prototype.toString=function(){return this.buffer},t}(),MH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lT=function(){function t(e){this.boundingBox=new B1(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(n!=null)return n;for(var r=1;r<t.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(n=this.codewords[i],n!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(n=this.codewords[i],n!=null)))return n}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,n,r=new Vv,i=0;try{for(var s=MH(this.codewords),o=s.next();!o.done;o=s.next()){var a=o.value;if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(l){e={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),jH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LH=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},fl=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)},t.prototype.getValue=function(){var e,n,r=-1,i=new Array,s=function(f,h){var p={getKey:function(){return f},getValue:function(){return h}};p.getValue()>r?(r=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===r&&i.push(p.getKey())};try{for(var o=jH(this.values.entries()),a=o.next();!a.done;a=o.next()){var l=LH(a.value,2),c=l[0],d=l[1];s(c,d)}}catch(f){e={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return be.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),FH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),P0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C_=function(t){FH(e,t);function e(n,r){var i=t.call(this,n)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var n,r;try{for(var i=P0(this.getCodewords()),s=i.next();!s.done;s=i.next()){var o=s.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);for(var i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=-1,d=1,f=0,h=a;h<l;h++)if(r[h]!=null){var p=r[h],m=p.getRowNumber()-c;if(m===0)f++;else if(m===1)d=Math.max(d,f),f=1,c=p.getRowNumber();else if(m<0||p.getRowNumber()>=n.getRowCount()||m>h)r[h]=null;else{var v=void 0;d>2?v=(d-2)*m:v=m;for(var w=v>=h,y=1;y<=v&&!w;y++)w=r[h-y]!=null;w?r[h]=null:(c=p.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var n,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var s=new Int32Array(i.getRowCount());try{for(var o=P0(this.getCodewords()),a=o.next();!a.done;a=o.next()){var l=a.value;if(l!=null){var c=l.getRowNumber();if(c>=s.length)continue;s[c]++}}}catch(d){n={error:d}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),s=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=this.getCodewords(),c=-1,d=o;d<a;d++)if(l[d]!=null){var f=l[d];f.setRowNumberAsRowIndicatorColumn();var h=f.getRowNumber()-c;h===0||(h===1?c=f.getRowNumber():f.getRowNumber()>=n.getRowCount()?l[d]=null:c=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var n,r,i=this.getCodewords(),s=new fl,o=new fl,a=new fl,l=new fl;try{for(var c=P0(i),d=c.next();!d.done;d=c.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,p=f.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:o.setValue(h*3+1);break;case 1:l.setValue(h/3),a.setValue(h%3);break;case 2:s.setValue(h+1);break}}}}catch(v){n={error:v}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}if(s.getValue().length===0||o.getValue().length===0||a.getValue().length===0||l.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+a.getValue()[0]<be.MIN_ROWS_IN_BARCODE||o.getValue()[0]+a.getValue()[0]>be.MAX_ROWS_IN_BARCODE)return null;var m=new DH(s.getValue()[0],o.getValue()[0],a.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,m),m},e.prototype.removeIncorrectCodewords=function(n,r){for(var i=0;i<n.length;i++){var s=n[i];if(n[i]!=null){var o=s.getValue()%30,a=s.getRowNumber();if(a>r.getRowCount()){n[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(n[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(n[i]=null);break;case 2:o+1!==r.getColumnCount()&&(n[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(lT),BH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UH=function(){function t(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=be.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var r=this.detectionResultColumns[n].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(n,i,r));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var s=this.detectionResultColumns[i].getCodewords()[r];s!=null&&(s.setRowNumber(e[r].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),s=0,o=this.barcodeColumnCount+1;o>0&&s<this.ADJUST_ROW_NUMBER_SKIP;o--){var a=this.detectionResultColumns[o].getCodewords()[r];a!=null&&(s=t.adjustRowNumberIfValid(i,s,a),a.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),s=0,o=1;o<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;o++){var a=this.detectionResultColumns[o].getCodewords()[r];a!=null&&(s=t.adjustRowNumberIfValid(i,s,a),a.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n},t.prototype.adjustRowNumbers=function(e,n,r){var i,s;if(this.detectionResultColumns[e-1]!=null){var o=r[n],a=this.detectionResultColumns[e-1].getCodewords(),l=a;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var c=new Array(14);c[2]=a[n],c[3]=l[n],n>0&&(c[0]=r[n-1],c[4]=a[n-1],c[5]=l[n-1]),n>1&&(c[8]=r[n-2],c[10]=a[n-2],c[11]=l[n-2]),n<r.length-1&&(c[1]=r[n+1],c[6]=a[n+1],c[7]=l[n+1]),n<r.length-2&&(c[9]=r[n+2],c[12]=a[n+2],c[13]=l[n+2]);try{for(var d=BH(c),f=d.next();!f.done;f=d.next()){var h=f.value;if(t.adjustRowNumber(o,h))return}}catch(p){i={error:p}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new Vv,r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){n.format("    |   ");continue}var s=this.detectionResultColumns[i].getCodewords()[r];if(s==null){n.format("    |   ");continue}n.format(" %3d|%3d",s.getRowNumber(),s.getValue())}n.format("%n")}return n.toString()},t}(),VH=function(){function t(e,n,r,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),HH=function(){function t(){}return t.initialize=function(){for(var e=0;e<be.SYMBOL_TABLE.length;e++)for(var n=be.SYMBOL_TABLE[e],r=n&1,i=0;i<be.BARS_IN_MODULE;i++){for(var s=0;(n&1)===r;)s+=1,n>>=1;r=n&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(be.BARS_IN_MODULE)),t.RATIOS_TABLE[e][be.BARS_IN_MODULE-i-1]=Math.fround(s/be.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var n=t.getDecodedCodewordValue(t.sampleBitCounts(e));return n!==-1?n:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var n=Ne.sum(e),r=new Int32Array(be.BARS_IN_MODULE),i=0,s=0,o=0;o<be.MODULES_IN_CODEWORD;o++){var a=n/(2*be.MODULES_IN_CODEWORD)+o*n/be.MODULES_IN_CODEWORD;s+e[i]<=a&&(s+=e[i],i++),r[i]++}return r},t.getDecodedCodewordValue=function(e){var n=t.getBitValue(e);return be.getCodeword(n)===-1?-1:n},t.getBitValue=function(e){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)},t.getClosestDecodedValue=function(e){var n=Ne.sum(e),r=new Array(be.BARS_IN_MODULE);if(n>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/n);var s=O1.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var a=0;a<t.RATIOS_TABLE.length;a++){for(var l=0,c=t.RATIOS_TABLE[a],d=0;d<be.BARS_IN_MODULE;d++){var f=Math.fround(c[d]-r[d]);if(l+=Math.fround(f*f),l>=s)break}l<s&&(s=l,o=be.SYMBOL_TABLE[a])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(be.SYMBOL_TABLE.length).map(function(e){return new Array(be.BARS_IN_MODULE)}),t}(),WH=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),E_=function(){function t(){}return t.parseLong=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t}(),zH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$H=function(t){zH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Pn),GH=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,n,r){if(e==null)throw new $H;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new jv;if(r===0)return;for(var i=0;i<r;i++)this.write(e[n+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),KH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),XH=function(t){KH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Pn),YH=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qH=function(t){YH(e,t);function e(n){n===void 0&&(n=32);var r=t.call(this)||this;if(r.count=0,n<0)throw new oe("Negative initial size: "+n);return r.buf=new Uint8Array(n),r}return e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var r=this.buf.length,i=r<<1;if(i-n<0&&(i=n),i<0){if(n<0)throw new XH;i=pe.MAX_VALUE}this.buf=St.copyOfUint8Array(this.buf,i)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,r,i){if(r<0||r>n.length||i<0||r+i-n.length>0)throw new jv;this.ensureCapacity(this.count+i),He.arraycopy(n,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return St.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e}(GH),Le;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Le||(Le={}));function cT(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Au;function Ii(t){if(typeof Au>"u"&&(Au=cT()),Au===null)throw new Error("BigInt is not supported!");return Au(t)}function QH(){var t=[];t[0]=Ii(1);var e=Ii(900);t[1]=e;for(var n=2;n<16;n++)t[n]=t[n-1]*e;return t}var ZH=function(){function t(){}return t.decode=function(e,n){var r=new he(""),i=Ct.ISO8859_1;r.enableDecoding(i);for(var s=1,o=e[s++],a=new WH;s<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,r);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(o,e,i,s,r);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,r);break;case t.ECI_CHARSET:Ct.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,a);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new K;default:s--,s=t.textCompaction(e,s,r);break}if(s<e.length)o=e[s++];else throw K.getFormatInstance()}if(r.length()===0)throw K.getFormatInstance();var l=new uh(null,r.toString(),null,n);return l.setOther(a),l},t.decodeMacroBlock=function(e,n,r){if(n+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw K.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,n++)i[s]=e[n];r.setSegmentIndex(pe.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new he;n=t.textCompaction(e,n,o),r.setFileId(o.toString());var a=-1;for(e[n]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=n+1);n<e[0];)switch(e[n]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new he;n=t.textCompaction(e,n+1,l),r.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new he;n=t.textCompaction(e,n+1,c),r.setSender(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new he;n=t.textCompaction(e,n+1,d),r.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new he;n=t.numericCompaction(e,n+1,f),r.setSegmentCount(pe.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new he;n=t.numericCompaction(e,n+1,h),r.setTimestamp(E_.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new he;n=t.numericCompaction(e,n+1,p),r.setChecksum(pe.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new he;n=t.numericCompaction(e,n+1,m),r.setFileSize(E_.parseLong(m.toString()));break;default:throw K.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw K.getFormatInstance()}if(a!==-1){var v=n-a;r.isLastSegment()&&v--,r.setOptionalData(St.copyOfRange(e,a,a+v))}return n},t.textCompaction=function(e,n,r){for(var i=new Int32Array((e[0]-n)*2),s=new Int32Array((e[0]-n)*2),o=0,a=!1;n<e[0]&&!a;){var l=e[n++];if(l<t.TEXT_COMPACTION_MODE_LATCH)i[o]=l/30,i[o+1]=l%30,o+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:i[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,a=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[n++],s[o]=l,o++;break}}return t.decodeTextCompaction(i,s,o,r),n},t.decodeTextCompaction=function(e,n,r,i){for(var s=Le.ALPHA,o=Le.ALPHA,a=0;a<r;){var l=e[a],c="";switch(s){case Le.ALPHA:if(l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case t.LL:s=Le.LOWER;break;case t.ML:s=Le.MIXED;break;case t.PS:o=s,s=Le.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Le.ALPHA;break}break;case Le.LOWER:if(l<26)c=String.fromCharCode(97+l);else switch(l){case 26:c=" ";break;case t.AS:o=s,s=Le.ALPHA_SHIFT;break;case t.ML:s=Le.MIXED;break;case t.PS:o=s,s=Le.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Le.ALPHA;break}break;case Le.MIXED:if(l<t.PL)c=t.MIXED_CHARS[l];else switch(l){case t.PL:s=Le.PUNCT;break;case 26:c=" ";break;case t.LL:s=Le.LOWER;break;case t.AL:s=Le.ALPHA;break;case t.PS:o=s,s=Le.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Le.ALPHA;break}break;case Le.PUNCT:if(l<t.PAL)c=t.PUNCT_CHARS[l];else switch(l){case t.PAL:s=Le.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Le.ALPHA;break}break;case Le.ALPHA_SHIFT:if(s=o,l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=Le.ALPHA;break}break;case Le.PUNCT_SHIFT:if(s=o,l<t.PAL)c=t.PUNCT_CHARS[l];else switch(l){case t.PAL:s=Le.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Le.ALPHA;break}break}c!==""&&i.append(c),a++}},t.byteCompaction=function(e,n,r,i,s){var o=new qH,a=0,l=0,c=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=n[i++];i<n[0]&&!c;)switch(d[a++]=f,l=900*l+f,f=n[i++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,c=!0;break;default:if(a%5===0&&a>0){for(var h=0;h<6;++h)o.write(Number(Ii(l)>>Ii(8*(5-h))));l=0,a=0}break}i===n[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[a++]=f);for(var p=0;p<a;p++)o.write(d[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!c;){var m=n[i++];if(m<t.TEXT_COMPACTION_MODE_LATCH)a++,l=900*l+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,c=!0;break}if(a%5===0&&a>0){for(var h=0;h<6;++h)o.write(Number(Ii(l)>>Ii(8*(5-h))));l=0,a=0}}break}return s.append(Jn.decode(o.toByteArray(),r)),i},t.numericCompaction=function(e,n,r){for(var i=0,s=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);n<e[0]&&!s;){var a=e[n++];if(n===e[0]&&(s=!0),a<t.TEXT_COMPACTION_MODE_LATCH)o[i]=a,i++;else switch(a){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,s=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||a===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&i>0&&(r.append(t.decodeBase900toBase10(o,i)),i=0)}return n},t.decodeBase900toBase10=function(e,n){for(var r=Ii(0),i=0;i<n;i++)r+=t.EXP900[n-i-1]*Ii(e[i]);var s=r.toString();if(s.charAt(0)!=="1")throw new K;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=cT()?QH():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),Ja=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JH=function(){function t(){}return t.decode=function(e,n,r,i,s,o,a){for(var l=new B1(e,n,r,i,s),c=null,d=null,f,h=!0;;h=!1){if(n!=null&&(c=t.getRowIndicatorColumn(e,l,n,!0,o,a)),i!=null&&(d=t.getRowIndicatorColumn(e,l,i,!1,o,a)),f=t.merge(c,d),f==null)throw j.getNotFoundInstance();var p=f.getBoundingBox();if(h&&p!=null&&(p.getMinY()<l.getMinY()||p.getMaxY()>l.getMaxY()))l=p;else break}f.setBoundingBox(l);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,c),f.setDetectionResultColumn(m,d);for(var v=c!=null,w=1;w<=m;w++){var y=v?w:m-w;if(f.getDetectionResultColumn(y)===void 0){var g=void 0;y===0||y===m?g=new C_(l,y===0):g=new lT(l),f.setDetectionResultColumn(y,g);for(var x=-1,_=x,C=l.getMinY();C<=l.getMaxY();C++){if(x=t.getStartColumn(f,y,C,v),x<0||x>l.getMaxX()){if(_===-1)continue;x=_}var E=t.detectCodeword(e,l.getMinX(),l.getMaxX(),v,x,C,o,a);E!=null&&(g.setCodeword(C,E),_=x,o=Math.min(o,E.getWidth()),a=Math.max(a,E.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,n){if(e==null&&n==null)return null;var r=t.getBarcodeMetadata(e,n);if(r==null)return null;var i=B1.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(n));return new UH(r,i)},t.adjustBoundingBox=function(e){var n,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var s=t.getMax(i),o=0;try{for(var a=Ja(i),l=a.next();!l.done;l=a.next()){var c=l.value;if(o+=s-c,c>0)break}}catch(p){n={error:p}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var d=e.getCodewords(),f=0;o>0&&d[f]==null;f++)o--;for(var h=0,f=i.length-1;f>=0&&(h+=s-i[f],!(i[f]>0));f--);for(var f=d.length-1;h>0&&d[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(o,h,e.isLeft())},t.getMax=function(e){var n,r,i=-1;try{for(var s=Ja(e),o=s.next();!o.done;o=s.next()){var a=o.value;i=Math.max(i,a)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},t.getBarcodeMetadata=function(e,n){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();var i;return n==null||(i=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,n,r,i,s,o){for(var a=new C_(n,i),l=0;l<2;l++)for(var c=l===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),f=Math.trunc(Math.trunc(r.getY()));f<=n.getMaxY()&&f>=n.getMinY();f+=c){var h=t.detectCodeword(e,0,e.getWidth(),i,d,f,s,o);h!=null&&(a.setCodeword(f,h),i?d=h.getStartX():d=h.getEndX())}return a},t.adjustCodewordCount=function(e,n){var r=n[0][1],i=r.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(s<1||s>be.MAX_CODEWORDS_IN_BARCODE)throw j.getNotFoundInstance();r.setValue(s)}else i[0]!==s&&r.setValue(s)},t.createDecoderResult=function(e){var n=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,n);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],o=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var l=0;l<e.getBarcodeColumnCount();l++){var c=n[a][l+1].getValue(),d=a*e.getBarcodeColumnCount()+l;c.length===0?r.push(d):c.length===1?i[d]=c[0]:(o.push(d),s.push(c))}for(var f=new Array(s.length),h=0;h<f.length;h++)f[h]=s[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,be.toIntArray(r),be.toIntArray(o),f)},t.createDecoderResultFromAmbiguousValues=function(e,n,r,i,s){for(var o=new Int32Array(i.length),a=100;a-- >0;){for(var l=0;l<o.length;l++)n[i[l]]=s[l][o[l]];try{return t.decodeCodewords(n,e,r)}catch(d){var c=d instanceof Dt;if(!c)throw d}if(o.length===0)throw Dt.getChecksumInstance();for(var l=0;l<o.length;l++)if(o[l]<s[l].length-1){o[l]++;break}else if(o[l]=0,l===o.length-1)throw Dt.getChecksumInstance()}throw Dt.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var n,r,i,s,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<o.length;a++)for(var l=0;l<o[a].length;l++)o[a][l]=new fl;var c=0;try{for(var d=Ja(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)try{for(var p=(i=void 0,Ja(h.getCodewords())),m=p.next();!m.done;m=p.next()){var v=m.value;if(v!=null){var w=v.getRowNumber();if(w>=0){if(w>=o.length)continue;o[w][c].setValue(v.getValue())}}}}catch(y){i={error:y}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}c++}}catch(y){n={error:y}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return o},t.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,n,r,i){var s,o,a=i?1:-1,l=null;if(t.isValidBarcodeColumn(e,n-a)&&(l=e.getDetectionResultColumn(n-a).getCodeword(r)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(n).getCodewordNearby(r),l!=null)return i?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,n-a)&&(l=e.getDetectionResultColumn(n-a).getCodewordNearby(r)),l!=null)return i?l.getEndX():l.getStartX();for(var c=0;t.isValidBarcodeColumn(e,n-a);){n-=a;try{for(var d=(s=void 0,Ja(e.getDetectionResultColumn(n).getCodewords())),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)return(i?h.getEndX():h.getStartX())+a*c*(h.getEndX()-h.getStartX())}}catch(p){s={error:p}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}c++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,n,r,i,s,o,a,l){s=t.adjustCodewordStartColumn(e,n,r,i,s,o);var c=t.getModuleBitCount(e,n,r,i,s,o);if(c==null)return null;var d,f=Ne.sum(c);if(i)d=s+f;else{for(var h=0;h<c.length/2;h++){var p=c[h];c[h]=c[c.length-1-h],c[c.length-1-h]=p}d=s,s=d-f}if(!t.checkCodewordSkew(f,a,l))return null;var m=HH.getDecodedValue(c),v=be.getCodeword(m);return v===-1?null:new VH(s,d,t.getCodewordBucketNumber(m),v)},t.getModuleBitCount=function(e,n,r,i,s,o){for(var a=s,l=new Int32Array(8),c=0,d=i?1:-1,f=i;(i?a<r:a>=n)&&c<l.length;)e.get(a,o)===f?(l[c]++,a+=d):(c++,f=!f);return c===l.length||a===(i?r:n)&&c===l.length-1?l:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,n,r,i,s,o){for(var a=s,l=i?-1:1,c=0;c<2;c++){for(;(i?a>=n:a<r)&&i===e.get(a,o);){if(Math.abs(s-a)>t.CODEWORD_SKEW_SIZE)return s;a+=l}l=-l,i=!i}return a},t.checkCodewordSkew=function(e,n,r){return n-t.CODEWORD_SKEW_SIZE<=e&&e<=r+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,n,r){if(e.length===0)throw K.getFormatInstance();var i=1<<n+1,s=t.correctErrors(e,r,i);t.verifyCodewordCount(e,i);var o=ZH.decode(e,""+n);return o.setErrorsCorrected(s),o.setErasures(r.length),o},t.correctErrors=function(e,n,r){if(n!=null&&n.length>r/2+t.MAX_ERRORS||r<0||r>t.MAX_EC_CODEWORDS)throw Dt.getChecksumInstance();return t.errorCorrection.decode(e,r,n)},t.verifyCodewordCount=function(e,n){if(e.length<4)throw K.getFormatInstance();var r=e[0];if(r>e.length)throw K.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw K.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),r=0,i=n.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)n[i]++,e>>=1;return n},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var n=new Vv,r=0;r<e.length;r++){n.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var s=e[r][i];s.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}n.format("%n")}return n.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new OH,t}(),eW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U1=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=t.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw j.getNotFoundInstance();return r[0]},t.prototype.decodeMultiple=function(e,n){n===void 0&&(n=null);try{return t.decode(e,n,!0)}catch(r){throw r instanceof K||r instanceof Dt?j.getNotFoundInstance():r}},t.decode=function(e,n,r){var i,s,o=new Array,a=NH.detectMultiple(e,n,r);try{for(var l=eW(a.getPoints()),c=l.next();!c.done;c=l.next()){var d=c.value,f=JH.decode(a.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),h=new sn(f.getText(),f.getRawBytes(),void 0,d,ie.PDF_417);h.putMetadata($t.ERROR_CORRECTION_LEVEL,f.getECLevel());var p=f.getOther();p!=null&&h.putMetadata($t.PDF417_EXTRA_METADATA,p),o.push(h)}}catch(m){i={error:m}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return o.map(function(m){return m})},t.getMaxWidth=function(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMinWidth=function(e,n){return e==null||n==null?pe.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),tW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),S_=function(t){tW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Pn),b_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nW=function(){function t(){}return t.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var n=e!=null&&e.get(Je.TRY_HARDER)!==void 0,r=e==null?null:e.get(Je.POSSIBLE_FORMATS),i=new Array;if(r!=null){var s=r.some(function(o){return o===ie.UPC_A||o===ie.UPC_E||o===ie.EAN_13||o===ie.EAN_8||o===ie.CODABAR||o===ie.CODE_39||o===ie.CODE_93||o===ie.CODE_128||o===ie.ITF||o===ie.RSS_14||o===ie.RSS_EXPANDED});s&&!n&&i.push(new dl(e)),r.includes(ie.QR_CODE)&&i.push(new F1),r.includes(ie.DATA_MATRIX)&&i.push(new L1),r.includes(ie.AZTEC)&&i.push(new M1),r.includes(ie.PDF_417)&&i.push(new U1),s&&n&&i.push(new dl(e))}i.length===0&&(n||i.push(new dl(e)),i.push(new F1),i.push(new L1),i.push(new M1),i.push(new U1),n&&i.push(new dl(e))),this.readers=i},t.prototype.reset=function(){var e,n;if(this.readers!==null)try{for(var r=b_(this.readers),i=r.next();!i.done;i=r.next()){var s=i.value;s.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var n,r;if(this.readers===null)throw new S_("No readers where selected, nothing can be read.");try{for(var i=b_(this.readers),s=i.next();!s.done;s=i.next()){var o=s.value;try{return o.decode(e,this.hints)}catch(a){if(a instanceof S_)continue}}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}throw new j("No MultiFormat Readers were able to detect the code.")},t}(),rW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),iW=function(t){rW(e,t);function e(n,r){n===void 0&&(n=null),r===void 0&&(r=500);var i=this,s=new nW;return s.setHints(n),i=t.call(this,s,r)||this,i}return e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e}(ja),sW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){sW(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new U1,n)||this}return e})(ja);var oW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){oW(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new F1,n)||this}return e})(ja);var V1;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(V1||(V1={}));const Nu=V1;var uT=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new es(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var r=n[n.length-1],i=this.field,s=n.length;s<=e;s++){var o=r.multiply(new es(i,Int32Array.from([1,i.exp(s-1+i.getGeneratorBase())])));n.push(o),r=o}return n[e]},t.prototype.encode=function(e,n){if(n===0)throw new oe("No error correction bytes");var r=e.length-n;if(r<=0)throw new oe("No data bytes provided");var i=this.buildGenerator(n),s=new Int32Array(r);He.arraycopy(e,0,s,0,r);var o=new es(this.field,s);o=o.multiplyByMonomial(n,1);for(var a=o.divide(i)[1],l=a.getCoefficients(),c=n-l.length,d=0;d<c;d++)e[r+d]=0;He.arraycopy(l,0,e,r+c,l.length)},t}(),hl=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),s=e.getHeight(),o=0;o<s-1;o++)for(var a=r[o],l=0;l<i-1;l++){var c=a[l];c===a[l+1]&&c===r[o+1][l]&&c===r[o+1][l+1]&&n++}return t.N2*n},t.applyMaskPenaltyRule3=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var a=0;a<i;a++){var l=r[o];a+6<i&&l[a]===1&&l[a+1]===0&&l[a+2]===1&&l[a+3]===1&&l[a+4]===1&&l[a+5]===0&&l[a+6]===1&&(t.isWhiteHorizontal(l,a-4,a)||t.isWhiteHorizontal(l,a+7,a+11))&&n++,o+6<s&&r[o][a]===1&&r[o+1][a]===0&&r[o+2][a]===1&&r[o+3][a]===1&&r[o+4][a]===1&&r[o+5][a]===0&&r[o+6][a]===1&&(t.isWhiteVertical(r,a,o-4,o)||t.isWhiteVertical(r,a,o+7,o+11))&&n++}return n*t.N3},t.isWhiteHorizontal=function(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var i=n;i<r;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,n,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var s=r;s<i;s++)if(e[s][n]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var a=r[o],l=0;l<i;l++)a[l]===1&&n++;var c=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(n*2-c)*10/c);return d*t.N4},t.getDataMaskBit=function(e,n,r){var i,s;switch(e){case 0:i=r+n&1;break;case 1:i=r&1;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:s=r*n,i=(s&1)+s%3;break;case 6:s=r*n,i=(s&1)+s%3&1;break;case 7:s=r*n,i=s%3+(r+n&1)&1;break;default:throw new oe("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,n){for(var r=0,i=n?e.getHeight():e.getWidth(),s=n?e.getWidth():e.getHeight(),o=e.getArray(),a=0;a<i;a++){for(var l=0,c=-1,d=0;d<s;d++){var f=n?o[a][d]:o[d][a];f===c?l++:(l>=5&&(r+=t.N1+(l-5)),l=1,c=f)}l>=5&&(r+=t.N1+(l-5))}return r},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),aW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lW=function(){function t(e,n){this.width=e,this.height=n;for(var r=new Array(n),i=0;i!==n;i++)r[i]=new Uint8Array(e);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,n){return this.bytes[n][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,n,r){this.bytes[n][e]=r},t.prototype.setBoolean=function(e,n,r){this.bytes[n][e]=r?1:0},t.prototype.clear=function(e){var n,r;try{for(var i=aW(this.bytes),s=i.next();!s.done;s=i.next()){var o=s.value;St.fill(o,e)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var s=this.bytes[r],o=n.bytes[r],a=0,l=this.width;a<l;++a)if(s[a]!==o[a])return!1;return!0},t.prototype.toString=function(){for(var e=new he,n=0,r=this.height;n<r;++n){for(var i=this.bytes[n],s=0,o=this.width;s<o;++s)switch(i[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),H1=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new he;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),cW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ze=function(t){cW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Pn),A_=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,n,r,i,s){t.clearMatrix(s),t.embedBasicPatterns(r,s),t.embedTypeInfo(n,i,s),t.maybeEmbedVersionInfo(r,s),t.embedDataBits(e,i,s)},t.embedBasicPatterns=function(e,n){t.embedPositionDetectionPatternsAndSeparators(n),t.embedDarkDotAtLeftBottomCorner(n),t.maybeEmbedPositionAdjustmentPatterns(e,n),t.embedTimingPatterns(n)},t.embedTypeInfo=function(e,n,r){var i=new Mt;t.makeTypeInfoBits(e,n,i);for(var s=0,o=i.getSize();s<o;++s){var a=i.get(i.getSize()-1-s),l=t.TYPE_INFO_COORDINATES[s],c=l[0],d=l[1];if(r.setBoolean(c,d,a),s<8){var f=r.getWidth()-s-1,h=8;r.setBoolean(f,h,a)}else{var f=8,h=r.getHeight()-7+(s-8);r.setBoolean(f,h,a)}}},t.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var r=new Mt;t.makeVersionInfoBits(e,r);for(var i=6*3-1,s=0;s<6;++s)for(var o=0;o<3;++o){var a=r.get(i);i--,n.setBoolean(s,n.getHeight()-11+o,a),n.setBoolean(n.getHeight()-11+o,s,a)}}},t.embedDataBits=function(e,n,r){for(var i=0,s=-1,o=r.getWidth()-1,a=r.getHeight()-1;o>0;){for(o===6&&(o-=1);a>=0&&a<r.getHeight();){for(var l=0;l<2;++l){var c=o-l;if(t.isEmpty(r.get(c,a))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,n!==255&&hl.getDataMaskBit(n,c,a)&&(d=!d),r.setBoolean(c,a,d)}}a+=s}s=-s,a+=s,o-=2}if(i!==e.getSize())throw new ze("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-pe.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,n){if(n===0)throw new oe("0 polynomial");var r=t.findMSBSet(n);for(e<<=r-1;t.findMSBSet(e)>=r;)e^=n<<t.findMSBSet(e)-r;return e},t.makeTypeInfoBits=function(e,n,r){if(!H1.isValidMaskPattern(n))throw new ze("Invalid mask pattern");var i=e.getBits()<<3|n;r.appendBits(i,5);var s=t.calculateBCHCode(i,t.TYPE_INFO_POLY);r.appendBits(s,10);var o=new Mt;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new ze("should not happen but we got: "+r.getSize())},t.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var r=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new ze("should not happen but we got: "+n.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var r=(n+1)%2;t.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),t.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new ze;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,n,r){for(var i=0;i<8;++i){if(!t.isEmpty(r.get(e+i,n)))throw new ze;r.setNumber(e+i,n,0)}},t.embedVerticalSeparationPattern=function(e,n,r){for(var i=0;i<7;++i){if(!t.isEmpty(r.get(e,n+i)))throw new ze;r.setNumber(e,n+i,0)}},t.embedPositionAdjustmentPattern=function(e,n,r){for(var i=0;i<5;++i)for(var s=t.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,n+i,s[o])},t.embedPositionDetectionPattern=function(e,n,r){for(var i=0;i<7;++i)for(var s=t.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,n+i,s[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var n=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-n,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-n,e);var r=8;t.embedHorizontalSeparationPattern(0,r-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],s=0,o=i.length;s!==o;s++){var a=i[s];if(a>=0)for(var l=0;l!==o;l++){var c=i[l];c>=0&&t.isEmpty(n.get(c,a))&&t.embedPositionAdjustmentPattern(c-2,a-2,n)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),uW=function(){function t(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),N_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return hl.applyMaskPenaltyRule1(e)+hl.applyMaskPenaltyRule2(e)+hl.applyMaskPenaltyRule3(e)+hl.applyMaskPenaltyRule4(e)},t.encode=function(e,n,r){r===void 0&&(r=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,s=r!==null&&r.get(Nu.CHARACTER_SET)!==void 0;s&&(i=r.get(Nu.CHARACTER_SET).toString());var o=this.chooseMode(e,i),a=new Mt;if(o===$e.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=Ct.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,a)}this.appendModeInfo(o,a);var c=new Mt;this.appendBytes(e,o,c,i);var d;if(r!==null&&r.get(Nu.QR_VERSION)!==void 0){var f=Number.parseInt(r.get(Nu.QR_VERSION).toString(),10);d=Xs.getVersionForNumber(f);var h=this.calculateBitsNeeded(o,a,c,d);if(!this.willFit(h,d,n))throw new ze("Data too big for requested version")}else d=this.recommendVersion(n,o,a,c);var p=new Mt;p.appendBitArray(a);var m=o===$e.BYTE?c.getSizeInBytes():e.length;this.appendLengthInfo(m,d,o,p),p.appendBitArray(c);var v=d.getECBlocksForLevel(n),w=d.getTotalCodewords()-v.getTotalECCodewords();this.terminateBits(w,p);var y=this.interleaveWithECBytes(p,d.getTotalCodewords(),w,v.getNumBlocks()),g=new H1;g.setECLevel(n),g.setMode(o),g.setVersion(d);var x=d.getDimensionForVersion(),_=new lW(x,x),C=this.chooseMaskPattern(y,n,d,_);return g.setMaskPattern(C),A_.buildMatrix(y,n,d,C,_),g.setMatrix(_),g},t.recommendVersion=function(e,n,r,i){var s=this.calculateBitsNeeded(n,r,i,Xs.getVersionForNumber(1)),o=this.chooseVersion(s,e),a=this.calculateBitsNeeded(n,r,i,o);return this.chooseVersion(a,e)},t.calculateBitsNeeded=function(e,n,r,i){return n.getSize()+e.getCharacterCountBits(i)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,n){if(n===void 0&&(n=null),Ct.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return $e.KANJI;for(var r=!1,i=!1,s=0,o=e.length;s<o;++s){var a=e.charAt(s);if(t.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return $e.BYTE}return i?$e.ALPHANUMERIC:r?$e.NUMERIC:$e.BYTE},t.isOnlyDoubleByteKanji=function(e){var n;try{n=Jn.encode(e,Ct.SJIS)}catch{return!1}var r=n.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var s=n[i]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,n,r,i){for(var s=Number.MAX_SAFE_INTEGER,o=-1,a=0;a<H1.NUM_MASK_PATTERNS;a++){A_.buildMatrix(e,n,r,a,i);var l=this.calculateMaskPenalty(i);l<s&&(s=l,o=a)}return o},t.chooseVersion=function(e,n){for(var r=1;r<=40;r++){var i=Xs.getVersionForNumber(r);if(t.willFit(e,i,n))return i}throw new ze("Data too big")},t.willFit=function(e,n,r){var i=n.getTotalCodewords(),s=n.getECBlocksForLevel(r),o=s.getTotalECCodewords(),a=i-o,l=(e+7)/8;return a>=l},t.terminateBits=function(e,n){var r=e*8;if(n.getSize()>r)throw new ze("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(var i=0;i<4&&n.getSize()<r;++i)n.appendBit(!1);var s=n.getSize()&7;if(s>0)for(var i=s;i<8;i++)n.appendBit(!1);for(var o=e-n.getSizeInBytes(),i=0;i<o;++i)n.appendBits(i&1?17:236,8);if(n.getSize()!==r)throw new ze("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,n,r,i,s,o){if(i>=r)throw new ze("Block ID too large");var a=e%r,l=r-a,c=Math.floor(e/r),d=c+1,f=Math.floor(n/r),h=f+1,p=c-f,m=d-h;if(p!==m)throw new ze("EC bytes mismatch");if(r!==l+a)throw new ze("RS blocks mismatch");if(e!==(f+p)*l+(h+m)*a)throw new ze("Total bytes mismatch");i<l?(s[0]=f,o[0]=p):(s[0]=h,o[0]=m)},t.interleaveWithECBytes=function(e,n,r,i){var s,o,a,l;if(e.getSizeInBytes()!==r)throw new ze("Number of bits and data bytes does not match");for(var c=0,d=0,f=0,h=new Array,p=0;p<i;++p){var m=new Int32Array(1),v=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(n,r,i,p,m,v);var w=m[0],y=new Uint8Array(w);e.toBytes(8*c,y,0,w);var g=t.generateECBytes(y,v[0]);h.push(new uW(y,g)),d=Math.max(d,w),f=Math.max(f,g.length),c+=m[0]}if(r!==c)throw new ze("Data bytes does not match offset");for(var x=new Mt,p=0;p<d;++p)try{for(var _=(s=void 0,N_(h)),C=_.next();!C.done;C=_.next()){var E=C.value,y=E.getDataBytes();p<y.length&&x.appendBits(y[p],8)}}catch(O){s={error:O}}finally{try{C&&!C.done&&(o=_.return)&&o.call(_)}finally{if(s)throw s.error}}for(var p=0;p<f;++p)try{for(var A=(a=void 0,N_(h)),T=A.next();!T.done;T=A.next()){var E=T.value,g=E.getErrorCorrectionBytes();p<g.length&&x.appendBits(g[p],8)}}catch(O){a={error:O}}finally{try{T&&!T.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}if(n!==x.getSizeInBytes())throw new ze("Interleaving error: "+n+" and "+x.getSizeInBytes()+" differ.");return x},t.generateECBytes=function(e,n){for(var r=e.length,i=new Int32Array(r+n),s=0;s<r;s++)i[s]=e[s]&255;new uT(bn.QR_CODE_FIELD_256).encode(i,n);for(var o=new Uint8Array(n),s=0;s<n;s++)o[s]=i[r+s];return o},t.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,n,r,i){var s=r.getCharacterCountBits(n);if(e>=1<<s)throw new ze(e+" is bigger than "+((1<<s)-1));i.appendBits(e,s)},t.appendBytes=function(e,n,r,i){switch(n){case $e.NUMERIC:t.appendNumericBytes(e,r);break;case $e.ALPHANUMERIC:t.appendAlphanumericBytes(e,r);break;case $e.BYTE:t.append8BitBytes(e,r,i);break;case $e.KANJI:t.appendKanjiBytes(e,r);break;default:throw new ze("Invalid mode: "+n)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var n=t.getDigit(e);return n>=0&&n<=9},t.appendNumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var s=t.getDigit(e.charAt(i));if(i+2<r){var o=t.getDigit(e.charAt(i+1)),a=t.getDigit(e.charAt(i+2));n.appendBits(s*100+o*10+a,10),i+=3}else if(i+1<r){var o=t.getDigit(e.charAt(i+1));n.appendBits(s*10+o,7),i+=2}else n.appendBits(s,4),i++}},t.appendAlphanumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var s=t.getAlphanumericCode(e.charCodeAt(i));if(s===-1)throw new ze;if(i+1<r){var o=t.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new ze;n.appendBits(s*45+o,11),i+=2}else n.appendBits(s,6),i++}},t.append8BitBytes=function(e,n,r){var i;try{i=Jn.encode(e,r)}catch(l){throw new ze(l)}for(var s=0,o=i.length;s!==o;s++){var a=i[s];n.appendBits(a,8)}},t.appendKanjiBytes=function(e,n){var r;try{r=Jn.encode(e,Ct.SJIS)}catch(f){throw new ze(f)}for(var i=r.length,s=0;s<i;s+=2){var o=r[s]&255,a=r[s+1]&255,l=o<<8&4294967295|a,c=-1;if(l>=33088&&l<=40956?c=l-33088:l>=57408&&l<=60351&&(c=l-49472),c===-1)throw new ze("Invalid byte sequence");var d=(c>>8)*192+(c&255);n.appendBits(d,13)}},t.appendECI=function(e,n){n.appendBits($e.ECI.getBits(),4),n.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Ct.UTF8.getName(),t})();var dW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){dW(e,t);function e(n,r,i,s,o,a,l,c){var d=t.call(this,a,l)||this;if(d.yuvData=n,d.dataWidth=r,d.dataHeight=i,d.left=s,d.top=o,s+a>r||o+l>i)throw new oe("Crop rectangle does not fit within image data.");return c&&d.reverseHorizontal(a,l),d}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new oe("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(n+this.top)*this.dataWidth+this.left;return He.arraycopy(this.yuvData,s,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=n*r,s=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return He.arraycopy(this.yuvData,o,s,0,i),s;for(var a=0;a<r;a++){var l=a*n;He.arraycopy(this.yuvData,o,s,l,n),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,i,s,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(n*r),s=this.yuvData,o=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var l=a*n,c=0;c<n;c++){var d=s[o+c*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+c]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,r){for(var i=this.yuvData,s=0,o=this.top*this.dataWidth+this.left;s<r;s++,o+=this.dataWidth)for(var a=o+n/2,l=o,c=o+n-1;l<a;l++,c--){var d=i[l];i[l]=i[c],i[c]=d}},e.prototype.invert=function(){return new Lv(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(ch);var fW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){fW(e,t);function e(n,r,i,s,o,a,l){var c=t.call(this,r,i)||this;if(c.dataWidth=s,c.dataHeight=o,c.left=a,c.top=l,n.BYTES_PER_ELEMENT===4){for(var d=r*i,f=new Uint8ClampedArray(d),h=0;h<d;h++){var p=n[h],m=p>>16&255,v=p>>7&510,w=p&255;f[h]=(m+v+w)/4&255}c.luminances=f}else c.luminances=n;if(s===void 0&&(c.dataWidth=r),o===void 0&&(c.dataHeight=i),a===void 0&&(c.left=0),l===void 0&&(c.top=0),c.left+r>c.dataWidth||c.top+i>c.dataHeight)throw new oe("Crop rectangle does not fit within image data.");return c}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new oe("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var s=(n+this.top)*this.dataWidth+this.left;return He.arraycopy(this.luminances,s,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=n*r,s=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return He.arraycopy(this.luminances,o,s,0,i),s;for(var a=0;a<r;a++){var l=a*n;He.arraycopy(this.luminances,o,s,l,n),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,s){return new e(this.luminances,i,s,this.dataWidth,this.dataHeight,this.left+n,this.top+r)},e.prototype.invert=function(){return new Lv(this)},e})(ch);var hW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pW=function(t){hW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(n){return this.getCharacterSetECIByName(n)},e}(Ct),mW=function(){function t(){}return t.ISO_8859_1=Ct.ISO8859_1,t}(),W1,gW=301,vW=function(t,e){for(var n=1,r=0;r<255;r++)e[r]=n,t[n]=r,n*=2,n>=256&&(n^=gW);return{LOG:t,ALOG:e}};W1=vW([],[]),W1.LOG;W1.ALOG;var T_;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(T_||(T_={}));var I_=129,dT=230,yW=231,xW=235,wW=236,_W=237,CW=238,EW=239,SW=240,R0=254,bW=254,k_="[)>05",P_="[)>06",R_="",De=0,Vt=1,cn=2,vt=3,kt=4,Qt=5,AW=function(){function t(){}return t.prototype.getEncodingMode=function(){return De},t.prototype.encode=function(e){var n=mr.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(n>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=mr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Qt:e.writeCodeword(yW),e.signalEncoderChange(Qt);return;case Vt:e.writeCodeword(dT),e.signalEncoderChange(Vt);return;case vt:e.writeCodeword(CW),e.signalEncoderChange(vt);break;case cn:e.writeCodeword(EW),e.signalEncoderChange(cn);break;case kt:e.writeCodeword(SW),e.signalEncoderChange(kt);break;default:throw new Error("Illegal mode: "+i)}else mr.isExtendedASCII(r)?(e.writeCodeword(xW),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,n){if(mr.isDigit(e)&&mr.isDigit(n)){var r=(e-48)*10+(n-48);return r+130}throw new Error("not digits: "+e+n)},t}(),NW=function(){function t(){}return t.prototype.getEncodingMode=function(){return Qt},t.prototype.encode=function(e){var n=new he;for(n.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();n.append(r),e.pos++;var i=mr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(De);break}}var s=n.length()-1,o=1,a=e.getCodewordCount()+s+o;e.updateSymbolInfo(a);var l=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||l)if(s<=249)n.setCharAt(0,Ee.getCharAt(s));else if(s<=1555)n.setCharAt(0,Ee.getCharAt(Math.floor(s/250)+249)),n.insert(1,Ee.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var c=0,r=n.length();c<r;c++)e.writeCodeword(this.randomize255State(n.charAt(c).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,n){var r=149*n%255+1,i=e+r;return i<=255?i:i-256},t}(),Hv=function(){function t(){}return t.prototype.getEncodingMode=function(){return Vt},t.prototype.encodeMaximal=function(e){for(var n=new he,r=0,i=e.pos,s=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,n),n.length()%3===0&&(i=e.pos,s=n.length())}if(s!==n.length()){var a=Math.floor(n.length()/3*2),l=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l,d=Math.floor(n.length()%3);(d===2&&c!==2||d===1&&(r>3||c!==1))&&(e.pos=i)}n.length()>0&&e.writeCodeword(dT),this.handleEOD(e,n)},t.prototype.encode=function(e){for(var n=new he;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,n),s=Math.floor(n.length()/3)*2,o=e.getCodewordCount()+s;e.updateSymbolInfo(o);var a=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var l=new he;for(n.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,n,l,i));n.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,n,l,i);break}var c=n.length();if(c%3===0){var d=mr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(De);break}}}this.handleEOD(e,n)},t.prototype.backtrackOneCharacter=function(e,n,r,i){var s=n.length(),o=n.toString().substring(0,s-i);n.setLengthToZero(),n.append(o),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var r=n.toString().substring(3);n.setLengthToZero(),n.append(r)},t.prototype.handleEOD=function(e,n){var r=Math.floor(n.length()/3*2),i=n.length()%3,s=e.getCodewordCount()+r;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(i===2){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(R0)}else if(o===1&&i===1){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(R0),e.pos--}else if(i===0){for(;n.length()>=3;)this.writeNextTriplet(e,n);(o>0||e.hasMoreCharacters())&&e.writeCodeword(R0)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(De)},t.prototype.encodeChar=function(e,n){if(e===32)return n.append(3),1;if(e>=48&&e<=57)return n.append(e-48+4),1;if(e>=65&&e<=90)return n.append(e-65+14),1;if(e<32)return n.append(0),n.append(e),2;if(e<=47)return n.append(1),n.append(e-33),2;if(e<=64)return n.append(1),n.append(e-58+15),2;if(e<=95)return n.append(1),n.append(e-91+22),2;if(e<=127)return n.append(2),n.append(e-96),2;n.append("1");var r=2;return r+=this.encodeChar(e-128,n),r},t.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=n/256,i=n%256,s=new he;return s.append(r),s.append(i),s.toString()},t}(),TW=function(){function t(){}return t.prototype.getEncodingMode=function(){return kt},t.prototype.encode=function(e){for(var n=new he;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,n),e.pos++;var i=n.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var s=n.toString().substring(4);n.setLengthToZero(),n.append(s);var o=mr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(De);break}}}n.append(Ee.getCharAt(31)),this.handleEOD(e,n)},t.prototype.handleEOD=function(e,n){try{var r=n.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,a=this.encodeToCodewords(n.toString()),l=!e.hasMoreCharacters(),c=l&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(c=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}c?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(a)}finally{e.signalEncoderChange(De)}},t.prototype.encodeChar=function(e,n){e>=32&&e<=63?n.append(e):e>=64&&e<=94?n.append(Ee.getCharAt(e-64)):mr.illegalCharacter(Ee.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var n=e.length;if(n===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=n>=2?e.charAt(1).charCodeAt(0):0,s=n>=3?e.charAt(2).charCodeAt(0):0,o=n>=4?e.charAt(3).charCodeAt(0):0,a=(r<<18)+(i<<12)+(s<<6)+o,l=a>>16&255,c=a>>8&255,d=a&255,f=new he;return f.append(l),n>=2&&f.append(c),n>=3&&f.append(d),f.toString()},t}(),IW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pe=function(){function t(e,n,r,i,s,o,a,l){a===void 0&&(a=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=s,this.dataRegions=o,this.rsBlockData=a,this.rsBlockError=l}return t.lookup=function(e,n,r,i,s){var o,a;n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!0);try{for(var l=kW(RW),c=l.next();!c.done;c=l.next()){var d=c.value;if(!(n===1&&d.rectangular)&&!(n===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){o={error:f}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),PW=function(t){IW(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e}(Pe),RW=[new Pe(!1,3,5,8,8,1),new Pe(!1,5,7,10,10,1),new Pe(!0,5,7,16,6,1),new Pe(!1,8,10,12,12,1),new Pe(!0,10,11,14,6,2),new Pe(!1,12,12,14,14,1),new Pe(!0,16,14,24,10,1),new Pe(!1,18,14,16,16,1),new Pe(!1,22,18,18,18,1),new Pe(!0,22,18,16,10,2),new Pe(!1,30,20,20,20,1),new Pe(!0,32,24,16,14,2),new Pe(!1,36,24,22,22,1),new Pe(!1,44,28,24,24,1),new Pe(!0,49,28,22,14,2),new Pe(!1,62,36,14,14,4),new Pe(!1,86,42,16,16,4),new Pe(!1,114,48,18,18,4),new Pe(!1,144,56,20,20,4),new Pe(!1,174,68,22,22,4),new Pe(!1,204,84,24,24,4,102,42),new Pe(!1,280,112,14,14,16,140,56),new Pe(!1,368,144,16,16,16,92,36),new Pe(!1,456,192,18,18,16,114,48),new Pe(!1,576,224,20,20,16,144,56),new Pe(!1,696,272,22,22,16,174,68),new Pe(!1,816,336,24,24,16,136,56),new Pe(!1,1050,408,18,18,36,175,68),new Pe(!1,1304,496,20,20,36,163,62),new PW],OW=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(a){return a.charCodeAt(0)}),r=new he,i=0,s=n.length;i<s;i++){var o=String.fromCharCode(n[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new he,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Pe.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),DW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),MW=function(t){DW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return vt},e.prototype.encode=function(n){for(var r=new he;n.hasMoreCharacters();){var i=n.getCurrentChar();n.pos++,this.encodeChar(i,r);var s=r.length();if(s%3===0){this.writeNextTriplet(n,r);var o=mr.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){n.signalEncoderChange(De);break}}}this.handleEOD(n,r)},e.prototype.encodeChar=function(n,r){switch(n){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:n>=48&&n<=57?r.append(n-48+4):n>=65&&n<=90?r.append(n-65+14):mr.illegalCharacter(Ee.getCharAt(n));break}return 1},e.prototype.handleEOD=function(n,r){n.updateSymbolInfo();var i=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),s=r.length();n.pos-=s,(n.getRemainingCharacters()>1||i>1||n.getRemainingCharacters()!==i)&&n.writeCodeword(bW),n.getNewEncoding()<0&&n.signalEncoderChange(De)},e}(Hv),jW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LW=function(t){jW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return cn},e.prototype.encodeChar=function(n,r){if(n===32)return r.append(3),1;if(n>=48&&n<=57)return r.append(n-48+4),1;if(n>=97&&n<=122)return r.append(n-97+14),1;if(n<32)return r.append(0),r.append(n),2;if(n<=47)return r.append(1),r.append(n-33),2;if(n<=64)return r.append(1),r.append(n-58+15),2;if(n>=91&&n<=95)return r.append(1),r.append(n-91+22),2;if(n===96)return r.append(2),r.append(0),2;if(n<=90)return r.append(2),r.append(n-65+1),2;if(n<=127)return r.append(2),r.append(n-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(n-128,r),i},e}(Hv),mr=function(){function t(){}return t.randomize253State=function(e){var n=149*e%253+1,r=I_+n;return r<=254?r:r-254},t.encodeHighLevel=function(e,n,r,i,s){n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=!1);var o=new Hv,a=[new AW,o,new LW,new MW,new TW,new NW],l=new OW(e);l.setSymbolShape(n),l.setSizeConstraints(r,i),e.startsWith(k_)&&e.endsWith(R_)?(l.writeCodeword(wW),l.setSkipAtEnd(2),l.pos+=k_.length):e.startsWith(P_)&&e.endsWith(R_)&&(l.writeCodeword(_W),l.setSkipAtEnd(2),l.pos+=P_.length);var c=De;for(s&&(o.encodeMaximal(l),c=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)a[c].encode(l),l.getNewEncoding()>=0&&(c=l.getNewEncoding(),l.resetEncoderSignal());var d=l.getCodewordCount();l.updateSymbolInfo();var f=l.getSymbolInfo().getDataCapacity();d<f&&c!==De&&c!==Qt&&c!==kt&&l.writeCodeword("");var h=l.getCodewords();for(h.length()<f&&h.append(I_);h.length()<f;)h.append(this.randomize253State(h.length()+1));return l.getCodewords().toString()},t.lookAheadTest=function(e,n,r){var i=this.lookAheadTestIntern(e,n,r);if(r===vt&&i===vt){for(var s=Math.min(n+3,e.length),o=n;o<s;o++)if(!this.isNativeX12(e.charCodeAt(o)))return De}else if(r===kt&&i===kt){for(var s=Math.min(n+4,e.length),o=n;o<s;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return De}return i},t.lookAheadTestIntern=function(e,n,r){if(n>=e.length)return r;var i;r===De?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var s=0,o=new Uint8Array(6),a=[];;){if(n+s===e.length){St.fill(o,0),St.fill(a,0);var l=this.findMinimums(i,a,pe.MAX_VALUE,o),c=this.getMinimumCount(o);if(a[De]===l)return De;if(c===1){if(o[Qt]>0)return Qt;if(o[kt]>0)return kt;if(o[cn]>0)return cn;if(o[vt]>0)return vt}return Vt}var d=e.charCodeAt(n+s);if(s++,this.isDigit(d)?i[De]+=.5:this.isExtendedASCII(d)?(i[De]=Math.ceil(i[De]),i[De]+=2):(i[De]=Math.ceil(i[De]),i[De]++),this.isNativeC40(d)?i[Vt]+=2/3:this.isExtendedASCII(d)?i[Vt]+=8/3:i[Vt]+=4/3,this.isNativeText(d)?i[cn]+=2/3:this.isExtendedASCII(d)?i[cn]+=8/3:i[cn]+=4/3,this.isNativeX12(d)?i[vt]+=2/3:this.isExtendedASCII(d)?i[vt]+=13/3:i[vt]+=10/3,this.isNativeEDIFACT(d)?i[kt]+=3/4:this.isExtendedASCII(d)?i[kt]+=17/4:i[kt]+=13/4,this.isSpecialB256(d)?i[Qt]+=4:i[Qt]++,s>=4){if(St.fill(o,0),St.fill(a,0),this.findMinimums(i,a,pe.MAX_VALUE,o),a[De]<this.min(a[Qt],a[Vt],a[cn],a[vt],a[kt]))return De;if(a[Qt]<a[De]||a[Qt]+1<this.min(a[Vt],a[cn],a[vt],a[kt]))return Qt;if(a[kt]+1<this.min(a[Qt],a[Vt],a[cn],a[vt],a[De]))return kt;if(a[cn]+1<this.min(a[Qt],a[Vt],a[kt],a[vt],a[De]))return cn;if(a[vt]+1<this.min(a[Qt],a[Vt],a[kt],a[cn],a[De]))return vt;if(a[Vt]+1<this.min(a[De],a[Qt],a[kt],a[cn])){if(a[Vt]<a[vt])return Vt;if(a[Vt]===a[vt]){for(var f=n+s+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return vt;if(!this.isNativeX12(h))break;f++}return Vt}}}}},t.min=function(e,n,r,i,s){var o=Math.min(e,Math.min(n,Math.min(r,i)));return s===void 0?o:Math.min(o,s)},t.findMinimums=function(e,n,r,i){for(var s=0;s<6;s++){var o=n[s]=Math.ceil(e[s]);r>o&&(r=o,St.fill(i,0)),r===o&&(i[s]=i[s]+1)}return r},t.getMinimumCount=function(e){for(var n=0,r=0;r<6;r++)n+=e[r];return n||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,n){n===void 0&&(n=0);for(var r=e.length,i=n;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-n},t.illegalCharacter=function(e){var n=pe.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},t}(),O0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O_=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Jn.encode(e,this.charset)!=null}catch{return!1}},t}(),FW=function(){function t(e,n,r){var i,s,o,a,l,c;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(k){return new O_(pW.forName(k))}),this.encoders=[];var d=[];d.push(new O_(mW.ISO_8859_1));for(var f=n!=null&&n.name.startsWith("UTF"),h=0;h<e.length;h++){var p=!1;try{for(var m=(i=void 0,O0(d)),v=m.next();!v.done;v=m.next()){var w=v.value,y=e.charAt(h),g=y.charCodeAt(0);if(g===r||w.canEncode(y)){p=!0;break}}}catch(k){i={error:k}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}if(!p)try{for(var x=(o=void 0,O0(this.ENCODERS)),_=x.next();!_.done;_=x.next()){var w=_.value;if(w.canEncode(e.charAt(h))){d.push(w),p=!0;break}}}catch(k){o={error:k}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}p||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var C=0;try{for(var E=O0(d),A=E.next();!A.done;A=E.next()){var w=A.value;this.encoders[C++]=w}}catch(k){l={error:k}}finally{try{A&&!A.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}}var T=-1;if(n!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&n.name===this.encoders[h].name){T=h;break}}this.priorityEncoderIndex=T}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return Jn.encode(Ee.getCharAt(e),this.encoders[n].name)},t}(),BW=3,UW=function(){function t(e,n,r){this.fnc1=r;var i=new FW(e,n,r);if(i.length()===1)for(var s=0;s<this.bytes.length;s++){var o=e.charAt(s).charCodeAt(0);this.bytes[s]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var r=0;r<n;r++)if(this.isECI(e+r))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var r=new he,i=e;i<n;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,n,r){(e[n][r.encoderIndex]==null||e[n][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.encoderIndex]=r)},t.prototype.addEdges=function(e,n,r,i,s,o){var a=e.charAt(i).charCodeAt(0),l=0,c=n.length();n.getPriorityEncoderIndex()>=0&&(a===o||n.canEncode(a,n.getPriorityEncoderIndex()))&&(l=n.getPriorityEncoderIndex(),c=l+1);for(var d=l;d<c;d++)(a===o||n.canEncode(a,d))&&this.addEdge(r,i+1,new D_(a,n,d,s,o))},t.prototype.encodeMinimally=function(e,n,r){var i=e.length,s=new D_[i+1][n.length()];this.addEdges(e,n,s,0,null,r);for(var o=1;o<=i;o++){for(var a=0;a<n.length();a++)s[o][a]!=null&&o<i&&this.addEdges(e,n,s,o,s[o][a],r);for(var a=0;a<n.length();a++)s[o-1][a]=null}for(var l=-1,c=pe.MAX_VALUE,a=0;a<n.length();a++)if(s[i][a]!=null){var d=s[i][a];d.cachedTotalSize<c&&(c=d.cachedTotalSize,l=a)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=s[i][l];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var p=n.encode(h.c,h.encoderIndex),o=p.length-1;o>=0;o--)f.unshift(p[o]&255);var m=h.previous===null?0:h.previous.encoderIndex;m!==h.encoderIndex&&f.unshift(256+n.getECIValue(h.encoderIndex)),h=h.previous}for(var v=[],o=0;o<v.length;o++)v[o]=f[o];return v},t}(),D_=function(){function t(e,n,r,i,s){this.c=e,this.encoderSet=n,this.encoderIndex=r,this.previous=i,this.fnc1=s,this.c=e===s?1e3:e;var o=this.isFNC1()?1:n.encode(e,r).length,a=i===null?0:i.encoderIndex;a!==r&&(o+=BW),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),VW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();var M_;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(M_||(M_={}));(function(t){VW(e,t);function e(n,r,i,s,o){var a=t.call(this,n,r,i)||this;return a.shape=s,a.macroId=o,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(UW);var HW=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),j_=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,n){return e.sort(n)[0]},t}(),WW=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),zW=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wv=function(t){zW(e,t);function e(n,r,i){var s=t.call(this,n)||this;return s.value=r,s.bitCount=i,s}return e.prototype.appendTo=function(n,r){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,r){return new e(this,n,r)},e.prototype.addBinaryShift=function(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,r)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+pe.toBinaryString(n|1<<this.bitCount).substring(1)+">"},e}(WW),$W=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),GW=function(t){$W(e,t);function e(n,r,i){var s=t.call(this,n,0,0)||this;return s.binaryShiftStart=r,s.binaryShiftByteCount=i,s}return e.prototype.appendTo=function(n,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):i===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(n,r){return new e(this,n,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Wv);function KW(t,e,n){return new GW(t,e,n)}function el(t,e,n){return new Wv(t,e,n)}var XW=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ts=0,hf=1,qn=2,fT=3,Tr=4,YW=new Wv(null,0,0),D0=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],qW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function QW(t){var e,n;try{for(var r=qW(t),i=r.next();!i.done;i=r.next()){var s=i.value;St.fill(s,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return t[ts][Tr]=0,t[hf][Tr]=0,t[hf][ts]=28,t[fT][Tr]=0,t[qn][Tr]=0,t[qn][ts]=15,t}var hT=QW(St.createInt32Array(6,6)),ZW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JW=function(){function t(e,n,r,i){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,n){var r=this.bitCount,i=this.token;if(e!==this.mode){var s=D0[this.mode][e];i=el(i,s&65535,s>>16),r+=s>>16}var o=e===qn?4:5;return i=el(i,n,o),new t(i,e,0,r+o)},t.prototype.shiftAndAppend=function(e,n){var r=this.token,i=this.mode===qn?4:5;return r=el(r,hT[this.mode][e],i),r=el(r,n,5),new t(r,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var n=this.token,r=this.mode,i=this.bitCount;if(this.mode===Tr||this.mode===qn){var s=D0[r][ts];n=el(n,s&65535,s>>16),i+=s>>16,r=ts}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new t(n,r,this.binaryShiftByteCount+1,i+o);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var n=this.token;return n=KW(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(n,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(D0[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},t.prototype.toBitArray=function(e){for(var n,r,i=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())i.unshift(s);var o=new Mt;try{for(var a=ZW(i),l=a.next();!l.done;l=a.next()){var c=l.value;c.appendTo(o,e)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o},t.prototype.toString=function(){return Ee.format("%s bits=%d bytes=%d",XW[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(YW,ts,0,0),t}();function ez(t){var e=Ee.getCharCode(" "),n=Ee.getCharCode("."),r=Ee.getCharCode(",");t[ts][e]=1;for(var i=Ee.getCharCode("Z"),s=Ee.getCharCode("A"),o=s;o<=i;o++)t[ts][o]=o-s+2;t[hf][e]=1;for(var a=Ee.getCharCode("z"),l=Ee.getCharCode("a"),o=l;o<=a;o++)t[hf][o]=o-l+2;t[qn][e]=1;for(var c=Ee.getCharCode("9"),d=Ee.getCharCode("0"),o=d;o<=c;o++)t[qn][o]=o-d+2;t[qn][r]=12,t[qn][n]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<f.length;h++)t[fT][Ee.getCharCode(f[h])]=h;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<p.length;h++)Ee.getCharCode(p[h])>0&&(t[Tr][Ee.getCharCode(p[h])]=h);return t}var M0=ez(St.createInt32Array(5,256)),Tu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tz=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Ee.getCharCode(" "),n=Ee.getCharCode(`
`),r=j_.singletonList(JW.INITIAL_STATE),i=0;i<this.text.length;i++){var s=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Ee.getCharCode("\r"):s=o===n?2:0;break;case Ee.getCharCode("."):s=o===e?3:0;break;case Ee.getCharCode(","):s=o===e?4:0;break;case Ee.getCharCode(":"):s=o===e?5:0;break;default:s=0}s>0?(r=t.updateStateListForPair(r,i,s),i++):r=this.updateStateListForChar(r,i)}var a=j_.min(r,function(l,c){return l.getBitCount()-c.getBitCount()});return a.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,n){var r,i,s=[];try{for(var o=Tu(e),a=o.next();!a.done;a=o.next()){var l=a.value;this.updateStateForChar(l,n,s)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,n,r){for(var i=this.text[n]&255,s=M0[e.getMode()][i]>0,o=null,a=0;a<=Tr;a++){var l=M0[a][i];if(l>0){if(o==null&&(o=e.endBinaryShift(n)),!s||a===e.getMode()||a===qn){var c=o.latchAndAppend(a,l);r.push(c)}if(!s&&hT[e.getMode()][a]>=0){var d=o.shiftAndAppend(a,l);r.push(d)}}}if(e.getBinaryShiftByteCount()>0||M0[e.getMode()][i]===0){var f=e.addBinaryShiftChar(n);r.push(f)}},t.updateStateListForPair=function(e,n,r){var i,s,o=[];try{for(var a=Tu(e),l=a.next();!l.done;l=a.next()){var c=l.value;this.updateStateForPair(c,n,r,o)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,n,r,i){var s=e.endBinaryShift(n);if(i.push(s.latchAndAppend(Tr,r)),e.getMode()!==Tr&&i.push(s.shiftAndAppend(Tr,r)),r===3||r===4){var o=s.latchAndAppend(qn,16-r).latchAndAppend(qn,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);i.push(a)}},t.simplifyStates=function(e){var n,r,i,s,o=[];try{for(var a=Tu(e),l=a.next();!l.done;l=a.next()){var c=l.value,d=!0,f=function(w){if(w.isBetterThanOrEqualTo(c))return d=!1,"break";c.isBetterThanOrEqualTo(w)&&(o=o.filter(function(y){return y!==w}))};try{for(var h=(i=void 0,Tu(o)),p=h.next();!p.done;p=h.next()){var m=p.value,v=f(m);if(v==="break")break}}catch(w){i={error:w}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}d&&o.push(c)}}catch(w){n={error:w}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o},t}(),nz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,n,r){var i=new tz(e).encode(),s=pe.truncDivision(i.getSize()*n,100)+11,o=i.getSize()+s,a,l,c,d,f;if(r!==t.DEFAULT_AZTEC_LAYERS){if(a=r<0,l=Math.abs(r),l>(a?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new oe(Ee.format("Illegal value %s for layers",r));c=t.totalBitsInLayer(l,a),d=t.WORD_SIZE[l];var h=c-c%d;if(f=t.stuffBits(i,d),f.getSize()+s>h)throw new oe("Data to large for user specified layer");if(a&&f.getSize()>d*64)throw new oe("Data to large for user specified layer")}else{d=0,f=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new oe("Data too large for an Aztec code");if(a=p<=3,l=a?p+1:p,c=t.totalBitsInLayer(l,a),!(o>c)){(f==null||d!==t.WORD_SIZE[l])&&(d=t.WORD_SIZE[l],f=t.stuffBits(i,d));var h=c-c%d;if(!(a&&f.getSize()>d*64)&&f.getSize()+s<=h)break}}}var m=t.generateCheckWords(f,c,d),v=f.getSize()/d,w=t.generateModeMessage(a,l,v),y=(a?11:14)+l*4,g=new Int32Array(y),x;if(a){x=y;for(var p=0;p<g.length;p++)g[p]=p}else{x=y+1+2*pe.truncDivision(pe.truncDivision(y,2)-1,15);for(var _=pe.truncDivision(y,2),C=pe.truncDivision(x,2),p=0;p<_;p++){var E=p+pe.truncDivision(p,15);g[_-p-1]=C-E-1,g[_+p]=C+E+1}}for(var A=new Lr(x),p=0,T=0;p<l;p++){for(var k=(l-p)*4+(a?9:12),O=0;O<k;O++)for(var q=O*2,G=0;G<2;G++)m.get(T+q+G)&&A.set(g[p*2+G],g[p*2+O]),m.get(T+k*2+q+G)&&A.set(g[p*2+O],g[y-1-p*2-G]),m.get(T+k*4+q+G)&&A.set(g[y-1-p*2-G],g[y-1-p*2-O]),m.get(T+k*6+q+G)&&A.set(g[y-1-p*2-O],g[p*2+G]);T+=k*8}if(t.drawModeMessage(A,a,x,w),a)t.drawBullsEye(A,pe.truncDivision(x,2),5);else{t.drawBullsEye(A,pe.truncDivision(x,2),7);for(var p=0,O=0;p<pe.truncDivision(y,2)-1;p+=15,O+=16)for(var G=pe.truncDivision(x,2)&1;G<x;G+=2)A.set(pe.truncDivision(x,2)-O,G),A.set(pe.truncDivision(x,2)+O,G),A.set(G,pe.truncDivision(x,2)-O),A.set(G,pe.truncDivision(x,2)+O)}var D=new HW;return D.setCompact(a),D.setSize(x),D.setLayers(l),D.setCodeWords(v),D.setMatrix(A),D},t.drawBullsEye=function(e,n,r){for(var i=0;i<r;i+=2)for(var s=n-i;s<=n+i;s++)e.set(s,n-i),e.set(s,n+i),e.set(n-i,s),e.set(n+i,s);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)},t.generateModeMessage=function(e,n,r){var i=new Mt;return e?(i.appendBits(n-1,2),i.appendBits(r-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(n-1,5),i.appendBits(r-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,n,r,i){var s=pe.truncDivision(r,2);if(n)for(var o=0;o<7;o++){var a=s-3+o;i.get(o)&&e.set(a,s-5),i.get(o+7)&&e.set(s+5,a),i.get(20-o)&&e.set(a,s+5),i.get(27-o)&&e.set(s-5,a)}else for(var o=0;o<10;o++){var a=s-5+o+pe.truncDivision(o,5);i.get(o)&&e.set(a,s-7),i.get(o+10)&&e.set(s+7,a),i.get(29-o)&&e.set(a,s+7),i.get(39-o)&&e.set(s-7,a)}},t.generateCheckWords=function(e,n,r){var i,s,o=e.getSize()/r,a=new uT(t.getGF(r)),l=pe.truncDivision(n,r),c=t.bitsToWords(e,r,l);a.encode(c,l-o);var d=n%r,f=new Mt;f.appendBits(0,d);try{for(var h=nz(Array.from(c)),p=h.next();!p.done;p=h.next()){var m=p.value;f.appendBits(m,r)}}catch(v){i={error:v}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return f},t.bitsToWords=function(e,n,r){var i=new Int32Array(r),s,o;for(s=0,o=e.getSize()/n;s<o;s++){for(var a=0,l=0;l<n;l++)a|=e.get(s*n+l)?1<<n-l-1:0;i[s]=a}return i},t.getGF=function(e){switch(e){case 4:return bn.AZTEC_PARAM;case 6:return bn.AZTEC_DATA_6;case 8:return bn.AZTEC_DATA_8;case 10:return bn.AZTEC_DATA_10;case 12:return bn.AZTEC_DATA_12;default:throw new oe("Unsupported word size "+e)}},t.stuffBits=function(e,n){for(var r=new Mt,i=e.getSize(),s=(1<<n)-2,o=0;o<i;o+=n){for(var a=0,l=0;l<n;l++)(o+l>=i||e.get(o+l))&&(a|=1<<n-1-l);(a&s)===s?(r.appendBits(a&s,n),o--):a&s?r.appendBits(a,n):(r.appendBits(a|1,n),o--)}return r},t.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const rz=({isOpen:t,onClose:e,onScanSuccess:n,user:r,onJoinTeam:i})=>{const s=b.useRef(null),[o,a]=b.useState(!1),[l,c]=b.useState(null),[d,f]=b.useState(null),[h,p]=b.useState(null),[m,v]=b.useState(!1),w=b.useRef(null);b.useEffect(()=>(t?y():g(),()=>{g()}),[t]);const y=async()=>{try{c(null),a(!0);const C=await navigator.mediaDevices.getUserMedia({video:!0});f(!0),C.getTracks().forEach(E=>E.stop()),w.current=new iW,s.current&&await w.current.decodeFromVideoDevice(null,s.current,(E,A)=>{if(E){const T=E.getText();p(T),x(T)}A&&A.name!=="NotFoundException"&&console.error("Scan error:",A)})}catch(C){console.error("Scanner initialization error:",C),f(!1),C.name==="NotAllowedError"?c("Camera permission denied. Please allow camera access to scan QR codes."):C.name==="NotFoundError"?c("No camera found. Please ensure your device has a camera."):c("Failed to initialize camera. Please try again."),a(!1)}},g=()=>{w.current&&(w.current.reset(),w.current=null),a(!1),p(null)},x=async C=>{var A;if(C.includes("/join/")||/^[A-Z0-9]{6}$/i.test(C)||/^\d{10}$/.test(C))if(p(C),r&&i){v(!0);try{let T=C;C.includes("/join/")&&(T=((A=C.split("/join/")[1])==null?void 0:A.split("?")[0])||C),Y.success("QR Code scanned successfully!"),await i(T,r)?setTimeout(()=>{e()},1500):(p(null),v(!1))}catch(T){console.error("Error joining team:",T),Y.error("Failed to join team"),p(null),v(!1)}}else Y.success("QR Code scanned successfully!"),n(C),e();else Y.error("Invalid QR code. Please scan a team invitation QR code."),p(null)},_=()=>{g(),e()};return t?u.jsx(Sn,{children:u.jsxs(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black z-50 flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Zb,{className:"w-5 h-5 text-cricket-primary"}),u.jsx("h3",{className:"text-lg font-semibold text-white",children:"Scan QR Code"})]}),u.jsx("button",{onClick:_,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white",children:u.jsx(ri,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"flex-1 flex flex-col",children:d===!1?u.jsx("div",{className:"flex-1 flex items-center justify-center text-center px-4",children:u.jsxs("div",{children:[u.jsx(Zp,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),u.jsx("h4",{className:"text-xl font-semibold text-white mb-2",children:"Camera Access Required"}),u.jsx("p",{className:"text-gray-300 mb-6",children:l}),u.jsx("button",{onClick:y,className:"bg-cricket-primary hover:bg-cricket-primary/90 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Try Again"})]})}):l?u.jsx("div",{className:"flex-1 flex items-center justify-center text-center px-4",children:u.jsxs("div",{children:[u.jsx(Zp,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),u.jsx("h4",{className:"text-xl font-semibold text-white mb-2",children:"Scanner Error"}),u.jsx("p",{className:"text-gray-300 mb-6",children:l}),u.jsx("button",{onClick:y,className:"bg-cricket-primary hover:bg-cricket-primary/90 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Retry"})]})}):u.jsxs("div",{className:"flex-1 flex flex-col",children:[u.jsxs("div",{className:"flex-1 relative bg-black",children:[u.jsx("video",{ref:s,className:"w-full h-full object-cover",playsInline:!0,muted:!0,style:{transform:"scaleX(-1)"}}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"w-72 h-72 border-2 border-white/50 rounded-2xl relative",children:[u.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 border-t-4 border-l-4 border-cricket-primary rounded-tl-2xl"}),u.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 border-t-4 border-r-4 border-cricket-primary rounded-tr-2xl"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 border-b-4 border-l-4 border-cricket-primary rounded-bl-2xl"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-12 h-12 border-b-4 border-r-4 border-cricket-primary rounded-br-2xl"})]})}),o&&u.jsx(U.div,{initial:{y:-150},animate:{y:150},transition:{duration:2,repeat:1/0,repeatType:"reverse",ease:"linear"},className:"absolute left-1/2 transform -translate-x-1/2 w-72 h-1 bg-cricket-primary shadow-lg rounded-full"}),(h||m)&&u.jsx(U.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 flex items-center justify-center bg-green-500/20",children:u.jsx("div",{className:"bg-white rounded-full p-6 flex flex-col items-center",children:m?u.jsxs(u.Fragment,{children:[u.jsx(Fd,{className:"w-12 h-12 text-cricket-primary animate-pulse"}),u.jsx("p",{className:"text-cricket-primary font-medium mt-2",children:"Joining Team..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Jp,{className:"w-12 h-12 text-green-500"}),u.jsx("p",{className:"text-green-500 font-medium mt-2",children:"QR Code Scanned!"})]})})})]}),u.jsxs("div",{className:"p-6 text-center bg-black/50",children:[u.jsx("p",{className:"text-white text-lg font-medium mb-2",children:"Position QR code within the frame"}),u.jsx("p",{className:"text-gray-300 text-sm",children:r&&i?"You'll automatically join the team when scanned":"Hold steady for automatic scanning"}),o&&!h&&u.jsxs("div",{className:"flex items-center justify-center gap-2 text-cricket-primary mt-4",children:[u.jsx("div",{className:"w-3 h-3 bg-cricket-primary rounded-full animate-pulse"}),u.jsx("span",{className:"text-sm font-medium",children:"Scanning..."})]})]})]})})]})}):null};var Iu;let En=(Iu=class{static async initializeWebPush(){try{if(!Uo)return console.warn("Web push not supported in this browser"),null;if(await Notification.requestPermission()!=="granted")return console.warn("Notification permission denied"),null;const n=await NB(Uo,{vapidKey:this.VAPID_KEY});return n?(console.log(" Web push token obtained:",n),n):(console.warn("No web push token available"),null)}catch(e){return console.error("Error getting web push token:",e),null}}static async saveToken(e,n){if(!(!e||!n))try{const r=xn(ln,`webPushTokens/${e}`);await Rs(r,{token:n,userAgent:navigator.userAgent,lastUpdated:new Date().toISOString()}),console.log(" Web push token saved")}catch(r){throw console.error("Error saving web push token:",r),r}}static setupMessageHandler(){Uo&&TB(Uo,e=>{console.log("Message received:",e);const{notification:n,data:r}=e;n&&this.showNotification({title:n.title||"New Notification",body:n.body||"",icon:n.icon,data:r})})}static showNotification(e){if(!("Notification"in window)){console.warn("This browser does not support notifications");return}if(Notification.permission==="granted"){const{title:n,body:r,icon:i,data:s}=e,o={body:r,icon:i||"/logo192.png",data:s},a=new Notification(n,o);a.onclick=l=>{console.log("Notification clicked",l),s!=null&&s.url&&window.open(s.url,"_blank"),a.close()}}}static async initializeForUser(e){try{const n=await this.initializeWebPush();n&&(await this.saveToken(e,n),this.setupMessageHandler())}catch(n){console.error("Error initializing web push:",n)}}static createMatchNotification(e,n,r,i){return{title:" Match Started!",body:`${n} vs ${r} at ${i}`,data:{type:this.NOTIFICATION_TYPES.MATCH_START,matchId:e,team1Name:n,team2Name:r,venue:i,timestamp:Date.now()}}}static createTeamJoinNotification(e,n){return{title:" New Team Member",body:`${n} has joined ${e}`,data:{type:this.NOTIFICATION_TYPES.TEAM_JOIN,teamName:e,newMemberName:n,timestamp:Date.now()}}}},fh(Iu,"VAPID_KEY","BKqcBg4a7X_nIe1ymdanx0KtgKMLOFBEERSHdHSmcXjKyBcNMxD-9BWROYSvuN422A-wkhEG_pLq_7Q76JB1atI"),fh(Iu,"NOTIFICATION_TYPES",{MATCH_START:"match_start",TEAM_JOIN:"team_join"}),Iu);class jl{static getStoredNotifications(){try{return JSON.parse(localStorage.getItem("userNotifications")||"[]")}catch{return[]}}static saveNotifications(e){localStorage.setItem("userNotifications",JSON.stringify(e))}static async createMatchStartNotification(e,n,r,i,s){const o=this.getStoredNotifications();s.forEach(l=>{const c={id:`match_${e}_${l.userId}_${Date.now()}`,type:"match_start",title:" Match Started!",message:`${n} vs ${r} at ${i}`,teamId:l.teamId,matchId:e,userId:l.userId,createdAt:new Date,read:!1};o.push(c)}),this.saveNotifications(o);const a=En.createMatchNotification(e,n,r,i);s.forEach(l=>{En.showNotification(a),En.initializeForUser(l.userId).catch(console.error)})}static async createTeamJoinNotification(e,n,r,i){const s=this.getStoredNotifications(),o={id:`team_join_${e}_${Date.now()}`,type:"team_join",title:" New Team Member",message:`${r} joined ${n}`,teamId:e,userId:i,createdAt:new Date,read:!1};s.push(o),this.saveNotifications(s);const a=En.createTeamJoinNotification(n,r);En.showNotification(a),En.initializeForUser(i).catch(console.error)}static getUserNotifications(e){return this.getStoredNotifications().filter(r=>r.userId===e||r.teamId&&this.isUserInTeam(e,r.teamId))}static isUserInTeam(e,n){try{const i=JSON.parse(localStorage.getItem("firebaseTeams")||"[]").find(a=>a.id===n);if(i)return i.captainId===e||i.players.some(a=>a.userId===e);const o=JSON.parse(localStorage.getItem("cricketTeams")||"[]").find(a=>a.id===n);return o?o.captainId===e||o.players.some(a=>a.userId===e):!1}catch{return!1}}static markAsRead(e){const r=this.getStoredNotifications().map(i=>i.id===e?{...i,read:!0}:i);this.saveNotifications(r)}static markAllAsRead(e){const r=this.getStoredNotifications().map(i=>i.userId===e||this.isUserInTeam(e,i.teamId||"")?{...i,read:!0}:i);this.saveNotifications(r)}}function iz({user:t,onLogout:e,onMenuClick:n,onJoinTeam:r}){const[i,s]=b.useState(!1),[o,a]=b.useState(!1),[l,c]=b.useState(!1),[d,f]=b.useState([]),[h,p]=b.useState(0);b.useEffect(()=>{m();const g=setInterval(m,5e3);return()=>clearInterval(g)},[t]);const m=()=>{if(t)try{const g=jl.getUserNotifications(t.id);f(g),p(g.filter(x=>!x.read).length)}catch(g){console.error("Error loading notifications:",g)}},v=g=>{jl.markAsRead(g),m()},w=()=>{t&&(jl.markAllAsRead(t.id),m())},y=g=>{var x;try{if(g.includes("/join/")){const _=(x=g.split("/join/")[1])==null?void 0:x.split("?")[0];_&&(Y.success(`Team code found: ${_}`),navigator.clipboard.writeText(_),Y.success(`Team code "${_}" copied! Go to Teams  Join Team to paste it.`))}else if(/^[A-Z0-9]{6}$/i.test(g))navigator.clipboard.writeText(g.toUpperCase()),Y.success(`Team code "${g.toUpperCase()}" copied! Go to Teams  Join Team to paste it.`);else if(/^\d{10}$/.test(g))navigator.clipboard.writeText(g),Y.success(`Team ID "${g}" copied! Go to Teams  Join Team to paste it.`);else{const _=g.match(/\b\d{10}\b/),C=g.match(/\b[A-Z0-9]{6}\b/i);_?(navigator.clipboard.writeText(_[0]),Y.success(`Team ID "${_[0]}" copied! Go to Teams  Join Team to paste it.`)):C?(navigator.clipboard.writeText(C[0].toUpperCase()),Y.success(`Team code "${C[0].toUpperCase()}" copied! Go to Teams  Join Team to paste it.`)):Y.error("No valid team code or ID found in QR code")}}catch(_){console.error("Error processing QR scan result:",_),Y.error("Failed to process QR code")}};return u.jsxs(U.nav,{initial:{y:-100},animate:{y:0},className:"fixed top-0 left-0 right-0 bg-gradient-to-r from-royal-primary/95 via-royal-secondary/90 to-royal-purple/95 backdrop-blur-xl shadow-2xl z-50 border-b border-white/20",children:[u.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between items-center h-16",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("button",{onClick:n,className:"lg:hidden p-2 rounded-md text-white hover:text-royal-gold hover:bg-white/20 transition-colors",children:u.jsx(JO,{className:"w-6 h-6"})}),u.jsx("div",{className:"flex items-center ml-4 lg:ml-0",children:u.jsx(U.div,{whileHover:{scale:1.1},transition:{duration:.3},className:"w-16 h-16 sm:w-20 sm:h-20 lg:w-28 lg:h-28 flex items-center justify-center",children:u.jsx("img",{src:"/logo.png",alt:"Pitch Pioneers Logo",className:"w-full h-full object-contain filter drop-shadow-lg",style:{imageRendering:"crisp-edges"}})})})]}),u.jsx("div",{className:"hidden sm:flex flex-1 max-w-lg mx-4 lg:mx-8",children:u.jsxs("div",{className:"relative w-full",children:[u.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 w-4 h-4 sm:w-5 sm:h-5"}),u.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-9 sm:pl-10 pr-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent transition-all"})]})}),u.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[u.jsx("button",{className:"sm:hidden p-2 text-white hover:text-royal-gold hover:bg-white/20 rounded-full transition-colors",children:u.jsx(as,{className:"w-5 h-5"})}),u.jsx(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>a(!0),className:"p-2 text-white hover:text-royal-gold hover:bg-white/20 rounded-full transition-colors mt-2",title:"Scan QR Code to Join Team",children:u.jsx(nA,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),u.jsxs("div",{className:"relative",children:[u.jsxs(U.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c(!l),className:"relative p-2 text-white hover:text-royal-gold hover:bg-white/20 rounded-full transition-colors",children:[u.jsx($s,{className:"w-5 h-5 sm:w-6 sm:h-6"}),h>0&&u.jsxs("span",{className:"absolute -top-1 -right-1 w-3 h-3 sm:w-4 sm:h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:[u.jsx("span",{className:"hidden sm:inline",children:h>9?"9+":h}),u.jsx("span",{className:"sm:hidden w-2 h-2 bg-white rounded-full"})]})]}),l&&u.jsxs(U.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:[u.jsx("div",{className:"p-4 border-b border-gray-200",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notifications"}),u.jsxs("div",{className:"flex gap-2",children:[h>0&&u.jsx("button",{onClick:w,className:"text-sm text-cricket-primary hover:text-cricket-secondary",children:"Mark all read"}),u.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:u.jsx(ri,{className:"w-4 h-4"})})]})]})}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:d.length===0?u.jsxs("div",{className:"p-4 text-center text-gray-500",children:[u.jsx($s,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),u.jsx("p",{children:"No notifications yet"})]}):d.map(g=>u.jsx("div",{onClick:()=>v(g.id),className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ${g.read?"":"bg-blue-50 border-l-4 border-l-cricket-primary"}`,children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-medium text-gray-800",children:g.title}),u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g.message}),u.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(g.createdAt).toLocaleString()})]}),!g.read&&u.jsx("div",{className:"w-2 h-2 bg-cricket-primary rounded-full ml-2 mt-2"})]})},g.id))})]})]}),u.jsxs("div",{className:"relative",children:[u.jsxs(U.button,{whileHover:{scale:1.05},onClick:()=>s(!i),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-white/20 transition-colors",children:[u.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-cricket-primary rounded-full flex items-center justify-center",children:u.jsx(ac,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),u.jsxs("div",{className:"hidden md:block text-left",children:[u.jsx("p",{className:"text-sm font-medium text-white",children:t==null?void 0:t.name}),u.jsx("p",{className:"text-xs text-gray-300",children:"Player"})]})]}),i&&u.jsxs(U.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2",children:[u.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[u.jsx("p",{className:"text-sm font-medium text-gray-800",children:t==null?void 0:t.name}),u.jsx("p",{className:"text-xs text-gray-600",children:t==null?void 0:t.email})]}),u.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[u.jsx(ac,{className:"inline w-4 h-4 mr-2"}),"View Profile"]}),u.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"Settings"}),u.jsx("hr",{className:"my-1"}),u.jsxs("button",{onClick:e,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[u.jsx(ZO,{className:"inline w-4 h-4 mr-2"}),"Logout"]})]})]})]})]})}),u.jsx(rz,{isOpen:o,onClose:()=>a(!1),onScanSuccess:y,user:t,onJoinTeam:r})]})}const sz=[{id:"home",label:"Dashboard",icon:YO},{id:"grounds",label:"Book Ground",icon:Dc},{id:"coaches",label:"Book Coach",icon:to},{id:"umpires",label:"Book Umpire",icon:iA},{id:"nets",label:"Practice Nets",icon:fi},{id:"teams",label:"Team Management",icon:oc},{id:"scoring",label:"Live Scoring",icon:Qp},{id:"matches",label:"Match History",icon:Mr},{id:"notifications",label:"Test Notifications",icon:$s},{id:"profile",label:"Profile",icon:ac}];function oz({activeSection:t,setActiveSection:e,isOpen:n,onClose:r}){return u.jsxs(u.Fragment,{children:[u.jsx(Sn,{children:n&&u.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden"})}),u.jsx("aside",{className:`
          fixed top-0 left-0 h-full w-64 bg-gradient-to-b from-white/95 via-gray-50/90 to-gray-100/85 backdrop-blur-xl shadow-2xl z-50 border-r border-white/20
          transition-transform duration-300 ease-in-out
          ${n?"translate-x-0":"-translate-x-full"}
          lg:translate-x-0 lg:static lg:z-auto
        `,children:u.jsxs("div",{className:"flex flex-col h-full pt-16 lg:pt-20",children:[u.jsx("div",{className:"lg:hidden absolute top-4 right-4",children:u.jsx("button",{onClick:r,className:"p-2 rounded-lg text-gray-600 hover:text-cricket-primary hover:bg-cricket-light",children:u.jsx(ri,{className:"w-6 h-6"})})}),u.jsx("nav",{className:"flex-1 px-4 py-6",children:u.jsx("div",{className:"space-y-2",children:sz.map(i=>{const s=i.icon,o=t===i.id;return u.jsxs(U.button,{whileHover:{scale:1.02,x:4},whileTap:{scale:.98},onClick:()=>{e(i.id),r()},className:`
                      w-full flex items-center px-4 py-3 rounded-lg text-left transition-all duration-200
                      ${o?"bg-cricket-primary text-white shadow-lg":"text-gray-700 hover:bg-cricket-light hover:text-cricket-primary"}
                    `,children:[u.jsx(s,{className:`w-5 h-5 mr-3 ${o?"text-white":"text-gray-500"}`}),u.jsx("span",{className:"font-medium",children:i.label}),o&&u.jsx(U.div,{layoutId:"activeIndicator",className:"absolute right-0 w-1 h-8 bg-white rounded-l-full"})]},i.id)})})}),u.jsx("div",{className:"p-4 border-t border-gray-200",children:u.jsxs("div",{className:"bg-gradient-to-r from-cricket-primary to-cricket-secondary rounded-lg p-4 text-white",children:[u.jsx("h3",{className:"font-semibold text-sm mb-1",children:"Pro Features"}),u.jsx("p",{className:"text-xs opacity-90 mb-3",children:"Unlock advanced analytics and team management tools"}),u.jsx(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-white text-cricket-primary text-sm font-semibold py-2 rounded-md hover:bg-gray-100 transition-colors",children:"Upgrade Now"})]})})]})})]})}const az="modulepreload",lz=function(t){return"/"+t},L_={},cz=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=lz(l),l in L_)return;L_[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":az,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};class F_{static async testBasicNotification(e){console.log(" Testing notifications for user:",e);try{if(console.log("1 Testing FCM initialization..."),await En.initializeForUser(e),console.log("2 Checking notification permission..."),"Notification"in window){const n=await Notification.requestPermission();console.log("Permission status:",n),n==="granted"&&(console.log("3 Showing test browser notification..."),new Notification(" Test Cricket Notification",{body:"This is a test notification from your cricket app!",icon:"/logo.png",tag:"test-notification"}))}console.log("4 Testing local notification storage..."),await jl.createMatchStartNotification("test-match-123","Test Team A","Test Team B","Test Stadium",[{userId:e,teamId:"test-team"}]),console.log(" Test completed! Check browser notifications and console.")}catch(n){console.error(" Test failed:",n)}}static checkSetupStatus(){console.log(" Checking notification setup status..."),"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then(r=>{console.log("Service Workers:",r.length>0?" Registered":" Not registered"),r.forEach(i=>{console.log("- SW Scope:",i.scope)})}):console.log("Service Workers:  Not supported"),"Notification"in window?console.log("Notification Permission:",Notification.permission):console.log("Notifications:  Not supported"),cz(async()=>{const{messaging:r}=await Promise.resolve().then(()=>kB);return{messaging:r}},void 0).then(({messaging:r})=>{console.log("Firebase Messaging:",r?" Available":" Not available")});const e=localStorage.getItem("deviceTokens");console.log("Stored Device Tokens:",e?" Found":" None");const n=localStorage.getItem("userNotifications");console.log("Stored Notifications:",n?" Found":" None")}static clearNotificationData(){localStorage.removeItem("userNotifications"),localStorage.removeItem("deviceTokens"),console.log(" Cleared all notification data")}}function B_({user:t,setActiveSection:e}){const n=[{id:"ground",title:"Book Ground",description:"Find and book cricket grounds near you",icon:Dc,color:"from-blue-500 to-blue-600",count:"12 Available",section:"grounds"},{id:"coach",title:"Book Coach",description:"Get professional coaching sessions",icon:to,color:"from-green-500 to-green-600",count:"8 Coaches",section:"coaches"},{id:"umpire",title:"Book Umpire",description:"Professional umpires for your matches",icon:iA,color:"from-purple-500 to-purple-600",count:"5 Available",section:"umpires"},{id:"nets",title:"Practice Nets",description:"Book practice nets for training",icon:fi,color:"from-orange-500 to-orange-600",count:"15 Nets",section:"nets"},{id:"team",title:"Create Team",description:"Build and manage your cricket team",icon:oc,color:"from-red-500 to-red-600",count:"Unlimited",section:"teams"},{id:"scoring",title:"Live Scoring",description:"Score matches in real-time",icon:Qp,color:"from-indigo-500 to-indigo-600",count:"Pro Feature",section:"scoring"}],r=[{label:"Total Runs",value:(t==null?void 0:t.stats.totalRuns)||0,icon:Bf,color:"text-green-600"},{label:"Matches Played",value:(t==null?void 0:t.stats.matchesPlayed)||0,icon:Qb,color:"text-blue-600"},{label:"Strike Rate",value:(t==null?void 0:t.stats.overallStrikeRate.toFixed(1))||"0.0",icon:Qp,color:"text-purple-600"},{label:"Centuries",value:(t==null?void 0:t.stats.centuries)||0,icon:Mr,color:"text-yellow-600"}],i=[{id:1,team1:"Mumbai Warriors",team2:"Delhi Capitals",result:"Won by 6 wickets",date:"2024-01-15"},{id:2,team1:"Chennai Super",team2:"Kolkata Knights",result:"Lost by 12 runs",date:"2024-01-12"},{id:3,team1:"Bangalore Royal",team2:"Hyderabad Sunrisers",result:"Won by 4 runs",date:"2024-01-10"}];return u.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6 lg:space-y-8",children:[u.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"royal-gradient rounded-2xl sm:rounded-3xl p-4 sm:p-6 lg:p-8 text-white shadow-2xl border border-white/20 backdrop-blur-sm",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:["Welcome back, ",t==null?void 0:t.name,"! "]}),u.jsx("p",{className:"text-blue-100 text-base sm:text-lg",children:"Ready to play some cricket today?"}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsxs("button",{onClick:()=>{t&&(F_.testBasicNotification(t.id),Y.success("Testing notifications - check console!"))},className:"bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[u.jsx($s,{className:"w-4 h-4"}),"Test Notifications"]}),u.jsx("button",{onClick:()=>{F_.checkSetupStatus(),Y.success("Check console for setup status")},className:"bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg text-sm font-medium transition-colors",children:"Debug Setup"})]})]}),u.jsx(U.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:3},className:"w-20 h-20 sm:w-24 sm:h-24 lg:w-28 lg:h-28",children:u.jsx("img",{src:"/logo.png",alt:"Pitch Pioneers Logo",className:"w-full h-full object-contain filter drop-shadow-lg"})})]})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:r.map((s,o)=>{const a=s.icon;return u.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},className:"royal-card p-4 sm:p-6 hover:scale-105 transition-transform duration-300",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:s.label}),u.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.value})]}),u.jsx(a,{className:`w-8 h-8 ${s.color}`})]})},s.label)})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6",children:"Quick Actions"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:n.map((s,o)=>{const a=s.icon;return u.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:o*.1},whileHover:{scale:1.05,y:-5},onClick:()=>e(s.section),className:"royal-card p-4 sm:p-6 cursor-pointer group",children:[u.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${s.color} rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`,children:u.jsx(a,{className:"w-6 h-6 text-white"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:s.title}),u.jsx("p",{className:"text-gray-600 text-sm mb-3",children:s.description}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-xs text-gray-500",children:s.count}),u.jsx(U.button,{whileHover:{x:5},onClick:()=>e(s.section),className:"text-cricket-primary text-sm font-medium hover:underline cursor-pointer",children:"Get Started "})]})]},s.id)})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 lg:gap-8",children:[u.jsxs(U.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"card p-4 sm:p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:"Recent Matches"}),u.jsx(os,{className:"w-5 h-5 text-gray-500"})]}),u.jsx("div",{className:"space-y-4",children:i.map(s=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium text-gray-800",children:[s.team1," vs ",s.team2]}),u.jsx("p",{className:"text-sm text-gray-600",children:s.result})]}),u.jsx("span",{className:"text-xs text-gray-500",children:s.date})]},s.id))}),u.jsx("button",{className:"w-full mt-4 text-cricket-primary text-sm font-medium hover:underline",children:"View All Matches"})]}),u.jsxs(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"card p-4 sm:p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:"Upcoming Bookings"}),u.jsx(os,{className:"w-5 h-5 text-gray-500"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg border-l-4 border-green-500",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-800",children:"Ground Booking"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Central Cricket Ground"})]}),u.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Today 6:00 PM"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-800",children:"Coaching Session"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Batting Technique"})]}),u.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Tomorrow 4:00 PM"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg border-l-4 border-purple-500",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-800",children:"Practice Nets"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Net 3 - Fast Bowling"})]}),u.jsx("span",{className:"text-xs text-purple-600 font-medium",children:"Jan 20, 5:00 PM"})]})]}),u.jsx("button",{className:"w-full mt-4 text-cricket-primary text-sm font-medium hover:underline",children:"View All Bookings"})]})]})]})}const U_=[{id:"1",name:"Central Cricket Stadium",location:"Downtown Sports Complex, Mumbai",description:"Premier cricket ground with international standard facilities. Perfect for tournaments and professional matches.",images:["https://images.unsplash.com/photo-1540747913346-19e32dc3e97e?w=800","https://images.unsplash.com/photo-1531415074968-036ba1b575da?w=800"],pricePerHour:2500,facilities:["Floodlights","Pavilion","Parking","Cafeteria","Changing Rooms","WiFi"],availability:[{date:"2024-01-20",startTime:"06:00",endTime:"18:00",available:!0},{date:"2024-01-21",startTime:"06:00",endTime:"18:00",available:!0}],rating:4.8},{id:"2",name:"Green Valley Cricket Ground",location:"Sector 15, Noida",description:"Beautiful ground surrounded by greenery. Ideal for weekend matches and practice sessions.",images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800","https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=800"],pricePerHour:1800,facilities:["Natural Turf","Pavilion","Parking","Changing Rooms"],availability:[{date:"2024-01-20",startTime:"06:00",endTime:"18:00",available:!0},{date:"2024-01-21",startTime:"06:00",endTime:"18:00",available:!1}],rating:4.5},{id:"3",name:"Metro Sports Arena",location:"Andheri West, Mumbai",description:"Modern cricket facility with state-of-the-art amenities. Great for corporate tournaments.",images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800"],pricePerHour:3e3,facilities:["Floodlights","Air-conditioned Pavilion","Premium Parking","Restaurant","Changing Rooms","WiFi","Security"],availability:[{date:"2024-01-20",startTime:"06:00",endTime:"18:00",available:!0}],rating:4.9}];function uz({user:t}){const[e,n]=b.useState(U_),[r,i]=b.useState(U_),[s,o]=b.useState(null),[a,l]=b.useState(""),[c,d]=b.useState("all"),[f,h]=b.useState(!1),[p,m]=b.useState(""),[v,w]=b.useState(""),[y,g]=b.useState(2);b.useEffect(()=>{let C=e;a&&(C=C.filter(E=>E.name.toLowerCase().includes(a.toLowerCase())||E.location.toLowerCase().includes(a.toLowerCase()))),c!=="all"&&(C=C.filter(E=>c==="low"?E.pricePerHour<2e3:c==="medium"?E.pricePerHour>=2e3&&E.pricePerHour<2800:c==="high"?E.pricePerHour>=2800:!0)),i(C)},[a,c,e]);const x=()=>{if(!s||!p||!v||!t)return;const C={id:Oc(),userId:t.id,type:"ground",resourceId:s.id,date:p,startTime:v,endTime:`${parseInt(v.split(":")[0])+y}:${v.split(":")[1]}`,totalPrice:s.pricePerHour*y,status:"confirmed",createdAt:new Date},E=JSON.parse(localStorage.getItem("cricketBookings")||"[]");E.push(C),localStorage.setItem("cricketBookings",JSON.stringify(E)),Y.success("Ground booked successfully!"),h(!1),o(null)},_=C=>{switch(C.toLowerCase()){case"floodlights":return u.jsx(ca,{className:"w-4 h-4"});case"pavilion":case"air-conditioned pavilion":return u.jsx(to,{className:"w-4 h-4"});case"parking":case"premium parking":return u.jsx(KO,{className:"w-4 h-4"});case"cafeteria":case"restaurant":return u.jsx(XO,{className:"w-4 h-4"});case"wifi":return u.jsx(n5,{className:"w-4 h-4"});case"security":return u.jsx(oc,{className:"w-4 h-4"});default:return u.jsx(eo,{className:"w-4 h-4"})}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Book Cricket Ground"}),u.jsx("p",{className:"text-gray-300",children:"Find and book the perfect cricket ground for your match"})]}),u.jsx("div",{className:"mt-4 md:mt-0",children:u.jsxs("span",{className:"bg-purple-600 text-white px-4 py-2 rounded-full text-sm font-medium",children:[r.length," Grounds Available"]})})]}),u.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"royal-card p-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Search grounds by name or location...",value:a,onChange:C=>l(C.target.value),className:"input-field pl-10"})]}),u.jsxs("div",{className:"relative",children:[u.jsx(ua,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsxs("select",{value:c,onChange:C=>d(C.target.value),className:"input-field pl-10 appearance-none",children:[u.jsx("option",{value:"all",children:"All Price Ranges"}),u.jsx("option",{value:"low",children:"Under 2,000/hr"}),u.jsx("option",{value:"medium",children:"2,000 - 2,800/hr"}),u.jsx("option",{value:"high",children:"Above 2,800/hr"})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"date",className:"input-field pl-10",min:new Date().toISOString().split("T")[0]})]})]})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((C,E)=>u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:E*.1},className:"royal-card overflow-hidden group hover:scale-105 transition-transform duration-300",children:[u.jsxs("div",{className:"relative h-48 overflow-hidden",children:[u.jsx("img",{src:C.images[0],alt:C.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),u.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-full px-3 py-1 flex items-center space-x-1",children:[u.jsx(eo,{className:"w-4 h-4 text-yellow-500 fill-current"}),u.jsx("span",{className:"text-sm font-medium",children:C.rating})]}),u.jsx("div",{className:"absolute bottom-4 left-4 bg-purple-600 text-white px-3 py-1 rounded-full",children:u.jsxs("span",{className:"text-sm font-bold",children:["",C.pricePerHour,"/hr"]})})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:C.name}),u.jsxs("div",{className:"flex items-center text-gray-600 mb-3",children:[u.jsx(Dc,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"text-sm",children:C.location})]}),u.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:C.description}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[C.facilities.slice(0,3).map(A=>u.jsxs("div",{className:"flex items-center bg-gray-100 rounded-full px-3 py-1",children:[_(A),u.jsx("span",{className:"text-xs ml-1",children:A})]},A)),C.facilities.length>3&&u.jsx("div",{className:"bg-gray-100 rounded-full px-3 py-1",children:u.jsxs("span",{className:"text-xs",children:["+",C.facilities.length-3," more"]})})]}),u.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{o(C),h(!0)},className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:"Book Now"})]})]},C.id))}),u.jsx(Sn,{children:f&&s&&u.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"royal-card p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Book ",s.name]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Date"}),u.jsx("input",{type:"date",value:p,onChange:C=>m(C.target.value),min:new Date().toISOString().split("T")[0],className:"input-field",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Start Time"}),u.jsxs("select",{value:v,onChange:C=>w(C.target.value),className:"input-field",required:!0,children:[u.jsx("option",{value:"",children:"Select time"}),u.jsx("option",{value:"06:00",children:"6:00 AM"}),u.jsx("option",{value:"08:00",children:"8:00 AM"}),u.jsx("option",{value:"10:00",children:"10:00 AM"}),u.jsx("option",{value:"12:00",children:"12:00 PM"}),u.jsx("option",{value:"14:00",children:"2:00 PM"}),u.jsx("option",{value:"16:00",children:"4:00 PM"}),u.jsx("option",{value:"18:00",children:"6:00 PM"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Duration (hours)"}),u.jsxs("select",{value:y,onChange:C=>g(parseInt(C.target.value)),className:"input-field",children:[u.jsx("option",{value:1,children:"1 hour"}),u.jsx("option",{value:2,children:"2 hours"}),u.jsx("option",{value:3,children:"3 hours"}),u.jsx("option",{value:4,children:"4 hours"}),u.jsx("option",{value:6,children:"6 hours"}),u.jsx("option",{value:8,children:"8 hours"})]})]}),u.jsxs("div",{className:"bg-white/50 backdrop-blur-sm rounded-lg p-4 border border-white/30",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-gray-800",children:"Rate per hour:"}),u.jsxs("span",{className:"font-medium text-gray-900",children:["",s.pricePerHour]})]}),u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-gray-800",children:"Duration:"}),u.jsxs("span",{className:"font-medium text-gray-900",children:[y," hours"]})]}),u.jsx("hr",{className:"my-2 border-gray-300"}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"font-semibold text-gray-900",children:"Total:"}),u.jsxs("span",{className:"font-bold text-cricket-primary",children:["",s.pricePerHour*y]})]})]})]}),u.jsxs("div",{className:"flex space-x-4 mt-6",children:[u.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-white/30 rounded-lg hover:bg-white/20 transition-colors text-gray-700 hover:text-gray-900 backdrop-blur-sm",children:"Cancel"}),u.jsx("button",{onClick:x,disabled:!p||!v,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:opacity-50",children:"Confirm Booking"})]})]})})})]})}const V_=[{id:"1",name:"Rajesh Kumar",specialization:["Batting","Technique","Power Hitting"],experience:12,description:"Former state-level player with expertise in batting techniques. Specialized in developing power hitting and timing for all formats.",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400",pricePerHour:1500,rating:4.9,availability:[{date:"2024-01-20",startTime:"06:00",endTime:"18:00",available:!0},{date:"2024-01-21",startTime:"06:00",endTime:"18:00",available:!0}]},{id:"2",name:"Priya Sharma",specialization:["Bowling","Spin Bowling","Match Strategy"],experience:8,description:"International women's cricket coach with specialization in spin bowling and match tactics. Great for developing bowling variations.",image:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=400",pricePerHour:1800,rating:4.8,availability:[{date:"2024-01-20",startTime:"06:00",endTime:"18:00",available:!0}]},{id:"3",name:"Vikram Singh",specialization:["Fast Bowling","Fitness","Pace Development"],experience:15,description:"Former fast bowler with extensive experience in pace development and cricket fitness. Helps players achieve their maximum bowling speed.",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400",pricePerHour:2e3,rating:4.7,availability:[{date:"2024-01-20",startTime:"06:00",endTime:"18:00",available:!0},{date:"2024-01-21",startTime:"06:00",endTime:"18:00",available:!1}]},{id:"4",name:"Amit Patel",specialization:["Wicket Keeping","Fielding","Agility"],experience:10,description:"Professional wicket-keeper coach focusing on glove work, agility training, and advanced fielding techniques.",image:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400",pricePerHour:1600,rating:4.6,availability:[{date:"2024-01-20",startTime:"06:00",endTime:"18:00",available:!0}]}];function dz({user:t}){const[e,n]=b.useState(V_),[r,i]=b.useState(V_),[s,o]=b.useState(null),[a,l]=b.useState(""),[c,d]=b.useState("all"),[f,h]=b.useState(!1),[p,m]=b.useState(""),[v,w]=b.useState(""),[y,g]=b.useState(1),x=["all","Batting","Bowling","Wicket Keeping","Fielding","Fitness"];b.useEffect(()=>{let E=e;a&&(E=E.filter(A=>A.name.toLowerCase().includes(a.toLowerCase())||A.specialization.some(T=>T.toLowerCase().includes(a.toLowerCase())))),c!=="all"&&(E=E.filter(A=>A.specialization.some(T=>T.toLowerCase().includes(c.toLowerCase())))),i(E)},[a,c,e]);const _=()=>{if(!s||!p||!v||!t)return;const E={id:Oc(),userId:t.id,type:"coach",resourceId:s.id,date:p,startTime:v,endTime:`${parseInt(v.split(":")[0])+y}:${v.split(":")[1]}`,totalPrice:s.pricePerHour*y,status:"confirmed",createdAt:new Date},A=JSON.parse(localStorage.getItem("cricketBookings")||"[]");A.push(E),localStorage.setItem("cricketBookings",JSON.stringify(A)),Y.success("Coach booked successfully!"),h(!1),o(null)},C=E=>{switch(E.toLowerCase()){case"batting":case"power hitting":case"technique":return u.jsx(fi,{className:"w-4 h-4"});case"bowling":case"fast bowling":case"spin bowling":return u.jsx(Bf,{className:"w-4 h-4"});case"wicket keeping":return u.jsx(to,{className:"w-4 h-4"});case"fitness":case"agility":return u.jsx(sc,{className:"w-4 h-4"});default:return u.jsx(GO,{className:"w-4 h-4"})}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Book Cricket Coach"}),u.jsx("p",{className:"text-gray-300",children:"Find professional coaches to improve your cricket skills"})]}),u.jsx("div",{className:"mt-4 md:mt-0",children:u.jsxs("span",{className:"bg-purple-600 text-white px-4 py-2 rounded-full text-sm font-medium",children:[r.length," Coaches Available"]})})]}),u.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"royal-card p-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Search coaches by name or specialization...",value:a,onChange:E=>l(E.target.value),className:"input-field pl-10"})]}),u.jsxs("div",{className:"relative",children:[u.jsx(ua,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("select",{value:c,onChange:E=>d(E.target.value),className:"input-field pl-10 appearance-none",children:x.map(E=>u.jsx("option",{value:E,children:E==="all"?"All Specializations":E},E))})]}),u.jsxs("div",{className:"relative",children:[u.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"date",className:"input-field pl-10",min:new Date().toISOString().split("T")[0]})]})]})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((E,A)=>u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.1},className:"royal-card overflow-hidden group hover:scale-105 transition-transform duration-300",children:[u.jsxs("div",{className:"relative h-48 overflow-hidden",children:[u.jsx("img",{src:E.image,alt:E.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),u.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-full px-3 py-1 flex items-center space-x-1",children:[u.jsx(eo,{className:"w-4 h-4 text-yellow-500 fill-current"}),u.jsx("span",{className:"text-sm font-medium",children:E.rating})]}),u.jsx("div",{className:"absolute bottom-4 left-4 bg-purple-600 text-white px-3 py-1 rounded-full",children:u.jsxs("span",{className:"text-sm font-bold",children:["",E.pricePerHour,"/hr"]})})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:E.name}),u.jsxs("div",{className:"flex items-center text-gray-600 mb-3",children:[u.jsx(sc,{className:"w-4 h-4 mr-2"}),u.jsxs("span",{className:"text-sm",children:[E.experience," years experience"]})]}),u.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:E.description}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[E.specialization.slice(0,3).map(T=>u.jsxs("div",{className:"flex items-center bg-green-100 text-green-800 rounded-full px-3 py-1",children:[C(T),u.jsx("span",{className:"text-xs ml-1",children:T})]},T)),E.specialization.length>3&&u.jsx("div",{className:"bg-gray-100 rounded-full px-3 py-1",children:u.jsxs("span",{className:"text-xs",children:["+",E.specialization.length-3," more"]})})]}),u.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{o(E),h(!0)},className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:"Book Session"})]})]},E.id))}),u.jsx(Sn,{children:f&&s&&u.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"royal-card p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center mb-6",children:[u.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 rounded-full object-cover mr-4"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s.name}),u.jsxs("p",{className:"text-gray-600",children:[s.experience," years experience"]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),u.jsx("input",{type:"date",value:p,onChange:E=>m(E.target.value),min:new Date().toISOString().split("T")[0],className:"input-field",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),u.jsxs("select",{value:v,onChange:E=>w(E.target.value),className:"input-field",required:!0,children:[u.jsx("option",{value:"",children:"Select time"}),u.jsx("option",{value:"06:00",children:"6:00 AM"}),u.jsx("option",{value:"07:00",children:"7:00 AM"}),u.jsx("option",{value:"08:00",children:"8:00 AM"}),u.jsx("option",{value:"09:00",children:"9:00 AM"}),u.jsx("option",{value:"10:00",children:"10:00 AM"}),u.jsx("option",{value:"16:00",children:"4:00 PM"}),u.jsx("option",{value:"17:00",children:"5:00 PM"}),u.jsx("option",{value:"18:00",children:"6:00 PM"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (hours)"}),u.jsxs("select",{value:y,onChange:E=>g(parseInt(E.target.value)),className:"input-field",children:[u.jsx("option",{value:1,children:"1 hour"}),u.jsx("option",{value:2,children:"2 hours"}),u.jsx("option",{value:3,children:"3 hours"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specializations"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:s.specialization.map(E=>u.jsxs("div",{className:"flex items-center bg-green-100 text-green-800 rounded-full px-3 py-1",children:[C(E),u.jsx("span",{className:"text-xs ml-1",children:E})]},E))})]}),u.jsxs("div",{className:"bg-white/50 backdrop-blur-sm rounded-lg p-4 border border-white/30",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-gray-800",children:"Rate per hour:"}),u.jsxs("span",{className:"font-medium text-gray-900",children:["",s.pricePerHour]})]}),u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-gray-800",children:"Duration:"}),u.jsxs("span",{className:"font-medium text-gray-900",children:[y," hours"]})]}),u.jsx("hr",{className:"my-2 border-gray-300"}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"font-semibold text-gray-900",children:"Total:"}),u.jsxs("span",{className:"font-bold text-cricket-secondary",children:["",s.pricePerHour*y]})]})]})]}),u.jsxs("div",{className:"flex space-x-4 mt-6",children:[u.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-white/30 rounded-lg hover:bg-white/20 transition-colors text-gray-700 hover:text-gray-900 backdrop-blur-sm",children:"Cancel"}),u.jsx("button",{onClick:_,disabled:!p||!v,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg disabled:opacity-50",children:"Confirm Booking"})]})]})})})]})}const H_=[{id:"1",name:"Suresh Raina",experience:15,description:"Certified Level 3 umpire with extensive experience in domestic and international matches. Known for fair decisions and excellent match management.",image:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=400",pricePerMatch:3e3,rating:4.9,availability:[{date:"2024-01-20",startTime:"06:00",endTime:"18:00",available:!0},{date:"2024-01-21",startTime:"06:00",endTime:"18:00",available:!0}],certifications:["ICC Level 3","BCCI Certified","First Aid Certified"]},{id:"2",name:"Kavita Devi",experience:10,description:"Professional female umpire specializing in women's cricket. Excellent knowledge of rules and regulations with calm demeanor.",image:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=400",pricePerMatch:2500,rating:4.8,availability:[{date:"2024-01-20",startTime:"06:00",endTime:"18:00",available:!0}],certifications:["ICC Level 2","Women's Cricket Specialist","BCCI Certified"]},{id:"3",name:"Ramesh Kumar",experience:20,description:"Veteran umpire with two decades of experience. Has officiated in numerous state-level tournaments and T20 leagues.",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400",pricePerMatch:3500,rating:4.7,availability:[{date:"2024-01-20",startTime:"06:00",endTime:"18:00",available:!0},{date:"2024-01-21",startTime:"06:00",endTime:"18:00",available:!1}],certifications:["ICC Level 3","BCCI Elite Panel","Tournament Specialist"]}];function fz({user:t}){const[e,n]=b.useState(H_),[r,i]=b.useState(H_),[s,o]=b.useState(null),[a,l]=b.useState(""),[c,d]=b.useState("all"),[f,h]=b.useState(!1),[p,m]=b.useState(""),[v,w]=b.useState(""),[y,g]=b.useState("T20");b.useEffect(()=>{let _=e;a&&(_=_.filter(C=>C.name.toLowerCase().includes(a.toLowerCase())||C.certifications.some(E=>E.toLowerCase().includes(a.toLowerCase())))),c!=="all"&&(_=_.filter(C=>c==="junior"?C.experience<10:c==="senior"?C.experience>=10&&C.experience<20:c==="veteran"?C.experience>=20:!0)),i(_)},[a,c,e]);const x=()=>{if(!s||!p||!v||!t)return;const _={id:Oc(),userId:t.id,type:"umpire",resourceId:s.id,date:p,startTime:v,endTime:v,totalPrice:s.pricePerMatch,status:"confirmed",createdAt:new Date},C=JSON.parse(localStorage.getItem("cricketBookings")||"[]");C.push(_),localStorage.setItem("cricketBookings",JSON.stringify(C)),Y.success("Umpire booked successfully!"),h(!1),o(null)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Book Cricket Umpire"}),u.jsx("p",{className:"text-gray-300",children:"Find certified umpires for your cricket matches"})]}),u.jsx("div",{className:"mt-4 md:mt-0",children:u.jsxs("span",{className:"bg-purple-600 text-white px-4 py-2 rounded-full text-sm font-medium",children:[r.length," Umpires Available"]})})]}),u.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"royal-card p-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Search umpires by name or certification...",value:a,onChange:_=>l(_.target.value),className:"input-field pl-10"})]}),u.jsxs("div",{className:"relative",children:[u.jsx(ua,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsxs("select",{value:c,onChange:_=>d(_.target.value),className:"input-field pl-10 appearance-none",children:[u.jsx("option",{value:"all",children:"All Experience Levels"}),u.jsx("option",{value:"junior",children:"Junior (0-10 years)"}),u.jsx("option",{value:"senior",children:"Senior (10-20 years)"}),u.jsx("option",{value:"veteran",children:"Veteran (20+ years)"})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"date",className:"input-field pl-10",min:new Date().toISOString().split("T")[0]})]})]})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((_,C)=>u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:C*.1},className:"royal-card overflow-hidden group hover:scale-105 transition-transform duration-300",children:[u.jsxs("div",{className:"relative h-48 overflow-hidden",children:[u.jsx("img",{src:_.image,alt:_.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),u.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-full px-3 py-1 flex items-center space-x-1",children:[u.jsx(eo,{className:"w-4 h-4 text-yellow-500 fill-current"}),u.jsx("span",{className:"text-sm font-medium",children:_.rating})]}),u.jsx("div",{className:"absolute bottom-4 left-4 bg-purple-600 text-white px-3 py-1 rounded-full",children:u.jsxs("span",{className:"text-sm font-bold",children:["",_.pricePerMatch,"/match"]})})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:_.name}),u.jsxs("div",{className:"flex items-center text-gray-600 mb-3",children:[u.jsx(sc,{className:"w-4 h-4 mr-2"}),u.jsxs("span",{className:"text-sm",children:[_.experience," years experience"]})]}),u.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:_.description}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[_.certifications.slice(0,2).map(E=>u.jsxs("div",{className:"flex items-center bg-purple-100 text-purple-800 rounded-full px-3 py-1",children:[u.jsx(Jp,{className:"w-3 h-3 mr-1"}),u.jsx("span",{className:"text-xs",children:E})]},E)),_.certifications.length>2&&u.jsx("div",{className:"bg-gray-100 rounded-full px-3 py-1",children:u.jsxs("span",{className:"text-xs",children:["+",_.certifications.length-2," more"]})})]}),u.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{o(_),h(!0)},className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:"Book Umpire"})]})]},_.id))}),u.jsx(Sn,{children:f&&s&&u.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"royal-card p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center mb-6",children:[u.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 rounded-full object-cover mr-4"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s.name}),u.jsxs("p",{className:"text-gray-600",children:[s.experience," years experience"]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Match Date"}),u.jsx("input",{type:"date",value:p,onChange:_=>m(_.target.value),min:new Date().toISOString().split("T")[0],className:"input-field",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Match Start Time"}),u.jsxs("select",{value:v,onChange:_=>w(_.target.value),className:"input-field",required:!0,children:[u.jsx("option",{value:"",children:"Select time"}),u.jsx("option",{value:"06:00",children:"6:00 AM"}),u.jsx("option",{value:"08:00",children:"8:00 AM"}),u.jsx("option",{value:"10:00",children:"10:00 AM"}),u.jsx("option",{value:"14:00",children:"2:00 PM"}),u.jsx("option",{value:"16:00",children:"4:00 PM"}),u.jsx("option",{value:"18:00",children:"6:00 PM"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Match Type"}),u.jsxs("select",{value:y,onChange:_=>g(_.target.value),className:"input-field",children:[u.jsx("option",{value:"T20",children:"T20 (3-4 hours)"}),u.jsx("option",{value:"ODI",children:"ODI (7-8 hours)"}),u.jsx("option",{value:"Test",children:"Test Match (8+ hours)"}),u.jsx("option",{value:"Custom",children:"Custom Format"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Certifications"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:s.certifications.map(_=>u.jsxs("div",{className:"flex items-center bg-purple-100 text-purple-800 rounded-full px-3 py-1",children:[u.jsx(Jp,{className:"w-3 h-3 mr-1"}),u.jsx("span",{className:"text-xs",children:_})]},_))})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-gray-600",children:"Match Type:"}),u.jsx("span",{className:"font-medium",children:y})]}),u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-gray-600",children:"Rate per match:"}),u.jsxs("span",{className:"font-medium",children:["",s.pricePerMatch]})]}),u.jsx("hr",{className:"my-2"}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"font-semibold",children:"Total:"}),u.jsxs("span",{className:"font-bold text-purple-600",children:["",s.pricePerMatch]})]})]})]}),u.jsxs("div",{className:"flex space-x-4 mt-6",children:[u.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-white/30 rounded-lg hover:bg-white/20 transition-colors text-gray-700 hover:text-gray-900 backdrop-blur-sm",children:"Cancel"}),u.jsx("button",{onClick:x,disabled:!p||!v,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:"Confirm Booking"})]})]})})})]})}const W_=[{id:"1",name:"Power Cricket Academy - Net 1",location:"Bandra West, Mumbai",description:"Professional practice net with bowling machine and video analysis. Perfect for technique improvement and power hitting practice.",images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800","https://images.unsplash.com/photo-1540747913346-19e32dc3e97e?w=800"],pricePerHour:800,pitchType:"Artificial Turf",facilities:["Bowling Machine","Video Analysis","Floodlights","Ball Collection"],availability:[{date:"2024-01-20",startTime:"06:00",endTime:"22:00",available:!0},{date:"2024-01-21",startTime:"06:00",endTime:"22:00",available:!0}]},{id:"2",name:"Elite Sports Complex - Fast Net",location:"Andheri East, Mumbai",description:"High-speed practice net designed for fast bowling practice. Includes speed gun and professional coaching support.",images:["https://images.unsplash.com/photo-1531415074968-036ba1b575da?w=800"],pricePerHour:1200,pitchType:"Natural Grass",facilities:["Speed Gun","Professional Coach","Floodlights","Changing Room"],availability:[{date:"2024-01-20",startTime:"06:00",endTime:"20:00",available:!0}]},{id:"3",name:"Spin Academy - Turning Net",location:"Juhu, Mumbai",description:"Specialized net for spin bowling practice with different pitch conditions. Great for developing spin variations.",images:["https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=800"],pricePerHour:600,pitchType:"Clay Pitch",facilities:["Spin-friendly Surface","Ball Variety","Basic Lighting"],availability:[{date:"2024-01-20",startTime:"06:00",endTime:"18:00",available:!0},{date:"2024-01-21",startTime:"06:00",endTime:"18:00",available:!1}]},{id:"4",name:"Champions Net Complex - Multi-Purpose",location:"Powai, Mumbai",description:"Versatile practice net suitable for all types of cricket training. Includes modern amenities and equipment.",images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800"],pricePerHour:1e3,pitchType:"Hybrid Surface",facilities:["Multi-Purpose","Equipment Rental","Floodlights","Cafeteria","Parking"],availability:[{date:"2024-01-20",startTime:"06:00",endTime:"22:00",available:!0}]}];function hz({user:t}){const[e,n]=b.useState(W_),[r,i]=b.useState(W_),[s,o]=b.useState(null),[a,l]=b.useState(""),[c,d]=b.useState("all"),[f,h]=b.useState("all"),[p,m]=b.useState(!1),[v,w]=b.useState(""),[y,g]=b.useState(""),[x,_]=b.useState(1),C=["all","Artificial Turf","Natural Grass","Clay Pitch","Hybrid Surface"];b.useEffect(()=>{let k=e;a&&(k=k.filter(O=>O.name.toLowerCase().includes(a.toLowerCase())||O.location.toLowerCase().includes(a.toLowerCase())||O.pitchType.toLowerCase().includes(a.toLowerCase()))),c!=="all"&&(k=k.filter(O=>O.pitchType===c)),f!=="all"&&(k=k.filter(O=>f==="low"?O.pricePerHour<800:f==="medium"?O.pricePerHour>=800&&O.pricePerHour<1e3:f==="high"?O.pricePerHour>=1e3:!0)),i(k)},[a,c,f,e]);const E=()=>{if(!s||!v||!y||!t)return;const k={id:Oc(),userId:t.id,type:"net",resourceId:s.id,date:v,startTime:y,endTime:`${parseInt(y.split(":")[0])+x}:${y.split(":")[1]}`,totalPrice:s.pricePerHour*x,status:"confirmed",createdAt:new Date},O=JSON.parse(localStorage.getItem("cricketBookings")||"[]");O.push(k),localStorage.setItem("cricketBookings",JSON.stringify(O)),Y.success("Practice net booked successfully!"),m(!1),o(null)},A=k=>{switch(k.toLowerCase()){case"bowling machine":return u.jsx(fi,{className:"w-4 h-4"});case"speed gun":return u.jsx(r5,{className:"w-4 h-4"});case"floodlights":case"basic lighting":return u.jsx(ca,{className:"w-4 h-4"});case"video analysis":return u.jsx(Qb,{className:"w-4 h-4"});default:return u.jsx(eo,{className:"w-4 h-4"})}},T=k=>{switch(k){case"Artificial Turf":return"bg-green-100 text-green-800";case"Natural Grass":return"bg-emerald-100 text-emerald-800";case"Clay Pitch":return"bg-orange-100 text-orange-800";case"Hybrid Surface":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Book Practice Nets"}),u.jsx("p",{className:"text-gray-300",children:"Find and book practice nets for your cricket training"})]}),u.jsx("div",{className:"mt-4 md:mt-0",children:u.jsxs("span",{className:"bg-purple-600 text-white px-4 py-2 rounded-full text-sm font-medium",children:[r.length," Nets Available"]})})]}),u.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"royal-card p-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Search nets by name or location...",value:a,onChange:k=>l(k.target.value),className:"input-field pl-10"})]}),u.jsxs("div",{className:"relative",children:[u.jsx(ua,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("select",{value:c,onChange:k=>d(k.target.value),className:"input-field pl-10 appearance-none",children:C.map(k=>u.jsx("option",{value:k,children:k==="all"?"All Pitch Types":k},k))})]}),u.jsxs("div",{className:"relative",children:[u.jsx(ua,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsxs("select",{value:f,onChange:k=>h(k.target.value),className:"input-field pl-10 appearance-none",children:[u.jsx("option",{value:"all",children:"All Price Ranges"}),u.jsx("option",{value:"low",children:"Under 800/hr"}),u.jsx("option",{value:"medium",children:"800 - 1,000/hr"}),u.jsx("option",{value:"high",children:"Above 1,000/hr"})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"date",className:"input-field pl-10",min:new Date().toISOString().split("T")[0]})]})]})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((k,O)=>u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:O*.1},className:"royal-card overflow-hidden group hover:scale-105 transition-transform duration-300",children:[u.jsxs("div",{className:"relative h-48 overflow-hidden",children:[u.jsx("img",{src:k.images[0],alt:k.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),u.jsx("div",{className:"absolute top-4 right-4 bg-purple-600 text-white px-3 py-1 rounded-full",children:u.jsxs("span",{className:"text-sm font-bold",children:["",k.pricePerHour,"/hr"]})}),u.jsx("div",{className:`absolute top-4 left-4 px-3 py-1 rounded-full text-xs font-medium ${T(k.pitchType)}`,children:k.pitchType})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:k.name}),u.jsxs("div",{className:"flex items-center text-gray-600 mb-3",children:[u.jsx(Dc,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"text-sm",children:k.location})]}),u.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:k.description}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[k.facilities.slice(0,3).map(q=>u.jsxs("div",{className:"flex items-center bg-orange-100 text-orange-800 rounded-full px-3 py-1",children:[A(q),u.jsx("span",{className:"text-xs ml-1",children:q})]},q)),k.facilities.length>3&&u.jsx("div",{className:"bg-gray-100 rounded-full px-3 py-1",children:u.jsxs("span",{className:"text-xs",children:["+",k.facilities.length-3," more"]})})]}),u.jsx(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{o(k),m(!0)},className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:"Book Net"})]})]},k.id))}),u.jsx(Sn,{children:p&&s&&u.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"royal-card p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Book ",s.name]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),u.jsx("input",{type:"date",value:v,onChange:k=>w(k.target.value),min:new Date().toISOString().split("T")[0],className:"input-field",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),u.jsxs("select",{value:y,onChange:k=>g(k.target.value),className:"input-field",required:!0,children:[u.jsx("option",{value:"",children:"Select time"}),u.jsx("option",{value:"06:00",children:"6:00 AM"}),u.jsx("option",{value:"07:00",children:"7:00 AM"}),u.jsx("option",{value:"08:00",children:"8:00 AM"}),u.jsx("option",{value:"09:00",children:"9:00 AM"}),u.jsx("option",{value:"10:00",children:"10:00 AM"}),u.jsx("option",{value:"16:00",children:"4:00 PM"}),u.jsx("option",{value:"17:00",children:"5:00 PM"}),u.jsx("option",{value:"18:00",children:"6:00 PM"}),u.jsx("option",{value:"19:00",children:"7:00 PM"}),u.jsx("option",{value:"20:00",children:"8:00 PM"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (hours)"}),u.jsxs("select",{value:x,onChange:k=>_(parseInt(k.target.value)),className:"input-field",children:[u.jsx("option",{value:1,children:"1 hour"}),u.jsx("option",{value:2,children:"2 hours"}),u.jsx("option",{value:3,children:"3 hours"}),u.jsx("option",{value:4,children:"4 hours"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pitch Type"}),u.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${T(s.pitchType)}`,children:s.pitchType})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Facilities"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:s.facilities.map(k=>u.jsxs("div",{className:"flex items-center bg-orange-100 text-orange-800 rounded-full px-3 py-1",children:[A(k),u.jsx("span",{className:"text-xs ml-1",children:k})]},k))})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-gray-600",children:"Rate per hour:"}),u.jsxs("span",{className:"font-medium",children:["",s.pricePerHour]})]}),u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-gray-600",children:"Duration:"}),u.jsxs("span",{className:"font-medium",children:[x," hours"]})]}),u.jsx("hr",{className:"my-2"}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"font-semibold",children:"Total:"}),u.jsxs("span",{className:"font-bold text-orange-600",children:["",s.pricePerHour*x]})]})]})]}),u.jsxs("div",{className:"flex space-x-4 mt-6",children:[u.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-black font-medium bg-white",children:"Cancel"}),u.jsx("button",{onClick:E,disabled:!v||!y,className:"flex-1 bg-orange-600 hover:bg-orange-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:"Confirm Booking"})]})]})})})]})}const pz=({team:t,isOpen:e,onClose:n})=>{const[r,i]=b.useState(null),[s,o]=b.useState(!1),a=t.joinUrl||`${window.location.origin}/join/${t.shortCode}`,l=t.shortCode||t.id;b.useEffect(()=>{e&&!r&&c()},[e]);const c=async()=>{try{o(!0);const m=await Er.generateQRCode(a);i(m)}catch(m){console.error("Error generating QR code:",m),Y.error("Failed to generate QR code")}finally{o(!1)}},d=async(m,v)=>{try{await navigator.clipboard.writeText(m),Y.success(`${v} copied to clipboard!`)}catch(w){console.error("Failed to copy:",w),Y.error("Failed to copy to clipboard")}},f=()=>{const m=` Join my cricket team "${t.name}"!

Team Code: ${l}
Join Link: ${a}

Use the code or click the link to join our team!`,v=`https://wa.me/?text=${encodeURIComponent(m)}`;window.open(v,"_blank")},h=async()=>{if(navigator.share)try{await navigator.share({title:`Join Cricket Team: ${t.name}`,text:`Join my cricket team "${t.name}" using code: ${l}`,url:a})}catch(m){console.error("Error sharing:",m)}else d(a,"Join link")},p=()=>{if(!r)return;const m=document.createElement("a");m.download=`${t.name}-qr-code.png`,m.href=r,document.body.appendChild(m),m.click(),document.body.removeChild(m),Y.success("QR code downloaded!")};return e?u.jsx(Sn,{children:u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(U.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Share Team"}),u.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors text-gray-600 hover:text-gray-800",children:u.jsx(ri,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:t.name}),u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.players.length," player",t.players.length!==1?"s":""]})]}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Team Code"}),u.jsx("div",{className:"text-2xl font-mono font-bold text-cricket-primary mt-1",children:l})]}),u.jsx("button",{onClick:()=>d(l,"Team code"),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:u.jsx(Md,{className:"w-5 h-5 text-gray-600"})})]})}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Join Link"}),u.jsx("div",{className:"text-sm text-gray-600 mt-1 truncate",children:a})]}),u.jsx("button",{onClick:()=>d(a,"Join link"),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors ml-2",children:u.jsx(Md,{className:"w-5 h-5 text-gray-600"})})]})}),u.jsxs("div",{className:"text-center",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 block mb-3",children:"QR Code"}),u.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6 inline-block",children:s?u.jsx("div",{className:"w-52 h-52 flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cricket-primary"})}):r?u.jsx("img",{src:r,alt:"Team QR Code",className:"w-52 h-52 object-contain"}):u.jsx("div",{className:"w-52 h-52 flex items-center justify-center text-gray-400",children:u.jsx(nA,{className:"w-12 h-12"})})}),r&&u.jsxs("button",{onClick:p,className:"mt-3 text-sm text-cricket-primary hover:text-cricket-secondary flex items-center justify-center gap-1 mx-auto",children:[u.jsx(Jb,{className:"w-4 h-4"}),"Download QR Code"]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Share via"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{onClick:f,className:"flex items-center justify-center gap-2 p-3 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:[u.jsx(Sg,{className:"w-4 h-4"}),"WhatsApp"]}),u.jsxs("button",{onClick:h,className:"flex items-center justify-center gap-2 p-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:[u.jsx(Ld,{className:"w-4 h-4"}),"Share"]})]})]}),u.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[u.jsx("h5",{className:"text-sm font-semibold text-blue-900 mb-2",children:"How to join:"}),u.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[u.jsxs("li",{children:[" Share the 6-character team code: ",u.jsx("strong",{children:l})]}),u.jsx("li",{children:" Send the join link to teammates"}),u.jsx("li",{children:" Let them scan the QR code"}),u.jsx("li",{children:" Players can join instantly!"})]})]})]})]})})}):null};function mz({user:t,onClose:e}){const[n,r]=b.useState(1),[i,s]=b.useState(!1),[o,a]=b.useState(""),[l,c]=b.useState("T20"),[d,f]=b.useState(!0),[h,p]=b.useState([{name:"",phone:"",role:"Batsman",tempId:"1"}]),[m,v]=b.useState({}),[w,y]=b.useState([]),[g,x]=b.useState(null),_=()=>Math.random().toString(36).substr(2,9),C=()=>Math.floor(Math.random()*(9999999999-1e9+1)+1e9).toString(),E=()=>{p([...h,{name:"",phone:"",role:"Batsman",tempId:_()}])},A=L=>{p(h.filter(ne=>ne.tempId!==L))},T=(L,ne,de)=>{p(h.map(se=>se.tempId===L?{...se,[ne]:de}:se))},k=L=>/^[+]?[\d\s\-()]{10,15}$/.test(L.replace(/\s/g,"")),O=async()=>{s(!0);try{const L=JSON.parse(localStorage.getItem("cricketUsers")||"[]"),ne={};for(const de of h)if(de.name&&de.phone){const se=de.phone.replace(/\s/g,""),V=L.find(Z=>Z.phone.replace(/\s/g,"")===se);ne[de.tempId]={exists:!!V,userId:V==null?void 0:V.id,needsInvite:!V}}v(ne),r(3)}catch{Y.error("Failed to verify players")}finally{s(!1)}},q=async()=>{if(!(!t||!o)){s(!0);try{const L={id:C(),name:o,captainId:t.id,players:[{userId:t.id,name:t.name,role:"All-rounder",battingOrder:1}],matchFormat:l,createdAt:new Date,isPublic:d,wins:0,losses:0,draws:0},ne=[],de=[],se=[];for(const _e of h)if(_e.name&&_e.phone){const xe=m[_e.tempId],Xe={id:_(),name:_e.name,phone:_e.phone,userId:xe==null?void 0:xe.userId,createdAt:new Date,inviteStatus:xe!=null&&xe.exists?"registered":"pending"};ne.push(Xe);const Ye={teamId:L.id,playerId:Xe.id,role:_e.role,battingOrder:L.players.length+de.length+1,joinedAt:new Date};if(de.push(Ye),xe!=null&&xe.exists&&xe.userId&&L.players.push({userId:xe.userId,name:_e.name,role:_e.role,battingOrder:Ye.battingOrder}),xe!=null&&xe.needsInvite){const mt=`${window.location.origin}/signup?teamId=${L.id}&playerId=${Xe.id}`,Nt={id:_(),teamId:L.id,playerId:Xe.id,playerName:Xe.name,playerPhone:Xe.phone,message:`Hi ${Xe.name},

You have been selected in ${o}.

Please sign up in the app to join your team officially.

Team ID: ${L.id}
Signup Link: ${mt}`,sentAt:new Date,status:"sent",signupLink:mt};se.push(Nt),await G(Nt)}}const V=JSON.parse(localStorage.getItem("cricketTeams")||"[]"),Z=JSON.parse(localStorage.getItem("cricketPlayers")||"[]"),re=JSON.parse(localStorage.getItem("cricketTeamPlayerMaps")||"[]"),we=JSON.parse(localStorage.getItem("cricketWhatsAppInvites")||"[]");localStorage.setItem("cricketTeams",JSON.stringify([...V,L])),localStorage.setItem("cricketPlayers",JSON.stringify([...Z,...ne])),localStorage.setItem("cricketTeamPlayerMaps",JSON.stringify([...re,...de])),localStorage.setItem("cricketWhatsAppInvites",JSON.stringify([...we,...se])),x(L),y(se),Y.success(`Team "${o}" created successfully!`),se.length>0&&Y.success(`${se.length} WhatsApp invites sent!`)}catch{Y.error("Failed to create team")}finally{s(!1)}}},G=async L=>new Promise(ne=>{setTimeout(()=>{console.log("WhatsApp message sent:",{to:L.playerPhone,message:L.message}),ne()},1e3)}),D=()=>{switch(n){case 1:return o.trim().length>0;case 2:return h.every(L=>L.name.trim().length>0&&L.phone.trim().length>0&&k(L.phone));case 3:return!0;default:return!1}};return g?u.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",children:u.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl p-4 sm:p-6 lg:p-8 max-w-2xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(j2,{className:"w-8 h-8 text-green-600"})}),u.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Team Created Successfully!"}),u.jsxs("p",{className:"text-gray-600",children:['Your team "',g.name,'" has been created']})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"font-medium text-gray-700",children:"Team ID:"}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:"font-mono text-lg",children:g.id}),u.jsx("button",{onClick:()=>{navigator.clipboard.writeText(g.id),Y.success("Team ID copied!")},className:"ml-2 p-1 hover:bg-gray-200 rounded",children:u.jsx(Md,{className:"w-4 h-4"})})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"font-medium text-gray-700",children:"Total Players:"}),u.jsx("span",{children:g.players.length})]})]}),w.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsxs("h4",{className:"font-semibold text-gray-800 mb-3",children:["WhatsApp Invites Sent (",w.length,")"]}),u.jsx("div",{className:"space-y-2",children:w.map(L=>u.jsxs("div",{className:"flex items-center justify-between bg-blue-50 rounded-lg p-3",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Sg,{className:"w-5 h-5 text-blue-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-800",children:L.playerName}),u.jsx("p",{className:"text-sm text-gray-600",children:L.playerPhone})]})]}),u.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Sent"})]},L.id))})]}),u.jsx("div",{className:"flex space-x-4",children:u.jsx("button",{onClick:e,className:"flex-1 btn-primary",children:"Done"})})]})}):u.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",children:u.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl p-4 sm:p-6 lg:p-8 max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Create Team with Invites"}),u.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["Step ",n," of 3"]})]}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:u.jsx(ri,{className:"w-6 h-6"})})]}),u.jsx("div",{className:"flex items-center mb-6 sm:mb-8",children:[1,2,3].map(L=>u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs sm:text-sm font-medium ${n>=L?"bg-cricket-primary text-white":"bg-gray-200 text-gray-600"}`,children:L}),L<3&&u.jsx("div",{className:`w-8 sm:w-16 h-1 mx-1 sm:mx-2 ${n>L?"bg-cricket-primary":"bg-gray-200"}`})]},L))}),n===1&&u.jsxs(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),u.jsx("input",{type:"text",value:o,onChange:L=>a(L.target.value),placeholder:"Enter team name",className:"input-field",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Match Format"}),u.jsxs("select",{value:l,onChange:L=>c(L.target.value),className:"input-field",children:[u.jsx("option",{value:"T20",children:"T20"}),u.jsx("option",{value:"ODI",children:"ODI"}),u.jsx("option",{value:"Test",children:"Test"}),u.jsx("option",{value:"Custom",children:"Custom"})]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"isPublic",checked:d,onChange:L=>f(L.target.checked),className:"mr-3"}),u.jsx("label",{htmlFor:"isPublic",className:"text-sm text-gray-700",children:"Make team public (others can find and join)"})]}),u.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center mb-2",children:[u.jsx(cl,{className:"w-5 h-5 text-yellow-600 mr-2"}),u.jsx("span",{className:"font-medium text-gray-800",children:"You will be the captain"})]}),u.jsx("p",{className:"text-sm text-gray-600",children:"As captain, you can manage team members and organize matches."})]})]}),n===2&&u.jsxs(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Add Team Players"}),u.jsxs("button",{onClick:E,className:"bg-cricket-secondary hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:[u.jsx(jd,{className:"inline w-4 h-4 mr-2"}),"Add Player"]})]}),u.jsx("div",{className:"space-y-4",children:h.map((L,ne)=>u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 p-3 sm:p-4 border border-gray-200 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),u.jsx("input",{type:"text",value:L.name,onChange:de=>T(L.tempId,"name",de.target.value),placeholder:"Player name",className:"input-field"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),u.jsx("input",{type:"tel",value:L.phone,onChange:de=>T(L.tempId,"phone",de.target.value),placeholder:"+91 9876543210",className:"input-field"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),u.jsxs("select",{value:L.role,onChange:de=>T(L.tempId,"role",de.target.value),className:"input-field",children:[u.jsx("option",{value:"Batsman",children:"Batsman"}),u.jsx("option",{value:"Bowler",children:"Bowler"}),u.jsx("option",{value:"All-rounder",children:"All-rounder"}),u.jsx("option",{value:"Wicket-keeper",children:"Wicket-keeper"})]})]}),u.jsx("div",{className:"flex items-end",children:h.length>1&&u.jsx("button",{onClick:()=>A(L.tempId),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:u.jsx(ri,{className:"w-5 h-5"})})})]},L.tempId))}),u.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center mb-2",children:[u.jsx(Zp,{className:"w-5 h-5 text-yellow-600 mr-2"}),u.jsx("span",{className:"font-medium text-gray-800",children:"How it works"})]}),u.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[u.jsx("li",{children:" We'll check if players are already registered"}),u.jsx("li",{children:" Registered players will be added directly to your team"}),u.jsx("li",{children:" Unregistered players will receive WhatsApp invites"}),u.jsx("li",{children:" They can join your team after signing up"})]})]})]}),n===3&&u.jsxs(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Review & Send Invites"}),u.jsx("div",{className:"space-y-4",children:h.map(L=>{const ne=m[L.tempId];return u.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-10 h-10 bg-cricket-primary rounded-full flex items-center justify-center text-white font-semibold mr-3",children:L.name.charAt(0)}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-800",children:L.name}),u.jsxs("p",{className:"text-sm text-gray-600",children:[L.phone,"  ",L.role]})]})]}),u.jsx("div",{className:"flex items-center",children:ne!=null&&ne.exists?u.jsxs("span",{className:"bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full flex items-center",children:[u.jsx(j2,{className:"w-4 h-4 mr-1"}),"Registered"]}):u.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm px-3 py-1 rounded-full flex items-center",children:[u.jsx(t5,{className:"w-4 h-4 mr-1"}),"Will send invite"]})})]},L.tempId)})}),u.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[u.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"What happens next?"}),u.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[u.jsxs("li",{children:[" Your team will be created with ID: ",u.jsx("span",{className:"font-mono",children:C()})]}),u.jsx("li",{children:" Registered players will be added immediately"}),u.jsx("li",{children:" WhatsApp invites will be sent to unregistered players"}),u.jsx("li",{children:" Players can join using the team ID or signup link"})]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 sm:gap-0 mt-6 sm:mt-8",children:[u.jsx("button",{onClick:()=>n>1?r(n-1):e(),className:"px-4 sm:px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm sm:text-base text-black font-medium bg-white",children:n===1?"Cancel":"Back"}),u.jsxs("button",{onClick:()=>{n===1?r(2):n===2?O():q()},disabled:!D()||i,className:"px-4 sm:px-6 py-2 btn-primary disabled:opacity-50 flex items-center justify-center text-sm sm:text-base",children:[i&&u.jsx(qO,{className:"w-4 h-4 mr-2 animate-spin"}),u.jsx("span",{className:"hidden sm:inline",children:n===1?"Next":n===2?"Check Players":"Create Team & Send Invites"}),u.jsx("span",{className:"sm:hidden",children:n===1?"Next":n===2?"Check":"Create"})]})]})]})})}function gz({user:t}){var qe;const{teams:e,loading:n,createTeam:r,joinTeam:i,updateTeam:s,deleteTeam:o}=JN(),[a,l]=b.useState([]),[c,d]=b.useState(!1),[f,h]=b.useState(!1),[p,m]=b.useState(null),[v,w]=b.useState(!1),[y,g]=b.useState(null),[x,_]=b.useState(null),[C,E]=b.useState(""),[A,T]=b.useState("all"),[k,O]=b.useState("all"),[q,G]=b.useState("newest"),[D,L]=b.useState("my-teams"),[ne,de]=b.useState(""),[se,V]=b.useState(""),[Z,re]=b.useState("T20"),[we,_e]=b.useState(!0),[xe,Xe]=b.useState([]),[Ye,mt]=b.useState(""),[Nt,wi]=b.useState("All-rounder"),[Lt,Ur]=b.useState(""),[Vr,ys]=b.useState("T20"),[mo,xs]=b.useState(!0),[rr,ws]=b.useState([]),[_i,La]=b.useState(""),[_s,N]=b.useState("All-rounder"),[P,M]=b.useState([]);b.useEffect(()=>{const I=JSON.parse(localStorage.getItem("cricketUsers")||"[]");M(I)},[]),b.useEffect(()=>{let I=e;if(D==="my-teams"?I=I.filter(X=>X.captainId===(t==null?void 0:t.id)||X.players.some(Se=>Se.userId===(t==null?void 0:t.id))):I=I.filter(X=>X.isPublic),C){const X=C.toLowerCase();I=I.filter(Se=>{var Rn;const lt=((Rn=P.find(Hr=>Hr.id===Se.captainId))==null?void 0:Rn.name)||"";return Se.name.toLowerCase().includes(X)||lt.toLowerCase().includes(X)||Se.shortCode&&Se.shortCode.toLowerCase().includes(X)})}if(A!=="all"&&(I=I.filter(X=>X.matchFormat===A)),k!=="all")switch(k){case"small":I=I.filter(X=>X.players.length<=5);break;case"medium":I=I.filter(X=>X.players.length>=6&&X.players.length<=10);break;case"large":I=I.filter(X=>X.players.length>=11);break}I.sort((X,Se)=>{switch(q){case"newest":return new Date(Se.createdAt).getTime()-new Date(X.createdAt).getTime();case"oldest":return new Date(X.createdAt).getTime()-new Date(Se.createdAt).getTime();case"most-players":return Se.players.length-X.players.length;case"least-players":return X.players.length-Se.players.length;default:return 0}}),l(I)},[e,D,C,A,k,q,t,P]);const F=()=>{if(!Ye)return;const I=P.find(Se=>Se.id===Ye);if(!I)return;if(xe.some(Se=>Se.userId===Ye)){Y.error("User is already added to the team!");return}if(Ye===(t==null?void 0:t.id)){Y.error("You are already the captain of this team!");return}const X={userId:I.id,name:I.name,role:Nt,battingOrder:xe.length+2};Xe([...xe,X]),mt(""),wi("All-rounder"),Y.success(`${I.name} added to team!`)},z=I=>{const Se=xe.filter(lt=>lt.userId!==I).map((lt,Rn)=>({...lt,battingOrder:Rn+2}));Xe(Se),Y.success("Player removed from team!")},W=async()=>{if(!se||!t)return;const I={name:se,captainId:t.id,players:[{userId:t.id,name:t.name,role:"All-rounder",battingOrder:1},...xe],matchFormat:Z,createdAt:new Date,isPublic:we,wins:0,losses:0,draws:0};await r(I)&&(V(""),Xe([]),mt(""),wi("All-rounder"),d(!1))},te=async()=>{if(!ne||!t)return;await i(ne,t)&&(de(""),w(!1))},Ce=async I=>{t&&await i(I,t)},Ie=I=>{g(I),Ur(I.name),ys(I.matchFormat),xs(I.isPublic),ws(I.players.filter(X=>X.userId!==I.captainId))},Ft=async()=>{if(!y||!Lt)return;const I={name:Lt,matchFormat:Vr,isPublic:mo,players:[{userId:y.captainId,name:(t==null?void 0:t.name)||"Captain",role:"All-rounder",battingOrder:1},...rr]};await s(y.id,I)&&g(null)},B=async I=>{window.confirm(`Are you sure you want to delete "${I.name}"?`)&&await o(I.id,I.shortCode)},fe=async I=>{const X=I.shortCode||I.id;try{await navigator.clipboard.writeText(X),Y.success("Team code copied to clipboard!")}catch{Y.error("Failed to copy team code")}};return n&&e.length===0?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 mb-2"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("div",{className:"h-10 bg-gray-200 rounded w-24 animate-pulse"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded w-32 animate-pulse"})]})]}),u.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(I=>u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded"})]},I))})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(I=>u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse",children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-2"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})]}),u.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded-full"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx("div",{className:"h-8 bg-gray-200 rounded flex-1"}),u.jsx("div",{className:"h-8 bg-gray-200 rounded flex-1"})]})]})]},I))})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs(U.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-3 bg-cricket-primary rounded-xl",children:u.jsx(oc,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Team Management"}),u.jsx("p",{className:"text-white",children:"Create, join, and manage your cricket teams"})]})]}),u.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[u.jsxs(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>w(!0),className:"bg-cricket-secondary hover:bg-green-700 text-white font-semibold py-2 px-3 sm:px-4 rounded-lg transition-all duration-300 text-sm sm:text-base flex items-center whitespace-nowrap",children:[u.jsx(Fd,{className:"inline w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden xs:inline",children:"Join Team"}),u.jsx("span",{className:"xs:hidden",children:"Join"})]}),u.jsxs(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d(!0),className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-3 sm:px-4 rounded-lg transition-all duration-300 text-sm sm:text-base flex items-center whitespace-nowrap",children:[u.jsx(jd,{className:"inline w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden xs:inline",children:"Quick Create"}),u.jsx("span",{className:"xs:hidden",children:"Create"})]}),u.jsxs(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!0),className:"bg-cricket-primary hover:bg-cricket-secondary text-white font-semibold py-2 px-3 sm:px-4 rounded-lg transition-all duration-300 text-sm sm:text-base flex items-center whitespace-nowrap",children:[u.jsx(Sg,{className:"inline w-4 h-4 mr-2"}),u.jsx("span",{className:"hidden sm:inline",children:"Create with Invites"}),u.jsx("span",{className:"sm:hidden",children:"Invites"})]})]})]}),u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card p-4 sm:p-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4",children:[u.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1 mb-4 md:mb-0",children:[u.jsx("button",{onClick:()=>L("my-teams"),className:`px-4 py-2 rounded-md font-medium transition-all ${D==="my-teams"?"bg-white text-cricket-primary shadow-md":"text-gray-600 hover:text-gray-800"}`,children:"My Teams"}),u.jsx("button",{onClick:()=>L("all-teams"),className:`px-4 py-2 rounded-md font-medium transition-all ${D==="all-teams"?"bg-white text-cricket-primary shadow-md":"text-gray-600 hover:text-gray-800"}`,children:"All Teams"})]}),u.jsxs("div",{className:"text-sm text-gray-900",children:[u.jsxs("span",{className:"text-gray-900",children:[a.length," teams found"]}),D==="all-teams"&&u.jsxs("span",{className:"ml-4 text-green-600",children:[" ",a.filter(I=>I.isPublic&&!I.players.some(X=>X.userId===(t==null?void 0:t.id))).length," available to join"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),u.jsx("input",{type:"text",placeholder:"Search teams...",value:C,onChange:I=>E(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900 placeholder-gray-500"})]}),u.jsxs("select",{value:A,onChange:I=>T(I.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900",children:[u.jsx("option",{value:"all",children:"All Formats"}),u.jsx("option",{value:"T20",children:"T20"}),u.jsx("option",{value:"ODI",children:"ODI"}),u.jsx("option",{value:"Test",children:"Test"}),u.jsx("option",{value:"Custom",children:"Custom"})]}),u.jsxs("select",{value:k,onChange:I=>O(I.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900",children:[u.jsx("option",{value:"all",children:"All Sizes"}),u.jsx("option",{value:"small",children:"Small (5)"}),u.jsx("option",{value:"medium",children:"Medium (6-10)"}),u.jsx("option",{value:"large",children:"Large (11+)"})]}),u.jsxs("select",{value:q,onChange:I=>G(I.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900",children:[u.jsx("option",{value:"newest",children:"Newest First"}),u.jsx("option",{value:"oldest",children:"Oldest First"}),u.jsx("option",{value:"most-players",children:"Most Players"}),u.jsx("option",{value:"least-players",children:"Least Players"})]})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.jsx(Sn,{children:a.map((I,X)=>{var Se;return u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:X*.1},className:"card p-6 hover:shadow-lg transition-all duration-300",children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:I.name}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[u.jsx(cl,{className:"w-4 h-4 text-yellow-500"}),u.jsx("span",{children:((Se=P.find(lt=>lt.id===I.captainId))==null?void 0:Se.name)||"Unknown Captain"})]})]}),I.captainId===(t==null?void 0:t.id)&&u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>Ie(I),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:u.jsx(rA,{className:"w-4 h-4 text-gray-600"})}),u.jsx("button",{onClick:()=>B(I),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:u.jsx(t0,{className:"w-4 h-4 text-red-600"})})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(to,{className:"w-4 h-4 text-cricket-primary"}),u.jsxs("span",{className:"text-sm font-medium text-black",children:[I.players.length," players"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(fi,{className:"w-4 h-4 text-cricket-secondary"}),u.jsx("span",{className:"text-sm font-medium text-black",children:I.matchFormat})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Mr,{className:"w-4 h-4 text-yellow-500"}),u.jsxs("span",{className:"text-sm font-medium text-black",children:[I.wins,"W"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ca,{className:"w-4 h-4 text-gray-500"}),u.jsx("span",{className:"text-sm font-medium text-black",children:new Date(I.createdAt).toLocaleDateString()})]})]}),I.shortCode&&u.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-xs text-gray-600",children:"Team Code"}),u.jsx("div",{className:"font-mono font-bold text-cricket-primary",children:I.shortCode})]}),u.jsx("button",{onClick:()=>fe(I),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:u.jsx(Md,{className:"w-4 h-4 text-gray-600"})})]})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>m(I),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors text-sm",children:[u.jsx(eA,{className:"w-4 h-4"}),"View"]}),I.captainId===(t==null?void 0:t.id)?u.jsxs("button",{onClick:()=>_(I),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-cricket-primary hover:bg-cricket-secondary text-white rounded-lg transition-colors text-sm",children:[u.jsx(Ld,{className:"w-4 h-4"}),"Share"]}):!I.players.some(lt=>lt.userId===(t==null?void 0:t.id))&&u.jsxs("button",{onClick:()=>Ce(I.id),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-cricket-secondary hover:bg-green-700 text-white rounded-lg transition-colors text-sm",children:[u.jsx(Fd,{className:"w-4 h-4"}),"Join"]})]})]},I.id)})})}),a.length===0&&!n&&u.jsxs(U.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[u.jsx(oc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:D==="my-teams"?"No teams found":"No public teams available"}),u.jsx("p",{className:"text-white mb-6",children:D==="my-teams"?"Create your first team or join an existing one":"Be the first to create a public team!"}),u.jsx("div",{className:"flex justify-center",children:u.jsxs("button",{onClick:()=>d(!0),className:"bg-cricket-primary hover:bg-cricket-secondary text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 flex items-center whitespace-nowrap",children:[u.jsx(jd,{className:"w-4 h-4 mr-2"}),"Create Team"]})})]}),u.jsx(Sn,{children:v&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(U.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Join Team"}),u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Team ID or Code"}),u.jsx("input",{type:"text",value:ne,onChange:I=>de(I.target.value.toUpperCase()),placeholder:"Enter 6-character code",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900 bg-white"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter either the 6-character team code"})]})}),u.jsxs("div",{className:"flex gap-3 mt-6",children:[u.jsx("button",{onClick:()=>w(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg transition-colors text-black",children:"Cancel"}),u.jsx("button",{onClick:te,disabled:!ne||n,className:"flex-1 px-4 py-2 bg-cricket-primary hover:bg-cricket-secondary text-white rounded-lg transition-colors disabled:opacity-50",children:n?"Joining...":"Join Team"})]})]})})}),u.jsx(Sn,{children:p&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(U.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Team Details"}),u.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors text-gray-600 hover:text-gray-800",children:u.jsx(ri,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:p.name}),u.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600",children:[u.jsx(cl,{className:"w-4 h-4 text-yellow-500"}),u.jsxs("span",{children:["Captain: ",((qe=P.find(I=>I.id===p.captainId))==null?void 0:qe.name)||"Unknown"]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[u.jsx(to,{className:"w-6 h-6 text-cricket-primary mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:p.players.length}),u.jsx("div",{className:"text-sm text-gray-600",children:"Players"})]}),u.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[u.jsx(fi,{className:"w-6 h-6 text-cricket-secondary mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:p.matchFormat}),u.jsx("div",{className:"text-sm text-gray-600",children:"Format"})]}),u.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[u.jsx(Mr,{className:"w-6 h-6 text-yellow-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:p.wins}),u.jsx("div",{className:"text-sm text-gray-600",children:"Wins"})]}),u.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[u.jsx(ca,{className:"w-6 h-6 text-gray-500 mx-auto mb-2"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900",children:new Date(p.createdAt).toLocaleDateString()}),u.jsx("div",{className:"text-sm text-gray-600",children:"Created"})]})]}),p.shortCode&&u.jsx("div",{className:"bg-cricket-primary bg-opacity-10 rounded-lg p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-sm text-cricket-primary font-medium mb-1",children:"Team Code"}),u.jsx("div",{className:"text-3xl font-mono font-bold text-cricket-primary",children:p.shortCode})]})}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Team Players"}),u.jsx("div",{className:"space-y-2",children:p.players.map((I,X)=>u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[u.jsx("div",{className:"w-8 h-8 bg-cricket-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:I.battingOrder||X+1}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"font-medium text-gray-900",children:[I.name,I.userId===p.captainId&&u.jsx(cl,{className:"w-4 h-4 text-yellow-500 inline ml-2"})]}),u.jsx("div",{className:"text-sm text-gray-600",children:I.role})]})]},I.userId))})]})]}),u.jsxs("div",{className:"flex gap-3 p-6 border-t",children:[u.jsx("button",{onClick:()=>m(null),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg transition-colors text-black",children:"Close"}),p.captainId===(t==null?void 0:t.id)&&u.jsxs("button",{onClick:()=>{_(p),m(null)},className:"flex-1 px-4 py-2 bg-cricket-primary hover:bg-cricket-secondary text-white rounded-lg transition-colors",children:[u.jsx(Ld,{className:"w-4 h-4 mr-2 inline"}),"Share Team"]})]})]})})}),x&&u.jsx(pz,{team:x,isOpen:!0,onClose:()=>_(null)}),u.jsx(Sn,{children:y&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(U.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Edit Team"}),u.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors text-gray-600 hover:text-gray-800",children:u.jsx(ri,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Team Name *"}),u.jsx("input",{type:"text",value:Lt,onChange:I=>Ur(I.target.value),placeholder:"Enter team name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900 placeholder-gray-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Match Format"}),u.jsxs("select",{value:Vr,onChange:I=>ys(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900",children:[u.jsx("option",{value:"T20",children:"T20"}),u.jsx("option",{value:"ODI",children:"ODI"}),u.jsx("option",{value:"Test",children:"Test"}),u.jsx("option",{value:"Custom",children:"Custom"})]})]}),u.jsx("div",{children:u.jsxs("label",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",checked:mo,onChange:I=>xs(I.target.checked),className:"w-4 h-4 text-cricket-primary border-gray-300 rounded focus:ring-cricket-primary"}),u.jsx("span",{className:"text-sm font-medium text-black",children:"Make team public (visible to all users)"})]})}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Current Players"}),u.jsxs("div",{className:"space-y-2 mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[u.jsx("div",{className:"w-8 h-8 bg-yellow-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"font-medium text-gray-900",children:[t==null?void 0:t.name," (You)",u.jsx(cl,{className:"w-4 h-4 text-yellow-500 inline ml-2"})]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Captain - All-rounder"})]})]}),rr.map((I,X)=>u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[u.jsx("div",{className:"w-8 h-8 bg-cricket-primary text-white rounded-full flex items-center justify-center text-sm font-bold",children:X+2}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium text-gray-900",children:I.name}),u.jsx("div",{className:"text-sm text-gray-600",children:I.role})]}),u.jsx("button",{onClick:()=>{const lt=rr.filter(Rn=>Rn.userId!==I.userId).map((Rn,Hr)=>({...Rn,battingOrder:Hr+2}));ws(lt)},className:"p-1 hover:bg-gray-200 rounded transition-colors",children:u.jsx(t0,{className:"w-4 h-4 text-red-600"})})]},I.userId))]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[u.jsxs("select",{value:_i,onChange:I=>La(I.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900",children:[u.jsx("option",{value:"",children:"Add a player"}),P.filter(I=>I.id!==(t==null?void 0:t.id)&&!rr.some(X=>X.userId===I.id)).map(I=>u.jsx("option",{value:I.id,children:I.name},I.id))]}),u.jsxs("select",{value:_s,onChange:I=>N(I.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900",children:[u.jsx("option",{value:"All-rounder",children:"All-rounder"}),u.jsx("option",{value:"Batsman",children:"Batsman"}),u.jsx("option",{value:"Bowler",children:"Bowler"}),u.jsx("option",{value:"Wicket-keeper",children:"Wicket-keeper"})]}),u.jsx("button",{onClick:()=>{if(!_i)return;const I=P.find(Se=>Se.id===_i);if(!I)return;const X={userId:I.id,name:I.name,role:_s,battingOrder:rr.length+2};ws([...rr,X]),La(""),N("All-rounder"),Y.success(`${I.name} added to team!`)},disabled:!_i,className:"px-4 py-2 bg-cricket-primary hover:bg-cricket-secondary text-white rounded-lg transition-colors disabled:opacity-50",children:"Add Player"})]})]})]}),u.jsxs("div",{className:"flex gap-3 p-6 border-t",children:[u.jsx("button",{onClick:()=>g(null),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg transition-colors text-black",children:"Cancel"}),u.jsx("button",{onClick:Ft,disabled:!Lt||n,className:"flex-1 px-4 py-2 bg-cricket-primary hover:bg-cricket-secondary text-white rounded-lg transition-colors disabled:opacity-50",children:n?"Updating...":"Update Team"})]})]})})}),f&&u.jsx(mz,{user:t,onClose:()=>h(!1)}),u.jsx(Sn,{children:c&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(U.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Quick Create Team"}),u.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors text-gray-600 hover:text-gray-800",children:u.jsx(ri,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Team Name *"}),u.jsx("input",{type:"text",value:se,onChange:I=>V(I.target.value),placeholder:"Enter team name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900 placeholder-gray-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Match Format"}),u.jsxs("select",{value:Z,onChange:I=>re(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900",children:[u.jsx("option",{value:"T20",children:"T20"}),u.jsx("option",{value:"ODI",children:"ODI"}),u.jsx("option",{value:"Test",children:"Test"}),u.jsx("option",{value:"Custom",children:"Custom"})]})]}),u.jsx("div",{children:u.jsxs("label",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",checked:we,onChange:I=>_e(I.target.checked),className:"w-4 h-4 text-cricket-primary border-gray-300 rounded focus:ring-cricket-primary"}),u.jsx("span",{className:"text-sm font-medium text-black",children:"Make team public (visible to all users)"})]})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Players"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[u.jsxs("select",{value:Ye,onChange:I=>mt(I.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900",children:[u.jsx("option",{value:"",children:"Select a player"}),P.filter(I=>I.id!==(t==null?void 0:t.id)&&!xe.some(X=>X.userId===I.id)).map(I=>u.jsx("option",{value:I.id,children:I.name},I.id))]}),u.jsxs("select",{value:Nt,onChange:I=>wi(I.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cricket-primary focus:border-transparent text-gray-900",children:[u.jsx("option",{value:"All-rounder",children:"All-rounder"}),u.jsx("option",{value:"Batsman",children:"Batsman"}),u.jsx("option",{value:"Bowler",children:"Bowler"}),u.jsx("option",{value:"Wicket-keeper",children:"Wicket-keeper"})]}),u.jsx("button",{onClick:F,disabled:!Ye,className:"px-4 py-2 bg-cricket-primary hover:bg-cricket-secondary text-white rounded-lg transition-colors disabled:opacity-50",children:"Add Player"})]}),xe.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("h5",{className:"font-medium text-gray-700",children:"Selected Players:"}),xe.map((I,X)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"w-6 h-6 bg-cricket-primary text-white rounded-full flex items-center justify-center text-xs font-bold",children:X+2}),u.jsx("span",{className:"font-medium",children:I.name}),u.jsxs("span",{className:"text-sm text-gray-600",children:["(",I.role,")"]})]}),u.jsx("button",{onClick:()=>z(I.userId),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:u.jsx(t0,{className:"w-4 h-4 text-red-600"})})]},I.userId))]})]})]}),u.jsxs("div",{className:"flex gap-3 p-6 border-t",children:[u.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg transition-colors text-black",children:"Cancel"}),u.jsx("button",{onClick:W,disabled:!se||n,className:"flex-1 px-4 py-2 bg-cricket-primary hover:bg-cricket-secondary text-white rounded-lg transition-colors disabled:opacity-50",children:n?"Creating...":"Create Team"})]})]})})})]})}function vz({teams:t,user:e}){var te,Ce,Ie,Ft;const n=t.filter(B=>B.captainId===(e==null?void 0:e.id)||B.players.some(fe=>fe.userId===(e==null?void 0:e.id))),[r,i]=b.useState(!1),[s,o]=b.useState(null),[a,l]=b.useState(null),[c,d]=b.useState("T20"),[f,h]=b.useState(20),[p,m]=b.useState(""),[v,w]=b.useState(!1),[y,g]=b.useState(""),[x,_]=b.useState("bat"),[C,E]=b.useState(!1),[A,T]=b.useState(null),[k,O]=b.useState(null),[q,G]=b.useState(""),[D,L]=b.useState(null),[ne,de]=b.useState(1),[se,V]=b.useState([]),[Z,re]=b.useState(""),[we,_e]=b.useState(""),[xe,Xe]=b.useState(0),[Ye,mt]=b.useState(!1),[Nt,wi]=b.useState("bowled"),[Lt,Ur]=b.useState(null),[Vr,ys]=b.useState(0),mo=B=>{switch(B){case"T20":return 20;case"ODI":return 50;case"Test":return 999;case"Custom":return f;default:return 20}},xs=()=>{if(!s||!a){Y.error("Please select both teams first");return}E(!0),g(""),w(!1),setTimeout(()=>{const B=Math.random()<.5?"heads":"tails";T(B),E(!1),Y.success(`Coin shows: ${B.toUpperCase()}!`)},2e3)},rr=()=>{if(!y||!x){Y.error("Please select batting or bowling");return}w(!0),Y.success("Toss completed! Ready to start match.")},ws=async()=>{if(!s||!a||!p||!v){Y.error("Please complete team selection, venue, and toss before starting match");return}const B=x==="bat"?y:y===s.id?a.id:s.id,fe=B===s.id?a.id:s.id,qe={id:Date.now().toString(),team1:s,team2:a,format:c,venue:p,date:new Date,tossWinner:y,tossDecision:x,status:"live",currentInnings:1,totalOvers:mo(c),currentBall:0,innings:[{battingTeam:B,bowlingTeam:fe,runs:0,wickets:0,overs:0,balls:0,extras:{wides:0,noBalls:0,byes:0,legByes:0,penalties:0},batsmen:[],bowlers:[],currentBatsmen:[],currentBowler:""}],commentary:[]};L(qe),i(!0);const I=[];s&&(I.push({userId:s.captainId,teamId:s.id}),s.players.forEach(X=>{X.userId&&X.userId!==s.captainId&&I.push({userId:X.userId,teamId:s.id})})),a&&(I.push({userId:a.captainId,teamId:a.id}),a.players.forEach(X=>{X.userId&&X.userId!==a.captainId&&I.push({userId:X.userId,teamId:a.id})})),await jl.createMatchStartNotification(qe.id,s.name,a.name,p,I),Y.success("Match initialized successfully!"),Y.success(" Notifications sent to all team members!")},_i=()=>{if(!D||!we||!Z){Y.error("Please select batsman and bowler");return}const B=!Lt||Lt!=="wide"&&Lt!=="no-ball",fe=xe+Vr,qe={ballNumber:D.currentBall+1,over:Math.floor(D.currentBall/6)+1,bowler:Z,batsman:we,runs:xe,isWicket:Ye,dismissalType:Ye?Nt:void 0,extraType:Lt||void 0},I={...D},X=I.innings[ne-1];if(X.runs+=fe,B&&(X.balls+=1,I.currentBall+=1),B&&X.balls%6===0&&(X.overs+=1),Ye&&(X.wickets+=1),Lt)switch(Lt){case"wide":X.extras.wides+=1;break;case"no-ball":X.extras.noBalls+=1;break;case"bye":X.extras.byes+=Vr;break;case"leg-bye":X.extras.legByes+=Vr;break;case"penalty":X.extras.penalties+=Vr;break}const Se={ball:qe.ballNumber,over:qe.over,bowler:Z,batsman:we,runs:fe,wicket:Ye,dismissalType:Ye?Nt:void 0,extras:Lt||void 0,description:N(qe)};I.commentary.push(Se);const lt=I.totalOvers||20,Rn=Math.floor(X.balls/6),Hr=X.wickets>=10;(Rn>=lt||Hr)&&ne===1?(Y.success("First innings completed!"),La(I)):(Rn>=lt||Hr||ne===2&&X.runs>I.innings[0].runs)&&ne===2?_s(I):L(I),Xe(0),mt(!1),Ur(null),ys(0),Y.success("Ball added successfully!")},La=B=>{const fe=B.innings[0],qe=fe.bowlingTeam,I=fe.battingTeam,X={battingTeam:qe,bowlingTeam:I,runs:0,wickets:0,overs:0,balls:0,extras:{wides:0,noBalls:0,byes:0,legByes:0,penalties:0},batsmen:[],bowlers:[],currentBatsmen:[],currentBowler:""},Se={...B,innings:[...B.innings,X],currentInnings:2,currentBall:0};L(Se),de(2),_e(""),re(""),Y.success("Second innings started!")},_s=B=>{const fe=B.innings[0],qe=B.innings[1];let I;if(qe.runs>fe.runs){const lt=10-qe.wickets;I={winner:B.team1.id===qe.battingTeam?B.team1.name:B.team2.name,margin:`${lt}`,type:"wickets"}}else if(fe.runs>qe.runs){const lt=fe.runs-qe.runs;I={winner:B.team1.id===fe.battingTeam?B.team1.name:B.team2.name,margin:`${lt}`,type:"runs"}}else I={winner:"Tie",margin:"",type:"tie"};const X={...B,status:"completed",result:I};L(X);const Se=JSON.parse(localStorage.getItem("cricketMatches")||"[]");Se.push(X),localStorage.setItem("cricketMatches",JSON.stringify(Se)),Y.success(`Match completed! ${I.winner} ${I.type==="tie"?"":"won"}`)},N=B=>{let fe=`${B.bowler} to ${B.batsman}`;return B.isWicket?fe+=`, OUT! ${B.dismissalType}`:B.runs===0?fe+=", dot ball":B.runs===4?fe+=", FOUR!":B.runs===6?fe+=", SIX!":fe+=`, ${B.runs} run${B.runs>1?"s":""}`,B.extraType&&(fe+=` (${B.extraType})`),fe},P=(B,fe,qe)=>{const I=fe+qe/6;return I>0?B/I:0},M=(B,fe,qe)=>{const I=B-fe;return qe>0?I/qe:0};if(!r)return n.length===0?u.jsx("div",{className:"space-y-6",children:u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-8 text-center",children:[u.jsx(Mr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No Teams Available"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be part of at least one team to start scoring. Create or join teams in the Team Management section."}),u.jsx("button",{onClick:()=>window.location.hash="#teams",className:"bg-cricket-primary hover:bg-cricket-secondary text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Go to Team Management"})]})}):u.jsx("div",{className:"space-y-6",children:u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Cricket Match Setup"}),n.length<2&&u.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:u.jsxs("p",{className:"text-yellow-800 text-sm",children:[u.jsx("strong",{children:"Note:"})," You need at least 2 teams to start a match. You currently have ",n.length," team",n.length!==1?"s":"","."]})}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"border-b pb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Step 1: Select Teams"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team A"}),u.jsxs("select",{value:(s==null?void 0:s.id)||"",onChange:B=>o(n.find(fe=>fe.id===B.target.value)||null),className:"input-field text-gray-900",children:[u.jsx("option",{value:"",children:"Select Team A"}),n.map(B=>u.jsx("option",{value:B.id,children:B.name},B.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team B"}),u.jsxs("select",{value:(a==null?void 0:a.id)||"",onChange:B=>l(n.find(fe=>fe.id===B.target.value)||null),className:"input-field text-gray-900",children:[u.jsx("option",{value:"",children:"Select Team B"}),n.filter(B=>B.id!==(s==null?void 0:s.id)).map(B=>u.jsx("option",{value:B.id,children:B.name},B.id))]})]})]})]}),u.jsxs("div",{className:"border-b pb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Step 2: Match Details"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Match Format"}),u.jsxs("select",{value:c,onChange:B=>d(B.target.value),className:"input-field text-gray-900",children:[u.jsx("option",{value:"T20",children:"T20 (20 overs)"}),u.jsx("option",{value:"ODI",children:"ODI (50 overs)"}),u.jsx("option",{value:"Test",children:"Test Match"}),u.jsx("option",{value:"Custom",children:"Custom"})]})]}),(c==="Custom"||c==="Test")&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:c==="Test"?"Overs per Innings":"Custom Overs"}),u.jsx("input",{type:"number",value:f,onChange:B=>h(Number(B.target.value)),min:"1",max:c==="Test"?"200":"100",className:"input-field text-gray-900",placeholder:c==="Test"?"e.g., 90":"Enter overs"})]}),u.jsxs("div",{className:c==="Custom"||c==="Test"?"md:col-span-2":"",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Venue"}),u.jsx("input",{type:"text",value:p,onChange:B=>m(B.target.value),placeholder:"Enter venue name (e.g., Lord's Cricket Ground)",className:"input-field text-gray-900"})]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Step 3: Toss"}),A?v?u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:u.jsxs("p",{className:"text-blue-800 font-medium",children:[" Toss Complete! ",(Ie=n.find(B=>B.id===y))==null?void 0:Ie.name," won and chose to ",x==="bat"?"bat":"bowl"," first."]})}):u.jsxs("div",{className:"text-center space-y-6",children:[u.jsx("div",{className:"flex flex-col items-center space-y-4",children:u.jsxs(U.div,{initial:{scale:.8},animate:{scale:1},className:"w-40 h-40 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex flex-col items-center justify-center text-white shadow-2xl border-4 border-green-300",children:[u.jsx("div",{className:"text-xl font-bold mb-1",children:A.toUpperCase()}),y&&u.jsxs("div",{className:"text-center px-1",children:[u.jsx("div",{className:"text-xs font-medium",children:"WINNER"}),u.jsx("div",{className:"text-sm font-bold leading-tight",children:(te=n.find(B=>B.id===y))==null?void 0:te.name})]})]})}),u.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:u.jsxs("p",{className:"text-lg font-semibold text-green-800",children:["Coin shows: ",A.toUpperCase(),"!"]})}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-lg font-medium text-gray-700 mb-4",children:" Click the team that won the toss:"}),u.jsxs("div",{className:"flex justify-center gap-6 mb-6",children:[u.jsxs("button",{onClick:()=>g((s==null?void 0:s.id)||""),className:`py-3 px-8 rounded-lg font-bold text-lg border-2 transition-all ${y===(s==null?void 0:s.id)?"bg-cricket-primary text-white border-cricket-primary shadow-lg":"bg-gray-200 text-gray-700 border-gray-300"}`,children:[" ",s==null?void 0:s.name]}),u.jsxs("button",{onClick:()=>g((a==null?void 0:a.id)||""),className:`py-3 px-8 rounded-lg font-bold text-lg border-2 transition-all ${y===(a==null?void 0:a.id)?"bg-cricket-primary text-white border-cricket-primary shadow-lg":"bg-gray-200 text-gray-700 border-gray-300"}`,children:[" ",a==null?void 0:a.name]})]})]}),y&&u.jsxs("div",{children:[u.jsxs("label",{className:"block text-lg font-medium text-gray-700 mb-4",children:[(Ce=n.find(B=>B.id===y))==null?void 0:Ce.name," chooses to:"]}),u.jsxs("div",{className:"flex justify-center gap-6",children:[u.jsx("button",{onClick:()=>_("bat"),className:`py-3 px-8 rounded-lg font-bold text-lg ${x==="bat"?"bg-cricket-primary text-white":"bg-gray-200 text-gray-700"}`,children:" Bat First"}),u.jsx("button",{onClick:()=>_("bowl"),className:`py-3 px-8 rounded-lg font-bold text-lg ${x==="bowl"?"bg-cricket-primary text-white":"bg-gray-200 text-gray-700"}`,children:" Bowl First"})]})]}),u.jsx("button",{onClick:rr,disabled:!y||!x,className:"bg-green-600 text-black py-3 px-8 rounded-lg font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:" Confirm Toss Decision"})]}):u.jsx("div",{className:"text-center space-y-6",children:u.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[u.jsx(U.div,{animate:C?{rotateY:1800}:{rotateY:0},transition:{duration:2,ease:"easeInOut"},className:"w-40 h-40 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-4xl font-bold text-white shadow-2xl border-4 border-yellow-300",children:""}),u.jsx("button",{onClick:xs,disabled:!s||!a||C,className:"bg-yellow-600 hover:bg-yellow-700 text-white py-4 px-10 rounded-lg font-bold text-xl shadow-lg border-2 border-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-500 disabled:text-gray-300",style:{color:"white"},children:u.jsx("span",{className:"text-black font-bold",children:C?" Flipping...":" Flip Coin"})}),(!s||!a)&&u.jsx("p",{className:"text-sm text-red-600 font-medium",children:" Please select both teams first to flip the coin"})]})})]})]}),u.jsx("button",{onClick:ws,disabled:!s||!a||!p||!v,className:"w-full mt-8 bg-cricket-primary text-white py-4 px-6 rounded-lg font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:" Start Match"})]})});const F=D==null?void 0:D.innings[ne-1],z=(D==null?void 0:D.team1.id)===(F==null?void 0:F.battingTeam)?D==null?void 0:D.team1:D==null?void 0:D.team2,W=(D==null?void 0:D.team1.id)===(F==null?void 0:F.bowlingTeam)?D==null?void 0:D.team1:D==null?void 0:D.team2;return u.jsxs("div",{className:"space-y-6",children:[u.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[D==null?void 0:D.team1.name," vs ",D==null?void 0:D.team2.name]}),u.jsxs("p",{className:"text-gray-600",children:[D==null?void 0:D.format,"  ",D==null?void 0:D.venue]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"text-lg font-semibold",children:["Innings ",ne]}),u.jsxs("p",{className:"text-sm text-gray-600",children:[z==null?void 0:z.name," batting"]})]})]})}),u.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsxs("p",{className:"text-4xl font-bold text-cricket-primary",children:[F==null?void 0:F.runs,"/",F==null?void 0:F.wickets]}),u.jsxs("p",{className:"text-gray-600",children:[Math.floor(((F==null?void 0:F.balls)||0)/6),".",((F==null?void 0:F.balls)||0)%6," overs"]})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Run Rate"}),u.jsx("p",{className:"text-2xl font-bold text-green-600",children:P((F==null?void 0:F.runs)||0,Math.floor(((F==null?void 0:F.balls)||0)/6),((F==null?void 0:F.balls)||0)%6).toFixed(2)})]}),ne===2&&u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Required RR"}),u.jsx("p",{className:"text-2xl font-bold text-red-600",children:M((((Ft=D==null?void 0:D.innings[0])==null?void 0:Ft.runs)||0)+1,(F==null?void 0:F.runs)||0,((D==null?void 0:D.totalOvers)||20)-Math.floor(((F==null?void 0:F.balls)||0)/6)).toFixed(2)})]})]})}),u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Ball Input"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Striker"}),u.jsxs("select",{value:we,onChange:B=>_e(B.target.value),className:"input-field",children:[u.jsx("option",{value:"",children:"Select striker"}),z==null?void 0:z.players.map(B=>u.jsx("option",{value:B.userId,children:B.name},B.userId))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bowler"}),u.jsxs("select",{value:Z,onChange:B=>re(B.target.value),className:"input-field",children:[u.jsx("option",{value:"",children:"Select bowler"}),W==null?void 0:W.players.map(B=>u.jsx("option",{value:B.userId,children:B.name},B.userId))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Runs"}),u.jsx("div",{className:"flex space-x-2",children:[0,1,2,3,4,6].map(B=>u.jsx("button",{onClick:()=>Xe(B),className:`px-3 py-2 rounded-lg font-medium ${xe===B?"bg-cricket-primary text-white":"bg-gray-100 text-gray-800"}`,children:B},B))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Extras"}),u.jsxs("select",{value:Lt||"",onChange:B=>Ur(B.target.value||null),className:"input-field",children:[u.jsx("option",{value:"",children:"No Extra"}),u.jsx("option",{value:"wide",children:"Wide"}),u.jsx("option",{value:"no-ball",children:"No Ball"}),u.jsx("option",{value:"bye",children:"Bye"}),u.jsx("option",{value:"leg-bye",children:"Leg Bye"})]})]})]}),u.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:Ye,onChange:B=>mt(B.target.checked),className:"mr-2"}),"Wicket"]}),Ye&&u.jsxs("select",{value:Nt,onChange:B=>wi(B.target.value),className:"input-field",children:[u.jsx("option",{value:"bowled",children:"Bowled"}),u.jsx("option",{value:"caught",children:"Caught"}),u.jsx("option",{value:"lbw",children:"LBW"}),u.jsx("option",{value:"run-out",children:"Run Out"}),u.jsx("option",{value:"stumped",children:"Stumped"}),u.jsx("option",{value:"hit-wicket",children:"Hit Wicket"})]})]}),u.jsxs(U.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:_i,className:"btn-primary",children:[u.jsx(jd,{className:"inline w-4 h-4 mr-2"}),"Add Ball"]})]}),u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Live Commentary"}),u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:D==null?void 0:D.commentary.slice(-10).reverse().map((B,fe)=>u.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[u.jsxs("p",{className:"text-sm text-gray-600",children:["Over ",B.over,".",B.ball%6||6]}),u.jsx("p",{className:"text-gray-800",children:B.description})]},fe))})]})]})}function yz({match:t}){const[e,n]=b.useState("batting"),[r,i]=b.useState(0),s=(f,h)=>h>0?f/h*100:0,o=(f,h)=>h>0?f/h:0,a=f=>{const h=[];return(t.team1.id===f.battingTeam?t.team1:t.team2).players.forEach((m,v)=>{if(v<6){const w=Math.floor(Math.random()*50),y=Math.floor(Math.random()*40)+10;h.push({playerId:m.userId,name:m.name,runs:w,balls:y,fours:Math.floor(w/8),sixes:Math.floor(w/15),strikeRate:s(w,y),isOut:v<4,dismissalType:v<4?["bowled","caught","lbw","run-out"][v%4]:void 0})}}),h},l=f=>{const h=[];return(t.team1.id===f.bowlingTeam?t.team1:t.team2).players.forEach((m,v)=>{if(v<5){const w=Math.floor(Math.random()*4)+1,y=Math.floor(Math.random()*30)+10,g=Math.floor(Math.random()*3);h.push({playerId:m.userId,name:m.name,overs:w,runs:y,wickets:g,maidens:Math.floor(Math.random()*2),economyRate:o(y,w)})}}),h},c=()=>{if(t.status!=="completed")return"Match in progress";if(t.result){if(t.result.type==="runs")return`${t.result.winner} won by ${t.result.margin} runs`;if(t.result.type==="wickets")return`${t.result.winner} won by ${t.result.margin} wickets`;if(t.result.type==="tie")return"Match tied"}return"Result pending"},d=()=>{const f={match:{teams:`${t.team1.name} vs ${t.team2.name}`,format:t.format,venue:t.venue,date:t.date},innings:t.innings.map((h,p)=>({inningsNumber:p+1,battingTeam:t.team1.id===h.battingTeam?t.team1.name:t.team2.name,score:`${h.runs}/${h.wickets}`,overs:`${Math.floor(h.balls/6)}.${h.balls%6}`,batting:a(h),bowling:l(h)})),result:c()};console.log("Exporting scorecard:",f),alert("Scorecard exported! (Check console for data)")};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[t.team1.name," vs ",t.team2.name]}),u.jsxs("p",{className:"text-gray-600",children:[t.format,"  ",t.venue]}),u.jsx("p",{className:"text-sm text-gray-500",children:new Date(t.date).toLocaleDateString()})]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:d,className:"btn-secondary text-sm",children:[u.jsx(Jb,{className:"w-4 h-4 mr-1"}),"Export"]}),u.jsxs(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn-primary text-sm",children:[u.jsx(Ld,{className:"w-4 h-4 mr-1"}),"Share"]})]})]}),u.jsx("div",{className:"bg-gradient-to-r from-cricket-primary to-cricket-secondary text-white rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(Mr,{className:"w-6 h-6 mr-3"}),u.jsx("p",{className:"text-lg font-semibold",children:c()})]})})]}),u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Innings Summary"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.innings.map((f,h)=>{const p=t.team1.id===f.battingTeam?t.team1:t.team2,m=f.balls>0?f.runs/(f.balls/6):0;return u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsx("h4",{className:"font-semibold text-gray-800",children:p.name}),u.jsxs("span",{className:"text-sm text-gray-600",children:["Innings ",h+1]})]}),u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("span",{className:"text-3xl font-bold text-cricket-primary",children:[f.runs,"/",f.wickets]}),u.jsxs("span",{className:"text-gray-600",children:["(",Math.floor(f.balls/6),".",f.balls%6," overs)"]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-600",children:"Run Rate:"}),u.jsx("span",{className:"font-semibold ml-2",children:m.toFixed(2)})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-600",children:"Extras:"}),u.jsx("span",{className:"font-semibold ml-2",children:f.extras.wides+f.extras.noBalls+f.extras.byes+f.extras.legByes})]})]})]},h)})})]}),u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6",children:[u.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 rounded-lg p-1",children:["batting","bowling","summary"].map(f=>u.jsx("button",{onClick:()=>n(f),className:`flex-1 py-2 px-4 rounded-md font-medium transition-all capitalize ${e===f?"bg-white text-cricket-primary shadow-md":"text-gray-600 hover:text-gray-800"}`,children:f},f))}),u.jsx("div",{className:"flex space-x-2 mb-6",children:t.innings.map((f,h)=>u.jsxs("button",{onClick:()=>i(h),className:`px-4 py-2 rounded-lg font-medium ${r===h?"bg-cricket-primary text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:["Innings ",h+1]},h))}),e==="batting"&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Batting Performance"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"text-left p-3",children:"Batsman"}),u.jsx("th",{className:"text-center p-3",children:"Runs"}),u.jsx("th",{className:"text-center p-3",children:"Balls"}),u.jsx("th",{className:"text-center p-3",children:"4s"}),u.jsx("th",{className:"text-center p-3",children:"6s"}),u.jsx("th",{className:"text-center p-3",children:"SR"}),u.jsx("th",{className:"text-left p-3",children:"Dismissal"})]})}),u.jsx("tbody",{children:a(t.innings[r]).map((f,h)=>u.jsxs("tr",{className:"border-b border-gray-100",children:[u.jsx("td",{className:"p-3 font-medium",children:f.name}),u.jsx("td",{className:"text-center p-3 font-semibold",children:f.runs}),u.jsx("td",{className:"text-center p-3",children:f.balls}),u.jsx("td",{className:"text-center p-3",children:f.fours}),u.jsx("td",{className:"text-center p-3",children:f.sixes}),u.jsx("td",{className:"text-center p-3",children:f.strikeRate.toFixed(1)}),u.jsx("td",{className:"p-3 text-sm text-gray-600",children:f.isOut?f.dismissalType:"Not Out"})]},h))})]})})]}),e==="bowling"&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Bowling Performance"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"text-left p-3",children:"Bowler"}),u.jsx("th",{className:"text-center p-3",children:"Overs"}),u.jsx("th",{className:"text-center p-3",children:"Maidens"}),u.jsx("th",{className:"text-center p-3",children:"Runs"}),u.jsx("th",{className:"text-center p-3",children:"Wickets"}),u.jsx("th",{className:"text-center p-3",children:"Economy"})]})}),u.jsx("tbody",{children:l(t.innings[r]).map((f,h)=>u.jsxs("tr",{className:"border-b border-gray-100",children:[u.jsx("td",{className:"p-3 font-medium",children:f.name}),u.jsx("td",{className:"text-center p-3",children:f.overs}),u.jsx("td",{className:"text-center p-3",children:f.maidens}),u.jsx("td",{className:"text-center p-3",children:f.runs}),u.jsx("td",{className:"text-center p-3 font-semibold",children:f.wickets}),u.jsx("td",{className:"text-center p-3",children:f.economyRate.toFixed(2)})]},h))})]})})]}),e==="summary"&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Match Summary"}),u.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[u.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Toss"}),u.jsxs("p",{className:"text-gray-700",children:[t.team1.id===t.tossWinner?t.team1.name:t.team2.name," won the toss and chose to ",t.tossDecision," first"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[u.jsx(fi,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),u.jsx("p",{className:"text-2xl font-bold text-green-600",children:Math.max(...t.innings.map(f=>f.runs))}),u.jsx("p",{className:"text-sm text-gray-600",children:"Highest Score"})]}),u.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[u.jsx(sc,{className:"w-8 h-8 text-red-600 mx-auto mb-2"}),u.jsx("p",{className:"text-2xl font-bold text-red-600",children:Math.max(...t.innings.map(f=>f.wickets))}),u.jsx("p",{className:"text-sm text-gray-600",children:"Most Wickets"})]}),u.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[u.jsx(ca,{className:"w-8 h-8 text-yellow-600 mx-auto mb-2"}),u.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Math.max(...t.innings.map(f=>Math.floor(f.balls/6)))}),u.jsx("p",{className:"text-sm text-gray-600",children:"Most Overs"})]}),u.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[u.jsx(Bf,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),u.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Math.max(...t.innings.map(f=>f.balls>0?f.runs/(f.balls/6):0)).toFixed(1)}),u.jsx("p",{className:"text-sm text-gray-600",children:"Best Run Rate"})]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h5",{className:"font-semibold text-gray-800 mb-3",children:"Extras Breakdown"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:t.innings.map((f,h)=>{const p=t.team1.id===f.battingTeam?t.team1:t.team2;return u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-700 mb-2",children:p.name}),u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Wides:"}),u.jsx("span",{children:f.extras.wides})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"No-balls:"}),u.jsx("span",{children:f.extras.noBalls})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Byes:"}),u.jsx("span",{children:f.extras.byes})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Leg-byes:"}),u.jsx("span",{children:f.extras.legByes})]}),u.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[u.jsx("span",{children:"Total:"}),u.jsx("span",{children:f.extras.wides+f.extras.noBalls+f.extras.byes+f.extras.legByes})]})]})]},h)})})]})]})]})]})}function xz({user:t}){const[e,n]=b.useState([]),[r,i]=b.useState([]),[s,o]=b.useState(null),[a,l]=b.useState(""),[c,d]=b.useState("all");b.useEffect(()=>{const p=JSON.parse(localStorage.getItem("cricketMatches")||"[]");n(p)},[]),b.useEffect(()=>{let p=e;a&&(p=p.filter(m=>m.team1.name.toLowerCase().includes(a.toLowerCase())||m.team2.name.toLowerCase().includes(a.toLowerCase())||m.venue.toLowerCase().includes(a.toLowerCase()))),c!=="all"&&(p=p.filter(m=>m.status===c)),p.sort((m,v)=>new Date(v.date).getTime()-new Date(m.date).getTime()),i(p)},[e,a,c]);const f=p=>p.status!=="completed"||!p.result?"In Progress":p.result.type==="tie"?"Match Tied":`${p.result.winner} won by ${p.result.margin} ${p.result.type}`,h=p=>{var m;return p.status!=="completed"?"text-yellow-600":((m=p.result)==null?void 0:m.type)==="tie"?"text-gray-600":"text-green-600"};return u.jsxs("div",{className:"space-y-6",children:[u.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center md:justify-between",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Match History"}),u.jsx("p",{className:"text-gray-600",children:"View completed and ongoing cricket matches"})]})}),u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card p-6",children:[u.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4",children:u.jsxs("span",{className:"text-sm text-gray-600 mb-4 md:mb-0",children:[r.length," matches found"]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Search matches...",value:a,onChange:p=>l(p.target.value),className:"input-field pl-10"})]}),u.jsxs("div",{className:"relative",children:[u.jsx(ua,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsxs("select",{value:c,onChange:p=>d(p.target.value),className:"input-field pl-10 appearance-none",children:[u.jsx("option",{value:"all",children:"All Matches"}),u.jsx("option",{value:"live",children:"Live"}),u.jsx("option",{value:"completed",children:"Completed"}),u.jsx("option",{value:"upcoming",children:"Upcoming"})]})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[r.map((p,m)=>u.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>o(p),children:u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center mb-2",children:[u.jsx(Mr,{className:"w-5 h-5 text-cricket-primary mr-2"}),u.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[p.team1.name," vs ",p.team2.name]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[u.jsxs("div",{className:"flex items-center text-gray-600",children:[u.jsx(os,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"text-sm",children:new Date(p.date).toLocaleDateString()})]}),u.jsxs("div",{className:"flex items-center text-gray-600",children:[u.jsx(Dc,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"text-sm",children:p.venue})]}),u.jsxs("div",{className:"flex items-center text-gray-600",children:[u.jsx(ca,{className:"w-4 h-4 mr-2"}),u.jsx("span",{className:"text-sm",children:p.format})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:p.innings.map((v,w)=>{const y=p.team1.id===v.battingTeam?p.team1:p.team2;return u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[y.name," - Innings ",w+1]}),u.jsxs("p",{className:"text-xl font-bold text-cricket-primary",children:[v.runs,"/",v.wickets]}),u.jsxs("p",{className:"text-sm text-gray-600",children:["(",Math.floor(v.balls/6),".",v.balls%6," overs)"]})]},w)})}),u.jsx("p",{className:`font-semibold ${h(p)}`,children:f(p)})]}),u.jsx("div",{className:"mt-4 md:mt-0 md:ml-6",children:u.jsxs(U.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn-primary",children:[u.jsx(eA,{className:"w-4 h-4 mr-2"}),"View Scorecard"]})})]})},p.id)),r.length===0&&u.jsxs(U.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[u.jsx(Mr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No matches found"}),u.jsx("p",{className:"text-gray-500",children:a||c!=="all"?"Try adjusting your search or filters":"Start scoring your first cricket match!"})]})]}),u.jsx(Sn,{children:s&&u.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex justify-between items-center",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Match Scorecard"}),u.jsx("button",{onClick:()=>o(null),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),u.jsx("div",{className:"p-6",children:u.jsx(yz,{match:s})})]})})})]})}function wz({user:t}){const[e,n]=b.useState("overview");if(!t)return null;const r=[{label:"Total Runs",value:t.stats.totalRuns,icon:Bf,color:"text-green-600"},{label:"Matches Played",value:t.stats.matchesPlayed,icon:os,color:"text-blue-600"},{label:"Strike Rate",value:t.stats.overallStrikeRate.toFixed(1),icon:fi,color:"text-purple-600"},{label:"Centuries",value:t.stats.centuries,icon:Mr,color:"text-yellow-600"},{label:"Half Centuries",value:t.stats.halfCenturies,icon:sc,color:"text-orange-600"},{label:"Wickets",value:t.stats.wickets,icon:fi,color:"text-red-600"},{label:"Fours",value:t.stats.fours,icon:eo,color:"text-green-500"},{label:"Sixes",value:t.stats.sixes,icon:eo,color:"text-red-500"}];return u.jsxs("div",{className:"space-y-6",children:[u.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-8",children:u.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start space-y-4 sm:space-y-0 sm:space-x-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-32 h-32 bg-gradient-to-r from-cricket-primary to-cricket-secondary rounded-full flex items-center justify-center",children:u.jsx(ac,{className:"w-16 h-16 text-white"})}),u.jsx("button",{className:"absolute bottom-0 right-0 bg-white rounded-full p-2 shadow-lg hover:shadow-xl transition-shadow",children:u.jsx(Zb,{className:"w-5 h-5 text-gray-600"})})]}),u.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:t.name}),u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-6 text-gray-600",children:[u.jsxs("div",{className:"flex items-center justify-center sm:justify-start",children:[u.jsx(e1,{className:"w-4 h-4 mr-2"}),u.jsx("span",{children:t.email})]}),u.jsxs("div",{className:"flex items-center justify-center sm:justify-start",children:[u.jsx(tA,{className:"w-4 h-4 mr-2"}),u.jsx("span",{children:t.phone})]})]}),u.jsx("div",{className:"mt-4",children:u.jsxs("button",{className:"btn-primary",children:[u.jsx(rA,{className:"inline w-4 h-4 mr-2"}),"Edit Profile"]})})]})]})}),u.jsxs("div",{className:"card p-6",children:[u.jsx("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1 mb-6",children:[{id:"overview",label:"Overview"},{id:"stats",label:"Statistics"},{id:"achievements",label:"Achievements"}].map(i=>u.jsx("button",{onClick:()=>n(i.id),className:`flex-1 py-2 px-4 rounded-md font-medium transition-all ${e===i.id?"bg-white text-cricket-primary shadow-md":"text-gray-600 hover:text-gray-800"}`,children:i.label},i.id))}),e==="overview"&&u.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-2 sm:grid-cols-4 gap-4 sm:gap-6",children:r.slice(0,4).map((i,s)=>{const o=i.icon;return u.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:"text-center",children:[u.jsx(o,{className:`w-8 h-8 ${i.color} mx-auto mb-2`}),u.jsx("p",{className:"text-2xl font-bold text-gray-800",children:i.value}),u.jsx("p",{className:"text-sm text-gray-600",children:i.label})]},i.label)})}),e==="stats"&&u.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((i,s)=>{const o=i.icon;return u.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:s*.05},className:"bg-gray-50 rounded-lg p-4 text-center hover:bg-gray-100 transition-colors",children:[u.jsx(o,{className:`w-6 h-6 ${i.color} mx-auto mb-2`}),u.jsx("p",{className:"text-xl font-bold text-gray-800",children:i.value}),u.jsx("p",{className:"text-xs text-gray-600",children:i.label})]},i.label)})}),e==="achievements"&&u.jsxs(U.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[u.jsx(Mr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Achievements Yet"}),u.jsx("p",{className:"text-gray-600",children:"Play more matches to unlock achievements!"})]})]})]})}class tl{static async testWebNotifications(){try{if(console.log(" Testing Web Notifications..."),!("Notification"in window))return console.error(" This browser does not support notifications"),Y.error("Browser does not support notifications"),!1;if(console.log(" Current permission:",Notification.permission),Notification.permission==="default"&&await Notification.requestPermission()!=="granted")return console.warn("Notification permission not granted"),Y.error("Please allow notifications to test them"),!1;const e=await En.initializeWebPush();return e?(console.log(" Web push notifications working! Token:",e.substring(0,20)+"..."),Y.success("Web push notifications are working!"),await this.showTestNotification(),!0):(console.error(" Failed to get web push token"),Y.error("Failed to initialize web push notifications"),!1)}catch(e){return console.error(" Web notification test failed:",e),Y.error("Web notification test failed"),!1}}static async showTestNotification(){try{Notification.permission==="granted"&&En.showNotification({title:" Cricket App Test",body:"Web notifications are working perfectly!",icon:"/logo.png"})}catch(e){console.error("Error showing test notification:",e),Y.error("Failed to show test notification")}}static async testMatchNotification(){try{const e=En.createMatchNotification("test-match-123","Team A","Team B","Cricket Ground");En.showNotification(e),Y.success("Test match notification shown!")}catch(e){console.error("Failed to show match notification:",e),Y.error("Failed to show match notification")}}static async testTeamJoinNotification(){try{const e=En.createTeamJoinNotification("Team A","John Doe");En.showNotification(e),Y.success("Test team join notification shown!")}catch(e){console.error("Failed to show team join notification:",e),Y.error("Failed to show team join notification")}}static async runAllTests(){console.log(" Starting web notification tests...");const e=await this.testWebNotifications();return console.log(" Test Results Summary:"),console.log(`Web Notifications: ${e?"":""}`),{web:e}}}const _z=()=>{const[t,e]=b.useState(null),[n,r]=b.useState(!1),i=async()=>{r(!0);try{const o=await tl.runAllTests();e(o)}catch(o){console.error("Test failed:",o)}finally{r(!1)}},s=async()=>{r(!0);try{const o=await tl.testWebNotifications();e({web:o})}finally{r(!1)}};return u.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg text-black",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx($s,{className:"w-8 h-8 text-blue-600"}),u.jsx("h2",{className:"text-2xl font-bold text-black",children:"Notification Test Panel"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[u.jsxs("button",{onClick:i,disabled:n,className:"flex items-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg disabled:opacity-50 border border-blue-700 shadow-md",children:[u.jsx($s,{className:"w-5 h-5 text-black"}),u.jsx("span",{className:"text-black font-medium",children:"Run All Tests"})]}),u.jsxs("button",{onClick:s,disabled:n,className:"flex items-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg disabled:opacity-50 border border-green-700 shadow-md",children:[u.jsx(L2,{className:"w-5 h-5 text-black"}),u.jsx("span",{className:"text-black font-medium",children:"Test Web Only"})]}),u.jsxs("button",{onClick:()=>tl.testMatchNotification(),disabled:n,className:"flex items-center gap-2 px-4 py-3 bg-orange-600 text-white rounded-lg disabled:opacity-50 border border-orange-700 shadow-md",children:[u.jsx(e5,{className:"w-5 h-5 text-black"}),u.jsx("span",{className:"text-black font-medium",children:"Test Match Alert"})]}),u.jsxs("button",{onClick:()=>tl.testTeamJoinNotification(),disabled:n,className:"flex items-center gap-2 px-4 py-3 bg-teal-600 text-white rounded-lg disabled:opacity-50 border border-teal-700 shadow-md",children:[u.jsx(to,{className:"w-5 h-5 text-black"}),u.jsx("span",{className:"text-black font-medium",children:"Test Team Join"})]}),u.jsxs("button",{onClick:()=>tl.showTestNotification(),disabled:n,className:"flex items-center gap-2 px-4 py-3 bg-indigo-600 text-white rounded-lg disabled:opacity-50 border border-indigo-700 shadow-md",children:[u.jsx($s,{className:"w-5 h-5 text-black"}),u.jsx("span",{className:"text-black font-medium",children:"Show Test Alert"})]})]}),n&&u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),u.jsx("p",{className:"mt-4 text-black",children:"Running notification tests..."})]}),t&&!n&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xl font-semibold text-black",children:"Test Results"}),t.web!==void 0&&u.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[u.jsx(L2,{className:"w-6 h-6 text-black"}),u.jsx("span",{className:"font-medium text-black",children:"Web Notifications:"}),u.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.web?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.web?" Working":" Failed"})]})]}),u.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[u.jsx("h4",{className:"font-semibold text-black mb-2",children:"Testing Instructions:"}),u.jsxs("ul",{className:"text-sm text-black space-y-1",children:[u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Web Notifications:"}),' Click "Test Web Only" to check browser notifications']}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Match Notifications:"}),' Click "Test Match Alert" to test match start notifications']}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Team Notifications:"}),' Click "Test Team Join" to test team join notifications']}),u.jsx("li",{children:" Make sure to allow notifications in your browser when prompted"})]})]}),u.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg",children:[u.jsx("h4",{className:"font-semibold text-black mb-2",children:"Current Status:"}),u.jsxs("div",{className:"text-sm text-black space-y-1",children:[u.jsx("div",{children:" Web notifications configured and ready"}),u.jsx("div",{children:" Firebase Functions deployed and ready"}),u.jsx("div",{children:" Service Worker handling background messages"}),u.jsx("div",{children:" Android setup requires manual verification"}),u.jsx("div",{children:" iOS setup requires manual verification"})]})]})]})};function Cz({user:t,onLogout:e}){const[n,r]=b.useState("home"),[i,s]=b.useState(!1),{teams:o,joinTeam:a}=JN(),l=()=>{switch(n){case"home":return u.jsx(B_,{user:t,setActiveSection:r});case"grounds":return u.jsx(uz,{user:t});case"coaches":return u.jsx(dz,{user:t});case"umpires":return u.jsx(fz,{user:t});case"nets":return u.jsx(hz,{user:t});case"teams":return u.jsx(gz,{user:t});case"scoring":return u.jsx(vz,{teams:o,user:t});case"matches":return u.jsx(xz,{user:t});case"notifications":return u.jsx(_z,{});case"profile":return u.jsx(wz,{user:t});default:return u.jsx(B_,{user:t,setActiveSection:r})}};return u.jsxs("div",{className:"min-h-screen royal-gradient royal-pattern",children:[u.jsx(iz,{user:t,onLogout:e,onMenuClick:()=>s(!i),onJoinTeam:a}),u.jsxs("div",{className:"flex",children:[u.jsx(oz,{activeSection:n,setActiveSection:r,isOpen:i,onClose:()=>s(!1)}),u.jsx("main",{className:"flex-1 lg:ml-64 pt-16",children:u.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"p-4 sm:p-6 lg:p-6 xl:p-8",children:l()},n)})]})]})}function Ez(){const[t,e]=b.useState(null),[n,r]=b.useState(!0);b.useEffect(()=>{const o=localStorage.getItem("cricketUser");o&&(e(JSON.parse(o)),r(!1))},[]),b.useEffect(()=>{t&&En.initializeForUser(t.id)},[t]),b.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(o=>{console.log("Service Worker registered:",o)}).catch(o=>{console.error("Service Worker registration failed:",o)})},[]);const i=o=>{e(o),r(!1),localStorage.setItem("cricketUser",JSON.stringify(o))},s=()=>{e(null),r(!0),localStorage.removeItem("cricketUser")};return n?u.jsxs("div",{className:"min-h-screen royal-gradient royal-pattern flex items-center justify-center",children:[u.jsx(i5,{onLogin:i}),u.jsx(_2,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]}):u.jsxs(U.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen",children:[u.jsx(Cz,{user:t,onLogout:s}),u.jsx(_2,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})}j0.createRoot(document.getElementById("root")).render(u.jsx(un.StrictMode,{children:u.jsx(n8,{children:u.jsx(Ez,{})})}));
//# sourceMappingURL=index-BANms6DR.js.map
